{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-e27a647a7f2e349a50aaa742af9b364e.js","node_modules/excalibur/build/dist/webpack:/ex/webpack/universalModuleDefinition","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/es/array/index.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/es/function/index.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/es/object/index.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/a-function.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/a-possible-prototype.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/add-to-unscopables.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/an-object.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-copy-within.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-fill.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-for-each.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-from.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-includes.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-iteration.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-last-index-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-method-has-species-support.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-method-is-strict.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-reduce.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/array-species-create.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/call-with-safe-iteration-closing.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/check-correctness-of-iteration.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/classof-raw.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/classof.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/copy-constructor-properties.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/correct-prototype-getter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/create-iterator-constructor.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/create-non-enumerable-property.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/create-property-descriptor.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/create-property.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/define-iterator.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/define-well-known-symbol.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/descriptors.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/document-create-element.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/engine-is-node.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/engine-user-agent.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/engine-v8-version.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/enum-bug-keys.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/export.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/fails.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/flatten-into-array.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/freezing.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/function-bind-context.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/function-bind.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/get-built-in.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/get-iterator-method.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/global.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/has.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/hidden-keys.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/html.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/ie8-dom-define.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/indexed-object.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/inspect-source.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/internal-metadata.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/internal-state.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/is-array-iterator-method.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/is-array.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/is-forced.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/is-object.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/is-pure.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/iterate.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/iterator-close.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/iterators-core.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/iterators.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/native-symbol.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/native-weak-map.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-assign.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-create.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-define-properties.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-define-property.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-get-own-property-descriptor.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-get-own-property-names-external.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-get-own-property-names.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-get-own-property-symbols.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-get-prototype-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-keys-internal.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-keys.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-property-is-enumerable.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-prototype-accessors-forced.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-set-prototype-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-to-array.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/object-to-string.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/own-keys.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/path.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/redefine.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/require-object-coercible.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/same-value.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/set-global.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/set-species.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/set-to-string-tag.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/shared-key.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/shared-store.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/shared.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/string-multibyte.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-absolute-index.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-indexed-object.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-integer.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-length.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-object.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-primitive.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/to-string-tag-support.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/uid.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/use-symbol-as-uid.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/well-known-symbol-wrapped.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/internals/well-known-symbol.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.concat.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.copy-within.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.every.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.fill.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.filter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.find-index.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.find.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.flat-map.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.flat.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.for-each.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.from.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.includes.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.index-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.is-array.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.iterator.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.join.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.last-index-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.map.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.reduce-right.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.reduce.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.reverse.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.slice.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.some.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.sort.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.species.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.splice.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.unscopables.flat-map.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.array.unscopables.flat.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.function.bind.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.function.has-instance.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.function.name.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.json.to-string-tag.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.math.to-string-tag.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.assign.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.create.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.define-getter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.define-properties.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.define-property.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.define-setter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.entries.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.freeze.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.from-entries.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.get-own-property-descriptor.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.get-own-property-descriptors.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.get-own-property-names.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.get-prototype-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.is-extensible.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.is-frozen.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.is-sealed.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.is.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.keys.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.lookup-getter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.lookup-setter.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.prevent-extensions.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.seal.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.set-prototype-of.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.to-string.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.object.values.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.reflect.to-string-tag.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.string.iterator.js","node_modules/excalibur/build/dist/webpack:/node_modules/core-js/modules/es.symbol.js","node_modules/excalibur/build/dist/webpack:/ex/Loader.css?0475","node_modules/excalibur/build/dist/webpack:/node_modules/css-loader/dist/runtime/api.js","node_modules/excalibur/build/dist/webpack:/node_modules/css-loader/dist/runtime/cssWithMappingToString.js","node_modules/excalibur/build/dist/webpack:/ex/webpack/bootstrap","node_modules/excalibur/build/dist/webpack:/ex/webpack/runtime/compat get default export","node_modules/excalibur/build/dist/webpack:/ex/webpack/runtime/define property getters","node_modules/excalibur/build/dist/webpack:/ex/webpack/runtime/global","node_modules/excalibur/build/dist/webpack:/ex/webpack/runtime/hasOwnProperty shorthand","node_modules/excalibur/build/dist/webpack:/ex/webpack/runtime/make namespace object","node_modules/excalibur/build/dist/webpack:/ex/Flags.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Log.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Side.ts","node_modules/excalibur/build/dist/webpack:/ex/Polyfill.ts","node_modules/excalibur/build/dist/webpack:/ex/Math/Random.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Util.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Decorators.ts","node_modules/excalibur/build/dist/webpack:/ex/Algebra.ts","node_modules/excalibur/build/dist/webpack:/ex/Physics.ts","node_modules/excalibur/build/dist/webpack:/ex/Events.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/CollisionType.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/Color.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/CollisionContact.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/CollisionJumpTable.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/ClosestLineJumpTable.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Circle.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Edge.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/ConvexPolygon.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/BoundingBox.ts","node_modules/excalibur/build/dist/webpack:/ex/Screen.ts","node_modules/excalibur/build/dist/webpack:/ex/EventDispatcher.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Resource.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/SpriteEffects.ts","node_modules/excalibur/build/dist/webpack:/ex/Configurable.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/Sprite.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Texture.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/Animation.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/RotationType.ts","node_modules/excalibur/build/dist/webpack:/ex/Math/matrix.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/EasingFunctions.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/ActionQueue.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Repeat.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/RepeatForever.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/MoveBy.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/MoveTo.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/RotateTo.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/RotateBy.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/ScaleTo.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/ScaleBy.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/CallMethod.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/EaseTo.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Blink.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Fade.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Delay.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Die.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Follow.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/Action/Meet.ts","node_modules/excalibur/build/dist/webpack:/ex/Actions/ActionContext.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Shape.ts","node_modules/excalibur/build/dist/webpack:/ex/Math/vector-view.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/Component.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/Components/TransformComponent.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Animation.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Body.ts","node_modules/excalibur/build/dist/webpack:/ex/Traits/TileMapCollisionDetection.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/CullingBox.ts","node_modules/excalibur/build/dist/webpack:/ex/Traits/OffscreenCulling.ts","node_modules/excalibur/build/dist/webpack:/ex/Traits/CapturePointer.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/DrawUtil.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/CollisionGroup.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Pair.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/Collider.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Observable.ts","node_modules/excalibur/build/dist/webpack:/ex/Class.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/Entity.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/CanvasDrawComponent.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Graphic.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/GraphicsGroup.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/GraphicsComponent.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/webgl-util.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Watch.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/texture-loader.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Raster.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Rectangle.ts","node_modules/excalibur/build/dist/webpack:/ex/Actor.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Sound/AudioContext.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/WebAudio.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Canvas.ts","node_modules/excalibur/build/dist/webpack:/ex/Loader.ts","node_modules/excalibur/build/dist/webpack:/ex/Loader.logo.png?607f","node_modules/excalibur/build/dist/webpack:/ex/Util/Detector.ts","node_modules/excalibur/build/dist/webpack:/ex/ScreenElement.ts","node_modules/excalibur/build/dist/webpack:/ex/Timer.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/DynamicTree.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/DynamicTreeCollisionBroadphase.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/ImageSource.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Sprite.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/SpriteSheet.ts","node_modules/excalibur/build/dist/webpack:/ex/Camera.ts","node_modules/excalibur/build/dist/webpack:/ex/TileMap.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Actors.ts","node_modules/excalibur/build/dist/webpack:/ex/Trigger.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/System.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/EntityManager.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/Util.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/Query.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/QueryManager.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/SystemManager.ts","node_modules/excalibur/build/dist/webpack:/ex/EntityComponentSystem/World.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/GraphicsDiagnostics.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/GraphicsSystem.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/CanvasDrawingSystem.ts","node_modules/excalibur/build/dist/webpack:/ex/Input/Keyboard.ts","node_modules/excalibur/build/dist/webpack:/ex/Input/Pointer.ts","node_modules/excalibur/build/dist/webpack:/ex/Input/PointerEvents.ts","node_modules/excalibur/build/dist/webpack:/ex/PostProcessing/ColorBlindCorrector.ts","node_modules/excalibur/build/dist/webpack:/ex/Input/Gamepad.ts","node_modules/excalibur/build/dist/webpack:/ex/Scene.ts","node_modules/excalibur/build/dist/webpack:/ex/DebugFlags.ts","node_modules/excalibur/build/dist/webpack:/ex/Debug.ts","node_modules/excalibur/build/dist/webpack:/ex/Input/Pointers.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Browser.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/transform-stack.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/state-stack.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shader.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/batch.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Pool.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/renderer.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/line-renderer.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/line-vertex.glsl?d00f","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/line-fragment.glsl?0e66","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/draw-image-command.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/image-renderer.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/image-vertex.glsl?8c14","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/image-fragment.glsl?bce2","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/point-renderer.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/point-vertex.glsl?98ff","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/shaders/point-fragment.glsl?befc","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/ExcaliburGraphicsContextWebGL.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Context/ExcaliburGraphicsContext2DCanvas.ts","node_modules/excalibur/build/dist/webpack:/ex/Engine.ts","node_modules/excalibur/build/dist/webpack:/ex/Events/MediaEvents.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/FontCommon.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Font.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Text.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/SpriteFont.ts","node_modules/excalibur/build/dist/webpack:/ex/Particles.ts","node_modules/excalibur/build/dist/webpack:/ex/Label.ts","node_modules/excalibur/build/dist/webpack:/ex/Collision/CollisionGroupManager.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/Polygon.ts","node_modules/excalibur/build/dist/webpack:/ex/Drawing/SpriteSheet.ts","node_modules/excalibur/build/dist/webpack:/ex/Interfaces/AudioImplementation.ts","node_modules/excalibur/build/dist/webpack:/ex/Interfaces/LifecycleEvents.ts","node_modules/excalibur/build/dist/webpack:/ex/Math/PerlinNoise.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Sound/WebAudioInstance.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/Sound.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Sound/Sound.ts","node_modules/excalibur/build/dist/webpack:/ex/Resources/Gif.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Circle.ts","node_modules/excalibur/build/dist/webpack:/ex/Graphics/Polygon.ts","node_modules/excalibur/build/dist/webpack:/ex/Util/SortedList.ts","node_modules/excalibur/build/dist/webpack:/ex/Promises.ts","node_modules/excalibur/build/dist/webpack:/ex/index.ts","node_modules/@parcel/runtime-js/lib/bundle-url.js","node_modules/@parcel/runtime-js/lib/relative-path.js","node_modules/@parcel/runtime-js/lib/runtime-0123a3300cb8cf8d3f5e4ecc25bb3001.js","src/resources.ts","src/state/StateManager.ts","src/scenes/OrbitViewScene.ts","src/actors/PlanetActor.ts","src/scenes/SystemViewScene.ts","src/models/Planet.ts","src/utils/planetRandomness.ts","src/models/PlanetarySystem.ts","src/actors/ShipActor.ts","src/models/Ship.ts","src/main.ts"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./bundle-manifest').register(JSON.parse(\"{\\\"2zX4k\\\":\\\"index.233d97b2.js\\\",\\\"nuBan\\\":\\\"sword.f5e0cb6e.png\\\"}\"));","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"ex\"] = factory();\n\telse\n\t\troot[\"ex\"] = factory();\n})(self, function() {\nreturn ","require('../../modules/es.string.iterator');\nrequire('../../modules/es.array.from');\nrequire('../../modules/es.array.is-array');\nrequire('../../modules/es.array.of');\nrequire('../../modules/es.array.concat');\nrequire('../../modules/es.array.copy-within');\nrequire('../../modules/es.array.every');\nrequire('../../modules/es.array.fill');\nrequire('../../modules/es.array.filter');\nrequire('../../modules/es.array.find');\nrequire('../../modules/es.array.find-index');\nrequire('../../modules/es.array.flat');\nrequire('../../modules/es.array.flat-map');\nrequire('../../modules/es.array.for-each');\nrequire('../../modules/es.array.includes');\nrequire('../../modules/es.array.index-of');\nrequire('../../modules/es.array.iterator');\nrequire('../../modules/es.array.join');\nrequire('../../modules/es.array.last-index-of');\nrequire('../../modules/es.array.map');\nrequire('../../modules/es.array.reduce');\nrequire('../../modules/es.array.reduce-right');\nrequire('../../modules/es.array.reverse');\nrequire('../../modules/es.array.slice');\nrequire('../../modules/es.array.some');\nrequire('../../modules/es.array.sort');\nrequire('../../modules/es.array.species');\nrequire('../../modules/es.array.splice');\nrequire('../../modules/es.array.unscopables.flat');\nrequire('../../modules/es.array.unscopables.flat-map');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Array;\n","require('../../modules/es.function.bind');\nrequire('../../modules/es.function.name');\nrequire('../../modules/es.function.has-instance');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Function;\n","require('../../modules/es.symbol');\nrequire('../../modules/es.object.assign');\nrequire('../../modules/es.object.create');\nrequire('../../modules/es.object.define-property');\nrequire('../../modules/es.object.define-properties');\nrequire('../../modules/es.object.entries');\nrequire('../../modules/es.object.freeze');\nrequire('../../modules/es.object.from-entries');\nrequire('../../modules/es.object.get-own-property-descriptor');\nrequire('../../modules/es.object.get-own-property-descriptors');\nrequire('../../modules/es.object.get-own-property-names');\nrequire('../../modules/es.object.get-prototype-of');\nrequire('../../modules/es.object.is');\nrequire('../../modules/es.object.is-extensible');\nrequire('../../modules/es.object.is-frozen');\nrequire('../../modules/es.object.is-sealed');\nrequire('../../modules/es.object.keys');\nrequire('../../modules/es.object.prevent-extensions');\nrequire('../../modules/es.object.seal');\nrequire('../../modules/es.object.set-prototype-of');\nrequire('../../modules/es.object.values');\nrequire('../../modules/es.object.to-string');\nrequire('../../modules/es.object.define-getter');\nrequire('../../modules/es.object.define-setter');\nrequire('../../modules/es.object.lookup-getter');\nrequire('../../modules/es.object.lookup-setter');\nrequire('../../modules/es.json.to-string-tag');\nrequire('../../modules/es.math.to-string-tag');\nrequire('../../modules/es.reflect.to-string-tag');\nvar path = require('../../internals/path');\n\nmodule.exports = path.Object;\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\nvar min = Math.min;\n\n// `Array.prototype.copyWithin` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n// eslint-disable-next-line es/no-array-prototype-copywithin -- safe\nmodule.exports = [].copyWithin || function copyWithin(target /* = 0 */, start /* = 0, end = @length */) {\n  var O = toObject(this);\n  var len = toLength(O.length);\n  var to = toAbsoluteIndex(target, len);\n  var from = toAbsoluteIndex(start, len);\n  var end = arguments.length > 2 ? arguments[2] : undefined;\n  var count = min((end === undefined ? len : toAbsoluteIndex(end, len)) - from, len - to);\n  var inc = 1;\n  if (from < to && to < from + count) {\n    inc = -1;\n    from += count - 1;\n    to += count - 1;\n  }\n  while (count-- > 0) {\n    if (from in O) O[to] = O[from];\n    else delete O[to];\n    to += inc;\n    from += inc;\n  } return O;\n};\n","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n} : [].forEach;\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","'use strict';\n/* eslint-disable es/no-array-prototype-lastindexof -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar min = Math.min;\nvar $lastIndexOf = [].lastIndexOf;\nvar NEGATIVE_ZERO = !!$lastIndexOf && 1 / [1].lastIndexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('lastIndexOf');\nvar FORCED = NEGATIVE_ZERO || !STRICT_METHOD;\n\n// `Array.prototype.lastIndexOf` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\nmodule.exports = FORCED ? function lastIndexOf(searchElement /* , fromIndex = @[*-1] */) {\n  // convert -0 to +0\n  if (NEGATIVE_ZERO) return $lastIndexOf.apply(this, arguments) || 0;\n  var O = toIndexedObject(this);\n  var length = toLength(O.length);\n  var index = length - 1;\n  if (arguments.length > 1) index = min(index, toInteger(arguments[1]));\n  if (index < 0) index = length + index;\n  for (;index >= 0; index--) if (index in O && O[index] === searchElement) return index || 0;\n  return -1;\n} : $lastIndexOf;\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.{ reduce, reduceRight }` methods implementation\nvar createMethod = function (IS_RIGHT) {\n  return function (that, callbackfn, argumentsLength, memo) {\n    aFunction(callbackfn);\n    var O = toObject(that);\n    var self = IndexedObject(O);\n    var length = toLength(O.length);\n    var index = IS_RIGHT ? length - 1 : 0;\n    var i = IS_RIGHT ? -1 : 1;\n    if (argumentsLength < 2) while (true) {\n      if (index in self) {\n        memo = self[index];\n        index += i;\n        break;\n      }\n      index += i;\n      if (IS_RIGHT ? index < 0 : length <= index) {\n        throw TypeError('Reduce of empty array with no initial value');\n      }\n    }\n    for (;IS_RIGHT ? index >= 0 : length > index; index += i) if (index in self) {\n      memo = callbackfn(memo, self[index], index, O);\n    }\n    return memo;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.reduce` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduce\n  left: createMethod(false),\n  // `Array.prototype.reduceRight` method\n  // https://tc39.es/ecma262/#sec-array.prototype.reduceright\n  right: createMethod(true)\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line es/no-array-from, no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array.prototype.{ values, @@iterator }.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- required for testing\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] < 4 ? 1 : match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  // eslint-disable-next-line es/no-object-isextensible, es/no-object-preventextensions -- required for testing\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar aFunction = require('../internals/a-function');\nvar isObject = require('../internals/is-object');\n\nvar slice = [].slice;\nvar factories = {};\n\nvar construct = function (C, argsLength, args) {\n  if (!(argsLength in factories)) {\n    for (var list = [], i = 0; i < argsLength; i++) list[i] = 'a[' + i + ']';\n    // eslint-disable-next-line no-new-func -- we have no proper alternatives, IE8- only\n    factories[argsLength] = Function('C,a', 'return new C(' + list.join(',') + ')');\n  } return factories[argsLength](C, args);\n};\n\n// `Function.prototype.bind` method implementation\n// https://tc39.es/ecma262/#sec-function.prototype.bind\nmodule.exports = Function.bind || function bind(that /* , ...args */) {\n  var fn = aFunction(this);\n  var partArgs = slice.call(arguments, 1);\n  var boundFunction = function bound(/* args... */) {\n    var args = partArgs.concat(slice.call(arguments));\n    return this instanceof boundFunction ? construct(fn, args.length, args) : fn.apply(that, args);\n  };\n  if (isObject(fn.prototype)) boundFunction.prototype = fn.prototype;\n  return boundFunction;\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  // eslint-disable-next-line es/no-global-this -- safe\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  // eslint-disable-next-line no-restricted-globals -- safe\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var toObject = require('../internals/to-object');\n\nvar hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = Object.hasOwn || function hasOwn(it, key) {\n  return hasOwnProperty.call(toObject(it), key);\n};\n","module.exports = {};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  // eslint-disable-next-line es/no-object-defineproperty -- requied for testing\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `core-js@3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar OBJECT_ALREADY_INITIALIZED = 'Object already initialized';\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP || shared.state) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    if (wmhas.call(store, it)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    if (objectHas(it, STATE)) throw new TypeError(OBJECT_ALREADY_INITIALIZED);\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\n// eslint-disable-next-line es/no-array-isarray -- safe\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\n/* eslint-disable es/no-array-prototype-keys -- safe */\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\n\n// `%IteratorPrototype%[@@iterator]()` method\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-@@iterator\nif ((!IS_PURE || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","module.exports = {};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-getownpropertysymbols -- required for testing\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  var symbol = Symbol();\n  // Chrome 38 Symbol has incorrect toString conversion\n  // `get-own-property-symbols` polyfill symbols converted to object are not Symbol instances\n  return !String(symbol) || !(Object(symbol) instanceof Symbol) ||\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    !Symbol.sham && V8_VERSION && V8_VERSION < 41;\n});\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\n// eslint-disable-next-line es/no-object-assign -- safe\nvar $assign = Object.assign;\n// eslint-disable-next-line es/no-object-defineproperty -- required for testing\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !$assign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && $assign({ b: 1 }, $assign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  // eslint-disable-next-line es/no-symbol -- safe\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return $assign({}, A)[symbol] != 7 || objectKeys($assign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : $assign;\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject -- old IE */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n// eslint-disable-next-line es/no-object-defineproperties -- safe\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\n// eslint-disable-next-line es/no-object-defineproperty -- safe\nvar $defineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? $defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return $defineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar $getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? $getOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return $getOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","/* eslint-disable es/no-object-getownpropertynames -- safe */\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar $getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return $getOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : $getOwnPropertyNames(toIndexedObject(it));\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n// eslint-disable-next-line es/no-object-getownpropertynames -- safe\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","// eslint-disable-next-line es/no-object-getownpropertysymbols -- safe\nexports.f = Object.getOwnPropertySymbols;\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n// eslint-disable-next-line es/no-object-keys -- safe\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","'use strict';\nvar $propertyIsEnumerable = {}.propertyIsEnumerable;\n// eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !$propertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : $propertyIsEnumerable;\n","'use strict';\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar userAgent = require('../internals/engine-user-agent');\n\n// Forced replacement object prototype accessors methods\nmodule.exports = IS_PURE || !fails(function () {\n  // This feature detection crashes old WebKit\n  // https://github.com/zloirock/core-js/issues/232\n  var webkit = userAgent.match(/AppleWebKit\\/(\\d+)\\./);\n  if (webkit && +webkit[1] < 535) return;\n  var key = Math.random();\n  // In FF throws only define methods\n  // eslint-disable-next-line no-undef, no-useless-call -- required for testing\n  __defineSetter__.call(null, key, function () { /* empty */ });\n  delete global[key];\n});\n","/* eslint-disable no-proto -- safe */\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var DESCRIPTORS = require('../internals/descriptors');\nvar objectKeys = require('../internals/object-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar propertyIsEnumerable = require('../internals/object-property-is-enumerable').f;\n\n// `Object.{ entries, values }` methods implementation\nvar createMethod = function (TO_ENTRIES) {\n  return function (it) {\n    var O = toIndexedObject(it);\n    var keys = objectKeys(O);\n    var length = keys.length;\n    var i = 0;\n    var result = [];\n    var key;\n    while (length > i) {\n      key = keys[i++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(O, key)) {\n        result.push(TO_ENTRIES ? [key, O[key]] : O[key]);\n      }\n    }\n    return result;\n  };\n};\n\nmodule.exports = {\n  // `Object.entries` method\n  // https://tc39.es/ecma262/#sec-object.entries\n  entries: createMethod(true),\n  // `Object.values` method\n  // https://tc39.es/ecma262/#sec-object.values\n  values: createMethod(false)\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","// `SameValue` abstract operation\n// https://tc39.es/ecma262/#sec-samevalue\n// eslint-disable-next-line es/no-object-is -- safe\nmodule.exports = Object.is || function is(x, y) {\n  // eslint-disable-next-line no-self-compare -- NaN check\n  return x === y ? x !== 0 || 1 / x === 1 / y : x != x && y != y;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.13.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","/* eslint-disable es/no-symbol -- required for testing */\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var $ = require('../internals/export');\nvar copyWithin = require('../internals/array-copy-within');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.copyWithin` method\n// https://tc39.es/ecma262/#sec-array.prototype.copywithin\n$({ target: 'Array', proto: true }, {\n  copyWithin: copyWithin\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('copyWithin');\n","'use strict';\nvar $ = require('../internals/export');\nvar $every = require('../internals/array-iteration').every;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('every');\n\n// `Array.prototype.every` method\n// https://tc39.es/ecma262/#sec-array.prototype.every\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  every: function every(callbackfn /* , thisArg */) {\n    return $every(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.es/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","'use strict';\nvar $ = require('../internals/export');\nvar $find = require('../internals/array-iteration').find;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND = 'find';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND in []) Array(1)[FIND](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.find` method\n// https://tc39.es/ecma262/#sec-array.prototype.find\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND);\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar aFunction = require('../internals/a-function');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flatMap` method\n// https://tc39.es/ecma262/#sec-array.prototype.flatmap\n$({ target: 'Array', proto: true }, {\n  flatMap: function flatMap(callbackfn /* , thisArg */) {\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A;\n    aFunction(callbackfn);\n    A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, 1, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\n// eslint-disable-next-line es/no-array-prototype-foreach -- safe\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  // eslint-disable-next-line es/no-array-from -- required for testing\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","'use strict';\n/* eslint-disable es/no-array-prototype-indexof -- required for testing */\nvar $ = require('../internals/export');\nvar $indexOf = require('../internals/array-includes').indexOf;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeIndexOf = [].indexOf;\n\nvar NEGATIVE_ZERO = !!nativeIndexOf && 1 / [1].indexOf(1, -0) < 0;\nvar STRICT_METHOD = arrayMethodIsStrict('indexOf');\n\n// `Array.prototype.indexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.indexof\n$({ target: 'Array', proto: true, forced: NEGATIVE_ZERO || !STRICT_METHOD }, {\n  indexOf: function indexOf(searchElement /* , fromIndex = 0 */) {\n    return NEGATIVE_ZERO\n      // convert -0 to +0\n      ? nativeIndexOf.apply(this, arguments) || 0\n      : $indexOf(this, searchElement, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\n// `Array.isArray` method\n// https://tc39.es/ecma262/#sec-array.isarray\n$({ target: 'Array', stat: true }, {\n  isArray: isArray\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","'use strict';\nvar $ = require('../internals/export');\nvar IndexedObject = require('../internals/indexed-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar nativeJoin = [].join;\n\nvar ES3_STRINGS = IndexedObject != Object;\nvar STRICT_METHOD = arrayMethodIsStrict('join', ',');\n\n// `Array.prototype.join` method\n// https://tc39.es/ecma262/#sec-array.prototype.join\n$({ target: 'Array', proto: true, forced: ES3_STRINGS || !STRICT_METHOD }, {\n  join: function join(separator) {\n    return nativeJoin.call(toIndexedObject(this), separator === undefined ? ',' : separator);\n  }\n});\n","var $ = require('../internals/export');\nvar lastIndexOf = require('../internals/array-last-index-of');\n\n// `Array.prototype.lastIndexOf` method\n// https://tc39.es/ecma262/#sec-array.prototype.lastindexof\n// eslint-disable-next-line es/no-array-prototype-lastindexof -- required for testing\n$({ target: 'Array', proto: true, forced: lastIndexOf !== [].lastIndexOf }, {\n  lastIndexOf: lastIndexOf\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar createProperty = require('../internals/create-property');\n\nvar ISNT_GENERIC = fails(function () {\n  function F() { /* empty */ }\n  // eslint-disable-next-line es/no-array-of -- required for testing\n  return !(Array.of.call(F) instanceof F);\n});\n\n// `Array.of` method\n// https://tc39.es/ecma262/#sec-array.of\n// WebKit Array.of isn't generic\n$({ target: 'Array', stat: true, forced: ISNT_GENERIC }, {\n  of: function of(/* ...args */) {\n    var index = 0;\n    var argumentsLength = arguments.length;\n    var result = new (typeof this == 'function' ? this : Array)(argumentsLength);\n    while (argumentsLength > index) createProperty(result, index, arguments[index++]);\n    result.length = argumentsLength;\n    return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduceRight = require('../internals/array-reduce').right;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduceRight');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduceRight` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduceright\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduceRight: function reduceRight(callbackfn /* , initialValue */) {\n    return $reduceRight(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $reduce = require('../internals/array-reduce').left;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\nvar CHROME_VERSION = require('../internals/engine-v8-version');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar STRICT_METHOD = arrayMethodIsStrict('reduce');\n// Chrome 80-82 has a critical bug\n// https://bugs.chromium.org/p/chromium/issues/detail?id=1049982\nvar CHROME_BUG = !IS_NODE && CHROME_VERSION > 79 && CHROME_VERSION < 83;\n\n// `Array.prototype.reduce` method\n// https://tc39.es/ecma262/#sec-array.prototype.reduce\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD || CHROME_BUG }, {\n  reduce: function reduce(callbackfn /* , initialValue */) {\n    return $reduce(this, callbackfn, arguments.length, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\nvar nativeReverse = [].reverse;\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign -- dirty hack\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse.call(this);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar $some = require('../internals/array-iteration').some;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('some');\n\n// `Array.prototype.some` method\n// https://tc39.es/ecma262/#sec-array.prototype.some\n$({ target: 'Array', proto: true, forced: !STRICT_METHOD }, {\n  some: function some(callbackfn /* , thisArg */) {\n    return $some(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar aFunction = require('../internals/a-function');\nvar toObject = require('../internals/to-object');\nvar fails = require('../internals/fails');\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar test = [];\nvar nativeSort = test.sort;\n\n// IE8-\nvar FAILS_ON_UNDEFINED = fails(function () {\n  test.sort(undefined);\n});\n// V8 bug\nvar FAILS_ON_NULL = fails(function () {\n  test.sort(null);\n});\n// Old WebKit\nvar STRICT_METHOD = arrayMethodIsStrict('sort');\n\nvar FORCED = FAILS_ON_UNDEFINED || !FAILS_ON_NULL || !STRICT_METHOD;\n\n// `Array.prototype.sort` method\n// https://tc39.es/ecma262/#sec-array.prototype.sort\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  sort: function sort(comparefn) {\n    return comparefn === undefined\n      ? nativeSort.call(toObject(this))\n      : nativeSort.call(toObject(this), aFunction(comparefn));\n  }\n});\n","var setSpecies = require('../internals/set-species');\n\n// `Array[@@species]` getter\n// https://tc39.es/ecma262/#sec-get-array-@@species\nsetSpecies('Array');\n","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flatMap');\n","// this method was added to unscopables after implementation\n// in popular engines, so it's moved to a separate module\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('flat');\n","var $ = require('../internals/export');\nvar bind = require('../internals/function-bind');\n\n// `Function.prototype.bind` method\n// https://tc39.es/ecma262/#sec-function.prototype.bind\n$({ target: 'Function', proto: true }, {\n  bind: bind\n});\n","'use strict';\nvar isObject = require('../internals/is-object');\nvar definePropertyModule = require('../internals/object-define-property');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar HAS_INSTANCE = wellKnownSymbol('hasInstance');\nvar FunctionPrototype = Function.prototype;\n\n// `Function.prototype[@@hasInstance]` method\n// https://tc39.es/ecma262/#sec-function.prototype-@@hasinstance\nif (!(HAS_INSTANCE in FunctionPrototype)) {\n  definePropertyModule.f(FunctionPrototype, HAS_INSTANCE, { value: function (O) {\n    if (typeof this != 'function' || !isObject(O)) return false;\n    if (!isObject(this.prototype)) return O instanceof this;\n    // for environment w/o native `@@hasInstance` logic enough `instanceof`, but add this:\n    while (O = getPrototypeOf(O)) if (this.prototype === O) return true;\n    return false;\n  } });\n}\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n// JSON[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-json-@@tostringtag\nsetToStringTag(global.JSON, 'JSON', true);\n","var setToStringTag = require('../internals/set-to-string-tag');\n\n// Math[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-math-@@tostringtag\nsetToStringTag(Math, 'Math', true);\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n// eslint-disable-next-line es/no-object-assign -- required for testing\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar create = require('../internals/object-create');\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  create: create\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar aFunction = require('../internals/a-function');\nvar definePropertyModule = require('../internals/object-define-property');\n\n// `Object.prototype.__defineGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineGetter__: function __defineGetter__(P, getter) {\n      definePropertyModule.f(toObject(this), P, { get: aFunction(getter), enumerable: true, configurable: true });\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineProperties = require('../internals/object-define-properties');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n$({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperties: defineProperties\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar objectDefinePropertyModile = require('../internals/object-define-property');\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\n$({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperty: objectDefinePropertyModile.f\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar aFunction = require('../internals/a-function');\nvar definePropertyModule = require('../internals/object-define-property');\n\n// `Object.prototype.__defineSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__defineSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __defineSetter__: function __defineSetter__(P, setter) {\n      definePropertyModule.f(toObject(this), P, { set: aFunction(setter), enumerable: true, configurable: true });\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar $entries = require('../internals/object-to-array').entries;\n\n// `Object.entries` method\n// https://tc39.es/ecma262/#sec-object.entries\n$({ target: 'Object', stat: true }, {\n  entries: function entries(O) {\n    return $entries(O);\n  }\n});\n","var $ = require('../internals/export');\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\n\n// eslint-disable-next-line es/no-object-freeze -- safe\nvar $freeze = Object.freeze;\nvar FAILS_ON_PRIMITIVES = fails(function () { $freeze(1); });\n\n// `Object.freeze` method\n// https://tc39.es/ecma262/#sec-object.freeze\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  freeze: function freeze(it) {\n    return $freeze && isObject(it) ? $freeze(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar iterate = require('../internals/iterate');\nvar createProperty = require('../internals/create-property');\n\n// `Object.fromEntries` method\n// https://github.com/tc39/proposal-object-from-entries\n$({ target: 'Object', stat: true }, {\n  fromEntries: function fromEntries(iterable) {\n    var obj = {};\n    iterate(iterable, function (k, v) {\n      createProperty(obj, k, v);\n    }, { AS_ENTRIES: true });\n    return obj;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names-external').f;\n\n// eslint-disable-next-line es/no-object-getownpropertynames -- required for testing\nvar FAILS_ON_PRIMITIVES = fails(function () { return !Object.getOwnPropertyNames(1); });\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  getOwnPropertyNames: getOwnPropertyNames\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toObject = require('../internals/to-object');\nvar nativeGetPrototypeOf = require('../internals/object-get-prototype-of');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetPrototypeOf(1); });\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !CORRECT_PROTOTYPE_GETTER }, {\n  getPrototypeOf: function getPrototypeOf(it) {\n    return nativeGetPrototypeOf(toObject(it));\n  }\n});\n\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\n\n// eslint-disable-next-line es/no-object-isextensible -- safe\nvar $isExtensible = Object.isExtensible;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isExtensible(1); });\n\n// `Object.isExtensible` method\n// https://tc39.es/ecma262/#sec-object.isextensible\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  isExtensible: function isExtensible(it) {\n    return isObject(it) ? $isExtensible ? $isExtensible(it) : true : false;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\n\n// eslint-disable-next-line es/no-object-isfrozen -- safe\nvar $isFrozen = Object.isFrozen;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isFrozen(1); });\n\n// `Object.isFrozen` method\n// https://tc39.es/ecma262/#sec-object.isfrozen\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  isFrozen: function isFrozen(it) {\n    return isObject(it) ? $isFrozen ? $isFrozen(it) : false : true;\n  }\n});\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isObject = require('../internals/is-object');\n\n// eslint-disable-next-line es/no-object-issealed -- safe\nvar $isSealed = Object.isSealed;\nvar FAILS_ON_PRIMITIVES = fails(function () { $isSealed(1); });\n\n// `Object.isSealed` method\n// https://tc39.es/ecma262/#sec-object.issealed\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  isSealed: function isSealed(it) {\n    return isObject(it) ? $isSealed ? $isSealed(it) : false : true;\n  }\n});\n","var $ = require('../internals/export');\nvar is = require('../internals/same-value');\n\n// `Object.is` method\n// https://tc39.es/ecma262/#sec-object.is\n$({ target: 'Object', stat: true }, {\n  is: is\n});\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\n\n// `Object.prototype.__lookupGetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupGetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupGetter__: function __lookupGetter__(P) {\n      var O = toObject(this);\n      var key = toPrimitive(P, true);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.get;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n","'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar FORCED = require('../internals/object-prototype-accessors-forced');\nvar toObject = require('../internals/to-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\n\n// `Object.prototype.__lookupSetter__` method\n// https://tc39.es/ecma262/#sec-object.prototype.__lookupSetter__\nif (DESCRIPTORS) {\n  $({ target: 'Object', proto: true, forced: FORCED }, {\n    __lookupSetter__: function __lookupSetter__(P) {\n      var O = toObject(this);\n      var key = toPrimitive(P, true);\n      var desc;\n      do {\n        if (desc = getOwnPropertyDescriptor(O, key)) return desc.set;\n      } while (O = getPrototypeOf(O));\n    }\n  });\n}\n","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-preventextensions -- safe\nvar $preventExtensions = Object.preventExtensions;\nvar FAILS_ON_PRIMITIVES = fails(function () { $preventExtensions(1); });\n\n// `Object.preventExtensions` method\n// https://tc39.es/ecma262/#sec-object.preventextensions\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  preventExtensions: function preventExtensions(it) {\n    return $preventExtensions && isObject(it) ? $preventExtensions(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar onFreeze = require('../internals/internal-metadata').onFreeze;\nvar FREEZING = require('../internals/freezing');\nvar fails = require('../internals/fails');\n\n// eslint-disable-next-line es/no-object-seal -- safe\nvar $seal = Object.seal;\nvar FAILS_ON_PRIMITIVES = fails(function () { $seal(1); });\n\n// `Object.seal` method\n// https://tc39.es/ecma262/#sec-object.seal\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES, sham: !FREEZING }, {\n  seal: function seal(it) {\n    return $seal && isObject(it) ? $seal(onFreeze(it)) : it;\n  }\n});\n","var $ = require('../internals/export');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n$({ target: 'Object', stat: true }, {\n  setPrototypeOf: setPrototypeOf\n});\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var $ = require('../internals/export');\nvar $values = require('../internals/object-to-array').values;\n\n// `Object.values` method\n// https://tc39.es/ecma262/#sec-object.values\n$({ target: 'Object', stat: true }, {\n  values: function values(O) {\n    return $values(O);\n  }\n});\n","var $ = require('../internals/export');\nvar global = require('../internals/global');\nvar setToStringTag = require('../internals/set-to-string-tag');\n\n$({ global: true }, { Reflect: {} });\n\n// Reflect[@@toStringTag] property\n// https://tc39.es/ecma262/#sec-reflect-@@tostringtag\nsetToStringTag(global.Reflect, 'Reflect', true);\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/cssWithMappingToString.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"/* Buttons styles start */\\n\\nbutton#excalibur-play {\\n  display: inline-block;\\n  position: relative;\\n  z-index: 999;\\n  border-radius: 6px;\\n  border: none;\\n  /*border: 3px solid;\\n    border-color: white;\\n    box-shadow: 0 0 10px #ccc;*/\\n  padding: 1rem 1.5rem 1rem 4rem;\\n  margin: 0;\\n  text-decoration: none;\\n  background: #00b233;\\n  color: #ffffff;\\n  font-family: sans-serif;\\n  font-size: 2rem;\\n  line-height: 1;\\n  cursor: pointer;\\n  text-align: center;\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\n  animation: excalibur-button-fadein 200ms;\\n}\\n\\n/*\\nbutton#excalibur-play {\\n  display: none;\\n}*/\\n\\nbutton#excalibur-play:after {\\n  position: absolute;\\n  content: '';\\n  border: 8px solid;\\n  border-color: transparent transparent transparent white;\\n  left: 35px;\\n  top: 24px;\\n  width: 0;\\n  height: 0;\\n}\\n\\nbutton#excalibur-play:before {\\n  position: absolute;\\n  content: '';\\n  border: 3px solid;\\n  left: 19px;\\n  top: 14px;\\n  border-radius: 20px;\\n  width: 30px;\\n  height: 30px;\\n}\\n\\nbutton#excalibur-play:hover,\\nbutton#excalibur-play:focus {\\n  background: #00982c;\\n}\\n\\nbutton#excalibur-play:focus {\\n  outline: 1px solid #fff;\\n  outline-offset: -4px;\\n}\\n\\nbutton#excalibur-play:active {\\n  transform: scale(0.99);\\n}\\n\\n@keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Firefox < 16 */\\n@-moz-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Safari, Chrome and Opera > 12.1 */\\n@-webkit-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Internet Explorer */\\n@-ms-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Opera < 12.1 */\\n@-o-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\", \"\",{\"version\":3,\"sources\":[\"webpack://./Loader.css\"],\"names\":[],\"mappings\":\"AAAA,yBAAyB;;AAEzB;EACE,qBAAqB;EACrB,kBAAkB;EAClB,YAAY;EACZ,kBAAkB;EAClB,YAAY;EACZ;;+BAE6B;EAC7B,8BAA8B;EAC9B,SAAS;EACT,qBAAqB;EACrB,mBAAmB;EACnB,cAAc;EACd,uBAAuB;EACvB,eAAe;EACf,cAAc;EACd,eAAe;EACf,kBAAkB;EAClB,8DAA8D;EAC9D,wBAAwB;EACxB,qBAAqB;;EAErB,gDAAgD,EAAE,oCAAoC;EACtF,6CAA6C,EAAE,iBAAiB;EAChE,4CAA4C,EAAE,sBAAsB;EACpE,2CAA2C,EAAE,iBAAiB;EAC9D,wCAAwC;AAC1C;;AAEA;;;EAGE;;AAEF;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,uDAAuD;EACvD,UAAU;EACV,SAAS;EACT,QAAQ;EACR,SAAS;AACX;;AAEA;EACE,kBAAkB;EAClB,WAAW;EACX,iBAAiB;EACjB,UAAU;EACV,SAAS;EACT,mBAAmB;EACnB,WAAW;EACX,YAAY;AACd;;AAEA;;EAEE,mBAAmB;AACrB;;AAEA;EACE,uBAAuB;EACvB,oBAAoB;AACtB;;AAEA;EACE,sBAAsB;AACxB;;AAEA;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,oCAAoC;AACpC;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,sBAAsB;AACtB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF;;AAEA,iBAAiB;AACjB;EACE;IACE,UAAU;EACZ;EACA;IACE,UAAU;EACZ;AACF\",\"sourcesContent\":[\"/* Buttons styles start */\\n\\nbutton#excalibur-play {\\n  display: inline-block;\\n  position: relative;\\n  z-index: 999;\\n  border-radius: 6px;\\n  border: none;\\n  /*border: 3px solid;\\n    border-color: white;\\n    box-shadow: 0 0 10px #ccc;*/\\n  padding: 1rem 1.5rem 1rem 4rem;\\n  margin: 0;\\n  text-decoration: none;\\n  background: #00b233;\\n  color: #ffffff;\\n  font-family: sans-serif;\\n  font-size: 2rem;\\n  line-height: 1;\\n  cursor: pointer;\\n  text-align: center;\\n  transition: background 250ms ease-in-out, transform 150ms ease;\\n  -webkit-appearance: none;\\n  -moz-appearance: none;\\n\\n  -webkit-animation: excalibur-button-fadein 200ms; /* Safari, Chrome and Opera > 12.1 */\\n  -moz-animation: excalibur-button-fadein 200ms; /* Firefox < 16 */\\n  -ms-animation: excalibur-button-fadein 200ms; /* Internet Explorer */\\n  -o-animation: excalibur-button-fadein 200ms; /* Opera < 12.1 */\\n  animation: excalibur-button-fadein 200ms;\\n}\\n\\n/*\\nbutton#excalibur-play {\\n  display: none;\\n}*/\\n\\nbutton#excalibur-play:after {\\n  position: absolute;\\n  content: '';\\n  border: 8px solid;\\n  border-color: transparent transparent transparent white;\\n  left: 35px;\\n  top: 24px;\\n  width: 0;\\n  height: 0;\\n}\\n\\nbutton#excalibur-play:before {\\n  position: absolute;\\n  content: '';\\n  border: 3px solid;\\n  left: 19px;\\n  top: 14px;\\n  border-radius: 20px;\\n  width: 30px;\\n  height: 30px;\\n}\\n\\nbutton#excalibur-play:hover,\\nbutton#excalibur-play:focus {\\n  background: #00982c;\\n}\\n\\nbutton#excalibur-play:focus {\\n  outline: 1px solid #fff;\\n  outline-offset: -4px;\\n}\\n\\nbutton#excalibur-play:active {\\n  transform: scale(0.99);\\n}\\n\\n@keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Firefox < 16 */\\n@-moz-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Safari, Chrome and Opera > 12.1 */\\n@-webkit-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Internet Explorer */\\n@-ms-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\\n/* Opera < 12.1 */\\n@-o-keyframes excalibur-button-fadein {\\n  from {\\n    opacity: 0;\\n  }\\n  to {\\n    opacity: 1;\\n  }\\n}\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction _iterableToArrayLimit(arr, i) { var _i = arr && (typeof Symbol !== \"undefined\" && arr[Symbol.iterator] || arr[\"@@iterator\"]); if (_i == null) return; var _arr = []; var _n = true; var _d = false; var _s, _e; try { for (_i = _i.call(arr); !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nmodule.exports = function cssWithMappingToString(item) {\n  var _item = _slicedToArray(item, 4),\n      content = _item[1],\n      cssMapping = _item[3];\n\n  if (typeof btoa === \"function\") {\n    // eslint-disable-next-line no-undef\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    var sourceURLs = cssMapping.sources.map(function (source) {\n      return \"/*# sourceURL=\".concat(cssMapping.sourceRoot || \"\").concat(source, \" */\");\n    });\n    return [content].concat(sourceURLs).concat([sourceMapping]).join(\"\\n\");\n  }\n\n  return [content].join(\"\\n\");\n};","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","\n/**\n * Features in preview\n */\nexport enum Experiments {\n  WebGL = 'use-webgl'\n}\n\n/**\n * Legacy features that will go away\n */\nexport enum Legacy {\n  LegacyDrawing= 'use-legacy-drawing'\n}\n\n/**\n * Flags is a feature flag implementation for Excalibur. They can only be operated **before [[Engine]] construction**\n * after which they are frozen and are read-only.\n *\n * Flags are used to enable experimental or preview features in Excalibur.\n */\nexport class Flags {\n  private static _FROZEN = false;\n  private static _FLAGS: Record<string, boolean> = {};\n\n  /**\n   * Freeze all flag modifications making them readonly\n   */\n  public static freeze() {\n    Flags._FROZEN = true;\n  }\n\n  /**\n   * Resets internal flag state, not meant to be called by users. Only used for testing.\n   *\n   * Calling this in your game is UNSUPPORTED\n   * @internal\n   */\n  public static _reset() {\n    Flags._FROZEN = false;\n    Flags._FLAGS = {};\n  }\n\n  /**\n   * Enable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\n   * @param flagName\n   */\n  public static enable(flagName: string): void {\n    if (this._FROZEN) {\n      throw Error('Feature flags can only be enabled before Engine constructor time');\n    }\n    Flags._FLAGS[flagName] = true;\n  }\n\n  /**\n   * Disable a specific feature flag by name. **Note: can only be set before [[Engine]] constructor time**\n   * @param flagName\n   */\n  public static disable(flagName: string): void {\n    if (this._FROZEN) {\n      throw Error('Feature flags can only be disabled before Engine constructor time');\n    }\n    Flags._FLAGS[flagName] = false;\n  }\n\n  /**\n   * Check if a flag is enabled. If the flag is disabled or does not exist `false` is returned\n   * @param flagName\n   */\n  public static isEnabled(flagName: string): boolean {\n    return !!Flags._FLAGS[flagName];\n  }\n\n  /**\n   * Show a list of currently known flags\n   */\n  public static show(): string[] {\n    return Object.keys(Flags._FLAGS);\n  }\n}\n","/* eslint-disable no-console */\n/**\n * Logging level that Excalibur will tag\n */\nexport enum LogLevel {\n  Debug,\n  Info,\n  Warn,\n  Error,\n  Fatal\n}\n\n/**\n * Static singleton that represents the logging facility for Excalibur.\n * Excalibur comes built-in with a [[ConsoleAppender]] and [[ScreenAppender]].\n * Derive from [[Appender]] to create your own logging appenders.\n */\nexport class Logger {\n  private static _INSTANCE: Logger = null;\n  private _appenders: Appender[] = [];\n\n  constructor() {\n    if (Logger._INSTANCE) {\n      throw new Error('Logger is a singleton');\n    }\n    Logger._INSTANCE = this;\n    // Default console appender\n    Logger._INSTANCE.addAppender(new ConsoleAppender());\n    return Logger._INSTANCE;\n  }\n\n  /**\n   * Gets or sets the default logging level. Excalibur will only log\n   * messages if equal to or above this level. Default: [[LogLevel.Info]]\n   */\n  public defaultLevel: LogLevel = LogLevel.Info;\n\n  /**\n   * Gets the current static instance of Logger\n   */\n  public static getInstance(): Logger {\n    if (Logger._INSTANCE == null) {\n      Logger._INSTANCE = new Logger();\n    }\n    return Logger._INSTANCE;\n  }\n\n  /**\n   * Adds a new [[Appender]] to the list of appenders to write to\n   */\n  public addAppender(appender: Appender): void {\n    this._appenders.push(appender);\n  }\n\n  /**\n   * Clears all appenders from the logger\n   */\n  public clearAppenders(): void {\n    this._appenders.length = 0;\n  }\n\n  /**\n   * Logs a message at a given LogLevel\n   * @param level  The LogLevel`to log the message at\n   * @param args   An array of arguments to write to an appender\n   */\n  private _log(level: LogLevel, args: any[]): void {\n    if (level == null) {\n      level = this.defaultLevel;\n    }\n\n    const len = this._appenders.length;\n\n    for (let i = 0; i < len; i++) {\n      if (level >= this.defaultLevel) {\n        this._appenders[i].log(level, args);\n      }\n    }\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Debug]] level\n   * @param args  Accepts any number of arguments\n   */\n  public debug(...args: any[]): void {\n    this._log(LogLevel.Debug, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Info]] level\n   * @param args  Accepts any number of arguments\n   */\n  public info(...args: any[]): void {\n    this._log(LogLevel.Info, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Warn]] level\n   * @param args  Accepts any number of arguments\n   */\n  public warn(...args: any[]): void {\n    this._log(LogLevel.Warn, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Error]] level\n   * @param args  Accepts any number of arguments\n   */\n  public error(...args: any[]): void {\n    this._log(LogLevel.Error, args);\n  }\n\n  /**\n   * Writes a log message at the [[LogLevel.Fatal]] level\n   * @param args  Accepts any number of arguments\n   */\n  public fatal(...args: any[]): void {\n    this._log(LogLevel.Fatal, args);\n  }\n}\n\n/**\n * Contract for any log appender (such as console/screen)\n */\nexport interface Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  log(level: LogLevel, args: any[]): void;\n}\n\n/**\n * Console appender for browsers (i.e. `console.log`)\n */\nexport class ConsoleAppender implements Appender {\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    // Check for console support\n    if (!console && !console.log && console.warn && console.error) {\n      // todo maybe do something better than nothing\n      return;\n    }\n\n    // Create a new console args array\n    const consoleArgs: any[] = [];\n    consoleArgs.unshift.apply(consoleArgs, args);\n    consoleArgs.unshift('[' + LogLevel[level] + '] : ');\n\n    if (level < LogLevel.Warn) {\n      // Call .log for Debug/Info\n      if (console.log.apply) {\n        // this is required on some older browsers that don't support apply on console.log :(\n        console.log.apply(console, consoleArgs);\n      } else {\n        console.log(consoleArgs.join(' '));\n      }\n    } else if (level < LogLevel.Error) {\n      // Call .warn for Warn\n      if (console.warn.apply) {\n        console.warn.apply(console, consoleArgs);\n      } else {\n        console.warn(consoleArgs.join(' '));\n      }\n    } else {\n      // Call .error for Error/Fatal\n      if (console.error.apply) {\n        console.error.apply(console, consoleArgs);\n      } else {\n        console.error(consoleArgs.join(' '));\n      }\n    }\n  }\n}\n\n/**\n * On-screen (canvas) appender\n */\nexport class ScreenAppender implements Appender {\n  // @todo Clean this up\n\n  private _messages: string[] = [];\n  private _canvas: HTMLCanvasElement;\n  private _ctx: CanvasRenderingContext2D;\n\n  /**\n   * @param width   Width of the screen appender in pixels\n   * @param height  Height of the screen appender in pixels\n   */\n  constructor(width?: number, height?: number) {\n    this._canvas = <HTMLCanvasElement>document.createElement('canvas');\n    this._canvas.width = width || window.innerWidth;\n    this._canvas.height = height || window.innerHeight;\n    this._canvas.style.position = 'absolute';\n    // eslint-disable-next-line\n    this._ctx = <CanvasRenderingContext2D>this._canvas.getContext('2d'); // eslint-disable-line\n    document.body.appendChild(this._canvas);\n  }\n\n  /**\n   * Logs a message at the given [[LogLevel]]\n   * @param level  Level to log at\n   * @param args   Arguments to log\n   */\n  public log(level: LogLevel, args: any[]): void {\n    const message = args.join(',');\n\n    this._ctx.clearRect(0, 0, this._canvas.width, this._canvas.height);\n\n    this._messages.unshift('[' + LogLevel[level] + '] : ' + message);\n\n    let pos = 10;\n    let opacity = 1.0;\n    for (let i = 0; i < this._messages.length; i++) {\n      this._ctx.fillStyle = 'rgba(255,255,255,' + opacity.toFixed(2) + ')';\n      this._ctx.fillText(this._messages[i], 200, pos);\n      pos += 10;\n      opacity = opacity > 0 ? opacity - 0.05 : 0;\n    }\n  }\n}\n","/**\n * An enum that describes the sides of an Actor for collision\n */\nexport enum Side {\n  None = 'None',\n  Top = 'Top',\n  Bottom = 'Bottom',\n  Left = 'Left',\n  Right = 'Right'\n}\n","import 'core-js/es/array';\nimport 'core-js/es/object';\nimport 'core-js/es/function';\n\n/**\n * Polyfill adding function\n */\nexport function polyfill() {\n  /* istanbul ignore next */\n  if (typeof window === 'undefined') {\n    window = <any>{\n      audioContext: function () {\n        return;\n      }\n    };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.requestAnimationFrame) {\n    (<any>window).requestAnimationFrame =\n      (<any>window).webkitRequestAnimationFrame ||\n      (<any>window).mozRequestAnimationFrame ||\n      function (callback: Function) {\n        window.setInterval(callback, 1000 / 60);\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !window.cancelAnimationFrame) {\n    (<any>window).cancelAnimationFrame =\n      (<any>window).webkitCancelAnimationFrame ||\n      (<any>window).mozCancelAnimationFrame ||\n      function () {\n        return;\n      };\n  }\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).AudioContext) {\n    if ((<any>window).webkitAudioContext) {\n      const ctx = (<any>window).webkitAudioContext;\n      const replaceMe = ctx.prototype.decodeAudioData;\n      (<any>window).webkitAudioContext.prototype.decodeAudioData = function (arrayBuffer: ArrayBuffer) {\n        return new Promise((resolve, reject) => {\n          replaceMe.call(this, arrayBuffer, resolve, reject);\n        });\n      };\n    }\n\n    (<any>window).AudioContext =\n      (<any>window).AudioContext ||\n      (<any>window).webkitAudioContext ||\n      (<any>window).mozAudioContext ||\n      (<any>window).msAudioContext ||\n      (<any>window).oAudioContext;\n  }\n\n  /* istanbul ignore next */\n  if (typeof window !== 'undefined' && !(<any>window).devicePixelRatio) {\n    (<any>window).devicePixelRatio = window.devicePixelRatio || 1;\n  }\n}\n","/**\n * Pseudo-Random Utility\n *\n * A pseudo-random utility to add seeded random support for help in\n * generating things like terrain or reproducible randomness. Uses the\n * [Mersenne Twister](https://en.wikipedia.org/wiki/Mersenne_Twister) algorithm.\n */\n\n/**\n * 32-bit mask\n */\nconst BITMASK32: number = 0xffffffff;\n\n/**\n * Pseudo-random number generator following the Mersenne_Twister algorithm. Given a seed this generator will produce the same sequence\n * of numbers each time it is called.\n * See https://en.wikipedia.org/wiki/Mersenne_Twister for more details.\n * Uses the MT19937-32 (2002) implementation documented here http://www.math.sci.hiroshima-u.ac.jp/~m-mat/MT/MT2002/emt19937ar.html\n *\n * Api inspired by http://chancejs.com/# https://github.com/chancejs/chancejs\n */\nexport class Random {\n  // Separation point of one one word, the number of bits in the lower bitmask 0 <= r <= w-1\n  private _lowerMask: number = 0x7fffffff; // 31 bits same as _r\n  private _upperMask: number = 0x80000000; // 34 high bits\n\n  // Word size, 64 bits\n  private _w: number = 32;\n\n  // Degree of recurrence\n  private _n: number = 624;\n\n  // Middle word, an offset used in the recurrence defining the series x, 1<=m<n\n  private _m: number = 397;\n  // coefficients of teh rational normal form twist matrix\n  private _a: number = 0x9908b0df;\n\n  // tempering bit shifts and masks\n  private _u: number = 11;\n  private _s: number = 7;\n  private _b: number = 0x9d2c5680;\n  private _t: number = 15;\n  private _c: number = 0xefc60000;\n  private _l: number = 18;\n  private _f: number = 1812433253;\n\n  private _mt: number[];\n\n  private _index: number;\n\n  /**\n   * If no seed is specified, the Date.now() is used\n   */\n  constructor(public seed?: number) {\n    this._mt = new Array<number>(this._n);\n    // need to mask to support higher bit machines\n    this._mt[0] = (seed || Date.now()) >>> 0;\n\n    for (let i = 1; i < this._n; i++) {\n      const s = this._mt[i - 1] ^ (this._mt[i - 1] >>> (this._w - 2));\n      // numbers are bigger than the JS max safe int, add in 16-bit chunks to prevent IEEE rounding errors on high bits\n      this._mt[i] = (((this._f * ((s & 0xffff0000) >>> 16)) << 16) + this._f * (s & 0xffff) + i) >>> 0;\n    }\n    this._index = this._n;\n  }\n\n  /**\n   * Apply the twist\n   */\n  private _twist(): void {\n    const mag01 = [0x0, this._a];\n    let y = 0,\n      i = 0;\n    for (; i < this._n - this._m; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + this._m] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    for (; i < this._n - 1; i++) {\n      y = (this._mt[i] & this._upperMask) | (this._mt[i + 1] & this._lowerMask);\n      this._mt[i] = this._mt[i + (this._m - this._n)] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n    }\n    y = (this._mt[this._n - 1] & this._upperMask) | (this._mt[0] & this._lowerMask);\n    this._mt[this._n - 1] = this._mt[this._m - 1] ^ (y >>> 1) ^ (mag01[y & 0x1] & BITMASK32);\n\n    this._index = 0;\n  }\n\n  /**\n   * Return next 32 bit integer number in sequence\n   */\n  public nextInt(): number {\n    if (this._index >= this._n) {\n      this._twist();\n    }\n\n    let y = this._mt[this._index++];\n\n    y ^= y >>> this._u;\n    y ^= (y << this._s) & this._b;\n    y ^= (y << this._t) & this._c;\n    y ^= y >>> this._l;\n\n    return y >>> 0;\n  }\n\n  /**\n   * Return a random floating point number between [0, 1)\n   */\n  public next(): number {\n    return this.nextInt() * (1.0 / 4294967296.0); // divided by 2^32\n  }\n\n  /**\n   * Return a random floating point in range [min, max) min is included, max is not included\n   */\n  public floating(min: number, max: number): number {\n    return (max - min) * this.next() + min;\n  }\n\n  /**\n   * Return a random integer in range [min, max] min is included, max is included.\n   * Implemented with rejection sampling, see https://medium.com/@betable/tifu-by-using-math-random-f1c308c4fd9d#.i13tdiu5a\n   */\n  public integer(min: number, max: number): number {\n    return Math.floor((max - min + 1) * this.next() + min);\n  }\n\n  /**\n   * Returns true or false randomly with 50/50 odds by default.\n   * By default the likelihood of returning a true is .5 (50%).\n   * @param likelihood takes values between [0, 1]\n   */\n  public bool(likelihood: number = 0.5): boolean {\n    return this.next() <= likelihood;\n  }\n\n  /**\n   * Returns one element from an array at random\n   */\n  public pickOne<T>(array: Array<T>): T {\n    return array[this.integer(0, array.length - 1)];\n  }\n\n  /**\n   * Returns a new array random picking elements from the original\n   * @param array Original array to pick from\n   * @param numPicks can be any positive number\n   * @param allowDuplicates indicates whether the returned set is allowed duplicates (it does not mean there will always be duplicates\n   * just that it is possible)\n   */\n  public pickSet<T>(array: Array<T>, numPicks: number, allowDuplicates: boolean = false): Array<T> {\n    if (allowDuplicates) {\n      return this._pickSetWithDuplicates(array, numPicks);\n    } else {\n      return this._pickSetWithoutDuplicates(array, numPicks);\n    }\n  }\n\n  /**\n   * Returns a new array randomly picking elements in the original (not reused)\n   * @param array Array to pick elements out of\n   * @param numPicks must be less than or equal to the number of elements in the array.\n   */\n  private _pickSetWithoutDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    if (numPicks > array.length || numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 < n <= length');\n    }\n    if (numPicks === array.length) {\n      return array;\n    }\n\n    const result: Array<T> = new Array<T>(numPicks);\n    let currentPick = 0;\n    const tempArray = array.slice(0);\n    while (currentPick < numPicks) {\n      const index = this.integer(0, tempArray.length - 1);\n      result[currentPick++] = tempArray[index];\n      tempArray.splice(index, 1);\n    }\n\n    return result;\n  }\n\n  /**\n   * Returns a new array random picking elements from the original allowing duplicates\n   * @param array Array to pick elements out of\n   * @param numPicks can be any positive number\n   */\n  private _pickSetWithDuplicates<T>(array: Array<T>, numPicks: number): Array<T> {\n    // Typescript numbers are all floating point, so do we add check for int? (or floor the input?)\n    if (numPicks < 0) {\n      throw new Error('Invalid number of elements to pick, must pick a value 0 <= n < MAX_INT');\n    }\n    const result = new Array<T>(numPicks);\n    for (let i = 0; i < numPicks; i++) {\n      result[i] = this.pickOne(array);\n    }\n    return result;\n  }\n\n  /**\n   * Returns a new array that has its elements shuffled. Using the Fisher/Yates method\n   * https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle\n   */\n  public shuffle<T>(array: Array<T>): Array<T> {\n    const tempArray = array.slice(0);\n    let swap: T = null;\n    for (let i = 0; i < tempArray.length - 2; i++) {\n      const randomIndex = this.integer(i, tempArray.length - 1);\n      swap = tempArray[i];\n      tempArray[i] = tempArray[randomIndex];\n      tempArray[randomIndex] = swap;\n    }\n\n    return tempArray;\n  }\n\n  /**\n   * Generate a list of random integer numbers\n   * @param length the length of the final array\n   * @param min the minimum integer number to generate inclusive\n   * @param max the maximum integer number to generate inclusive\n   */\n  public range(length: number, min: number, max: number): Array<number> {\n    const result: Array<number> = new Array(length);\n    for (let i = 0; i < length; i++) {\n      result[i] = this.integer(min, max);\n    }\n    return result;\n  }\n\n  /**\n   * Returns the result of a d4 dice roll\n   */\n  public d4() {\n    return this.integer(1, 4);\n  }\n\n  /**\n   * Returns the result of a d6 dice roll\n   */\n  public d6() {\n    return this.integer(1, 6);\n  }\n\n  /**\n   * Returns the result of a d8 dice roll\n   */\n  public d8() {\n    return this.integer(1, 8);\n  }\n\n  /**\n   * Returns the result of a d10 dice roll\n   */\n  public d10() {\n    return this.integer(1, 10);\n  }\n\n  /**\n   * Returns the result of a d12 dice roll\n   */\n  public d12() {\n    return this.integer(1, 12);\n  }\n\n  /**\n   * Returns the result of a d20 dice roll\n   */\n  public d20() {\n    return this.integer(1, 20);\n  }\n}\n","import { Vector } from '../Algebra';\nimport { Random } from '../Math/Random';\nimport { Side } from '../Collision/Side';\n\n/**\n * Two PI constant\n */\nexport const TwoPI: number = Math.PI * 2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param deep Whether or not to do a deep clone\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(deep: boolean, target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2>(target: T1, object2: T2): T1 & T2;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param object2 The second object whose properties to merge\n * @param object3 The third object whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend<T1, T2, T3>(target: T1, object2: T2, object3: T3): T1 & T2 & T3;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @param target The target object to attach properties on\n * @param objects The objects whose properties to merge\n * @returns Merged object with properties from other objects\n */\nexport function extend(target: any, ...objects: any[]): any;\n\n/**\n * Merges one or more objects into a single target object\n *\n * @returns Merged object with properties from other objects\n * @credit https://gomakethings.com/vanilla-javascript-version-of-jquery-extend/\n */\nexport function extend() {\n  const extended: { [key: string]: any } = {};\n  let deep = false;\n  let i = 0;\n  const length = arguments.length;\n\n  // Check if a deep merge\n  if (Object.prototype.toString.call(arguments[0]) === '[object Boolean]') {\n    deep = arguments[0];\n    i++;\n  }\n\n  // Merge the object into the extended object\n  const assignExists = typeof (<any>Object).assign === 'function';\n  let merge = null;\n  if (!assignExists) {\n    merge = function (obj: any) {\n      for (const prop in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n          // If deep merge and property is an object, merge properties\n          if (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n            extended[prop] = extend(true, extended[prop], obj[prop]);\n          } else {\n            extended[prop] = obj[prop];\n          }\n        }\n      }\n    };\n  } else {\n    merge = (<any>Object).assign;\n  }\n\n  // Loop through each object and conduct a merge\n  for (; i < length; i++) {\n    const obj = arguments[i];\n    if (!assignExists) {\n      merge(obj);\n    } else {\n      merge(extended, obj);\n    }\n  }\n\n  return extended;\n}\n\n/**\n * Encode a string in base64\n * @deprecated This will be removed in v0.26.0\n */\nexport function base64Encode(inputStr: string) {\n  const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  let outputStr = '';\n  let i = 0;\n\n  while (i < inputStr.length) {\n    //all three \"& 0xff\" added below are there to fix a known bug\n    //with bytes returned by xhr.responseText\n    const byte1 = inputStr.charCodeAt(i++) & 0xff;\n    const byte2 = inputStr.charCodeAt(i++) & 0xff;\n    const byte3 = inputStr.charCodeAt(i++) & 0xff;\n\n    const enc1 = byte1 >> 2;\n    const enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n\n    let enc3, enc4;\n    if (isNaN(byte2)) {\n      enc3 = enc4 = 64;\n    } else {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\n      if (isNaN(byte3)) {\n        enc4 = 64;\n      } else {\n        enc4 = byte3 & 63;\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n  }\n\n  return outputStr;\n}\n\n/**\n * Sugar that will use `nullishVal` if it's not null or undefined. Simulates the `??` operator\n * @param nullishVal\n * @param defaultVal\n */\nexport function nullish<T>(nullishVal: T | undefined | null, defaultVal: T): T {\n  return nullishVal !== null && nullishVal !== undefined ? nullishVal : defaultVal;\n}\n\n/**\n * Clamps a value between a min and max inclusive\n */\nexport function clamp(val: number, min: number, max: number) {\n  return Math.min(Math.max(min, val), max);\n}\n\n/**\n * Find a random floating point number in range\n */\nexport function randomInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.floating(min, max) : min + Math.random() * (max - min);\n}\n\n/**\n * Find a random integer in a range\n */\nexport function randomIntInRange(min: number, max: number, random: Random = new Random()): number {\n  return random ? random.integer(min, max) : Math.round(randomInRange(min, max));\n}\n\n/**\n * Convert an angle to be the equivalent in the range [0, 2PI]\n */\nexport function canonicalizeAngle(angle: number): number {\n  let tmpAngle = angle;\n  if (angle > TwoPI) {\n    while (tmpAngle > TwoPI) {\n      tmpAngle -= TwoPI;\n    }\n  }\n\n  if (angle < 0) {\n    while (tmpAngle < 0) {\n      tmpAngle += TwoPI;\n    }\n  }\n  return tmpAngle;\n}\n\n/**\n * Convert radians to degrees\n */\nexport function toDegrees(radians: number): number {\n  return (180 / Math.PI) * radians;\n}\n\n/**\n * Convert degrees to radians\n */\nexport function toRadians(degrees: number): number {\n  return (degrees / 180) * Math.PI;\n}\n\n/**\n * Find the screen position of an HTML element\n */\nexport function getPosition(el: HTMLElement): Vector {\n  let oLeft: number = 0,\n    oTop: number = 0;\n\n  const calcOffsetLeft = (parent: HTMLElement) => {\n    oLeft += parent.offsetLeft;\n\n    if (parent.offsetParent) {\n      calcOffsetLeft(<HTMLElement>parent.offsetParent);\n    }\n  };\n  const calcOffsetTop = (parent: HTMLElement) => {\n    oTop += parent.offsetTop;\n    if (parent.offsetParent) {\n      calcOffsetTop(<HTMLElement>parent.offsetParent);\n    }\n  };\n\n  calcOffsetLeft(el);\n  calcOffsetTop(el);\n\n  return new Vector(oLeft, oTop);\n}\n\n/**\n * Add an item to an array list if it doesn't already exist. Returns true if added, false if not and already exists in the array.\n * @deprecated Will be removed in v0.26.0\n */\nexport function addItemToArray<T>(item: T, array: T[]): boolean {\n  if (array.indexOf(item) === -1) {\n    array.push(item);\n    return true;\n  }\n  return false;\n}\n\n/**\n * Remove an item from an list\n * @deprecated Will be removed in v0.26.0\n */\nexport function removeItemFromArray<T>(item: T, array: T[]): boolean {\n  let index = -1;\n  if ((index = array.indexOf(item)) > -1) {\n    array.splice(index, 1);\n    return true;\n  }\n\n  return false;\n}\n\n/**\n * See if an array contains something\n */\nexport function contains(array: Array<any>, obj: any): boolean {\n  for (let i = 0; i < array.length; i++) {\n    if (array[i] === obj) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Get the opposit side\n * TODO: Move to Side type\n * @deprecated Will be removed in v0.26.0\n */\nexport function getOppositeSide(side: Side) {\n  if (side === Side.Top) {\n    return Side.Bottom;\n  }\n  if (side === Side.Bottom) {\n    return Side.Top;\n  }\n  if (side === Side.Left) {\n    return Side.Right;\n  }\n  if (side === Side.Right) {\n    return Side.Left;\n  }\n\n  return Side.None;\n}\n\n/**\n * Returns the side in the direction of the vector supplied\n * @param direction Vector to check\n * TODO: Move to Side type\n */\nexport function getSideFromDirection(direction: Vector) {\n  const directions = [Vector.Left, Vector.Right, Vector.Up, Vector.Down];\n  const directionEnum = [Side.Left, Side.Right, Side.Top, Side.Bottom];\n\n  let max = -Number.MAX_VALUE;\n  let maxIndex = -1;\n  for (let i = 0; i < directions.length; i++) {\n    if (directions[i].dot(direction) > max) {\n      max = directions[i].dot(direction);\n      maxIndex = i;\n    }\n  }\n  return directionEnum[maxIndex];\n}\n\n/**\n * Excalibur's dynamically resizing collection\n * @deprecated Will be removed v0.26.0\n */\nexport class Collection<T> {\n  /**\n   * Default collection size\n   */\n  public static DefaultSize = 200;\n  private _internalArray: T[] = null;\n  private _endPointer: number = 0;\n\n  /**\n   * @param initialSize  Initial size of the internal backing array\n   */\n  constructor(initialSize: number = Collection.DefaultSize) {\n    this._internalArray = new Array<T>(initialSize);\n  }\n\n  private _resize() {\n    const newSize = this._internalArray.length * 2;\n    const newArray = new Array<T>(newSize);\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      newArray[i] = this._internalArray[i];\n    }\n\n    delete this._internalArray;\n    this._internalArray = newArray;\n  }\n\n  /**\n   * Push elements to the end of the collection\n   */\n  public push(element: T): T {\n    if (this._endPointer === this._internalArray.length) {\n      this._resize();\n    }\n    return (this._internalArray[this._endPointer++] = element);\n  }\n\n  /**\n   * Removes elements from the end of the collection\n   */\n  public pop(): T {\n    this._endPointer = this._endPointer - 1 < 0 ? 0 : this._endPointer - 1;\n    return this._internalArray[this._endPointer];\n  }\n\n  /**\n   * Returns the count of the collection\n   */\n  public count(): number {\n    return this._endPointer;\n  }\n\n  /**\n   * Empties the collection\n   */\n  public clear() {\n    this._endPointer = 0;\n  }\n\n  /**\n   * Returns the size of the internal backing array\n   */\n  public internalSize(): number {\n    return this._internalArray.length;\n  }\n\n  /**\n   * Returns an element at a specific index\n   * @param index  Index of element to retrieve\n   */\n  public elementAt(index: number): T {\n    if (index >= this.count()) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid index ' + index);\n    }\n    return this._internalArray[index];\n  }\n\n  /**\n   * Inserts an element at a specific index\n   * @param index  Index to insert the element\n   * @param value  Element to insert\n   */\n  public insert(index: number, value: T): T {\n    if (index >= this.count()) {\n      this._resize();\n    }\n    return (this._internalArray[index] = value);\n  }\n\n  /**\n   * Removes an element at a specific index\n   * @param index  Index of element to remove\n   */\n  public remove(index: number): T {\n    const count = this.count();\n    if (count === 0) {\n      //Logger.getInstance().error('Invalid parameter: ' + index);\n      throw new Error('Invalid parameter ' + index);\n    }\n    // O(n) Shift\n    const removed = this._internalArray[index];\n    for (let i = index; i < count; i++) {\n      this._internalArray[i] = this._internalArray[i + 1];\n    }\n    this._endPointer--;\n    return removed;\n  }\n\n  /**\n   * Removes an element by reference\n   * @param element  Element to retrieve\n   */\n  public removeElement(element: T) {\n    const index = this._internalArray.indexOf(element);\n    this.remove(index);\n  }\n\n  /**\n   * Returns a array representing the collection\n   */\n  public toArray(): T[] {\n    return this._internalArray.slice(0, this._endPointer);\n  }\n\n  /**\n   * Iterate over every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, returned values are ignored\n   */\n  public forEach(func: (element: T, index: number) => any) {\n    let i = 0;\n    const count = this.count();\n    for (i; i < count; i++) {\n      func.call(this, this._internalArray[i], i);\n    }\n  }\n\n  /**\n   * Mutate every element in the collection\n   * @param func  Callback to call for each element passing a reference to the element and its index, any values returned mutate\n   * the collection\n   */\n  public map(func: (element: T, index: number) => any) {\n    const count = this.count();\n    for (let i = 0; i < count; i++) {\n      this._internalArray[i] = func.call(this, this._internalArray[i], i);\n    }\n  }\n}\n\n/**\n * Used for exhaustive checks at compile time\n */\nexport function fail(message: never): never {\n  throw new Error(message);\n}\n\n/**\n * Generate a range of numbers\n * @param from inclusive\n * @param to inclusive\n */\nexport const range = (from: number, to: number) => Array.from(new Array(to - from + 1), (_x, i) => i + from);\n\n/**\n * Create a promise that resolves after a certain number of milliseconds\n * @param milliseconds\n */\nexport function delay(milliseconds: number): Promise<void> {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve();\n    }, milliseconds);\n  });\n}\n","import { Flags } from '../Flags';\nimport { Logger } from './Log';\nimport { extend } from './Util';\n\n/**\n * Obsolete decorator options\n */\nexport interface ObsoleteOptions {\n  // Optionally specify a custom message\n  message?: string;\n  // Optionally indicate that an alternate method to the obsolete one exists\n  alternateMethod?: string;\n  // Optional show stack trace, by default off\n  showStackTrace?: boolean;\n}\n\nexport const maxMessages = 5;\nconst obsoleteMessage: { [messageCount: string]: number } = {};\nexport const resetObsoleteCounter = () => {\n  for (const message in obsoleteMessage) {\n    obsoleteMessage[message] = 0;\n  }\n};\n\nconst logMessage = (message: string, options: ObsoleteOptions) => {\n  const suppressObsoleteMessages = Flags.isEnabled('suppress-obsolete-message');\n  if (obsoleteMessage[message] < maxMessages && !suppressObsoleteMessages) {\n    Logger.getInstance().warn(message);\n\n    // tslint:disable-next-line: no-console\n    if (console.trace && options.showStackTrace) {\n      // tslint:disable-next-line: no-console\n      console.trace();\n    }\n  }\n  obsoleteMessage[message]++;\n};\n\n/**\n * Obsolete decorator for marking Excalibur methods obsolete, you can optionally specify a custom message and/or alternate replacement\n * method do the deprecated one. Inspired by https://github.com/jayphelps/core-decorators.js\n */\nexport function obsolete(options?: ObsoleteOptions): any {\n  options = extend(\n    {},\n    {\n      message: 'This feature will be removed in future versions of Excalibur.',\n      alternateMethod: null,\n      showStackTrack: false\n    },\n    options\n  );\n\n  return function (target: any, property: string, descriptor: PropertyDescriptor): any {\n    if (\n      descriptor &&\n      !(typeof descriptor.value === 'function' || typeof descriptor.get === 'function' || typeof descriptor.set === 'function')\n    ) {\n      throw new SyntaxError('Only classes/functions/getters/setters can be marked as obsolete');\n    }\n    const methodSignature = `${target.name || ''}${target.name && property ? '.' : ''}${property ? property : ''}`;\n\n    const message =\n      `${methodSignature} is marked obsolete: ${options.message}` +\n      (options.alternateMethod ? ` Use ${options.alternateMethod} instead` : '');\n\n    if (!obsoleteMessage[message]) {\n      obsoleteMessage[message] = 0;\n    }\n\n    // If descriptor is null it is a class\n    const method = descriptor ? { ...descriptor } : target;\n    if (!descriptor) {\n      // with es2015 classes we need to change our decoration tactic\n      class DecoratedClass extends method {\n        constructor(...args: any) {\n          logMessage(message, options);\n          super(...args);\n        }\n      }\n      return DecoratedClass;\n    }\n\n    if (descriptor && descriptor.value) {\n      method.value = function (this: any) {\n        logMessage(message, options);\n        return descriptor.value.apply(this, arguments);\n      };\n      return method;\n    }\n\n    if (descriptor && descriptor.get) {\n      method.get = function (this: any) {\n        logMessage(message, options);\n        return descriptor.get.apply(this, arguments);\n      };\n    }\n\n    if (descriptor && descriptor.set) {\n      method.set = function (this: any) {\n        logMessage(message, options);\n        return descriptor.set.apply(this, arguments);\n      };\n    }\n    return method;\n  };\n}\n","import { Engine } from './Engine';\nimport { Clonable } from './Interfaces/Clonable';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * A 2D vector on a plane.\n */\nexport class Vector implements Clonable<Vector> {\n  /**\n   * A (0, 0) vector\n   */\n  public static get Zero() {\n    return new Vector(0, 0);\n  }\n\n  /**\n   * A (1, 1) vector\n   */\n  public static get One() {\n    return new Vector(1, 1);\n  }\n\n  /**\n   * A (0.5, 0.5) vector\n   */\n  public static get Half() {\n    return new Vector(0.5, 0.5);\n  }\n\n  /**\n   * A unit vector pointing up (0, -1)\n   */\n  public static get Up() {\n    return new Vector(0, -1);\n  }\n\n  /**\n   * A unit vector pointing down (0, 1)\n   */\n  public static get Down() {\n    return new Vector(0, 1);\n  }\n\n  /**\n   * A unit vector pointing left (-1, 0)\n   */\n  public static get Left() {\n    return new Vector(-1, 0);\n  }\n  /**\n   * A unit vector pointing right (1, 0)\n   */\n  public static get Right() {\n    return new Vector(1, 0);\n  }\n\n  /**\n   * Returns a vector of unit length in the direction of the specified angle in Radians.\n   * @param angle The angle to generate the vector\n   */\n  public static fromAngle(angle: number) {\n    return new Vector(Math.cos(angle), Math.sin(angle));\n  }\n\n  /**\n   * Checks if vector is not null, undefined, or if any of its components are NaN or Infinity.\n   */\n  public static isValid(vec: Vector) {\n    if (vec === null || vec === undefined) {\n      return false;\n    }\n    if (isNaN(vec.x) || isNaN(vec.y)) {\n      return false;\n    }\n\n    if (vec.x === Infinity || vec.y === Infinity || vec.x === -Infinity || vec.y === -Infinity) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Calculates distance between two Vectors\n   * @param vec1\n   * @param vec2\n   */\n  public static distance(vec1: Vector, vec2: Vector) {\n    return Math.sqrt(Math.pow(vec1.x - vec2.x, 2) + Math.pow(vec1.y - vec2.y, 2));\n  }\n\n  /**\n   * @param x  X component of the Vector\n   * @param y  Y component of the Vector\n   */\n  constructor(x: number, y: number) {\n    this._x = x;\n    this._y = y;\n  }\n\n  private _x = 0;\n  /**\n   * Get the x component of the vector\n   */\n  public get x(): number {\n    return this._x;\n  }\n\n  /**\n   * Set the x component, THIS MUTATES the current vector. It is usually better to create a new vector.\n   * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n   */\n  public set x(val: number) {\n    this._x = val;\n  }\n\n  private _y = 0;\n  /**\n   * Get the y component of the vector\n   */\n  public get y(): number {\n    return this._y;\n  }\n\n  /**\n   * Set the y component, THIS MUTATES the current vector. It is usually better to create a new vector.\n   * @warning **Be very careful setting components on shared vectors, mutating shared vectors can cause hard to find bugs**\n   */\n  public set y(val: number) {\n    this._y = val;\n  }\n\n  /**\n   * Sets the x and y components at once, THIS MUTATES the current vector. It is usually better to create a new vector.\n   *\n   * @warning **Be very careful using this, mutating vectors can cause hard to find bugs**\n   */\n  setTo(x: number, y: number) {\n    (this.x as number) = x;\n    (this.y as number) = y;\n  }\n\n  /**\n   * Compares this point against another and tests for equality\n   * @param vector The other point to compare to\n   * @param tolerance Amount of euclidean distance off we are willing to tolerate\n   */\n  public equals(vector: Vector, tolerance: number = 0.001): boolean {\n    return Math.abs(this.x - vector.x) <= tolerance && Math.abs(this.y - vector.y) <= tolerance;\n  }\n\n  /**\n   * The distance to another vector. If no other Vector is specified, this will return the [[magnitude]].\n   * @param v  The other vector. Leave blank to use origin vector.\n   */\n  public distance(v?: Vector): number {\n    if (!v) {\n      v = Vector.Zero;\n    }\n    return Math.sqrt(Math.pow(this.x - v.x, 2) + Math.pow(this.y - v.y, 2));\n  }\n\n  /**\n   * The magnitude (size) of the Vector\n   * @obsolete magnitude will be removed in favour of '.size' in version 0.25.0\n   */\n  @obsolete({ message: 'will be removed in favour of `.size` in version 0.25.0' })\n  public magnitude(): number {\n    return this.distance();\n  }\n\n  /**\n   * The size (magnitude) of the Vector\n   */\n  public get size(): number {\n    return this.distance();\n  }\n\n  /**\n   * Setting the size mutates the current vector\n   *\n   * @warning Can be used to set the size of the vector, **be very careful using this, mutating vectors can cause hard to find bugs**\n   */\n  public set size(newLength: number) {\n    const v = this.normalize().scale(newLength);\n    this.setTo(v.x, v.y);\n  }\n\n  /**\n   * Normalizes a vector to have a magnitude of 1.\n   */\n  public normalize(): Vector {\n    const d = this.distance();\n    if (d > 0) {\n      return new Vector(this.x / d, this.y / d);\n    } else {\n      return new Vector(0, 1);\n    }\n  }\n\n  /**\n   * Returns the average (midpoint) between the current point and the specified\n   */\n  public average(vec: Vector): Vector {\n    return this.add(vec).scale(0.5);\n  }\n\n  /**\n   * Scales a vector's by a factor of size\n   * @param size  The factor to scale the magnitude by\n   */\n  public scale(scale: Vector): Vector;\n  public scale(size: number): Vector;\n  public scale(sizeOrScale: number | Vector): Vector {\n    if (sizeOrScale instanceof Vector) {\n      return new Vector(this.x * sizeOrScale.x, this.y * sizeOrScale.y);\n    } else {\n      return new Vector(this.x * sizeOrScale, this.y * sizeOrScale);\n    }\n  }\n\n  /**\n   * Adds one vector to another\n   * @param v The vector to add\n   */\n  public add(v: Vector): Vector {\n    return new Vector(this.x + v.x, this.y + v.y);\n  }\n\n  /**\n   * Subtracts a vector from another, if you subtract vector `B.sub(A)` the resulting vector points from A -> B\n   * @param v The vector to subtract\n   */\n  public sub(v: Vector): Vector {\n    return new Vector(this.x - v.x, this.y - v.y);\n  }\n\n  /**\n   * Adds one vector to this one modifying the original\n   * @param v The vector to add\n   * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n   */\n  public addEqual(v: Vector): Vector {\n    this.setTo(this.x + v.x, this.y + v.y);\n    return this;\n  }\n\n  /**\n   * Subtracts a vector from this one modifying the original\n   * @param v The vector to subtract\n   * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n   */\n  public subEqual(v: Vector): Vector {\n    this.setTo(this.x - v.x, this.y - v.y);\n    return this;\n  }\n\n  /**\n   * Scales this vector by a factor of size and modifies the original\n   * @warning Be very careful using this, mutating vectors can cause hard to find bugs\n   */\n  public scaleEqual(size: number): Vector {\n    this.setTo(this.x * size, this.y * size);\n    return this;\n  }\n\n  /**\n   * Performs a dot product with another vector\n   * @param v  The vector to dot\n   */\n  public dot(v: Vector): number {\n    return this.x * v.x + this.y * v.y;\n  }\n\n  /**\n   * Performs a 2D cross product with scalar. 2D cross products with a scalar return a vector.\n   * @param v  The scalar to cross\n   */\n  public cross(v: number): Vector;\n  /**\n   * Performs a 2D cross product with another vector. 2D cross products return a scalar value not a vector.\n   * @param v  The vector to cross\n   */\n  public cross(v: Vector): number;\n  public cross(v: any): any {\n    if (v instanceof Vector) {\n      return this.x * v.y - this.y * v.x;\n    } else if (typeof v === 'number') {\n      return new Vector(v * this.y, -v * this.x);\n    }\n  }\n\n  /**\n   * Returns the perpendicular vector to this one\n   */\n  public perpendicular(): Vector {\n    return new Vector(this.y, -this.x);\n  }\n\n  /**\n   * Returns the normal vector to this one, same as the perpendicular of length 1\n   */\n  public normal(): Vector {\n    return this.perpendicular().normalize();\n  }\n\n  /**\n   * Negate the current vector\n   */\n  public negate(): Vector {\n    return this.scale(-1);\n  }\n\n  /**\n   * Returns the angle of this vector.\n   */\n  public toAngle(): number {\n    return Math.atan2(this.y, this.x);\n  }\n\n  /**\n   * Rotates the current vector around a point by a certain number of\n   * degrees in radians\n   */\n  public rotate(angle: number, anchor?: Vector): Vector {\n    if (!anchor) {\n      anchor = new Vector(0, 0);\n    }\n    const sinAngle = Math.sin(angle);\n    const cosAngle = Math.cos(angle);\n    const x = cosAngle * (this.x - anchor.x) - sinAngle * (this.y - anchor.y) + anchor.x;\n    const y = sinAngle * (this.x - anchor.x) + cosAngle * (this.y - anchor.y) + anchor.y;\n    return new Vector(x, y);\n  }\n\n  /**\n   * Creates new vector that has the same values as the previous.\n   */\n  public clone(): Vector {\n    return new Vector(this.x, this.y);\n  }\n\n  /**\n   * Returns a string representation of the vector.\n   */\n  public toString(): string {\n    return `(${this.x}, ${this.y})`;\n  }\n}\n\n/**\n * A 2D ray that can be cast into the scene to do collision detection\n */\nexport class Ray {\n  public pos: Vector;\n  public dir: Vector;\n\n  /**\n   * @param pos The starting position for the ray\n   * @param dir The vector indicating the direction of the ray\n   */\n  constructor(pos: Vector, dir: Vector) {\n    this.pos = pos;\n    this.dir = dir.normalize();\n  }\n\n  /**\n   * Tests a whether this ray intersects with a line segment. Returns a number greater than or equal to 0 on success.\n   * This number indicates the mathematical intersection time.\n   * @param line  The line to test\n   */\n  public intersect(line: Line): number {\n    const numerator = line.begin.sub(this.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (this.dir.cross(line.getSlope()) === 0 && numerator.cross(this.dir) !== 0) {\n      return -1;\n    }\n\n    // Lines are parallel\n    const divisor = this.dir.cross(line.getSlope());\n    if (divisor === 0) {\n      return -1;\n    }\n\n    const t = numerator.cross(line.getSlope()) / divisor;\n\n    if (t >= 0) {\n      const u = numerator.cross(this.dir) / divisor / line.getLength();\n      if (u >= 0 && u <= 1) {\n        return t;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Returns the point of intersection given the intersection time\n   */\n  public getPoint(time: number): Vector {\n    return this.pos.add(this.dir.scale(time));\n  }\n}\n\n/**\n * A 2D line segment\n */\nexport class Line {\n  /**\n   * @param begin  The starting point of the line segment\n   * @param end  The ending point of the line segment\n   */\n  constructor(public begin: Vector, public end: Vector) {}\n\n  /**\n   * Gets the raw slope (m) of the line. Will return (+/-)Infinity for vertical lines.\n   */\n  public get slope() {\n    return (this.end.y - this.begin.y) / (this.end.x - this.begin.x);\n  }\n\n  /**\n   * Gets the Y-intercept (b) of the line. Will return (+/-)Infinity if there is no intercept.\n   */\n  public get intercept() {\n    return this.begin.y - this.slope * this.begin.x;\n  }\n\n  /**\n   * Gets the normal of the line\n   */\n  public normal(): Vector {\n    return this.end.sub(this.begin).normal();\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector of length 1\n   */\n  public getSlope(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the edge of the line as vector, the length of the vector is the length of the edge\n   */\n  public getEdge(): Vector {\n    const begin = this.begin;\n    const end = this.end;\n    return end.sub(begin);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this.begin;\n    const end = this.end;\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Returns the midpoint of the edge\n   */\n  public get midpoint(): Vector {\n    return this.begin.add(this.end).scale(0.5);\n  }\n\n  /**\n   * Flips the direction of the line segment\n   */\n  public flip(): Line {\n    return new Line(this.end, this.begin);\n  }\n\n  /**\n   * Find the perpendicular distance from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * @param point\n   */\n  public distanceToPoint(point: Vector) {\n    const x0 = point.x;\n    const y0 = point.y;\n\n    const l = this.getLength();\n\n    const dy = this.end.y - this.begin.y;\n    const dx = this.end.x - this.begin.x;\n    const distance = Math.abs(dy * x0 - dx * y0 + this.end.x * this.begin.y - this.end.y * this.begin.x) / l;\n    return distance;\n  }\n\n  /**\n   * Find the perpendicular line from the line to a point\n   * https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n   * (a - p) - ((a - p) * n)n\n   * a is a point on the line\n   * p is the arbitrary point above the line\n   * n is a unit vector in direction of the line\n   * @param point\n   */\n  public findVectorToPoint(point: Vector): Vector {\n    const aMinusP = this.begin.sub(point);\n    const n = this.getSlope();\n\n    return aMinusP.sub(n.scale(aMinusP.dot(n)));\n  }\n\n  /**\n   * Finds a point on the line given only an X or a Y value. Given an X value, the function returns\n   * a new point with the calculated Y value and vice-versa.\n   *\n   * @param x The known X value of the target point\n   * @param y The known Y value of the target point\n   * @returns A new point with the other calculated axis value\n   */\n  public findPoint(x: number = null, y: number = null): Vector {\n    const m = this.slope;\n    const b = this.intercept;\n\n    if (x !== null) {\n      return new Vector(x, m * x + b);\n    } else if (y !== null) {\n      return new Vector((y - b) / m, y);\n    } else {\n      throw new Error('You must provide an X or a Y value');\n    }\n  }\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(x: number, y: number, threshold?: number): boolean;\n\n  /**\n   * Whether or not the given point lies on this line. This method is precise by default\n   * meaning the point must lie exactly on the line. Adjust threshold to\n   * loosen the strictness of the check for floating-point calculations.\n   */\n  public hasPoint(v: Vector, threshold?: number): boolean;\n\n  /**\n   * @see http://stackoverflow.com/a/11908158/109458\n   */\n  public hasPoint(): boolean {\n    let currPoint: Vector;\n    let threshold = 0;\n\n    if (typeof arguments[0] === 'number' && typeof arguments[1] === 'number') {\n      currPoint = new Vector(arguments[0], arguments[1]);\n      threshold = arguments[2] || 0;\n    } else if (arguments[0] instanceof Vector) {\n      currPoint = arguments[0];\n      threshold = arguments[1] || 0;\n    } else {\n      throw 'Could not determine the arguments for Vector.hasPoint';\n    }\n\n    const dxc = currPoint.x - this.begin.x;\n    const dyc = currPoint.y - this.begin.y;\n\n    const dx1 = this.end.x - this.begin.x;\n    const dy1 = this.end.y - this.begin.y;\n\n    const cross = dxc * dy1 - dyc * dx1;\n\n    // check whether point lines on the line\n    if (Math.abs(cross) > threshold) {\n      return false;\n    }\n\n    // check whether point lies in-between start and end\n    if (Math.abs(dx1) >= Math.abs(dy1)) {\n      return dx1 > 0 ? this.begin.x <= currPoint.x && currPoint.x <= this.end.x : this.end.x <= currPoint.x && currPoint.x <= this.begin.x;\n    } else {\n      return dy1 > 0 ? this.begin.y <= currPoint.y && currPoint.y <= this.end.y : this.end.y <= currPoint.y && currPoint.y <= this.begin.y;\n    }\n  }\n}\n\n/**\n * A 1 dimensional projection on an axis, used to test overlaps\n */\nexport class Projection {\n  constructor(public min: number, public max: number) {}\n  public overlaps(projection: Projection): boolean {\n    return this.max > projection.min && projection.max > this.min;\n  }\n\n  public getOverlap(projection: Projection): number {\n    if (this.overlaps(projection)) {\n      if (this.max > projection.max) {\n        return projection.max - this.min;\n      } else {\n        return this.max - projection.min;\n      }\n    }\n    return 0;\n  }\n}\n\nexport class GlobalCoordinates {\n  public static fromPagePosition(x: number, y: number, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(pos: Vector, engine: Engine): GlobalCoordinates;\n  public static fromPagePosition(xOrPos: number | Vector, yOrEngine: number | Engine, engineOrUndefined?: Engine): GlobalCoordinates {\n    let pageX: number;\n    let pageY: number;\n    let pagePos: Vector;\n    let engine: Engine;\n\n    if (arguments.length === 3) {\n      pageX = <number>xOrPos;\n      pageY = <number>yOrEngine;\n      pagePos = new Vector(pageX, pageY);\n      engine = engineOrUndefined;\n    } else {\n      pagePos = <Vector>xOrPos;\n      pageX = pagePos.x;\n      pageY = pagePos.y;\n      engine = <Engine>yOrEngine;\n    }\n\n    const screenPos = engine.screen.pageToScreenCoordinates(pagePos);\n    const worldPos = engine.screen.screenToWorldCoordinates(screenPos);\n\n    return new GlobalCoordinates(worldPos, pagePos, screenPos);\n  }\n\n  constructor(public worldPos: Vector, public pagePos: Vector, public screenPos: Vector) {}\n}\n\n/**\n * Shorthand for creating new Vectors - returns a new Vector instance with the\n * provided X and Y components.\n *\n * @param x  X component of the Vector\n * @param y  Y component of the Vector\n */\nexport function vec(x: number, y: number): Vector {\n  return new Vector(x, y);\n}\n","import { Vector } from './Algebra';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * Possible collision resolution strategies\n *\n * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n *\n * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n * simulated physical interactions.\n */\nexport enum CollisionResolutionStrategy {\n  Box,\n  RigidBody\n}\n\n/**\n * Possible broadphase collision pair identification strategies\n *\n * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n */\nexport enum BroadphaseStrategy {\n  Naive,\n  DynamicAABBTree\n}\n\n/**\n * Possible numerical integrators for position and velocity\n */\nexport enum Integrator {\n  Euler\n}\n\n/**\n * The [[Physics]] object is the global configuration object for all Excalibur physics.\n */\n/* istanbul ignore next */\nexport class Physics {\n  /**\n   * Global acceleration that is applied to all vanilla actors that have a [[CollisionType.Active|active]] collision type.\n   * Global acceleration won't effect [[Label|labels]], [[ScreenElement|ui actors]], or [[Trigger|triggers]] in Excalibur.\n   *\n   * This is a great way to globally simulate effects like gravity.\n   */\n  public static acc = new Vector(0, 0);\n\n  /**\n   * Globally switches all Excalibur physics behavior on or off.\n   */\n  public static enabled = true;\n\n  /**\n   * Gets or sets the number of collision passes for Excalibur to perform on physics bodies.\n   *\n   * Reducing collision passes may cause things not to collide as expected in your game, but may increase performance.\n   *\n   * More passes can improve the visual quality of collisions when many objects are on the screen. This can reduce jitter, improve the\n   * collision resolution of fast move objects, or the stability of large numbers of objects stacked together.\n   *\n   * Fewer passes will improve the performance of the game at the cost of collision quality, more passes will improve quality at the\n   * cost of performance.\n   *\n   * The default is set to 5 passes which is a good start.\n   */\n  public static collisionPasses = 5;\n\n  /**\n   * Gets or sets the broadphase pair identification strategy.\n   *\n   * The default strategy is [[BroadphaseStrategy.DynamicAABBTree]] which uses a binary tree of axis-aligned bounding boxes to identify\n   * potential collision pairs which is O(nlog(n)) faster. The other possible strategy is the [[BroadphaseStrategy.Naive]] strategy\n   * which loops over every object for every object in the scene to identify collision pairs which is O(n^2) slower.\n   */\n  public static broadphaseStrategy: BroadphaseStrategy = BroadphaseStrategy.DynamicAABBTree;\n\n  /**\n   * Globally switches the debug information for the broadphase strategy\n   */\n  public static broadphaseDebug: boolean = false;\n  /**\n   * Show the normals as a result of collision on the screen.\n   */\n  public static showCollisionNormals: boolean = false;\n  /**\n   * Show the position, velocity, and acceleration as graphical vectors.\n   */\n  public static showMotionVectors: boolean = false;\n  /**\n   * Show the axis-aligned bounding boxes of the collision bodies on the screen.\n   */\n  public static showBounds: boolean = false;\n  /**\n   * Show the bounding collision area shapes\n   */\n  public static showArea: boolean = false;\n  /**\n   * Show points of collision interpreted by excalibur as a result of collision.\n   */\n  public static showContacts: boolean = false;\n  /**\n   * Show the surface normals of the collision areas.\n   */\n  public static showNormals: boolean = false;\n  /**\n   * Gets or sets the global collision resolution strategy (narrowphase).\n   *\n   * The default is [[CollisionResolutionStrategy.Box]] which performs simple axis aligned arcade style physics.\n   *\n   * More advanced rigid body physics are enabled by setting [[CollisionResolutionStrategy.RigidBody]] which allows for complicated\n   * simulated physical interactions.\n   */\n  public static collisionResolutionStrategy: CollisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  /**\n   * The default mass to use if none is specified\n   */\n  public static defaultMass: number = 10;\n  /**\n   * Gets or sets the position and velocity positional integrator, currently only Euler is supported.\n   */\n  public static integrator: Integrator = Integrator.Euler;\n  /**\n   * Number of steps to use in integration. A higher number improves the positional accuracy over time. This can be useful to increase\n   * if you have fast moving objects in your simulation or you have a large number of objects and need to increase stability.\n   */\n  public static integrationSteps = 1;\n  /**\n   * Gets or sets whether rotation is allowed in a RigidBody collision resolution\n   */\n  public static allowRigidBodyRotation = true;\n\n  /**\n   * Configures Excalibur to use box physics. Box physics which performs simple axis aligned arcade style physics.\n   */\n  public static useBoxPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.Box;\n  }\n\n  /**\n   * Configures Excalibur to use rigid body physics. Rigid body physics allows for complicated\n   * simulated physical interactions.\n   */\n  public static useRigidBodyPhysics(): void {\n    Physics.collisionResolutionStrategy = CollisionResolutionStrategy.RigidBody;\n  }\n\n  /**\n   * Small value to help collision passes settle themselves after the narrowphase.\n   */\n  public static collisionShift = 0.001;\n\n  /**\n   * Factor to add to the RigidBody BoundingBox, bounding box (dimensions += vel * dynamicTreeVelocityMultiplier);\n   */\n  public static dynamicTreeVelocityMultiplier = 2;\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'dynamicTreeVelocityMultiplier'\n  })\n  public static get dynamicTreeVelocityMultiplyer() {\n    return Physics.dynamicTreeVelocityMultiplier;\n  }\n\n  public static set dynamicTreeVelocityMultiplyer(value: number) {\n    Physics.dynamicTreeVelocityMultiplier = value;\n  }\n\n  /**\n   * Pad RigidBody BoundingBox by a constant amount\n   */\n  public static boundsPadding = 5;\n\n  /**\n   * Surface epsilon is used to help deal with surface penetration\n   */\n  public static surfaceEpsilon = 0.1;\n\n  /**\n   * Enable fast moving body checking, this enables checking for collision pairs via raycast for fast moving objects to prevent\n   * bodies from tunneling through one another.\n   */\n  public static checkForFastBodies = true;\n\n  /**\n   * Disable minimum fast moving body raycast, by default if ex.Physics.checkForFastBodies = true Excalibur will only check if the\n   * body is moving at least half of its minimum dimension in an update. If ex.Physics.disableMinimumSpeedForFastBody is set to true,\n   * Excalibur will always perform the fast body raycast regardless of speed.\n   */\n  public static disableMinimumSpeedForFastBody = false;\n}\n","import { Scene } from './Scene';\nimport { Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { Trigger } from './Trigger';\nimport { FrameStats } from './Debug';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Side } from './Collision/Side';\nimport * as Input from './Input/Index';\nimport { Pair } from './index';\nimport { Collider } from './Collision/Collider';\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { OnInitialize, OnPreUpdate, OnPostUpdate } from './Interfaces/LifecycleEvents';\n\nexport enum EventTypes {\n  Kill = 'kill',\n  PreKill = 'prekill',\n  PostKill = 'postkill',\n\n  PreDraw = 'predraw',\n  PostDraw = 'postdraw',\n\n  PreDebugDraw = 'predebugdraw',\n  PostDebugDraw = 'postdebugdraw',\n\n  PreUpdate = 'preupdate',\n  PostUpdate = 'postupdate',\n\n  PreFrame = 'preframe',\n  PostFrame = 'postframe',\n\n  PreCollision = 'precollision',\n  CollisionStart = 'collisionstart',\n  CollisionEnd = 'collisionend',\n  PostCollision = 'postcollision',\n\n  Initialize = 'initialize',\n  Activate = 'activate',\n  Deactivate = 'deactivate',\n\n  ExitViewport = 'exitviewport',\n  EnterViewport = 'enterviewport',\n\n  ExitTrigger = 'exit',\n  EnterTrigger = 'enter',\n\n  Connect = 'connect',\n  Disconnect = 'disconnect',\n  Button = 'button',\n  Axis = 'axis',\n\n  Subscribe = 'subscribe',\n  Unsubscribe = 'unsubscribe',\n\n  Visible = 'visible',\n  Hidden = 'hidden',\n  Start = 'start',\n  Stop = 'stop',\n\n  PointerUp = 'pointerup',\n  PointerDown = 'pointerdown',\n  PointerMove = 'pointermove',\n  PointerEnter = 'pointerenter',\n  PointerLeave = 'pointerleave',\n  PointerCancel = 'pointercancel',\n  PointerWheel = 'pointerwheel',\n\n  Up = 'up',\n  Down = 'down',\n  Move = 'move',\n  Enter = 'enter',\n  Leave = 'leave',\n  Cancel = 'cancel',\n  Wheel = 'wheel',\n\n  Press = 'press',\n  Release = 'release',\n  Hold = 'hold',\n\n  PointerDragStart = 'pointerdragstart',\n  PointerDragEnd = 'pointerdragend',\n  PointerDragEnter = 'pointerdragenter',\n  PointerDragLeave = 'pointerdragleave',\n  PointerDragMove = 'pointerdragmove'\n}\n\n/* istanbul ignore next */\n/* compiler only: these are internal to lib */\nexport type kill = 'kill';\nexport type prekill = 'prekill';\nexport type postkill = 'postkill';\n\nexport type predraw = 'predraw';\nexport type postdraw = 'postdraw';\n\nexport type predebugdraw = 'predebugdraw';\nexport type postdebugdraw = 'postdebugdraw';\n\nexport type preupdate = 'preupdate';\nexport type postupdate = 'postupdate';\n\nexport type preframe = 'preframe';\nexport type postframe = 'postframe';\n\nexport type precollision = 'precollision';\nexport type collisionstart = 'collisionstart';\nexport type collisionend = 'collisionend';\nexport type postcollision = 'postcollision';\n\nexport type initialize = 'initialize';\nexport type activate = 'activate';\nexport type deactivate = 'deactivate';\n\nexport type exitviewport = 'exitviewport';\nexport type enterviewport = 'enterviewport';\n\nexport type exittrigger = 'exit';\nexport type entertrigger = 'enter';\n\nexport type connect = 'connect';\nexport type disconnect = 'disconnect';\nexport type button = 'button';\nexport type axis = 'axis';\n\nexport type subscribe = 'subscribe';\nexport type unsubscribe = 'unsubscribe';\n\nexport type visible = 'visible';\nexport type hidden = 'hidden';\nexport type start = 'start';\nexport type stop = 'stop';\n\nexport type pointerup = 'pointerup';\nexport type pointerdown = 'pointerdown';\nexport type pointermove = 'pointermove';\nexport type pointerenter = 'pointerenter';\nexport type pointerleave = 'pointerleave';\nexport type pointercancel = 'pointercancel';\nexport type pointerwheel = 'pointerwheel';\n\nexport type up = 'up';\nexport type down = 'down';\nexport type move = 'move';\nexport type enter = 'enter';\nexport type leave = 'leave';\nexport type cancel = 'cancel';\nexport type wheel = 'wheel';\n\nexport type press = 'press';\nexport type release = 'release';\nexport type hold = 'hold';\n\nexport type pointerdragstart = 'pointerdragstart';\nexport type pointerdragend = 'pointerdragend';\nexport type pointerdragenter = 'pointerdragenter';\nexport type pointerdragleave = 'pointerdragleave';\nexport type pointerdragmove = 'pointerdragmove';\n\n/**\n * Base event type in Excalibur that all other event types derive from. Not all event types are thrown on all Excalibur game objects,\n * some events are unique to a type, others are not.\n *\n */\nexport class GameEvent<T, U = T> {\n  /**\n   * Target object for this event.\n   */\n  public target: T;\n\n  /**\n   * Other target object for this event\n   */\n  public other: U | null;\n\n  /**\n   * If set to false, prevents event from propagating to other actors. If true it will be propagated\n   * to all actors that apply.\n   */\n  public get bubbles(): boolean {\n    return this._bubbles;\n  }\n\n  public set bubbles(value: boolean) {\n    this._bubbles = value;\n  }\n\n  private _bubbles: boolean = true;\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation() {\n    this.bubbles = false;\n  }\n}\n\n/**\n * The 'kill' event is emitted on actors when it is killed. The target is the actor that was killed.\n */\nexport class KillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'prekill' event is emitted directly before an actor is killed.\n */\nexport class PreKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'postkill' event is emitted directly after the actor is killed.\n */\nexport class PostKillEvent extends GameEvent<Actor> {\n  constructor(public target: Actor) {\n    super();\n  }\n}\n\n/**\n * The 'start' event is emitted on engine when has started and is ready for interaction.\n */\nexport class GameStartEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'stop' event is emitted on engine when has been stopped and will no longer take input, update or draw.\n */\nexport class GameStopEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * The 'predraw' event is emitted on actors, scenes, and engine before drawing starts. Actors' predraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PreDrawEvent extends GameEvent<Entity | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Entity | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'postdraw' event is emitted on actors, scenes, and engine after drawing finishes. Actors' postdraw happens inside their graphics\n * transform so that all drawing takes place with the actor as the origin.\n *\n */\nexport class PostDrawEvent extends GameEvent<Entity | Scene | Engine | TileMap> {\n  constructor(public ctx: CanvasRenderingContext2D, public delta: number, public target: Entity | Scene | Engine | TileMap) {\n    super();\n  }\n}\n\n/**\n * The 'predebugdraw' event is emitted on actors, scenes, and engine before debug drawing starts.\n */\nexport class PreDebugDrawEvent extends GameEvent<Entity | Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Entity | Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'postdebugdraw' event is emitted on actors, scenes, and engine after debug drawing starts.\n */\nexport class PostDebugDrawEvent extends GameEvent<Entity | Actor | Scene | Engine> {\n  constructor(public ctx: CanvasRenderingContext2D, public target: Entity | Actor | Scene | Engine) {\n    super();\n  }\n}\n\n/**\n * The 'preupdate' event is emitted on actors, scenes, camera, and engine before the update starts.\n */\nexport class PreUpdateEvent<T extends OnPreUpdate = Entity> extends GameEvent<T> {\n  constructor(public engine: Engine, public delta: number, public target: T) {\n    super();\n  }\n}\n\n/**\n * The 'postupdate' event is emitted on actors, scenes, camera, and engine after the update ends.\n */\nexport class PostUpdateEvent<T extends OnPostUpdate = Entity> extends GameEvent<T> {\n  constructor(public engine: Engine, public delta: number, public target: T) {\n    super();\n  }\n}\n\n/**\n * The 'preframe' event is emitted on the engine, before the frame begins.\n */\nexport class PreFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public prevStats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * The 'postframe' event is emitted on the engine, after a frame ends.\n */\nexport class PostFrameEvent extends GameEvent<Engine> {\n  constructor(public engine: Engine, public stats: FrameStats) {\n    super();\n    this.target = engine;\n  }\n}\n\n/**\n * Event received when a gamepad is connected to Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadConnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Event received when a gamepad is disconnected from Excalibur. [[Gamepads]] receives this event.\n */\nexport class GamepadDisconnectEvent extends GameEvent<Input.Gamepad> {\n  constructor(public index: number, public gamepad: Input.Gamepad) {\n    super();\n    this.target = gamepad;\n  }\n}\n\n/**\n * Gamepad button event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadButtonEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param button  The Gamepad button\n   * @param value   A numeric value between 0 and 1\n   */\n  constructor(public button: Input.Buttons, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Gamepad axis event. See [[Gamepads]] for information on responding to controller input. [[Gamepad]] instances receive this event;\n */\nexport class GamepadAxisEvent extends GameEvent<Input.Gamepad> {\n  /**\n   * @param axis  The Gamepad axis\n   * @param value A numeric value between -1 and 1\n   */\n  constructor(public axis: Input.Axes, public value: number, public target: Input.Gamepad) {\n    super();\n  }\n}\n\n/**\n * Subscribe event thrown when handlers for events other than subscribe are added. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class SubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Unsubscribe event thrown when handlers for events other than unsubscribe are removed. Meta event that is received by\n * [[EventDispatcher|event dispatchers]].\n */\nexport class UnsubscribeEvent<T> extends GameEvent<T> {\n  constructor(public topic: string, public handler: (event: GameEvent<T>) => void) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is visible on a screen.\n */\nexport class VisibleEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event received by the [[Engine]] when the browser window is hidden from all screens.\n */\nexport class HiddenEvent extends GameEvent<Engine> {\n  constructor(public target: Engine) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision will occur this frame if it resolves\n */\nexport class PreCollisionEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that will collided with the current actor\n   * @param side          The side that will be collided with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor|actor]] when a collision has been resolved (body reacted) this frame\n */\nexport class PostCollisionEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   * @param actor         The actor the event was thrown on\n   * @param other         The actor that did collide with the current actor\n   * @param side          The side that did collide with the current actor\n   * @param intersection  Intersection vector\n   */\n  constructor(actor: T, public other: T, public side: Side, public intersection: Vector) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown the first time an [[Actor|actor]] collides with another, after an actor is in contact normal collision events are fired.\n */\nexport class CollisionStartEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   *\n   * @param actor\n   * @param other\n   * @param pair\n   */\n  constructor(actor: T, public other: T, public pair: Pair) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown when the [[Actor|actor]] is no longer colliding with another\n */\nexport class CollisionEndEvent<T extends Collider | Entity = Actor> extends GameEvent<T> {\n  /**\n   *\n   */\n  constructor(actor: T, public other: T) {\n    super();\n    this.target = actor;\n  }\n\n  public get actor() {\n    return this.target;\n  }\n\n  public set actor(actor: T) {\n    this.target = actor;\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] and a [[Scene]] only once before the first update call\n */\nexport class InitializeEvent<T extends OnInitialize = Entity> extends GameEvent<T> {\n  /**\n   * @param engine  The reference to the current engine\n   */\n  constructor(public engine: Engine, public target: T) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on activation\n */\nexport class ActivateEvent extends GameEvent<Scene> {\n  /**\n   * @param oldScene  The reference to the old scene\n   */\n  constructor(public oldScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on a [[Scene]] on deactivation\n */\nexport class DeactivateEvent extends GameEvent<Scene> {\n  /**\n   * @param newScene  The reference to the new scene\n   */\n  constructor(public newScene: Scene, public target: Scene) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class ExitViewPortEvent extends GameEvent<Entity> {\n  constructor(public target: Entity) {\n    super();\n  }\n}\n\n/**\n * Event thrown on an [[Actor]] when it completely leaves the screen.\n */\nexport class EnterViewPortEvent extends GameEvent<Entity> {\n  constructor(public target: Entity) {\n    super();\n  }\n}\n\nexport class EnterTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n\nexport class ExitTriggerEvent extends GameEvent<Actor> {\n  constructor(public target: Trigger, public actor: Actor) {\n    super();\n  }\n}\n","/**\n * An enum that describes the types of collisions actors can participate in\n */\nexport enum CollisionType {\n  /**\n   * Actors with the `PreventCollision` setting do not participate in any\n   * collisions and do not raise collision events.\n   */\n  PreventCollision = 'PreventCollision',\n  /**\n   * Actors with the `Passive` setting only raise collision events, but are not\n   * influenced or moved by other actors and do not influence or move other actors.\n   */\n  Passive = 'Passive',\n  /**\n   * Actors with the `Active` setting raise collision events and participate\n   * in collisions with other actors and will be push or moved by actors sharing\n   * the `Active` or `Fixed` setting.\n   */\n  Active = 'Active',\n  /**\n   * Actors with the `Fixed` setting raise collision events and participate in\n   * collisions with other actors. Actors with the `Fixed` setting will not be\n   * pushed or moved by other actors sharing the `Fixed`. Think of Fixed\n   * actors as \"immovable/unstoppable\" objects. If two `Fixed` actors meet they will\n   * not be pushed or moved by each other, they will not interact except to throw\n   * collision events.\n   */\n  Fixed = 'Fixed'\n}\n","import { obsolete } from '../Util/Decorators';\n\n/**\n * Provides standard colors (e.g. [[Color.Black]])\n * but you can also create custom colors using RGB, HSL, or Hex. Also provides\n * useful color operations like [[Color.lighten]], [[Color.darken]], and more.\n */\nexport class Color {\n  /**\n   * Red channel\n   */\n  public r: number;\n  /**\n   * Green channel\n   */\n  public g: number;\n  /**\n   * Blue channel\n   */\n  public b: number;\n  /**\n   * Alpha channel (between 0 and 1)\n   */\n  public a: number;\n\n  /**\n   * Hue\n   */\n  public h: number;\n  /**\n   * Saturation\n   */\n  public s: number;\n  /**\n   * Lightness\n   */\n  public l: number;\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  constructor(r: number, g: number, b: number, a?: number) {\n    this.r = r;\n    this.g = g;\n    this.b = b;\n    this.a = a != null ? a : 1;\n  }\n\n  /**\n   * Creates a new instance of Color from an r, g, b, a\n   *\n   * @param r  The red component of color (0-255)\n   * @param g  The green component of color (0-255)\n   * @param b  The blue component of color (0-255)\n   * @param a  The alpha component of color (0-1.0)\n   */\n  public static fromRGB(r: number, g: number, b: number, a?: number): Color {\n    return new Color(r, g, b, a);\n  }\n\n  /**\n   * Creates a new instance of Color from a rgb string\n   *\n   * @param string  CSS color string of the form rgba(255, 255, 255, 1) or rgb(255, 255, 255)\n   */\n  public static fromRGBString(string: string): Color {\n    const rgbaRegEx: RegExp = /^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)/i;\n    let match = null;\n    if ((match = string.match(rgbaRegEx))) {\n      const r = parseInt(match[1], 10);\n      const g = parseInt(match[2], 10);\n      const b = parseInt(match[3], 10);\n      let a = 1;\n      if (match[4]) {\n        a = parseFloat(match[4]);\n      }\n      return new Color(r, g, b, a);\n    } else {\n      throw new Error('Invalid rgb/a string: ' + string);\n    }\n  }\n\n  /**\n   * Creates a new instance of Color from a hex string\n   *\n   * @param hex  CSS color string of the form #ffffff, the alpha component is optional\n   */\n  public static fromHex(hex: string): Color {\n    const hexRegEx: RegExp = /^#?([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i;\n    let match = null;\n    if ((match = hex.match(hexRegEx))) {\n      const r = parseInt(match[1], 16);\n      const g = parseInt(match[2], 16);\n      const b = parseInt(match[3], 16);\n      let a = 1;\n      if (match[4]) {\n        a = parseInt(match[4], 16) / 255;\n      }\n      return new Color(r, g, b, a);\n    } else {\n      throw new Error('Invalid hex string: ' + hex);\n    }\n  }\n\n  /**\n   * Creates a new instance of Color from hsla values\n   *\n   * @param h  Hue is represented [0-1]\n   * @param s  Saturation is represented [0-1]\n   * @param l  Luminance is represented [0-1]\n   * @param a  Alpha is represented [0-1]\n   */\n  public static fromHSL(h: number, s: number, l: number, a: number = 1.0): Color {\n    const temp = new HSLColor(h, s, l, a);\n    return temp.toRGBA();\n  }\n\n  /**\n   * Lightens the current color by a specified amount\n   *\n   * @param factor  The amount to lighten by [0-1]\n   */\n  public lighten(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l += (1 - temp.l) * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Darkens the current color by a specified amount\n   *\n   * @param factor  The amount to darken by [0-1]\n   */\n  public darken(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.l -= temp.l * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Saturates the current color by a specified amount\n   *\n   * @param factor  The amount to saturate by [0-1]\n   */\n  public saturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s += temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Desaturates the current color by a specified amount\n   *\n   * @param factor  The amount to desaturate by [0-1]\n   */\n  public desaturate(factor: number = 0.1): Color {\n    const temp = HSLColor.fromRGBA(this.r, this.g, this.b, this.a);\n    temp.s -= temp.s * factor;\n    return temp.toRGBA();\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   *\n   * @param color  The other color\n   */\n  public multiply(color: Color): Color {\n    const newR = (((color.r / 255) * this.r) / 255) * 255;\n    const newG = (((color.g / 255) * this.g) / 255) * 255;\n    const newB = (((color.b / 255) * this.b) / 255) * 255;\n    const newA = color.a * this.a;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  /**\n   * Multiplies a color by another, results in a darker color\n   * @param color\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({ message: 'Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0' })\n  public mulitiply(color: Color): Color {\n    return this.multiply(color);\n  }\n\n  /**\n   * Screens a color by another, results in a lighter color\n   *\n   * @param color  The other color\n   */\n  public screen(color: Color): Color {\n    const color1 = color.invert();\n    const color2 = color.invert();\n    return color1.multiply(color2).invert();\n  }\n\n  /**\n   * Inverts the current color\n   */\n  public invert(): Color {\n    return new Color(255 - this.r, 255 - this.g, 255 - this.b, 1.0 - this.a);\n  }\n\n  /**\n   * Averages the current color with another\n   *\n   * @param color  The other color\n   */\n  public average(color: Color): Color {\n    const newR = (color.r + this.r) / 2;\n    const newG = (color.g + this.g) / 2;\n    const newB = (color.b + this.b) / 2;\n    const newA = (color.a + this.a) / 2;\n    return new Color(newR, newG, newB, newA);\n  }\n\n  public equal(color: Color): boolean {\n    return this.toString() === color.toString();\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   *\n   * @param format Color representation, accepts: rgb, hsl, or hex\n   */\n  public toString(format: 'rgb' | 'hsl' | 'hex' = 'rgb') {\n    switch (format) {\n      case 'rgb':\n        return this.toRGBA();\n      case 'hsl':\n        return this.toHSLA();\n      case 'hex':\n        return this.toHex();\n      default:\n        throw new Error('Invalid Color format');\n    }\n  }\n\n  /**\n   * Returns Hex Value of a color component\n   * @param c color component\n   * @see https://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n   */\n  private _componentToHex(c: number) {\n    const hex = c.toString(16);\n    return hex.length === 1 ? '0' + hex : hex;\n  }\n\n  /**\n   * Return Hex representation of a color.\n   */\n  public toHex() {\n    return '#' + this._componentToHex(this.r) + this._componentToHex(this.g) + this._componentToHex(this.b);\n  }\n\n  /**\n   * Return RGBA representation of a color.\n   */\n  public toRGBA() {\n    const result = String(this.r.toFixed(0)) + ', ' + String(this.g.toFixed(0)) + ', ' + String(this.b.toFixed(0));\n    if (this.a !== undefined || this.a !== null) {\n      return 'rgba(' + result + ', ' + String(this.a) + ')';\n    }\n    return 'rgb(' + result + ')';\n  }\n\n  /**\n   * Return HSLA representation of a color.\n   */\n  public toHSLA() {\n    return HSLColor.fromRGBA(this.r, this.g, this.b, this.a).toString();\n  }\n\n  /**\n   * Returns a CSS string representation of a color.\n   */\n  public fillStyle() {\n    return this.toString();\n  }\n\n  /**\n   * Returns a clone of the current color.\n   */\n  public clone(): Color {\n    return new Color(this.r, this.g, this.b, this.a);\n  }\n\n  /**\n   * Black (#000000)\n   */\n  public static get Black(): Color {\n    return Color.fromHex('#000000');\n  }\n\n  /**\n   * White (#FFFFFF)\n   */\n  public static get White(): Color {\n    return Color.fromHex('#FFFFFF');\n  }\n\n  /**\n   * Gray (#808080)\n   */\n  public static get Gray(): Color {\n    return Color.fromHex('#808080');\n  }\n\n  /**\n   * Light gray (#D3D3D3)\n   */\n  public static get LightGray(): Color {\n    return Color.fromHex('#D3D3D3');\n  }\n\n  /**\n   * Dark gray (#A9A9A9)\n   */\n  public static get DarkGray(): Color {\n    return Color.fromHex('#A9A9A9');\n  }\n\n  /**\n   * Yellow (#FFFF00)\n   */\n  public static get Yellow(): Color {\n    return Color.fromHex('#FFFF00');\n  }\n\n  /**\n   * Orange (#FFA500)\n   */\n  public static get Orange(): Color {\n    return Color.fromHex('#FFA500');\n  }\n\n  /**\n   * Red (#FF0000)\n   */\n  public static get Red(): Color {\n    return Color.fromHex('#FF0000');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   */\n  public static get Vermilion(): Color {\n    return Color.fromHex('#FF5B31');\n  }\n\n  /**\n   * Vermilion (#FF5B31)\n   * @obsolete Alias for incorrect spelling used in older versions, use multiply instead, will be removed in v0.25.0\n   */\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions',\n    alternateMethod: 'Vermilion'\n  })\n  public static get Vermillion(): Color {\n    return Color.Vermilion;\n  }\n\n  /**\n   * Rose (#FF007F)\n   */\n  public static get Rose(): Color {\n    return Color.fromHex('#FF007F');\n  }\n\n  /**\n   * Magenta (#FF00FF)\n   */\n  public static get Magenta(): Color {\n    return Color.fromHex('#FF00FF');\n  }\n\n  /**\n   * Violet (#7F00FF)\n   */\n  public static get Violet(): Color {\n    return Color.fromHex('#7F00FF');\n  }\n\n  /**\n   * Blue (#0000FF)\n   */\n  public static get Blue(): Color {\n    return Color.fromHex('#0000FF');\n  }\n\n  /**\n   * Azure (#007FFF)\n   */\n  public static get Azure(): Color {\n    return Color.fromHex('#007FFF');\n  }\n\n  /**\n   * Cyan (#00FFFF)\n   */\n  public static get Cyan(): Color {\n    return Color.fromHex('#00FFFF');\n  }\n\n  /**\n   * Viridian (#59978F)\n   */\n  public static get Viridian(): Color {\n    return Color.fromHex('#59978F');\n  }\n\n  /**\n   * Green (#00FF00)\n   */\n  public static get Green(): Color {\n    return Color.fromHex('#00FF00');\n  }\n\n  /**\n   * Chartreuse (#7FFF00)\n   */\n  public static get Chartreuse(): Color {\n    return Color.fromHex('#7FFF00');\n  }\n\n  /**\n   * Transparent (#FFFFFF00)\n   */\n  public static get Transparent(): Color {\n    return Color.fromHex('#FFFFFF00');\n  }\n\n  /**\n   * ExcaliburBlue (#176BAA)\n   */\n  public static get ExcaliburBlue(): Color {\n    return Color.fromHex('#176BAA');\n  }\n}\n\n/**\n * Internal HSL Color representation\n *\n * http://en.wikipedia.org/wiki/HSL_and_HSV\n * http://axonflux.com/handy-rgb-to-hsl-and-rgb-to-hsv-color-model-c\n */\nclass HSLColor {\n  constructor(public h: number, public s: number, public l: number, public a: number) {}\n\n  public static hue2rgb(p: number, q: number, t: number): number {\n    if (t < 0) {\n      t += 1;\n    }\n    if (t > 1) {\n      t -= 1;\n    }\n    if (t < 1 / 6) {\n      return p + (q - p) * 6 * t;\n    }\n    if (t < 1 / 2) {\n      return q;\n    }\n    if (t < 2 / 3) {\n      return p + (q - p) * (2 / 3 - t) * 6;\n    }\n    return p;\n  }\n\n  public static fromRGBA(r: number, g: number, b: number, a: number): HSLColor {\n    r /= 255;\n    g /= 255;\n    b /= 255;\n    const max = Math.max(r, g, b),\n      min = Math.min(r, g, b);\n    let h, s;\n    const l = (max + min) / 2;\n\n    if (max === min) {\n      h = s = 0; // achromatic\n    } else {\n      const d = max - min;\n      s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n      switch (max) {\n        case r:\n          h = (g - b) / d + (g < b ? 6 : 0);\n          break;\n        case g:\n          h = (b - r) / d + 2;\n          break;\n        case b:\n          h = (r - g) / d + 4;\n          break;\n      }\n      h /= 6;\n    }\n\n    return new HSLColor(h, s, l, a);\n  }\n\n  public toRGBA(): Color {\n    let r: number, g: number, b: number;\n\n    if (this.s === 0) {\n      r = g = b = this.l; // achromatic\n    } else {\n      const q = this.l < 0.5 ? this.l * (1 + this.s) : this.l + this.s - this.l * this.s;\n      const p = 2 * this.l - q;\n      r = HSLColor.hue2rgb(p, q, this.h + 1 / 3);\n      g = HSLColor.hue2rgb(p, q, this.h);\n      b = HSLColor.hue2rgb(p, q, this.h - 1 / 3);\n    }\n\n    return new Color(r * 255, g * 255, b * 255, this.a);\n  }\n\n  public toString(): string {\n    const h = this.h.toFixed(0),\n      s = this.s.toFixed(0),\n      l = this.l.toFixed(0),\n      a = this.a.toFixed(0);\n    return `hsla(${h}, ${s}, ${l}, ${a})`;\n  }\n}\n","import { Body } from './Body';\nimport { Vector } from '../Algebra';\nimport { Physics, CollisionResolutionStrategy } from '../Physics';\nimport { PostCollisionEvent, PreCollisionEvent } from '../Events';\nimport * as Util from '../Util/Util';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Collision contacts are used internally by Excalibur to resolve collision between colliders. This\n * Pair prevents collisions from being evaluated more than one time\n */\nexport class CollisionContact {\n  /**\n   * The id of this collision contact\n   */\n  id: string;\n  /**\n   * The first collider in the collision\n   */\n  colliderA: Collider;\n  /**\n   * The second collider in the collision\n   */\n  colliderB: Collider;\n  /**\n   * The minimum translation vector to resolve penetration, pointing away from colliderA\n   */\n  mtv: Vector;\n  /**\n   * The point of collision shared between colliderA and colliderB\n   */\n  point: Vector;\n  /**\n   * The collision normal, pointing away from colliderA\n   */\n  normal: Vector;\n\n  constructor(colliderA: Collider, colliderB: Collider, mtv: Vector, point: Vector, normal: Vector) {\n    this.colliderA = colliderA;\n    this.colliderB = colliderB;\n    this.mtv = mtv;\n    this.point = point;\n    this.normal = normal;\n  }\n\n  resolve(strategy: CollisionResolutionStrategy) {\n    if (strategy === CollisionResolutionStrategy.RigidBody) {\n      this._resolveRigidBodyCollision();\n    } else if (strategy === CollisionResolutionStrategy.Box) {\n      this._resolveBoxCollision();\n    } else {\n      throw new Error('Unknown collision resolution strategy');\n    }\n  }\n\n  private _applyBoxImpulse(colliderA: Collider, colliderB: Collider, mtv: Vector) {\n    if (colliderA.type === CollisionType.Active && colliderB.type !== CollisionType.Passive) {\n      // Resolve overlaps\n      if (colliderA.type === CollisionType.Active && colliderB.type === CollisionType.Active) {\n        // split overlaps if both are Active\n        mtv = mtv.scale(0.5);\n      }\n      // Apply mtv\n      colliderA.body.pos = colliderA.body.pos.add(mtv);\n\n      const mtvDir = mtv.normalize();\n\n      // only adjust if velocity is opposite\n      if (mtvDir.dot(colliderA.body.vel) < 0) {\n        // Cancel out velocity in direction of mtv\n        const velAdj = mtvDir.scale(mtvDir.dot(colliderA.body.vel.negate()));\n\n        colliderA.body.vel = colliderA.body.vel.add(velAdj);\n      }\n\n      colliderA.emit('postcollision', new PostCollisionEvent(colliderA, colliderB, Util.getSideFromDirection(mtv), mtv));\n    }\n  }\n\n  private _resolveBoxCollision() {\n    const side = Util.getSideFromDirection(this.mtv);\n    const mtv = this.mtv.negate();\n    // Publish collision events on both participants\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, mtv));\n    this.colliderB.emit('precollision', new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), mtv.negate()));\n\n    this._applyBoxImpulse(this.colliderA, this.colliderB, mtv);\n    this._applyBoxImpulse(this.colliderB, this.colliderA, mtv.negate());\n  }\n\n  private _resolveRigidBodyCollision() {\n    // perform collision on bounding areas\n    const bodyA: Body = this.colliderA.body;\n    const bodyB: Body = this.colliderB.body;\n    const mtv = this.mtv; // normal pointing away from colliderA\n    let normal = this.normal; // normal pointing away from colliderA\n    if (bodyA === bodyB) {\n      // sanity check for existing pairs\n      return;\n    }\n\n    // Publish collision events on both participants\n    const side = Util.getSideFromDirection(this.mtv);\n    this.colliderA.emit('precollision', new PreCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'precollision',\n      new PreCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n\n    // If any of the participants are passive then short circuit\n    if (this.colliderA.type === CollisionType.Passive || this.colliderB.type === CollisionType.Passive) {\n      return;\n    }\n\n    const invMassA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.mass;\n    const invMassB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.mass;\n\n    const invMoiA = this.colliderA.type === CollisionType.Fixed ? 0 : 1 / this.colliderA.inertia;\n    const invMoiB = this.colliderB.type === CollisionType.Fixed ? 0 : 1 / this.colliderB.inertia;\n\n    // average restitution more realistic\n    const coefRestitution = Math.min(this.colliderA.bounciness, this.colliderB.bounciness);\n\n    const coefFriction = Math.min(this.colliderA.friction, this.colliderB.friction);\n\n    normal = normal.normalize();\n    const tangent = normal.normal().normalize();\n\n    const ra = this.point.sub(this.colliderA.center); // point relative to colliderA position\n    const rb = this.point.sub(this.colliderB.center); /// point relative to colliderB\n\n    // Relative velocity in linear terms\n    // Angular to linear velocity formula -> omega = v/r\n    const rv = bodyB.vel.add(rb.cross(-bodyB.rx)).sub(bodyA.vel.sub(ra.cross(bodyA.rx)));\n    const rvNormal = rv.dot(normal);\n    const rvTangent = rv.dot(tangent);\n\n    const raTangent = ra.dot(tangent);\n    const raNormal = ra.dot(normal);\n\n    const rbTangent = rb.dot(tangent);\n    const rbNormal = rb.dot(normal);\n\n    // If objects are moving away ignore\n    if (rvNormal > 0) {\n      return;\n    }\n\n    // Collision impulse formula from Chris Hecker\n    // https://en.wikipedia.org/wiki/Collision_response\n    const impulse =\n      -((1 + coefRestitution) * rvNormal) / (invMassA + invMassB + invMoiA * raTangent * raTangent + invMoiB * rbTangent * rbTangent);\n\n    if (this.colliderA.type === CollisionType.Fixed) {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n      }\n      bodyB.addMtv(mtv);\n    } else if (this.colliderB.type === CollisionType.Fixed) {\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n      if (Physics.allowRigidBodyRotation) {\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n      bodyA.addMtv(mtv.negate());\n    } else {\n      bodyB.vel = bodyB.vel.add(normal.scale(impulse * invMassB));\n      bodyA.vel = bodyA.vel.sub(normal.scale(impulse * invMassA));\n\n      if (Physics.allowRigidBodyRotation) {\n        bodyB.rx -= impulse * invMoiB * -rb.cross(normal);\n        bodyA.rx += impulse * invMoiA * -ra.cross(normal);\n      }\n\n      // Split the mtv in half for the two bodies, potentially we could do something smarter here\n      bodyB.addMtv(mtv.scale(0.5));\n      bodyA.addMtv(mtv.scale(-0.5));\n    }\n\n    // Friction portion of impulse\n    if (coefFriction && rvTangent) {\n      // Columb model of friction, formula for impulse due to friction from\n      // https://en.wikipedia.org/wiki/Collision_response\n\n      // tangent force exerted by body on another in contact\n      const t = rv.sub(normal.scale(rv.dot(normal))).normalize();\n\n      // impulse in the direction of tangent force\n      const jt = rv.dot(t) / (invMassA + invMassB + raNormal * raNormal * invMoiA + rbNormal * rbNormal * invMoiB);\n\n      let frictionImpulse = new Vector(0, 0);\n      if (Math.abs(jt) <= impulse * coefFriction) {\n        frictionImpulse = t.scale(jt).negate();\n      } else {\n        frictionImpulse = t.scale(-impulse * coefFriction);\n      }\n\n      if (this.colliderA.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n        }\n      } else if (this.colliderB.type === CollisionType.Fixed) {\n        // apply frictional impulse\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n        if (Physics.allowRigidBodyRotation) {\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      } else {\n        // apply frictional impulse\n        bodyB.vel = bodyB.vel.add(frictionImpulse.scale(invMassB));\n        bodyA.vel = bodyA.vel.sub(frictionImpulse.scale(invMassA));\n\n        // apply frictional impulse\n        if (Physics.allowRigidBodyRotation) {\n          bodyB.rx += frictionImpulse.dot(t) * invMoiB * rb.cross(t);\n          bodyA.rx -= frictionImpulse.dot(t) * invMoiA * ra.cross(t);\n        }\n      }\n    }\n\n    this.colliderA.emit('postcollision', new PostCollisionEvent(this.colliderA, this.colliderB, side, this.mtv));\n    this.colliderB.emit(\n      'postcollision',\n      new PostCollisionEvent(this.colliderB, this.colliderA, Util.getOppositeSide(side), this.mtv.negate())\n    );\n  }\n}\n","import { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { vec, Vector } from '../Algebra';\n\nexport const CollisionJumpTable = {\n  CollideCircleCircle(circleA: Circle, circleB: Circle): CollisionContact {\n    const radius = circleA.radius + circleB.radius;\n    const circleAPos = circleA.worldPos;\n    const circleBPos = circleB.worldPos;\n    if (circleAPos.distance(circleBPos) > radius) {\n      return null;\n    }\n\n    const axisOfCollision = circleBPos.sub(circleAPos).normalize();\n    const mvt = axisOfCollision.scale(radius - circleBPos.distance(circleAPos));\n\n    const pointOfCollision = circleA.getFurthestPoint(axisOfCollision);\n\n    return new CollisionContact(circleA.collider, circleB.collider, mvt, pointOfCollision, axisOfCollision);\n  },\n\n  CollideCirclePolygon(circle: Circle, polygon: ConvexPolygon): CollisionContact {\n    let minAxis = circle.testSeparatingAxisTheorem(polygon);\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that the minAxis is pointing away from circle\n    const samedir = minAxis.dot(polygon.center.sub(circle.center));\n    minAxis = samedir < 0 ? minAxis.negate() : minAxis;\n\n    const verts: Vector[] = [];\n\n    const point1 = polygon.getFurthestPoint(minAxis.negate());\n    const point2 = circle.getFurthestPoint(minAxis); //.add(cc);\n    if (circle.contains(point1)) {\n      verts.push(point1);\n    }\n    if (polygon.contains(point2)) {\n      verts.push(point2);\n    }\n    if (verts.length === 0) {\n      return null;\n    }\n\n    return new CollisionContact(\n      circle.collider,\n      polygon.collider,\n      minAxis,\n      verts.length === 2 ? verts[0].average(verts[1]) : verts[0],\n      minAxis.normalize()\n    );\n  },\n\n  CollideCircleEdge(circle: Circle, edge: Edge): CollisionContact {\n    // center of the circle\n    const cc = circle.center;\n    // vector in the direction of the edge\n    const e = edge.end.sub(edge.begin);\n\n    // amount of overlap with the circle's center along the edge direction\n    const u = e.dot(edge.end.sub(cc));\n    const v = e.dot(cc.sub(edge.begin));\n\n    // Potential region A collision (circle is on the left side of the edge, before the beginning)\n    if (v <= 0) {\n      const da = edge.begin.sub(cc);\n      const dda = da.dot(da); // quick and dirty way of calc'n distance in r^2 terms saves some sqrts\n      // save some sqrts\n      if (dda > circle.radius * circle.radius) {\n        return null; // no collision\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        da.normalize().scale(circle.radius - Math.sqrt(dda)),\n        edge.begin,\n        da.normalize()\n      );\n    }\n\n    // Potential region B collision (circle is on the right side of the edge, after the end)\n    if (u <= 0) {\n      const db = edge.end.sub(cc);\n      const ddb = db.dot(db);\n      if (ddb > circle.radius * circle.radius) {\n        return null;\n      }\n      return new CollisionContact(\n        circle.collider,\n        edge.collider,\n        db.normalize().scale(circle.radius - Math.sqrt(ddb)),\n        edge.end,\n        db.normalize()\n      );\n    }\n\n    // Otherwise potential region AB collision (circle is in the middle of the edge between the beginning and end)\n    const den = e.dot(e);\n    const pointOnEdge = edge.begin\n      .scale(u)\n      .add(edge.end.scale(v))\n      .scale(1 / den);\n    const d = cc.sub(pointOnEdge);\n\n    const dd = d.dot(d);\n    if (dd > circle.radius * circle.radius) {\n      return null; // no collision\n    }\n\n    let n = e.perpendicular();\n    // flip correct direction\n    if (n.dot(cc.sub(edge.begin)) < 0) {\n      n = vec(-n.x, -n.y);\n    }\n\n    n = n.normalize();\n\n    const mvt = n.scale(Math.abs(circle.radius - Math.sqrt(dd)));\n    return new CollisionContact(circle.collider, edge.collider, mvt.negate(), pointOnEdge, n.negate());\n  },\n\n  CollideEdgeEdge(): CollisionContact {\n    // Edge-edge collision doesn't make sense\n    return null;\n  },\n\n  CollidePolygonEdge(polygon: ConvexPolygon, edge: Edge): CollisionContact {\n    // 3 cases:\n    // (1) Polygon lands on the full face\n    // (2) Polygon lands on the right point\n    // (3) Polygon lands on the left point\n\n    const e = edge.end.sub(edge.begin);\n    let edgeNormal = e.normal();\n\n    if (polygon.contains(edge.begin)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.begin);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.begin.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    if (polygon.contains(edge.end)) {\n      const { distance: mtv, face } = polygon.getClosestFace(edge.end);\n      if (mtv) {\n        return new CollisionContact(polygon.collider, edge.collider, mtv.negate(), edge.end.add(mtv.negate()), face.normal().negate());\n      }\n    }\n\n    const pc = polygon.center;\n    const ec = edge.center;\n    const dir = ec.sub(pc).normalize();\n\n    // build a temporary polygon from the edge to use SAT\n    const linePoly = new ConvexPolygon({\n      collider: edge.collider,\n      points: [edge.begin, edge.end, edge.end.add(dir.scale(30)), edge.begin.add(dir.scale(30))]\n    });\n\n    let minAxis = polygon.testSeparatingAxisTheorem(linePoly);\n\n    // no minAxis, no overlap, no collision\n    if (!minAxis) {\n      return null;\n    }\n\n    // flip the normal and axis to always have positive collisions\n    edgeNormal = edgeNormal.dot(dir) < 0 ? edgeNormal.negate() : edgeNormal;\n    minAxis = minAxis.dot(dir) < 0 ? minAxis.negate() : minAxis;\n\n    return new CollisionContact(polygon.collider, edge.collider, minAxis, polygon.getFurthestPoint(edgeNormal), edgeNormal);\n  },\n\n  CollidePolygonPolygon(polyA: ConvexPolygon, polyB: ConvexPolygon): CollisionContact {\n    // do a SAT test to find a min axis if it exists\n    let minAxis = polyA.testSeparatingAxisTheorem(polyB);\n\n    // no overlap, no collision return null\n    if (!minAxis) {\n      return null;\n    }\n\n    // make sure that minAxis is pointing from A -> B\n    const sameDir = minAxis.dot(polyB.center.sub(polyA.center));\n    minAxis = sameDir < 0 ? minAxis.negate() : minAxis;\n\n    // find rough point of collision\n    // todo this could be better\n    const verts: Vector[] = [];\n    const pointA = polyA.getFurthestPoint(minAxis);\n    const pointB = polyB.getFurthestPoint(minAxis.negate());\n\n    if (polyB.contains(pointA)) {\n      verts.push(pointA);\n    }\n\n    if (polyA.contains(pointB)) {\n      verts.push(pointB);\n    }\n    // no candidates, pick something\n    if (verts.length === 0) {\n      verts.push(pointB);\n    }\n\n    const contact = verts.length === 2 ? verts[0].add(verts[1]).scale(0.5) : verts[0];\n\n    return new CollisionContact(polyA.collider, polyB.collider, minAxis, contact, minAxis.normalize());\n  }\n};\n","import { Line, Vector, Ray } from '../Algebra';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\nimport { Circle } from './Circle';\n\n/**\n * Finds the closes line between 2 line segments, were the magnitude of u, v are the lengths of each segment\n * L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n * L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n * @param p0 Point where L1 begins\n * @param u Direction and length of L1\n * @param q0 Point were L2 begins\n * @param v Direction and length of L2\n */\nexport function ClosestLine(p0: Vector, u: Vector, q0: Vector, v: Vector) {\n  // Distance between 2 lines http://geomalgorithms.com/a07-_distance.html\n\n  // w(s, t) = P(s) - Q(t)\n  // The w(s, t) that has the minimum distance we will say is w(sClosest, tClosest) = wClosest\n  //\n  // wClosest is the vector that is uniquely perpendicular to the 2 line directions u & v.\n  // wClosest = w0 + sClosest * u - tClosest * v, where w0 is p0 - q0\n  //\n  // The closest point between 2 lines then satisfies this pair of equations\n  // 1: u * wClosest = 0\n  // 2: v * wClosest = 0\n  //\n  // Substituting wClosest into the equations we get\n  //\n  // 1: (u * u) * sClosest - (u * v) tClosest = -u * w0\n  // 2: (v * u) * sClosest - (v * v) tClosest = -v * w0\n\n  // simplify w0\n  const w0 = p0.sub(q0);\n\n  // simplify (u * u);\n  const a = u.dot(u);\n  // simplify (u * v);\n  const b = u.dot(v);\n  // simplify (v * v)\n  const c = v.dot(v);\n  // simplify (u * w0)\n  const d = u.dot(w0);\n  // simplify (v * w0)\n  const e = v.dot(w0);\n\n  // denominator ac - b^2\n  const denom = a * c - b * b;\n  let sDenom = denom;\n  let tDenom = denom;\n  // if denom is 0 they are parallel, use any point from either as the start in this case p0\n  if (denom === 0 || denom <= 0.01) {\n    const tClosestParallel = d / b;\n    return new Line(p0, q0.add(v.scale(tClosestParallel)));\n  }\n\n  // Solve for sClosest for infinite line\n  let sClosest = b * e - c * d; // / denom;\n\n  // Solve for tClosest for infinite line\n  let tClosest = a * e - b * d; // / denom;\n\n  // Solve for segments candidate edges, if sClosest and tClosest are outside their segments\n  if (sClosest < 0) {\n    sClosest = 0;\n    tClosest = e;\n    tDenom = c;\n  } else if (sClosest > sDenom) {\n    sClosest = sDenom;\n    tClosest = e + b;\n    tDenom = c;\n  }\n\n  if (tClosest < 0) {\n    tClosest = 0;\n    if (-d < 0) {\n      sClosest = 0;\n    } else if (-d > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d;\n      sDenom = a;\n    }\n  } else if (tClosest > tDenom) {\n    tClosest = tDenom;\n    if (-d + b < 0) {\n      sClosest = 0;\n    } else if (-d + b > a) {\n      sClosest = sDenom;\n    } else {\n      sClosest = -d + b;\n      sDenom = a;\n    }\n  }\n  sClosest = Math.abs(sClosest) < 0.001 ? 0 : sClosest / sDenom;\n  tClosest = Math.abs(tClosest) < 0.001 ? 0 : tClosest / tDenom;\n\n  return new Line(p0.add(u.scale(sClosest)), q0.add(v.scale(tClosest)));\n}\n\nexport const ClosestLineJumpTable = {\n  PolygonPolygonClosestLine(polygonA: ConvexPolygon, polygonB: ConvexPolygon) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = polygonB.worldPos;\n    const otherDirection = otherWorldPos.sub(polygonA.worldPos);\n    const thisDirection = otherDirection.negate();\n\n    const rayTowardsOther = new Ray(polygonA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(otherWorldPos, thisDirection);\n\n    const thisPoint = polygonA.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n    const otherPoint = polygonB.rayCast(rayTowardsThis).add(rayTowardsThis.dir.scale(0.1));\n\n    const thisFace = polygonA.getClosestFace(thisPoint);\n    const otherFace = polygonB.getClosestFace(otherPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const q0 = otherFace.face.begin;\n    const v = otherFace.face.getEdge();\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonEdgeClosestLine(polygon: ConvexPolygon, edge: Edge) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = edge.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection);\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const q0 = edgeStart;\n    const v = edgeVector;\n\n    return ClosestLine(p0, u, q0, v);\n  },\n\n  PolygonCircleClosestLine(polygon: ConvexPolygon, circle: Circle) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circle.worldPos;\n    const otherDirection = otherWorldPos.sub(polygon.worldPos);\n\n    const rayTowardsOther = new Ray(polygon.worldPos, otherDirection.normalize());\n\n    const thisPoint = polygon.rayCast(rayTowardsOther).add(rayTowardsOther.dir.scale(0.1));\n\n    const thisFace = polygon.getClosestFace(thisPoint);\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const p0 = thisFace.face.begin;\n    const u = thisFace.face.getEdge();\n\n    // Time of minimum distance\n    let t = (u.x * (otherWorldPos.x - p0.x) + u.y * (otherWorldPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - otherWorldPos.x, 2) + Math.pow(p0.y + u.y * t - otherWorldPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - otherWorldPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - otherWorldPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(otherWorldPos.x + circlex, otherWorldPos.y + circley));\n  },\n\n  CircleCircleClosestLine(circleA: Circle, circleB: Circle) {\n    // Find the 2 closest faces on each polygon\n    const otherWorldPos = circleB.worldPos;\n    const otherDirection = otherWorldPos.sub(circleA.worldPos);\n\n    const thisWorldPos = circleA.worldPos;\n    const thisDirection = thisWorldPos.sub(circleB.worldPos);\n\n    const rayTowardsOther = new Ray(circleA.worldPos, otherDirection);\n    const rayTowardsThis = new Ray(circleB.worldPos, thisDirection);\n\n    const thisPoint = circleA.rayCast(rayTowardsOther);\n    const otherPoint = circleB.rayCast(rayTowardsThis);\n\n    return new Line(thisPoint, otherPoint);\n  },\n\n  CircleEdgeClosestLine(circle: Circle, edge: Edge) {\n    // https://math.stackexchange.com/questions/1919177/how-to-find-point-on-line-closest-to-sphere\n    const circleWorlPos = circle.worldPos;\n\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLine = edge.asLine();\n    const edgeStart = edgeLine.begin;\n    const edgeVector = edgeLine.getEdge();\n    const p0 = edgeStart;\n    const u = edgeVector;\n\n    // Time of minimum distance\n    let t = (u.x * (circleWorlPos.x - p0.x) + u.y * (circleWorlPos.y - p0.y)) / (u.x * u.x + u.y * u.y);\n\n    // If time of minimum is past the edge clamp to edge\n    if (t > 1) {\n      t = 1;\n    } else if (t < 0) {\n      t = 0;\n    }\n\n    // Minimum distance\n    const d = Math.sqrt(Math.pow(p0.x + u.x * t - circleWorlPos.x, 2) + Math.pow(p0.y + u.y * t - circleWorlPos.y, 2)) - circle.radius;\n\n    const circlex = ((p0.x + u.x * t - circleWorlPos.x) * circle.radius) / (circle.radius + d);\n    const circley = ((p0.y + u.y * t - circleWorlPos.y) * circle.radius) / (circle.radius + d);\n    return new Line(u.scale(t).add(p0), new Vector(circleWorlPos.x + circlex, circleWorlPos.y + circley));\n  },\n\n  EdgeEdgeClosestLine(edgeA: Edge, edgeB: Edge) {\n    // L1 = P(s) = p0 + s * u, where s is time and p0 is the start of the line\n    const edgeLineA = edgeA.asLine();\n    const edgeStartA = edgeLineA.begin;\n    const edgeVectorA = edgeLineA.getEdge();\n    const p0 = edgeStartA;\n    const u = edgeVectorA;\n\n    // L2 = Q(t) = q0 + t * v, where t is time and q0 is the start of the line\n    const edgeLineB = edgeB.asLine();\n    const edgeStartB = edgeLineB.begin;\n    const edgeVectorB = edgeLineB.getEdge();\n    const q0 = edgeStartB;\n    const v = edgeVectorB;\n\n    return ClosestLine(p0, u, q0, v);\n  }\n};\n","import { BoundingBox } from './BoundingBox';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { ConvexPolygon } from './ConvexPolygon';\nimport { Edge } from './Edge';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\n\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface CircleOptions {\n  /**\n   * Optional pixel offset to shift the circle relative to the collider, by default (0, 0).\n   */\n  offset?: Vector;\n  /**\n   * Required radius of the circle\n   */\n  radius: number;\n  /**\n   * Optional collider to associate with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * This is a circle collision shape for the excalibur rigid body physics simulation\n */\nexport class Circle implements CollisionShape {\n  /**\n   * Position of the circle relative to the collider, by default (0, 0) meaning the shape is positioned on top of the collider.\n   */\n  public offset: Vector = Vector.Zero;\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * This is the radius of the circle\n   */\n  public radius: number;\n\n  /**\n   * The collider associated for this shape, if any.\n   */\n  public collider?: Collider;\n\n  constructor(options: CircleOptions) {\n    this.offset = options.offset || Vector.Zero;\n    this.radius = options.radius || 0;\n    this.collider = options.collider || null;\n  }\n\n  /**\n   * Returns a clone of this shape, not associated with any collider\n   */\n  public clone(): Circle {\n    return new Circle({\n      offset: this.offset.clone(),\n      radius: this.radius,\n      collider: null\n    });\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.offset.add(this.collider.body.pos);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape\n   */\n  public contains(point: Vector): boolean {\n    let pos = this.offset;\n    if (this.collider && this.collider.body) {\n      pos = this.collider.body.pos;\n    }\n    const distance = pos.distance(point);\n    if (distance <= this.radius) {\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Casts a ray at the Circle shape and returns the nearest point of collision\n   * @param ray\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    //https://en.wikipedia.org/wiki/Line%E2%80%93sphere_intersection\n    const c = this.center;\n    const dir = ray.dir;\n    const orig = ray.pos;\n\n    const discriminant = Math.sqrt(Math.pow(dir.dot(orig.sub(c)), 2) - Math.pow(orig.sub(c).distance(), 2) + Math.pow(this.radius, 2));\n\n    if (discriminant < 0) {\n      // no intersection\n      return null;\n    } else {\n      let toi = 0;\n      if (discriminant === 0) {\n        toi = -dir.dot(orig.sub(c));\n        if (toi > 0 && toi < max) {\n          return ray.getPoint(toi);\n        }\n        return null;\n      } else {\n        const toi1 = -dir.dot(orig.sub(c)) + discriminant;\n        const toi2 = -dir.dot(orig.sub(c)) - discriminant;\n\n        const positiveToi: number[] = [];\n        if (toi1 >= 0) {\n          positiveToi.push(toi1);\n        }\n\n        if (toi2 >= 0) {\n          positiveToi.push(toi2);\n        }\n\n        const mintoi = Math.min(...positiveToi);\n        if (mintoi <= max) {\n          return ray.getPoint(mintoi);\n        }\n        return null;\n      }\n    }\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(this, shape).flip();\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleCircle(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollideCirclePolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideCircleEdge(this, shape);\n    } else {\n      throw new Error(`Circle could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    return this.center.add(direction.normalize().scale(this.radius));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return new BoundingBox(\n      this.offset.x + bodyPos.x - this.radius,\n      this.offset.y + bodyPos.y - this.radius,\n      this.offset.x + bodyPos.x + this.radius,\n      this.offset.y + bodyPos.y + this.radius\n    );\n  }\n\n  /**\n   * Get the axis aligned bounding box for the circle shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return new BoundingBox(\n      this.offset.x - this.radius,\n      this.offset.y - this.radius,\n      this.offset.x + this.radius,\n      this.offset.y + this.radius\n    );\n  }\n\n  /**\n   * Get axis not implemented on circles, since there are infinite axis in a circle\n   */\n  public get axes(): Vector[] {\n    return null;\n  }\n\n  /**\n   * Returns the moment of inertia of a circle given it's mass\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    return (mass * this.radius * this.radius) / 2;\n  }\n\n  /**\n   * Tests the separating axis theorem for circles against polygons\n   */\n  public testSeparatingAxisTheorem(polygon: ConvexPolygon): Vector {\n    const axes = polygon.axes;\n    const pc = polygon.center;\n    // Special SAT with circles\n    const closestPointOnPoly = polygon.getFurthestPoint(this.offset.sub(pc));\n    axes.push(this.offset.sub(closestPointOnPoly).normalize());\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = polygon.project(axes[i]);\n      const proj2 = this.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n    if (minIndex < 0) {\n      return null;\n    }\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /* istanbul ignore next */\n  public recalc(): void {\n    // circles don't cache\n  }\n\n  /**\n   * Project the circle along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n    const point = this.center;\n    const dotProduct = point.dot(axis);\n    scalars.push(dotProduct);\n    scalars.push(dotProduct + this.radius);\n    scalars.push(dotProduct - this.radius);\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const newPos = pos.add(this.offset);\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    ctx.arc(newPos.x, newPos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Green) {\n    const body = this.collider.body;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const rotation = body ? body.rotation : 0;\n\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    ctx.arc(pos.x, pos.y, this.radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    ctx.beginPath();\n    ctx.moveTo(pos.x, pos.y);\n    ctx.lineTo(Math.cos(rotation) * this.radius + pos.x, Math.sin(rotation) * this.radius + pos.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","import { Body } from './Body';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { CollisionShape } from './CollisionShape';\nimport { Circle } from './Circle';\nimport { ConvexPolygon } from './ConvexPolygon';\n\nimport { Vector, Ray, Projection, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { Color } from '../Drawing/Color';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface EdgeOptions {\n  /**\n   * The beginning of the edge defined in local coordinates to the collider\n   */\n  begin: Vector;\n  /**\n   * The ending of the edge defined in local coordinates to the collider\n   */\n  end: Vector;\n  /**\n   * Optionally the collider associated with this edge\n   */\n  collider?: Collider;\n}\n\n/**\n * Edge is a single line collision shape to create collisions with a single line.\n */\nexport class Edge implements CollisionShape {\n  body: Body;\n  collider?: Collider;\n  offset: Vector;\n  begin: Vector;\n  end: Vector;\n\n  constructor(options: EdgeOptions) {\n    this.begin = options.begin || Vector.Zero;\n    this.end = options.end || Vector.Zero;\n    this.collider = options.collider || null;\n    this.offset = this.center;\n  }\n\n  /**\n   * Returns a clone of this Edge, not associated with any collider\n   */\n  public clone(): Edge {\n    return new Edge({\n      begin: this.begin.clone(),\n      end: this.end.clone(),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision area in world coordinates\n   */\n  public get center(): Vector {\n    const pos = this.begin.average(this.end).add(this._getBodyPos());\n    return pos;\n  }\n\n  private _getBodyPos(): Vector {\n    let bodyPos = Vector.Zero;\n    if (this.collider && this.collider.body) {\n      bodyPos = this.collider.body.pos;\n    }\n    return bodyPos;\n  }\n\n  private _getTransformedBegin(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.begin.rotate(angle).add(this._getBodyPos());\n  }\n\n  private _getTransformedEnd(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    const angle = body ? body.rotation : 0;\n    return this.end.rotate(angle).add(this._getBodyPos());\n  }\n\n  /**\n   * Returns the slope of the line in the form of a vector\n   */\n  public getSlope(): Vector {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return end.sub(begin).scale(1 / distance);\n  }\n\n  /**\n   * Returns the length of the line segment in pixels\n   */\n  public getLength(): number {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    const distance = begin.distance(end);\n    return distance;\n  }\n\n  /**\n   * Tests if a point is contained in this collision area\n   */\n  public contains(): boolean {\n    return false;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public rayCast(ray: Ray, max: number = Infinity): Vector {\n    const numerator = this._getTransformedBegin().sub(ray.pos);\n\n    // Test is line and ray are parallel and non intersecting\n    if (ray.dir.cross(this.getSlope()) === 0 && numerator.cross(ray.dir) !== 0) {\n      return null;\n    }\n\n    // Lines are parallel\n    const divisor = ray.dir.cross(this.getSlope());\n    if (divisor === 0) {\n      return null;\n    }\n\n    const t = numerator.cross(this.getSlope()) / divisor;\n\n    if (t >= 0 && t <= max) {\n      const u = numerator.cross(ray.dir) / divisor / this.getLength();\n      if (u >= 0 && u <= 1) {\n        return ray.getPoint(t);\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Returns the closes line between this and another shape, from this -> shape\n   * @param shape\n   */\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.CircleEdgeClosestLine(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(shape, this).flip();\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.EdgeEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCircleEdge(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonEdge(shape, this);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollideEdgeEdge();\n    } else {\n      throw new Error(`Edge could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    if (direction.dot(transformedBegin) > 0) {\n      return transformedBegin;\n    } else {\n      return transformedEnd;\n    }\n  }\n\n  private _boundsFromBeginEnd(begin: Vector, end: Vector) {\n    return new BoundingBox(Math.min(begin.x, end.x), Math.min(begin.y, end.y), Math.max(begin.x, end.x), Math.max(begin.y, end.y));\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in world space\n   */\n  public get bounds(): BoundingBox {\n    const transformedBegin = this._getTransformedBegin();\n    const transformedEnd = this._getTransformedEnd();\n    return this._boundsFromBeginEnd(transformedBegin, transformedEnd);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the edge shape in local space\n   */\n  public get localBounds(): BoundingBox {\n    return this._boundsFromBeginEnd(this.begin, this.end);\n  }\n\n  /**\n   * Returns this edge represented as a line in world coordinates\n   */\n  public asLine(): Line {\n    return new Line(this._getTransformedBegin(), this._getTransformedEnd());\n  }\n\n  public asLocalLine(): Line {\n    return new Line(this.begin, this.end);\n  }\n\n  /**\n   * Get the axis associated with the edge\n   */\n  public get axes(): Vector[] {\n    const e = this._getTransformedEnd().sub(this._getTransformedBegin());\n    const edgeNormal = e.normal();\n\n    const axes = [];\n    axes.push(edgeNormal);\n    axes.push(edgeNormal.negate());\n    axes.push(edgeNormal.normal());\n    axes.push(edgeNormal.normal().negate());\n    return axes;\n  }\n\n  /**\n   * Get the moment of inertia for an edge\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    const length = this.end.sub(this.begin).distance() / 2;\n    return mass * length * length;\n  }\n\n  /**\n   * @inheritdoc\n   */\n  public recalc(): void {\n    // edges don't have any cached data\n  }\n\n  /**\n   * Project the edge along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const scalars = [];\n\n    const points = [this._getTransformedBegin(), this._getTransformedEnd()];\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      scalars.push(points[i].dot(axis));\n    }\n\n    return new Projection(Math.min.apply(Math, scalars), Math.max.apply(Math, scalars));\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const begin = this.begin.add(pos);\n    const end = this.end.add(pos);\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    const begin = this._getTransformedBegin();\n    const end = this._getTransformedEnd();\n    ctx.strokeStyle = color.toString();\n    ctx.beginPath();\n    ctx.moveTo(begin.x, begin.y);\n    ctx.lineTo(end.x, end.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Edge } from './Edge';\nimport { CollisionJumpTable } from './CollisionJumpTable';\nimport { Circle } from './Circle';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line, Ray, Projection } from '../Algebra';\nimport { Collider } from './Collider';\nimport { ClosestLineJumpTable } from './ClosestLineJumpTable';\n\nexport interface ConvexPolygonOptions {\n  /**\n   * Pixel offset relative to a collider's position\n   */\n\n  offset?: Vector;\n  /**\n   * Points in the polygon in order around the perimeter in local coordinates\n   */\n  points: Vector[];\n  /**\n   * Whether points are specified in clockwise or counter clockwise order, default counter-clockwise\n   */\n  clockwiseWinding?: boolean;\n  /**\n   * Collider to associate optionally with this shape\n   */\n  collider?: Collider;\n}\n\n/**\n * Polygon collision shape for detecting collisions\n */\nexport class ConvexPolygon implements CollisionShape {\n  public offset: Vector;\n  public points: Vector[];\n\n  /**\n   * Collider associated with this shape\n   */\n  public collider?: Collider;\n\n  private _transformedPoints: Vector[] = [];\n  private _axes: Vector[] = [];\n  private _sides: Line[] = [];\n\n  constructor(options: ConvexPolygonOptions) {\n    this.offset = options.offset || Vector.Zero;\n    const winding = !!options.clockwiseWinding;\n    this.points = (winding ? options.points.reverse() : options.points) || [];\n    this.collider = this.collider = options.collider || null;\n\n    // calculate initial transformation\n    this._calculateTransformation();\n  }\n\n  /**\n   * Returns a clone of this ConvexPolygon, not associated with any collider\n   */\n  public clone(): ConvexPolygon {\n    return new ConvexPolygon({\n      offset: this.offset.clone(),\n      points: this.points.map((p) => p.clone()),\n      collider: null\n    });\n  }\n\n  public get worldPos(): Vector {\n    if (this.collider && this.collider.body) {\n      return this.collider.body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Get the center of the collision shape in world coordinates\n   */\n  public get center(): Vector {\n    const body = this.collider ? this.collider.body : null;\n    if (body) {\n      return body.pos.add(this.offset);\n    }\n    return this.offset;\n  }\n\n  /**\n   * Calculates the underlying transformation from the body relative space to world space\n   */\n  private _calculateTransformation() {\n    const body = this.collider ? this.collider.body : null;\n    const pos = body ? body.pos.add(this.offset) : this.offset;\n    const angle = body ? body.rotation : 0;\n    const scale = body ? body.scale : Vector.One;\n\n    const len = this.points.length;\n    this._transformedPoints.length = 0; // clear out old transform\n    for (let i = 0; i < len; i++) {\n      this._transformedPoints[i] = this.points[i].scale(scale).rotate(angle).add(pos);\n    }\n  }\n\n  /**\n   * Gets the points that make up the polygon in world space, from actor relative space (if specified)\n   */\n  public getTransformedPoints(): Vector[] {\n    // only recalculate geometry if, hasn't been calculated\n    if (\n      !this._transformedPoints.length ||\n      // or the position or rotation has changed in world space\n      (this.collider &&\n        this.collider.body &&\n        (!this.collider.body.oldPos.equals(this.collider.body.pos) ||\n          this.collider.body.oldRotation !== this.collider.body.rotation ||\n          this.collider.body.oldScale !== this.collider.body.scale))\n    ) {\n      this._calculateTransformation();\n    }\n    return this._transformedPoints;\n  }\n\n  /**\n   * Gets the sides of the polygon in world space\n   */\n  public getSides(): Line[] {\n    if (this._sides.length) {\n      return this._sides;\n    }\n    const lines = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      lines.push(new Line(points[i], points[(i - 1 + len) % len]));\n    }\n    this._sides = lines;\n    return this._sides;\n  }\n\n  public recalc(): void {\n    this._sides.length = 0;\n    this._axes.length = 0;\n    this._transformedPoints.length = 0;\n    this.getTransformedPoints();\n    this.getSides();\n  }\n\n  /**\n   * Tests if a point is contained in this collision shape in world space\n   */\n  public contains(point: Vector): boolean {\n    // Always cast to the right, as long as we cast in a consistent fixed direction we\n    // will be fine\n    const testRay = new Ray(point, new Vector(1, 0));\n    const intersectCount = this.getSides().reduce(function (accum, side) {\n      if (testRay.intersect(side) >= 0) {\n        return accum + 1;\n      }\n      return accum;\n    }, 0);\n\n    if (intersectCount % 2 === 0) {\n      return false;\n    }\n    return true;\n  }\n\n  public getClosestLineBetween(shape: CollisionShape): Line {\n    if (shape instanceof Circle) {\n      return ClosestLineJumpTable.PolygonCircleClosestLine(this, shape);\n    } else if (shape instanceof ConvexPolygon) {\n      return ClosestLineJumpTable.PolygonPolygonClosestLine(this, shape);\n    } else if (shape instanceof Edge) {\n      return ClosestLineJumpTable.PolygonEdgeClosestLine(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Returns a collision contact if the 2 collision shapes collide, otherwise collide will\n   * return null.\n   * @param shape\n   */\n  public collide(shape: CollisionShape): CollisionContact {\n    if (shape instanceof Circle) {\n      return CollisionJumpTable.CollideCirclePolygon(shape, this);\n    } else if (shape instanceof ConvexPolygon) {\n      return CollisionJumpTable.CollidePolygonPolygon(this, shape);\n    } else if (shape instanceof Edge) {\n      return CollisionJumpTable.CollidePolygonEdge(this, shape);\n    } else {\n      throw new Error(`Polygon could not collide with unknown CollisionShape ${typeof shape}`);\n    }\n  }\n\n  /**\n   * Find the point on the shape furthest in the direction specified\n   */\n  public getFurthestPoint(direction: Vector): Vector {\n    const pts = this.getTransformedPoints();\n    let furthestPoint = null;\n    let maxDistance = -Number.MAX_VALUE;\n    for (let i = 0; i < pts.length; i++) {\n      const distance = direction.dot(pts[i]);\n      if (distance > maxDistance) {\n        maxDistance = distance;\n        furthestPoint = pts[i];\n      }\n    }\n    return furthestPoint;\n  }\n\n  /**\n   * Finds the closes face to the point using perpendicular distance\n   * @param point point to test against polygon\n   */\n  public getClosestFace(point: Vector): { distance: Vector; face: Line } {\n    const sides = this.getSides();\n    let min = Number.POSITIVE_INFINITY;\n    let faceIndex = -1;\n    let distance = -1;\n    for (let i = 0; i < sides.length; i++) {\n      const dist = sides[i].distanceToPoint(point);\n      if (dist < min) {\n        min = dist;\n        faceIndex = i;\n        distance = dist;\n      }\n    }\n\n    if (faceIndex !== -1) {\n      return {\n        distance: sides[faceIndex].normal().scale(distance),\n        face: sides[faceIndex]\n      };\n    }\n\n    return null;\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in world coordinates\n   */\n  public get bounds(): BoundingBox {\n    const points = this.getTransformedPoints();\n\n    return BoundingBox.fromPoints(points);\n  }\n\n  /**\n   * Get the axis aligned bounding box for the polygon shape in local coordinates\n   */\n  public get localBounds(): BoundingBox {\n    return BoundingBox.fromPoints(this.points);\n  }\n\n  /**\n   * Get the moment of inertia for an arbitrary polygon\n   * https://en.wikipedia.org/wiki/List_of_moments_of_inertia\n   */\n  public get inertia(): number {\n    const mass = this.collider ? this.collider.mass : Physics.defaultMass;\n    let numerator = 0;\n    let denominator = 0;\n    for (let i = 0; i < this.points.length; i++) {\n      const iplusone = (i + 1) % this.points.length;\n      const crossTerm = this.points[iplusone].cross(this.points[i]);\n      numerator +=\n        crossTerm *\n        (this.points[i].dot(this.points[i]) + this.points[i].dot(this.points[iplusone]) + this.points[iplusone].dot(this.points[iplusone]));\n      denominator += crossTerm;\n    }\n    return (mass / 6) * (numerator / denominator);\n  }\n\n  /**\n   * Casts a ray into the polygon and returns a vector representing the point of contact (in world space) or null if no collision.\n   */\n  public rayCast(ray: Ray, max: number = Infinity) {\n    // find the minimum contact time greater than 0\n    // contact times less than 0 are behind the ray and we don't want those\n    const sides = this.getSides();\n    const len = sides.length;\n    let minContactTime = Number.MAX_VALUE;\n    let contactIndex = -1;\n    for (let i = 0; i < len; i++) {\n      const contactTime = ray.intersect(sides[i]);\n      if (contactTime >= 0 && contactTime < minContactTime && contactTime <= max) {\n        minContactTime = contactTime;\n        contactIndex = i;\n      }\n    }\n\n    // contact was found\n    if (contactIndex >= 0) {\n      return ray.getPoint(minContactTime);\n    }\n\n    // no contact found\n    return null;\n  }\n\n  /**\n   * Get the axis associated with the convex polygon\n   */\n  public get axes(): Vector[] {\n    if (this._axes.length) {\n      return this._axes;\n    }\n\n    const axes = [];\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    for (let i = 0; i < len; i++) {\n      axes.push(points[i].sub(points[(i + 1) % len]).normal());\n    }\n    this._axes = axes;\n    return this._axes;\n  }\n\n  /**\n   * Perform Separating Axis test against another polygon, returns null if no overlap in polys\n   * Reference http://www.dyn4j.org/2010/01/sat/\n   */\n  public testSeparatingAxisTheorem(other: ConvexPolygon): Vector {\n    const poly1 = this;\n    const poly2 = other;\n    const axes = poly1.axes.concat(poly2.axes);\n\n    let minOverlap = Number.MAX_VALUE;\n    let minAxis = null;\n    let minIndex = -1;\n    for (let i = 0; i < axes.length; i++) {\n      const proj1 = poly1.project(axes[i]);\n      const proj2 = poly2.project(axes[i]);\n      const overlap = proj1.getOverlap(proj2);\n      if (overlap <= 0) {\n        return null;\n      } else {\n        if (overlap < minOverlap) {\n          minOverlap = overlap;\n          minAxis = axes[i];\n          minIndex = i;\n        }\n      }\n    }\n\n    // Sanity check\n    if (minIndex === -1) {\n      return null;\n    }\n\n    return minAxis.normalize().scale(minOverlap);\n  }\n\n  /**\n   * Project the edges of the polygon along a specified axis\n   */\n  public project(axis: Vector): Projection {\n    const points = this.getTransformedPoints();\n    const len = points.length;\n    let min = Number.MAX_VALUE;\n    let max = -Number.MAX_VALUE;\n    for (let i = 0; i < len; i++) {\n      const scalar = points[i].dot(axis);\n      min = Math.min(min, scalar);\n      max = Math.max(max, scalar);\n    }\n\n    return new Projection(min, max);\n  }\n\n  public draw(ctx: CanvasRenderingContext2D, color: Color = Color.Green, pos: Vector = Vector.Zero) {\n    const basePos = pos.add(this.offset);\n    ctx.beginPath();\n    ctx.fillStyle = color.toString();\n    ctx.moveTo(basePos.x, basePos.y);\n    const diffToBase = this.points[0].sub(basePos);\n    this.points\n      .map((p) => p.sub(diffToBase))\n      .forEach(function (point) {\n        ctx.lineTo(point.x, point.y);\n      });\n    ctx.lineTo(basePos.x, basePos.y);\n    ctx.closePath();\n    ctx.fill();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Red) {\n    ctx.beginPath();\n    ctx.strokeStyle = color.toString();\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this.getTransformedPoints()[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n    this.getTransformedPoints().forEach(function (point) {\n      ctx.lineTo(point.x, point.y);\n    });\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n    ctx.stroke();\n  }\n}\n","import { ConvexPolygon } from './ConvexPolygon';\n\nimport { Actor } from '../Actor';\nimport { Vector, Ray } from '../Algebra';\nimport { Color } from '../Drawing/Color';\nimport { Side } from './Side';\nimport { ExcaliburGraphicsContext } from '../Graphics/Context/ExcaliburGraphicsContext';\nimport { Matrix } from '../Math/matrix';\n\nexport interface BoundingBoxOptions {\n  left: number;\n  right: number;\n  top: number;\n  bottom: number;\n}\n\n/**\n * Axis Aligned collision primitive for Excalibur.\n */\nexport class BoundingBox {\n  public top: number;\n  public right: number;\n  public bottom: number;\n  public left: number;\n\n  /**\n   * Constructor allows passing of either an object with all coordinate components,\n   * or the coordinate components passed separately.\n   * @param leftOrOptions    Either x coordinate of the left edge or an options object\n   * containing the four coordinate components.\n   * @param top     y coordinate of the top edge\n   * @param right   x coordinate of the right edge\n   * @param bottom  y coordinate of the bottom edge\n   */\n  constructor(leftOrOptions: number | BoundingBoxOptions = 0, top: number = 0, right: number = 0, bottom: number = 0) {\n    if (typeof leftOrOptions === 'object') {\n      this.left = leftOrOptions.left;\n      this.top = leftOrOptions.top;\n      this.right = leftOrOptions.right;\n      this.bottom = leftOrOptions.bottom;\n    } else if (typeof leftOrOptions === 'number') {\n      this.left = leftOrOptions;\n      this.top = top;\n      this.right = right;\n      this.bottom = bottom;\n    }\n  }\n\n  /**\n   * Given bounding box A & B, returns the side relative to A when intersection is performed.\n   * @param intersection Intersection vector between 2 bounding boxes\n   */\n  public static getSideFromIntersection(intersection: Vector): Side {\n    if (!intersection) {\n      return Side.None;\n    }\n    if (intersection) {\n      if (Math.abs(intersection.x) > Math.abs(intersection.y)) {\n        if (intersection.x < 0) {\n          return Side.Right;\n        }\n        return Side.Left;\n      } else {\n        if (intersection.y < 0) {\n          return Side.Bottom;\n        }\n        return Side.Top;\n      }\n    }\n    return Side.None;\n  }\n\n  public static fromPoints(points: Vector[]): BoundingBox {\n    let minX = Infinity;\n    let minY = Infinity;\n    let maxX = -Infinity;\n    let maxY = -Infinity;\n    for (let i = 0; i < points.length; i++) {\n      if (points[i].x < minX) {\n        minX = points[i].x;\n      }\n      if (points[i].x > maxX) {\n        maxX = points[i].x;\n      }\n      if (points[i].y < minY) {\n        minY = points[i].y;\n      }\n      if (points[i].y > maxY) {\n        maxY = points[i].y;\n      }\n    }\n    return new BoundingBox(minX, minY, maxX, maxY);\n  }\n\n  public static fromDimension(width: number, height: number, anchor: Vector = Vector.Half, pos: Vector = Vector.Zero) {\n    return new BoundingBox(\n      -width * anchor.x + pos.x,\n      -height * anchor.y + pos.y,\n      width - width * anchor.x + pos.x,\n      height - height * anchor.y + pos.y\n    );\n  }\n\n  /**\n   * Returns the calculated width of the bounding box\n   */\n  public get width() {\n    return this.right - this.left;\n  }\n\n  /**\n   * Returns the calculated height of the bounding box\n   */\n  public get height() {\n    return this.bottom - this.top;\n  }\n\n  /**\n   * Return whether the bounding box has zero dimensions in height,width or both\n   */\n  public hasZeroDimensions() {\n    return this.width === 0 || this.height === 0;\n  }\n\n  /**\n   * Returns the center of the bounding box\n   */\n  public get center(): Vector {\n    return new Vector((this.left + this.right) / 2, (this.top + this.bottom) / 2);\n  }\n\n  public translate(pos: Vector): BoundingBox {\n    return new BoundingBox(this.left + pos.x, this.top + pos.y, this.right + pos.x, this.bottom + pos.y);\n  }\n\n  /**\n   * Rotates a bounding box by and angle and around a point, if no point is specified (0, 0) is used by default. The resulting bounding\n   * box is also axis-align. This is useful when a new axis-aligned bounding box is needed for rotated geometry.\n   */\n  public rotate(angle: number, point: Vector = Vector.Zero): BoundingBox {\n    const points = this.getPoints().map((p) => p.rotate(angle, point));\n    return BoundingBox.fromPoints(points);\n  }\n\n  public scale(scale: Vector, point: Vector = Vector.Zero): BoundingBox {\n    const shifted = this.translate(point);\n    return new BoundingBox(shifted.left * scale.x, shifted.top * scale.y, shifted.right * scale.x, shifted.bottom * scale.y);\n  }\n\n  public transform(matrix: Matrix) {\n    const points = this.getPoints().map((p) => matrix.multv(p));\n    return BoundingBox.fromPoints(points);\n  }\n\n  /**\n   * Returns the perimeter of the bounding box\n   */\n  public getPerimeter(): number {\n    const wx = this.width;\n    const wy = this.height;\n    return 2 * (wx + wy);\n  }\n\n  public getPoints(): Vector[] {\n    const results = [];\n    results.push(new Vector(this.left, this.top));\n    results.push(new Vector(this.right, this.top));\n    results.push(new Vector(this.right, this.bottom));\n    results.push(new Vector(this.left, this.bottom));\n    return results;\n  }\n\n  /**\n   * Creates a Polygon collision area from the points of the bounding box\n   */\n  public toPolygon(actor?: Actor): ConvexPolygon {\n    let maybeCollider = null;\n    if (actor && actor.body && actor.body.collider) {\n      maybeCollider = actor.body.collider;\n    }\n    return new ConvexPolygon({\n      collider: maybeCollider,\n      points: this.getPoints(),\n      offset: Vector.Zero\n    });\n  }\n\n  /**\n   * Determines whether a ray intersects with a bounding box\n   */\n  public rayCast(ray: Ray, farClipDistance = Infinity): boolean {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    return tmax >= Math.max(0, tmin) && tmin < farClipDistance;\n  }\n\n  public rayCastTime(ray: Ray, farClipDistance = Infinity): number {\n    // algorithm from https://tavianator.com/fast-branchless-raybounding-box-intersections/\n    let tmin = -Infinity;\n    let tmax = +Infinity;\n\n    const xinv = ray.dir.x === 0 ? Number.MAX_VALUE : 1 / ray.dir.x;\n    const yinv = ray.dir.y === 0 ? Number.MAX_VALUE : 1 / ray.dir.y;\n\n    const tx1 = (this.left - ray.pos.x) * xinv;\n    const tx2 = (this.right - ray.pos.x) * xinv;\n    tmin = Math.min(tx1, tx2);\n    tmax = Math.max(tx1, tx2);\n\n    const ty1 = (this.top - ray.pos.y) * yinv;\n    const ty2 = (this.bottom - ray.pos.y) * yinv;\n    tmin = Math.max(tmin, Math.min(ty1, ty2));\n    tmax = Math.min(tmax, Math.max(ty1, ty2));\n\n    if (tmax >= Math.max(0, tmin) && tmin < farClipDistance) {\n      return tmin;\n    }\n    return -1;\n  }\n\n  /**\n   * Tests whether a point is contained within the bounding box\n   * @param p  The point to test\n   */\n  public contains(p: Vector): boolean;\n\n  /**\n   * Tests whether another bounding box is totally contained in this one\n   * @param bb  The bounding box to test\n   */\n  public contains(bb: BoundingBox): boolean;\n  public contains(val: any): boolean {\n    if (val instanceof Vector) {\n      return this.left <= val.x && this.top <= val.y && this.bottom >= val.y && this.right >= val.x;\n    } else if (val instanceof BoundingBox) {\n      if (this.left < val.left && this.top < val.top && val.bottom < this.bottom && val.right < this.right) {\n        return true;\n      }\n      return false;\n    }\n    return false;\n  }\n\n  /**\n   * Combines this bounding box and another together returning a new bounding box\n   * @param other  The bounding box to combine\n   */\n  public combine(other: BoundingBox): BoundingBox {\n    const compositeBB = new BoundingBox(\n      Math.min(this.left, other.left),\n      Math.min(this.top, other.top),\n      Math.max(this.right, other.right),\n      Math.max(this.bottom, other.bottom)\n    );\n    return compositeBB;\n  }\n\n  public get dimensions(): Vector {\n    return new Vector(this.width, this.height);\n  }\n\n  /**\n   * Test wether this bounding box intersects with another returning\n   * the intersection vector that can be used to resolve the collision. If there\n   * is no intersection null is returned.\n   *\n   * @param other  Other [[BoundingBox]] to test intersection with\n   * @returns A Vector in the direction of the current BoundingBox, this <- other\n   */\n  public intersect(other: BoundingBox): Vector {\n    const totalBoundingBox = this.combine(other);\n\n    // If the total bounding box is less than or equal the sum of the 2 bounds then there is collision\n    if (\n      totalBoundingBox.width < other.width + this.width &&\n      totalBoundingBox.height < other.height + this.height &&\n      !totalBoundingBox.dimensions.equals(other.dimensions) &&\n      !totalBoundingBox.dimensions.equals(this.dimensions)\n    ) {\n      // collision\n      let overlapX = 0;\n      // right edge is between the other's left and right edge\n      /**\n       *     +-this-+\n       *     |      |\n       *     |    +-other-+\n       *     +----|-+     |\n       *          |       |\n       *          +-------+\n       *         <---\n       *          ^ overlap\n       */\n      if (this.right >= other.left && this.right <= other.right) {\n        overlapX = other.left - this.right;\n        // right edge is past the other's right edge\n        /**\n         *     +-other-+\n         *     |       |\n         *     |    +-this-+\n         *     +----|--+   |\n         *          |      |\n         *          +------+\n         *          --->\n         *          ^ overlap\n         */\n      } else {\n        overlapX = other.right - this.left;\n      }\n\n      let overlapY = 0;\n      // top edge is between the other's top and bottom edge\n      /**\n       *     +-other-+\n       *     |       |\n       *     |    +-this-+   | <- overlap\n       *     +----|--+   |   |\n       *          |      |  \\ /\n       *          +------+   '\n       */\n      if (this.top <= other.bottom && this.top >= other.top) {\n        overlapY = other.bottom - this.top;\n        // top edge is above the other top edge\n        /**\n         *     +-this-+         .\n         *     |      |        / \\\n         *     |    +-other-+   | <- overlap\n         *     +----|-+     |   |\n         *          |       |\n         *          +-------+\n         */\n      } else {\n        overlapY = other.top - this.bottom;\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n      // Case of total containment of one bounding box by another\n    } else if (totalBoundingBox.dimensions.equals(other.dimensions) || totalBoundingBox.dimensions.equals(this.dimensions)) {\n      let overlapX = 0;\n      // this is wider than the other\n      if (this.width - other.width >= 0) {\n        // This right edge is closest to the others right edge\n        if (this.right - other.right <= other.left - this.left) {\n          overlapX = other.left - this.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = other.right - this.left;\n        }\n        // other is wider than this\n      } else {\n        // This right edge is closest to the others right edge\n        if (other.right - this.right <= this.left - other.left) {\n          overlapX = this.left - other.right;\n          // This left edge is closest to the others left edge\n        } else {\n          overlapX = this.right - other.left;\n        }\n      }\n\n      let overlapY = 0;\n      // this is taller than other\n      if (this.height - other.height >= 0) {\n        // The bottom edge is closest to the others bottom edge\n        if (this.bottom - other.bottom <= other.top - this.top) {\n          overlapY = other.top - this.bottom;\n        } else {\n          overlapY = other.bottom - this.top;\n        }\n        // other is taller than this\n      } else {\n        // The bottom edge is closest to the others bottom edge\n        if (other.bottom - this.bottom <= this.top - other.top) {\n          overlapY = this.top - other.bottom;\n        } else {\n          overlapY = this.bottom - other.top;\n        }\n      }\n\n      if (Math.abs(overlapX) < Math.abs(overlapY)) {\n        return new Vector(overlapX, 0);\n      } else {\n        return new Vector(0, overlapY);\n      }\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Test whether the bounding box has intersected with another bounding box, returns the side of the current bb that intersected.\n   * @param bb The other actor to test\n   */\n  public intersectWithSide(bb: BoundingBox): Side {\n    const intersect = this.intersect(bb);\n    return BoundingBox.getSideFromIntersection(intersect);\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D, color: Color = Color.Yellow) {\n    ctx.strokeStyle = color.toString();\n    ctx.strokeRect(this.left, this.top, this.width, this.height);\n  }\n\n  /**\n   * Draw a debug bounding box\n   * @param ex\n   * @param color\n   */\n  public draw(ex: ExcaliburGraphicsContext, color: Color = Color.Yellow) {\n    ex.debug.drawRect(this.left, this.top, this.width, this.height, { color });\n  }\n}\n","import { Vector } from './Algebra';\nimport { Logger } from './Util/Log';\nimport { Camera } from './Camera';\nimport { BrowserEvents } from './Util/Browser';\nimport { BoundingBox } from './Collision/Index';\nimport { ExcaliburGraphicsContext } from './Graphics/Context/ExcaliburGraphicsContext';\nimport { getPosition } from './Util/Util';\n\n/**\n * Enum representing the different display modes available to Excalibur.\n */\nexport enum DisplayMode {\n  /**\n   * Fit to screen using as much space as possible while maintaining aspect ratio and resolution.\n   * This is not the same as [[Screen.goFullScreen]]\n   *\n   * You may want to center your game here is an example\n   * ```html\n   * <!-- html -->\n   * <body>\n   * <main>\n   *   <canvas id=\"game\"></canvas>\n   * </main>\n   * </body>\n   * ```\n   *\n   * ```css\n   * // css\n   * main {\n   *   display: flex;\n   *   align-items: center;\n   *   justify-content: center;\n   *   height: 100%;\n   *   width: 100%;\n   * }\n   * ```\n   *\n   */\n  Fit = 'Fit',\n\n  /**\n   * Fill the entire screen's css width/height for the game resolution dynamically. This means the resolution of the game will\n   * change dynamically as the window is resized. This is not the same as [[Screen.goFullScreen]]\n   */\n  Fill = 'Fill',\n\n  /**\n   * Default, use a specified resolution for the game. Like 800x600 pixels for example.\n   */\n  Fixed = 'Fixed',\n\n  /**\n   * Allow the game to be positioned with the [[EngineOptions.position]] option\n   * @deprecated Use CSS to position the game canvas, will be removed in v0.26.0\n   */\n  Position = 'Position',\n\n  /**\n   * Use the parent DOM container's css width/height for the game resolution dynamically\n   */\n  Container = 'Container'\n}\n\n/**\n * Convenience class for quick resolutions\n * Mostly sourced from https://emulation.gametechwiki.com/index.php/Resolution\n */\nexport class Resolution {\n  /* istanbul ignore next */\n  public static get SVGA(): ScreenDimension {\n    return { width: 800, height: 600 };\n  }\n\n  /* istanbul ignore next */\n  public static get Standard(): ScreenDimension {\n    return { width: 1920, height: 1080 };\n  }\n\n  /* istanbul ignore next */\n  public static get Atari2600(): ScreenDimension {\n    return { width: 160, height: 192 };\n  }\n\n  /* istanbul ignore next */\n  public static get GameBoy(): ScreenDimension {\n    return { width: 160, height: 144 };\n  }\n\n  /* istanbul ignore next */\n  public static get GameBoyAdvance(): ScreenDimension {\n    return { width: 240, height: 160 };\n  }\n\n  /* istanbul ignore next */\n  public static get NintendoDS(): ScreenDimension {\n    return { width: 256, height: 192 };\n  }\n\n  /* istanbul ignore next */\n  public static get NES(): ScreenDimension {\n    return { width: 256, height: 224 };\n  }\n\n  /* istanbul ignore next */\n  public static get SNES(): ScreenDimension {\n    return { width: 256, height: 244 };\n  }\n}\n\n/**\n * Interface describing the absolute CSS position of the game window. For use when [[DisplayMode.Position]]\n * is specified and when the user wants to define exact pixel spacing of the window.\n * When a number is given, the value is interpreted as pixels\n */\nexport interface AbsolutePosition {\n  top?: number | string;\n  left?: number | string;\n  right?: number | string;\n  bottom?: number | string;\n}\n\nexport type CanvasPosition = string | AbsolutePosition;\n\nexport interface ScreenDimension {\n  width: number;\n  height: number;\n}\n\nexport interface ScreenOptions {\n  /**\n   * Canvas element to build a screen on\n   */\n  canvas: HTMLCanvasElement;\n  /**\n   * Graphics context for the screen\n   */\n  context: ExcaliburGraphicsContext;\n\n  /**\n   * Browser abstraction\n   */\n  browser: BrowserEvents;\n  /**\n   * Optionally set antialiasing, defaults to true. If set to true, images will be smoothed\n   */\n  antialiasing?: boolean;\n  /**\n   * Optionally override the pixel ratio to use for the screen, otherwise calculated automatically from the browser\n   */\n  pixelRatio?: number;\n  /**\n   * Optionally specify the actual pixel resolution in width/height pixels (also known as logical resolution), by default the\n   * resolution will be the same as the viewport. Resolution will be overridden by DisplayMode.Container and DisplayMode.FullScreen.\n   */\n  resolution?: ScreenDimension;\n  /**\n   * Visual viewport size in css pixel, if resolution is not specified it will be the same as the viewport\n   */\n  viewport: ScreenDimension;\n  /**\n   * Set the display mode of the screen, by default DisplayMode.Fixed.\n   */\n  displayMode?: DisplayMode;\n  /**\n   * Specify how the game window is to be positioned when the [[DisplayMode.Position]] is chosen. This option MUST be specified\n   * if the DisplayMode is set as [[DisplayMode.Position]]. The position can be either a string or an [[AbsolutePosition]].\n   * String must be in the format of css style background-position. The vertical position must precede the horizontal position in strings.\n   *\n   * Valid String examples: \"top left\", \"top\", \"bottom\", \"middle\", \"middle center\", \"bottom right\"\n   * Valid [[AbsolutePosition]] examples: `{top: 5, right: 10%}`, `{bottom: 49em, left: 10px}`, `{left: 10, bottom: 40}`\n   */\n  position?: CanvasPosition;\n}\n\n/**\n * The Screen handles all aspects of interacting with the screen for Excalibur.\n */\nexport class Screen {\n  private _canvas: HTMLCanvasElement;\n  private _ctx: ExcaliburGraphicsContext;\n  private _antialiasing: boolean = true;\n  private _browser: BrowserEvents;\n  private _camera: Camera;\n  private _resolution: ScreenDimension;\n  private _resolutionStack: ScreenDimension[] = [];\n  private _viewport: ScreenDimension;\n  private _viewportStack: ScreenDimension[] = [];\n  private _pixelRatioOverride: number | null = null;\n  private _position: CanvasPosition;\n  private _displayMode: DisplayMode;\n  private _isFullScreen = false;\n  private _mediaQueryList: MediaQueryList;\n  private _isDisposed = false;\n  private _logger = Logger.getInstance();\n\n  constructor(options: ScreenOptions) {\n    this.viewport = options.viewport;\n    this.resolution = options.resolution ?? { ...this.viewport };\n    this._displayMode = options.displayMode ?? DisplayMode.Fixed;\n    this._canvas = options.canvas;\n    this._ctx = options.context;\n    this._antialiasing = options.antialiasing ?? this._antialiasing;\n    this._browser = options.browser;\n    this._position = options.position;\n    this._pixelRatioOverride = options.pixelRatio;\n    this._applyDisplayMode();\n\n    this._mediaQueryList = this._browser.window.nativeComponent.matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);\n    this._mediaQueryList.addEventListener('change', this._pixelRatioChangeHandler);\n\n    this._canvas.addEventListener('fullscreenchange', this._fullscreenChangeHandler);\n  }\n\n  public dispose(): void {\n    if (!this._isDisposed) {\n      // Clean up handlers\n      this._isDisposed = true;\n      this._browser.window.off('resize', this._windowResizeHandler);\n      this._mediaQueryList.removeEventListener('change', this._pixelRatioChangeHandler);\n      this._canvas.removeEventListener('fullscreenchange', this._fullscreenChangeHandler);\n    }\n  }\n\n  private _fullscreenChangeHandler = () => {\n    this._isFullScreen = !this._isFullScreen;\n    this._logger.debug('Fullscreen Change', this._isFullScreen);\n  };\n\n  private _pixelRatioChangeHandler = () => {\n    this._logger.debug('Pixel Ratio Change', window.devicePixelRatio);\n    this._devicePixelRatio = this._calculateDevicePixelRatio();\n    this.applyResolutionAndViewport();\n  };\n\n  private _windowResizeHandler = () => {\n    const parent = <any>(this.displayMode === DisplayMode.Container ? <any>(this.canvas.parentElement || document.body) : <any>window);\n    this._logger.debug('View port resized');\n    this._setResolutionAndViewportByDisplayMode(parent);\n    this.applyResolutionAndViewport();\n  };\n\n  private _calculateDevicePixelRatio() {\n    if (window.devicePixelRatio < 1) {\n      return 1;\n    }\n\n    const devicePixelRatio = window.devicePixelRatio || 1;\n\n    return devicePixelRatio;\n  }\n\n  // Asking the window.devicePixelRatio is expensive we do it once\n  private _devicePixelRatio = this._calculateDevicePixelRatio();\n\n  public get pixelRatio(): number {\n    if (this._pixelRatioOverride) {\n      return this._pixelRatioOverride;\n    }\n\n    return this._devicePixelRatio;\n  }\n\n  public get isHiDpi() {\n    return this.pixelRatio !== 1;\n  }\n\n  public get displayMode(): DisplayMode {\n    return this._displayMode;\n  }\n\n  public get canvas(): HTMLCanvasElement {\n    return this._canvas;\n  }\n\n  public get resolution(): ScreenDimension {\n    return this._resolution;\n  }\n\n  public set resolution(resolution: ScreenDimension) {\n    this._resolution = resolution;\n  }\n\n  public get viewport(): ScreenDimension {\n    if (this._viewport) {\n      return this._viewport;\n    }\n    return this._resolution;\n  }\n\n  public set viewport(viewport: ScreenDimension) {\n    this._viewport = viewport;\n  }\n\n  public get aspectRatio() {\n    return this._resolution.width / this._resolution.height;\n  }\n\n  public get scaledWidth() {\n    return this._resolution.width * this.pixelRatio;\n  }\n\n  public get scaledHeight() {\n    return this._resolution.height * this.pixelRatio;\n  }\n\n  public setCurrentCamera(camera: Camera) {\n    this._camera = camera;\n  }\n\n  public pushResolutionAndViewport() {\n    this._resolutionStack.push(this.resolution);\n    this._viewportStack.push(this.viewport);\n\n    this.resolution = { ...this.resolution };\n    this.viewport = { ...this.viewport };\n  }\n\n  public popResolutionAndViewport() {\n    this.resolution = this._resolutionStack.pop();\n    this.viewport = this._viewportStack.pop();\n  }\n\n  public applyResolutionAndViewport() {\n    this._canvas.width = this.scaledWidth;\n    this._canvas.height = this.scaledHeight;\n\n    if (this._antialiasing) {\n      this._canvas.style.imageRendering = 'auto';\n    } else {\n      this._canvas.style.imageRendering = 'pixelated';\n      // Fall back to 'crisp-edges' if 'pixelated' is not supported\n      // Currently for firefox https://developer.mozilla.org/en-US/docs/Web/CSS/image-rendering\n      if (this._canvas.style.imageRendering === '') {\n        this._canvas.style.imageRendering = 'crisp-edges';\n      }\n    }\n    this._canvas.style.width = this.viewport.width + 'px';\n    this._canvas.style.height = this.viewport.height + 'px';\n\n    // After messing with the canvas width/height the graphics context is invalidated and needs to have some properties reset\n    this._ctx.updateViewport();\n    this._ctx.resetTransform();\n    this._ctx.scale(this.pixelRatio, this.pixelRatio);\n    this._ctx.smoothing = this._antialiasing;\n  }\n\n  public get antialiasing() {\n    return this._antialiasing;\n  }\n\n  public set antialiasing(isSmooth: boolean) {\n    this._antialiasing = isSmooth;\n    this._ctx.smoothing = this._antialiasing;\n  }\n\n  /**\n   * Returns true if excalibur is fullscreened using the browser fullscreen api\n   */\n  public get isFullScreen() {\n    return this._isFullScreen;\n  }\n\n  /**\n   * Requests to go fullscreen using the browser fullscreen api, requires user interaction to be successful.\n   * For example, wire this to a user click handler.\n   */\n  public goFullScreen(): Promise<void> {\n    return this._canvas.requestFullscreen();\n  }\n\n  /**\n   * Requests to exit fullscreen using the browser fullscreen api\n   */\n  public exitFullScreen(): Promise<void> {\n    return document.exitFullscreen();\n  }\n\n  /**\n   * Takes a coordinate in normal html page space, for example from a pointer move event, and translates it to\n   * Excalibur screen space.\n   *\n   * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n   * bottom right corner (resolutionX, resolutionY)\n   * @param point\n   */\n  public pageToScreenCoordinates(point: Vector): Vector {\n    let newX = point.x;\n    let newY = point.y;\n\n    if (!this._isFullScreen) {\n      newX -= getPosition(this._canvas).x;\n      newY -= getPosition(this._canvas).y;\n    }\n\n    // if fullscreen api on it centers with black bars\n    // we need to adjust the screen to world coordinates in this case\n    if (this._isFullScreen) {\n      if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n        const screenHeight = window.innerWidth / this.aspectRatio;\n        const screenMarginY = (window.innerHeight - screenHeight) / 2;\n        newY = ((newY - screenMarginY) / screenHeight) * this.viewport.height;\n        newX = (newX / window.innerWidth) * this.viewport.width;\n      } else {\n        const screenWidth = window.innerHeight * this.aspectRatio;\n        const screenMarginX = (window.innerWidth - screenWidth) / 2;\n        newX = ((newX - screenMarginX) / screenWidth) * this.viewport.width;\n        newY = (newY / window.innerHeight) * this.viewport.height;\n      }\n    }\n\n    newX = (newX / this.viewport.width) * this.resolution.width;\n    newY = (newY / this.viewport.height) * this.resolution.height;\n\n    return new Vector(newX, newY);\n  }\n\n  /**\n   * Takes a coordinate in Excalibur screen space, and translates it to normal html page space. For example,\n   * this is where html elements might live if you want to position them relative to Excalibur.\n   *\n   * Excalibur screen space starts at the top left (0, 0) corner of the viewport, and extends to the\n   * bottom right corner (resolutionX, resolutionY)\n   * @param point\n   */\n  public screenToPageCoordinates(point: Vector): Vector {\n    let newX = point.x;\n    let newY = point.y;\n\n    newX = (newX / this.resolution.width) * this.viewport.width;\n    newY = (newY / this.resolution.height) * this.viewport.height;\n\n    if (this._isFullScreen) {\n      if (window.innerWidth / this.aspectRatio < window.innerHeight) {\n        const screenHeight = window.innerWidth / this.aspectRatio;\n        const screenMarginY = (window.innerHeight - screenHeight) / 2;\n        newY = (newY / this.viewport.height) * screenHeight + screenMarginY;\n        newX = (newX / this.viewport.width) * window.innerWidth;\n      } else {\n        const screenWidth = window.innerHeight * this.aspectRatio;\n        const screenMarginX = (window.innerWidth - screenWidth) / 2;\n        newX = (newX / this.viewport.width) * screenWidth + screenMarginX;\n        newY = (newY / this.viewport.height) * window.innerHeight;\n      }\n    }\n\n    if (!this._isFullScreen) {\n      newX += getPosition(this._canvas).x;\n      newY += getPosition(this._canvas).y;\n    }\n\n    return new Vector(newX, newY);\n  }\n\n  /**\n   * Takes a coordinate in Excalibur screen space, and translates it to Excalibur world space.\n   *\n   * World space is where [[entities|Entity]] in Excalibur live by default [[CoordPlane.World]]\n   * and extends infinitely out relative from the [[Camera]].\n   * @param point  Screen coordinate to convert\n   */\n  public screenToWorldCoordinates(point: Vector): Vector {\n    let newX = point.x;\n    let newY = point.y;\n\n    // transform back to world space\n    newX = (newX / this.resolution.width) * this.drawWidth;\n    newY = (newY / this.resolution.height) * this.drawHeight;\n\n    // transform based on zoom\n    newX = newX - this.halfDrawWidth;\n    newY = newY - this.halfDrawHeight;\n\n    // shift by camera focus\n    newX += this._camera?.x ?? 0;\n    newY += this._camera?.y ?? 0;\n\n    return new Vector(newX, newY);\n  }\n\n  /**\n   * Takes a coordinate in Excalibur world space, and translates it to Excalibur screen space.\n   *\n   * Screen space is where [[ScreenElements]] and [[entities|Entity]] with [[CoordPlane.Screen]] live.\n   * @param point  World coordinate to convert\n   */\n  public worldToScreenCoordinates(point: Vector): Vector {\n    let screenX = point.x;\n    let screenY = point.y;\n\n    // shift by camera focus\n    screenX -= this._camera?.x ?? 0;\n    screenY -= this._camera?.y ?? 0;\n\n    // transform back on zoom\n    screenX = screenX + this.halfDrawWidth;\n    screenY = screenY + this.halfDrawHeight;\n\n    // transform back to screen space\n    screenX = (screenX / this.drawWidth) * this.resolution.width;\n    screenY = (screenY / this.drawHeight) * this.resolution.height;\n\n    return new Vector(screenX, screenY);\n  }\n\n  public pageToWorldCoordinates(point: Vector): Vector {\n    const screen = this.pageToScreenCoordinates(point);\n    return this.screenToWorldCoordinates(screen);\n  }\n\n  public worldToPageCoordinates(point: Vector): Vector {\n    const screen = this.worldToScreenCoordinates(point);\n    return this.screenToPageCoordinates(screen);\n  }\n\n  /**\n   * Returns a BoundingBox of the top left corner of the screen\n   * and the bottom right corner of the screen.\n   *\n   * World bounds are in world coordinates, useful for culling objects offscreen\n   */\n  public getWorldBounds(): BoundingBox {\n    const left = this.screenToWorldCoordinates(Vector.Zero).x;\n    const top = this.screenToWorldCoordinates(Vector.Zero).y;\n    const right = left + this.drawWidth;\n    const bottom = top + this.drawHeight;\n\n    return new BoundingBox(left, top, right, bottom);\n  }\n\n  /**\n   * The width of the game canvas in pixels (physical width component of the\n   * resolution of the canvas element)\n   */\n  public get canvasWidth(): number {\n    return this.canvas.width;\n  }\n\n  /**\n   * Returns half width of the game canvas in pixels (half physical width component)\n   */\n  public get halfCanvasWidth(): number {\n    return this.canvas.width / 2;\n  }\n\n  /**\n   * The height of the game canvas in pixels, (physical height component of\n   * the resolution of the canvas element)\n   */\n  public get canvasHeight(): number {\n    return this.canvas.height;\n  }\n\n  /**\n   * Returns half height of the game canvas in pixels (half physical height component)\n   */\n  public get halfCanvasHeight(): number {\n    return this.canvas.height / 2;\n  }\n\n  /**\n   * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawWidth(): number {\n    if (this._camera) {\n      return this.scaledWidth / this._camera.zoom / this.pixelRatio;\n    }\n    return this.scaledWidth / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawWidth(): number {\n    return this.drawWidth / 2;\n  }\n\n  /**\n   * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawHeight(): number {\n    if (this._camera) {\n      return this.scaledHeight / this._camera.zoom / this.pixelRatio;\n    }\n    return this.scaledHeight / this.pixelRatio;\n  }\n\n  /**\n   * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawHeight(): number {\n    return this.drawHeight / 2;\n  }\n\n  private _computeFit() {\n    document.body.style.margin = '0px';\n    document.body.style.overflow = 'hidden';\n    const aspect = this.aspectRatio;\n    let adjustedWidth = 0;\n    let adjustedHeight = 0;\n    if (window.innerWidth / aspect < window.innerHeight) {\n      adjustedWidth = window.innerWidth;\n      adjustedHeight = window.innerWidth / aspect;\n    } else {\n      adjustedWidth = window.innerHeight * aspect;\n      adjustedHeight = window.innerHeight;\n    }\n\n    this.viewport = {\n      width: adjustedWidth,\n      height: adjustedHeight\n    };\n  }\n\n  private _applyDisplayMode() {\n    if (this.displayMode === DisplayMode.Fit || this.displayMode === DisplayMode.Fill || this.displayMode === DisplayMode.Container) {\n      const parent = <any>(this.displayMode === DisplayMode.Container ? <any>(this.canvas.parentElement || document.body) : <any>window);\n\n      this._setResolutionAndViewportByDisplayMode(parent);\n\n      this._browser.window.on('resize', this._windowResizeHandler);\n    } else if (this.displayMode === DisplayMode.Position) {\n      this._initializeDisplayModePosition(this._position);\n    }\n  }\n\n  /**\n   * Sets the resoultion and viewport based on the selected display mode.\n   */\n  private _setResolutionAndViewportByDisplayMode(parent: HTMLElement | Window) {\n    if (this.displayMode === DisplayMode.Container) {\n      this.resolution = {\n        width: (<HTMLElement>parent).clientWidth,\n        height: (<HTMLElement>parent).clientHeight\n      };\n\n      this.viewport = this.resolution;\n    }\n\n    if (this.displayMode === DisplayMode.Fill) {\n      document.body.style.margin = '0px';\n      document.body.style.overflow = 'hidden';\n      this.resolution = {\n        width: (<Window>parent).innerWidth,\n        height: (<Window>parent).innerHeight\n      };\n\n      this.viewport = this.resolution;\n    }\n\n    if (this.displayMode === DisplayMode.Fit) {\n      this._computeFit();\n    }\n  }\n\n  private _initializeDisplayModePosition(position: CanvasPosition) {\n    if (!position) {\n      throw new Error('DisplayMode of Position was selected but no position option was given');\n    } else {\n      this.canvas.style.display = 'block';\n      this.canvas.style.position = 'absolute';\n\n      if (typeof position === 'string') {\n        const specifiedPosition = position.split(' ');\n\n        switch (specifiedPosition[0]) {\n          case 'top':\n            this.canvas.style.top = '0px';\n            break;\n          case 'bottom':\n            this.canvas.style.bottom = '0px';\n            break;\n          case 'middle':\n            this.canvas.style.top = '50%';\n            const offsetY = -this.halfDrawHeight;\n            this.canvas.style.marginTop = offsetY.toString();\n            break;\n          default:\n            throw new Error('Invalid Position Given');\n        }\n\n        if (specifiedPosition[1]) {\n          switch (specifiedPosition[1]) {\n            case 'left':\n              this.canvas.style.left = '0px';\n              break;\n            case 'right':\n              this.canvas.style.right = '0px';\n              break;\n            case 'center':\n              this.canvas.style.left = '50%';\n              const offsetX = -this.halfDrawWidth;\n              this.canvas.style.marginLeft = offsetX.toString();\n              break;\n            default:\n              throw new Error('Invalid Position Given');\n          }\n        }\n      } else {\n        if (position.top) {\n          typeof position.top === 'number'\n            ? (this.canvas.style.top = position.top.toString() + 'px')\n            : (this.canvas.style.top = position.top);\n        }\n        if (position.right) {\n          typeof position.right === 'number'\n            ? (this.canvas.style.right = position.right.toString() + 'px')\n            : (this.canvas.style.right = position.right);\n        }\n        if (position.bottom) {\n          typeof position.bottom === 'number'\n            ? (this.canvas.style.bottom = position.bottom.toString() + 'px')\n            : (this.canvas.style.bottom = position.bottom);\n        }\n        if (position.left) {\n          typeof position.left === 'number'\n            ? (this.canvas.style.left = position.left.toString() + 'px')\n            : (this.canvas.style.left = position.left);\n        }\n      }\n    }\n  }\n}\n","import { GameEvent, SubscribeEvent, UnsubscribeEvent } from './Events';\nimport { Eventable } from './Interfaces/Evented';\n\nexport class EventDispatcher<T = any> implements Eventable {\n  private _handlers: { [key: string]: { (event: GameEvent<T>): void }[] } = {};\n  private _wiredEventDispatchers: Eventable[] = [];\n\n  private _target: T;\n\n  /**\n   * @param target  The object that will be the recipient of events from this event dispatcher\n   */\n  constructor(target: T) {\n    this._target = target;\n  }\n\n  /**\n   * Clears any existing handlers or wired event dispatchers on this event dispatcher\n   */\n  public clear() {\n    this._handlers = {};\n    this._wiredEventDispatchers = [];\n  }\n\n  /**\n   * Emits an event for target\n   * @param eventName  The name of the event to publish\n   * @param event      Optionally pass an event data object to the handler\n   */\n  public emit(eventName: string, event: GameEvent<T>) {\n    if (!eventName) {\n      // key not mapped\n      return;\n    }\n    eventName = eventName.toLowerCase();\n    const target = this._target;\n    if (!event) {\n      event = new GameEvent();\n    }\n    try {\n      event.target = target;\n    } catch {\n      // pass\n    }\n    let i: number, len: number;\n\n    if (this._handlers[eventName]) {\n      i = 0;\n      len = this._handlers[eventName].length;\n\n      for (i; i < len; i++) {\n        this._handlers[eventName][i].call(target, event);\n      }\n    }\n\n    i = 0;\n    len = this._wiredEventDispatchers.length;\n\n    for (i; i < len; i++) {\n      this._wiredEventDispatchers[i].emit(eventName, event);\n    }\n  }\n\n  /**\n   * Subscribe an event handler to a particular event name, multiple handlers per event name are allowed.\n   * @param eventName  The name of the event to subscribe to\n   * @param handler    The handler callback to fire on this event\n   */\n  public on(eventName: string, handler: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    if (!this._handlers[eventName]) {\n      this._handlers[eventName] = [];\n    }\n    this._handlers[eventName].push(handler);\n\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('subscribe', new SubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Unsubscribe an event handler(s) from an event. If a specific handler\n   * is specified for an event, only that handler will be unsubscribed.\n   * Otherwise all handlers will be unsubscribed for that event.\n   *\n   * @param eventName  The name of the event to unsubscribe\n   * @param handler    Optionally the specific handler to unsubscribe\n   *\n   */\n  public off(eventName: string, handler?: (event: GameEvent<T>) => void) {\n    eventName = eventName.toLowerCase();\n    const eventHandlers = this._handlers[eventName];\n\n    if (eventHandlers) {\n      // if no explicit handler is give with the event name clear all handlers\n      if (!handler) {\n        this._handlers[eventName].length = 0;\n      } else {\n        const index = eventHandlers.indexOf(handler);\n        this._handlers[eventName].splice(index, 1);\n      }\n    }\n    // meta event handlers\n    if (eventName !== 'unsubscribe' && eventName !== 'subscribe') {\n      this.emit('unsubscribe', new UnsubscribeEvent(eventName, handler));\n    }\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<T>) => void) {\n    const metaHandler = (event: GameEvent<T>) => {\n      const ev = event || new GameEvent();\n      try {\n        ev.target = ev.target || this._target;\n      } catch {\n        // pass\n      }\n\n      this.off(eventName, handler);\n      handler.call(ev.target, ev);\n    };\n\n    this.on(eventName, metaHandler);\n  }\n\n  /**\n   * Wires this event dispatcher to also receive events from another\n   */\n  public wire(eventDispatcher: EventDispatcher): void {\n    eventDispatcher._wiredEventDispatchers.push(this);\n  }\n\n  /**\n   * Unwires this event dispatcher from another\n   */\n  public unwire(eventDispatcher: EventDispatcher): void {\n    const index = eventDispatcher._wiredEventDispatchers.indexOf(this);\n    if (index > -1) {\n      eventDispatcher._wiredEventDispatchers.splice(index, 1);\n    }\n  }\n}\n","import { Loadable } from '../Interfaces/Loadable';\nimport { Logger } from '../Util/Log';\nimport { EventDispatcher } from '../EventDispatcher';\n\n/**\n * The [[Resource]] type allows games built in Excalibur to load generic resources.\n * For any type of remote resource it is recommended to use [[Resource]] for preloading.\n */\nexport class Resource<T> implements Loadable<T> {\n  public data: T = null;\n  public logger: Logger = Logger.getInstance();\n  public events: EventDispatcher = new EventDispatcher(this);\n\n  /**\n   * @param path          Path to the remote resource\n   * @param responseType  The type to expect as a response: \"\" | \"arraybuffer\" | \"blob\" | \"document\" | \"json\" | \"text\";\n   * @param bustCache     Whether or not to cache-bust requests\n   */\n  constructor(\n    public path: string,\n    public responseType: '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text',\n    public bustCache: boolean = true\n  ) {}\n\n  /**\n   * Returns true if the Resource is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return this.data !== null;\n  }\n\n\n  private _cacheBust(uri: string): string {\n    const query: RegExp = /\\?\\w*=\\w*/;\n    if (query.test(uri)) {\n      uri += '&__=' + Date.now();\n    } else {\n      uri += '?__=' + Date.now();\n    }\n    return uri;\n  }\n  /**\n   * Begin loading the resource and returns a promise to be resolved on completion\n   */\n  public load(): Promise<T> {\n    return new Promise((resolve, reject) => {\n      // Exit early if we already have data\n      if (this.data !== null) {\n        this.logger.debug('Already have data for resource', this.path);\n        this.events.emit('complete', this.data as any);\n        resolve(this.data);\n        return;\n      }\n\n      const request = new XMLHttpRequest();\n      request.open('GET', this.bustCache ? this._cacheBust(this.path) : this.path, true);\n      request.responseType = this.responseType;\n      request.addEventListener('loadstart', (e) => this.events.emit('loadstart', e as any));\n      request.addEventListener('progress', (e) => this.events.emit('progress', e as any));\n      request.addEventListener('error', (e) => this.events.emit('error', e as any));\n      request.addEventListener('load', (e) => this.events.emit('load', e as any));\n      request.addEventListener('load', () => {\n        // XHR on file:// success status is 0, such as with PhantomJS\n        if (request.status !== 0 && request.status !== 200) {\n          this.logger.error('Failed to load resource ', this.path, ' server responded with error code', request.status);\n          this.events.emit('error', request.response);\n          reject(request.response);\n          return;\n        }\n\n        this.data = request.response;\n        this.events.emit('complete', this.data as any);\n        this.logger.debug('Completed loading resource', this.path);\n        resolve(this.data);\n      });\n      request.send();\n    });\n  }\n}\n","/**\n * These effects can be applied to any bitmap image but are mainly used\n * for [[Sprite]] effects or [[Animation]] effects.\n */\n\n/**\n * @typedoc\n */\n\nimport { obsolete } from '../Util/Decorators';\nimport { Color } from './Color';\n\n/**\n * The interface that all sprite effects must implement\n * @deprecated SpriteEffect will be removed in v0.26.0\n */\nexport interface SpriteEffect {\n  /**\n   * Should update individual pixels values\n   * @param x          The pixel's x coordinate\n   * @param y          The pixel's y coordinate\n   * @param imageData  The sprite's raw pixel data\n   */\n  updatePixel(x: number, y: number, imageData: ImageData): void;\n}\n\n/**\n * Applies the \"Grayscale\" effect to a sprite, removing color information.\n * @deprecated [[Grayscale]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Grayscale will be removed in v0.26.0'\n})\nexport class Grayscale implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const avg = (pixel[firstPixel + 0] + pixel[firstPixel + 1] + pixel[firstPixel + 2]) / 3;\n    pixel[firstPixel + 0] = avg;\n    pixel[firstPixel + 1] = avg;\n    pixel[firstPixel + 2] = avg;\n  }\n}\n\n/**\n * Applies the \"Invert\" effect to a sprite, inverting the pixel colors.\n * @deprecated [[Invert]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Invert will be removed in v0.26.0'\n})\nexport class Invert implements SpriteEffect {\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    pixel[firstPixel + 0] = 255 - pixel[firstPixel + 0];\n    pixel[firstPixel + 1] = 255 - pixel[firstPixel + 1];\n    pixel[firstPixel + 2] = 255 - pixel[firstPixel + 2];\n  }\n}\n\n/**\n * Applies the \"Opacity\" effect to a sprite, setting the alpha of all pixels to a given value.\n * @deprecated [[Opacity]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Opacity will be removed in v0.26.0'\n})\nexport class Opacity implements SpriteEffect {\n  /**\n   * @param opacity  The new opacity of the sprite from 0-1.0\n   */\n  constructor(public opacity: number) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 3] = Math.round(this.opacity * pixel[firstPixel + 3]);\n    }\n  }\n}\n\n/**\n * Applies the \"Colorize\" effect to a sprite, changing the color channels of all the pixels to an\n * average of the original color and the provided color\n * @deprecated [[Colorize]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Colorize will be removed in v0.26.0'\n})\nexport class Colorize implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = (pixel[firstPixel + 0] + this.color.r) / 2;\n      pixel[firstPixel + 1] = (pixel[firstPixel + 1] + this.color.g) / 2;\n      pixel[firstPixel + 2] = (pixel[firstPixel + 2] + this.color.b) / 2;\n    }\n  }\n}\n\n/**\n * Applies the \"Lighten\" effect to a sprite, changes the lightness of the color according to HSL\n * @deprecated [[Lighten]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Lighten will be removed in v0.26.0'\n})\nexport class Lighten implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).lighten(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Darken\" effect to a sprite, changes the darkness of the color according to HSL\n * @deprecated [[Darken]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Darken will be removed v0.26.0'\n})\nexport class Darken implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).darken(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Saturate\" effect to a sprite, saturates the color according to HSL\n * @deprecated [[Saturate]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Saturate will be removed in v0.26.0'\n})\nexport class Saturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).saturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Desaturate\" effect to a sprite, desaturates the color according to HSL\n * @deprecated [[Desaturate]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Desaturate will be removed in v0.26.0'\n})\nexport class Desaturate implements SpriteEffect {\n  /**\n   * @param factor  The factor of the effect between 0-1\n   */\n  constructor(public factor: number = 0.1) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    const color = Color.fromRGB(pixel[firstPixel + 0], pixel[firstPixel + 1], pixel[firstPixel + 2], pixel[firstPixel + 3]).desaturate(\n      this.factor\n    );\n    pixel[firstPixel + 0] = color.r;\n    pixel[firstPixel + 1] = color.g;\n    pixel[firstPixel + 2] = color.b;\n    pixel[firstPixel + 3] = color.a;\n  }\n}\n\n/**\n * Applies the \"Fill\" effect to a sprite, changing the color channels of all non-transparent pixels to match\n * a given color\n * @deprecated [[Fill]] will be removed in v0.26.0\n */\n@obsolete({\n  message: 'Fill will be removed in v0.26.0'\n})\nexport class Fill implements SpriteEffect {\n  /**\n   * @param color  The color to apply to the sprite\n   */\n  constructor(public color: Color) {}\n  updatePixel(x: number, y: number, imageData: ImageData): void {\n    const firstPixel = (x + y * imageData.width) * 4;\n    const pixel = imageData.data;\n    if (pixel[firstPixel + 3] !== 0) {\n      pixel[firstPixel + 0] = this.color.r;\n      pixel[firstPixel + 1] = this.color.g;\n      pixel[firstPixel + 2] = this.color.b;\n    }\n  }\n}\n","export type Constructor<T> = {\n  new (...args: any[]): T;\n};\n/**\n * Configurable helper extends base type and makes all properties available as option bag arguments\n * @internal\n * @param base\n */\nexport function Configurable<T extends Constructor<{}>>(base: T): T {\n  return class extends base {\n    public assign(props: Partial<T>) {\n      //set the value of every property that was passed in,\n      //if the constructor previously set this value, it will be overridden here\n      for (const k in props) {\n        // eslint-disable-next-line\n        if (typeof (<any>this)[k] !== 'function') {\n          // eslint-disable-next-line\n          (<any>this)[k] = (<any>props)[k];\n        }\n      }\n    }\n\n    constructor(...args: any[]) {\n      super(...args);\n      //get the number of arguments that aren't undefined. TS passes a value to all parameters\n      //of whatever ctor is the implementation, so args.length doesn't work here.\n      const size = args.filter(function(value) {\n        return value !== undefined;\n      }).length;\n      if (size === 1 && args[0] && typeof args[0] === 'object' && !(args[0] instanceof Array)) {\n        this.assign(args[0]);\n      }\n    }\n  };\n}\n","import * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Texture } from '../Resources/Texture';\nimport { Vector } from '../Algebra';\nimport { Logger } from '../Util/Log';\nimport { clamp } from '../Util/Util';\nimport { Configurable } from '../Configurable';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * @hidden\n * @deprecated Use [[\"Graphics/Sprite\".Sprite]]\n */\nexport class SpriteImpl implements Drawable {\n  public texture: Texture;\n\n  public x: number = 0;\n  public y: number = 0;\n\n  public get drawWidth(): number {\n    return Math.abs(this.width * this.scale.x);\n  }\n\n  public get drawHeight(): number {\n    return Math.abs(this.height * this.scale.y);\n  }\n\n  public rotation: number = 0.0;\n  public anchor: Vector = Vector.Half;\n  public offset: Vector = Vector.Zero;\n  public scale: Vector = Vector.One;\n  /**\n   * Default: false, should the sprite be drawn around the anchor or from the top left.\n   * Sprite rotations/scaling still happen around the anchor regardless of this setting.\n   */\n  public drawAroundAnchor = false;\n\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * Draws the sprite flipped vertically\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Draws the sprite flipped horizontally\n   */\n  public flipHorizontal: boolean = false;\n\n  public effects: Effects.SpriteEffect[] = [];\n\n  public width: number = 0;\n  public height: number = 0;\n\n  private _spriteCanvas: HTMLCanvasElement = null;\n  private _spriteCtx: CanvasRenderingContext2D = null;\n  private _pixelData: ImageData = null;\n  private _pixelsLoaded: boolean = false;\n  private _dirtyEffect: boolean = true;\n\n  /**\n   * @param imageOrConfig  The backing image texture to build the Sprite, or Sprite option bag\n   * @param x      The x position of the sprite\n   * @param y      The y position of the sprite\n   * @param width  The width of the sprite in pixels\n   * @param height The height of the sprite in pixels\n   */\n  constructor(imageOrConfig: Texture | SpriteArgs, x: number, y: number, width: number, height: number) {\n    let image = imageOrConfig;\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      x = imageOrConfig.x | 0;\n      y = imageOrConfig.y | 0;\n      width = imageOrConfig.width | 0;\n      height = imageOrConfig.height | 0;\n      image = imageOrConfig.image;\n      if (!image) {\n        const message = 'An image texture is required to construct a sprite';\n        throw new Error(message);\n      }\n    }\n\n    this.x = x || 0;\n    this.y = y || 0;\n\n    this.texture = image as Texture;\n    this._spriteCanvas = document.createElement('canvas');\n    this._spriteCanvas.width = width;\n    this._spriteCanvas.height = height;\n    this._spriteCtx = this._spriteCanvas.getContext('2d');\n    this._initPixelsFromTexture();\n\n    this.width = width;\n    this.height = height;\n  }\n\n  private async _initPixelsFromTexture() {\n    try {\n      const image = await this.texture.loaded;\n      this.width = this.width || image.naturalWidth;\n      this.height = this.height || image.naturalHeight;\n      this._spriteCanvas.width = this._spriteCanvas.width || image.naturalWidth;\n      this._spriteCanvas.height = this._spriteCanvas.height || image.naturalHeight;\n      this._loadPixels();\n      this._dirtyEffect = true;\n    } catch (e) {\n      this.logger.error('Error loading texture ', this.texture.path, e);\n    }\n  }\n\n  private _loadPixels() {\n    if (this.texture.isLoaded() && !this._pixelsLoaded) {\n      const naturalWidth = this.texture.image.naturalWidth || 0;\n      const naturalHeight = this.texture.image.naturalHeight || 0;\n\n      if (this.width > naturalWidth) {\n        this.logger.warn(`The sprite width ${this.width} exceeds the width \n                              ${naturalWidth} of the backing texture ${this.texture.path}`);\n      }\n\n      if (this.width <= 0 || naturalWidth <= 0) {\n        throw new Error(`The width of a sprite cannot be 0 or negative, sprite width: ${this.width}, original width: ${naturalWidth}`);\n      }\n\n      if (this.height > naturalHeight) {\n        this.logger.warn(`The sprite height ${this.height} exceeds the height \n                              ${naturalHeight} of the backing texture ${this.texture.path}`);\n      }\n\n      if (this.height <= 0 || naturalHeight <= 0) {\n        throw new Error(`The height of a sprite cannot be 0 or negative, sprite height: ${this.height}, original height: ${naturalHeight}`);\n      }\n\n      this._flushTexture();\n\n      this._pixelsLoaded = true;\n    }\n  }\n\n  private _flushTexture() {\n    const naturalWidth = this.texture.image.naturalWidth || 0;\n    const naturalHeight = this.texture.image.naturalHeight || 0;\n\n    this._spriteCtx.clearRect(0, 0, this.width, this.height);\n    this._spriteCtx.drawImage(\n      this.texture.image,\n      clamp(this.x, 0, naturalWidth),\n      clamp(this.y, 0, naturalHeight),\n      clamp(this.width, 0, naturalWidth),\n      clamp(this.height, 0, naturalHeight),\n      0,\n      0,\n      this.width,\n      this.height\n    );\n  }\n\n  private _opacity: number = 1;\n  /**\n   * Applies the [[Opacity]] effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this._opacity = value;\n  }\n\n  /**\n   * Applies the [[Grayscale]] effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the [[Invert]] effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the [[Fill]] effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the [[Colorize]] effect to a sprite, changing the color channels of all pixels to be the average of the original color\n   * and the provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the [[Lighten]] effect to a sprite, changes the lightness of the color according to HSL\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the [[Darken]] effect to a sprite, changes the darkness of the color according to HSL\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the [[Saturate]] effect to a sprite, saturates the color according to HSL\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the [[Desaturate]] effect to a sprite, desaturates the color according to HSL\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Adds a new [[SpriteEffect]] to this drawing.\n   * @param effect  Effect to add to the this drawing\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    this.effects.push(effect);\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this.texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  /**\n   * Removes a [[SpriteEffect]] from this sprite.\n   * @param effect  Effect to remove from this sprite\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this sprite.\n   * @param index  Index of the effect to remove from this sprite\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    let indexToRemove = -1;\n    if (typeof param === 'number') {\n      indexToRemove = param;\n    } else {\n      indexToRemove = this.effects.indexOf(param);\n    }\n\n    // bounds check\n    if (indexToRemove < 0 || indexToRemove >= this.effects.length) {\n      return;\n    }\n\n    this.effects.splice(indexToRemove, 1);\n\n    // We must check if the texture and the backing sprite pixels are loaded as well before\n    // an effect can be applied\n    if (!this.texture.isLoaded() || !this._pixelsLoaded) {\n      this._dirtyEffect = true;\n    } else {\n      this._applyEffects();\n    }\n  }\n\n  private _applyEffects() {\n    this._flushTexture();\n\n    if (this.effects.length > 0) {\n      this._pixelData = this._spriteCtx.getImageData(0, 0, this.width, this.height);\n\n      const len = this.effects.length;\n      for (let i = 0; i < len; i++) {\n        for (let y = 0; y < this.height; y++) {\n          for (let x = 0; x < this.width; x++) {\n            this.effects[i].updatePixel(x, y, this._pixelData);\n          }\n        }\n      }\n      this._spriteCtx.clearRect(0, 0, this.width, this.height);\n      this._spriteCtx.putImageData(this._pixelData, 0, 0);\n    }\n\n    this._dirtyEffect = false;\n  }\n\n  /**\n   * Clears all effects from the drawing and return it to its original state.\n   */\n  public clearEffects() {\n    this.effects.length = 0;\n    this._applyEffects();\n  }\n\n  /**\n   * Resets the internal state of the drawing (if any)\n   */\n  public reset() {\n    // do nothing\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D, x: number, y: number) {\n    ctx.save();\n    ctx.translate(x, y);\n    ctx.rotate(this.rotation);\n    const xpoint = this.drawWidth * this.anchor.x;\n    const ypoint = this.drawHeight * this.anchor.y;\n\n    ctx.strokeStyle = Color.Black.toString();\n    ctx.strokeRect(-xpoint, -ypoint, this.drawWidth, this.drawHeight);\n    ctx.restore();\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.width,\n      drawHeight: options.drawHeight ?? this.height,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      offset: options.offset ?? this.offset,\n      opacity: options.opacity ?? this._opacity\n    };\n\n    if (this._dirtyEffect) {\n      this._applyEffects();\n    }\n    // calculating current dimensions\n    const anchorX = drawWidth * anchor.x + offset.x;\n    const anchorY = drawHeight * anchor.y + offset.y;\n    const scaleDirX = this.scale.x > 0 ? 1 : -1;\n    const scaleDirY = this.scale.y > 0 ? 1 : -1;\n\n    ctx.save();\n    // Move the draw point of origin\n    ctx.translate(x, y);\n\n    // Rotate and scale around anchor point\n    // This requires a bit of explaination, scale coordinates first positive flipping or rotating\n    ctx.scale(Math.abs(this.scale.x), Math.abs(this.scale.y));\n\n    if (this.drawAroundAnchor) {\n      // In the case where you want the anchor to match with the point of draw\n      // Otherwise sprites are always drawn from top-left\n      ctx.translate(-anchorX, -anchorY);\n    }\n\n    ctx.translate(anchorX, anchorY);\n    ctx.rotate(rotation);\n    // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\n    ctx.scale(scaleDirX, scaleDirY);\n    ctx.translate(-anchorX, -anchorY);\n\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = opacity ?? 1;\n    // Context is already rotated and scaled\n    ctx.drawImage(\n      this._spriteCanvas,\n      0,\n      0,\n      this.width,\n      this.height, // source\n      0,\n      0,\n      this.width,\n      this.height\n    ); // dest\n    ctx.globalAlpha = oldAlpha;\n    ctx.restore();\n  }\n\n  /**\n   * Produces a copy of the current sprite\n   */\n  public clone(): SpriteImpl {\n    const result = new Sprite(this.texture, this.x, this.y, this.width, this.height);\n    result.anchor = this.anchor.clone();\n    result.scale = this.scale.clone();\n    result.rotation = this.rotation;\n    result.flipHorizontal = this.flipHorizontal;\n    result.flipVertical = this.flipVertical;\n\n    const len = this.effects.length;\n    for (let i = 0; i < len; i++) {\n      result.addEffect(this.effects[i]);\n    }\n    return result;\n  }\n}\n\n/**\n * @deprecated Use [[\"Graphics/Sprite\".Sprite]]\n */\nexport interface SpriteArgs extends Partial<SpriteImpl> {\n  image?: Texture;\n  x?: number;\n  width?: number;\n  height?: number;\n  rotation?: number;\n  anchor?: Vector;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n}\n\n/**\n * A [[Sprite]] is one of the main drawing primitives. It is responsible for drawing\n * images or parts of images from a [[Texture]] resource to the screen.\n * @deprecated Use [[\"Graphics/Sprite\".Sprite]]\n */\n@obsolete({\n  message: 'Label.clearTextShadow will be removed in v0.26.0',\n  alternateMethod: 'Use Label.font.shadow'\n})\nexport class Sprite extends Configurable(SpriteImpl) {\n  constructor(config: SpriteArgs);\n  constructor(image: Texture, x: number, y: number, width: number, height: number);\n  constructor(imageOrConfig: Texture | SpriteArgs, x?: number, y?: number, width?: number, height?: number) {\n    super(imageOrConfig, x, y, width, height);\n  }\n}\n","import { Resource } from './Resource';\nimport { Sprite } from '../Drawing/Sprite';\nimport { Loadable } from '../Interfaces/Index';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n */\nexport class Texture implements Loadable<HTMLImageElement> {\n  private _resource: Resource<Blob>;\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n  private _sprite: Sprite = null;\n\n  /**\n   * Populated once loading is complete\n   */\n  public data: HTMLImageElement;\n  public get image() {\n    return this.data;\n  }\n\n  private _loadedResolve: (image: HTMLImageElement) => any;\n  public loaded = new Promise<HTMLImageElement>(resolve => {\n    this._loadedResolve = resolve;\n  });\n\n  /**\n   * @param path       Path to the image resource or a base64 string representing an image \"data:image/png;base64,iVB...\"\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public bustCache = true) {\n    this._resource = new Resource(path, 'blob', bustCache);\n    this._sprite = new Sprite(this, 0, 0, 0, 0);\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return !!this.data;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public async load(): Promise<HTMLImageElement> {\n    try {\n      // Load base64 or blob if needed\n      let url: string;\n      if (!this.path.includes('data:image/')) {\n        const blob = await this._resource.load();\n        url = URL.createObjectURL(blob);\n      } else {\n        url = this.path;\n      }\n\n      // Decode the image\n      const image = new Image();\n      image.src = url;\n      await image.decode();\n\n      // Set results\n      this.data = image;\n      this.width = this._sprite.width = image.naturalWidth;\n      this.height = this._sprite.height = image.naturalHeight;\n      this._sprite = new Sprite(this, 0, 0, this.width, this.height);\n    } catch {\n      await Promise.reject('Error loading texture');\n    }\n    // todo emit complete\n    this._loadedResolve(this.data);\n    return this.data;\n  }\n\n  public asSprite(): Sprite {\n    return this._sprite;\n  }\n}\n","import { Sprite } from './Sprite';\nimport * as Effects from './SpriteEffects';\nimport { Color } from './Color';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\nimport { Engine } from '../Engine';\nimport * as Util from '../Util/Util';\nimport { Configurable } from '../Configurable';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * @deprecated Use [[\"Graphics/Animation\".HasTick]]\n */\nexport interface HasTick {\n  /**\n   *\n   * @param elapsedMilliseconds The amount of real world time in milliseconds that has elapsed that must be updated in the animation\n   */\n  tick(elapsedMilliseconds: number, idempotencyToken?: number): void;\n}\n\n/**\n * @hidden\n * @deprecated Use [[\"Graphics/Animation\".Animation]]\n */\nexport class AnimationImpl implements Drawable, HasTick {\n  /**\n   * The sprite frames to play, in order. See [[SpriteSheet.getAnimationForAll]] to quickly\n   * generate an [[Animation]].\n   */\n  public sprites: Sprite[] = [];\n\n  /**\n   * Duration to show each frame (in milliseconds)\n   */\n  public speed: number;\n\n  /**\n   * Current frame index being shown\n   */\n  public currentFrame: number = 0;\n\n  private _timeLeftInFrame: number = 0;\n  private _idempotencyToken: number = -1;\n\n  public anchor: Vector = Vector.Zero;\n  public rotation: number = 0.0;\n  public scale: Vector = Vector.One;\n\n  /**\n   * Indicates whether the animation should loop after it is completed\n   */\n  public loop: boolean = true;\n\n  /**\n   * Indicates the frame index the animation should freeze on for a non-looping\n   * animation. By default it is the last frame.\n   */\n  public freezeFrame: number = -1;\n\n  private _engine: Engine;\n\n  /**\n   * Flip each frame vertically. Sets [[Sprite.flipVertical]].\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Flip each frame horizontally. Sets [[Sprite.flipHorizontal]].\n   */\n  public flipHorizontal: boolean = false;\n\n  public drawWidth: number = 0;\n  public drawHeight: number = 0;\n  public width: number = 0;\n  public height: number = 0;\n\n  private _opacity = 1;\n\n  /**\n   * Typically you will use a [[SpriteSheet]] to generate an [[Animation]].\n   *\n   * @param engineOrConfig  Reference to the current game engine\n   * @param sprites  An array of sprites to create the frames for the animation\n   * @param speed   The number in milliseconds to display each frame in the animation\n   * @param loop    Indicates whether the animation should loop after it is completed\n   */\n  constructor(engineOrConfig: Engine | AnimationArgs, sprites: Sprite[], speed: number, loop?: boolean) {\n    let engine = engineOrConfig;\n    if (engineOrConfig && !(engineOrConfig instanceof Engine)) {\n      const config = engineOrConfig;\n      engine = config.engine;\n      sprites = config.sprites;\n      speed = config.speed;\n      loop = config.loop;\n    }\n\n    this.sprites = sprites;\n    this.speed = speed;\n    this._engine = <Engine>engine;\n    this._timeLeftInFrame = this.speed;\n\n    if (loop != null) {\n      this.loop = loop;\n    }\n\n    if (sprites && sprites[0]) {\n      this.drawHeight = sprites[0] ? sprites[0].drawHeight : 0;\n      this.drawWidth = sprites[0] ? sprites[0].drawWidth : 0;\n\n      this.width = sprites[0] ? sprites[0].width : 0;\n      this.height = sprites[0] ? sprites[0].height : 0;\n\n      this.freezeFrame = sprites.length - 1;\n    }\n  }\n\n  /**\n   * Applies the opacity effect to a sprite, setting the alpha of all pixels to a given value\n   */\n  public opacity(value: number) {\n    this._opacity = value;\n  }\n\n  /**\n   * Applies the grayscale effect to a sprite, removing color information.\n   */\n  public grayscale() {\n    this.addEffect(new Effects.Grayscale());\n  }\n\n  /**\n   * Applies the invert effect to a sprite, inverting the pixel colors.\n   */\n  public invert() {\n    this.addEffect(new Effects.Invert());\n  }\n\n  /**\n   * Applies the fill effect to a sprite, changing the color channels of all non-transparent pixels to match a given color\n   */\n  public fill(color: Color) {\n    this.addEffect(new Effects.Fill(color));\n  }\n\n  /**\n   * Applies the colorize effect to a sprite, changing the color channels of all pixels to be the average of the original color and the\n   * provided color.\n   */\n  public colorize(color: Color) {\n    this.addEffect(new Effects.Colorize(color));\n  }\n\n  /**\n   * Applies the lighten effect to a sprite, changes the lightness of the color according to hsl\n   */\n  public lighten(factor: number = 0.1) {\n    this.addEffect(new Effects.Lighten(factor));\n  }\n\n  /**\n   * Applies the darken effect to a sprite, changes the darkness of the color according to hsl\n   */\n  public darken(factor: number = 0.1) {\n    this.addEffect(new Effects.Darken(factor));\n  }\n\n  /**\n   * Applies the saturate effect to a sprite, saturates the color according to hsl\n   */\n  public saturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Saturate(factor));\n  }\n\n  /**\n   * Applies the desaturate effect to a sprite, desaturates the color according to hsl\n   */\n  public desaturate(factor: number = 0.1) {\n    this.addEffect(new Effects.Desaturate(factor));\n  }\n\n  /**\n   * Add a [[SpriteEffect]] manually\n   */\n  public addEffect(effect: Effects.SpriteEffect) {\n    for (const i in this.sprites) {\n      this.sprites[i].addEffect(effect);\n    }\n  }\n\n  /**\n   * Removes an [[SpriteEffect]] from this animation.\n   * @param effect Effect to remove from this animation\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n\n  /**\n   * Removes an effect given the index from this animation.\n   * @param index  Index of the effect to remove from this animation\n   */\n  public removeEffect(index: number): void;\n  public removeEffect(param: any) {\n    for (const i in this.sprites) {\n      this.sprites[i].removeEffect(param);\n    }\n  }\n\n  /**\n   * Clear all sprite effects\n   */\n  public clearEffects() {\n    for (const i in this.sprites) {\n      this.sprites[i].clearEffects();\n    }\n  }\n\n  private _setAnchor(point: Vector) {\n    //if (!this.anchor.equals(point)) {\n    for (const i in this.sprites) {\n      this.sprites[i].anchor.setTo(point.x, point.y);\n    }\n    //}\n  }\n\n  private _setRotation(radians: number) {\n    //if (this.rotation !== radians) {\n    for (const i in this.sprites) {\n      this.sprites[i].rotation = radians;\n    }\n    //}\n  }\n\n  private _setScale(scale: Vector) {\n    //if (!this.scale.equals(scale)) {\n    for (const i in this.sprites) {\n      this.sprites[i].scale = scale;\n    }\n    //}\n  }\n\n  /**\n   * Resets the animation to first frame.\n   */\n  public reset() {\n    this.currentFrame = 0;\n  }\n\n  /**\n   * Indicates whether the animation is complete, animations that loop are never complete.\n   */\n  public isDone() {\n    return !this.loop && this.currentFrame >= this.sprites.length;\n  }\n\n  /**\n   * Not meant to be called by game developers. Ticks the animation forward internally and\n   * calculates whether to change to the frame.\n   * @internal\n   */\n  public tick(elapsed: number, idempotencyToken?: number) {\n    if (this._idempotencyToken === idempotencyToken) {\n      return;\n    }\n    this._idempotencyToken = idempotencyToken;\n    this._timeLeftInFrame -= elapsed;\n    if (this._timeLeftInFrame <= 0) {\n      this.currentFrame = this.loop ? (this.currentFrame + 1) % this.sprites.length : this.currentFrame + 1;\n      this._timeLeftInFrame = this.speed;\n    }\n\n    this._updateValues();\n    const current = this.sprites[this.currentFrame];\n    if (current) {\n      this.width = current.width;\n      this.height = current.height;\n      this.drawWidth = current.drawWidth;\n      this.drawHeight = current.drawHeight;\n    }\n  }\n\n  private _updateValues(): void {\n    this._setAnchor(this.anchor);\n    this._setRotation(this.rotation);\n    this._setScale(this.scale);\n  }\n\n  /**\n   * Skips ahead a specified number of frames in the animation\n   * @param frames  Frames to skip ahead\n   */\n  public skip(frames: number) {\n    this.currentFrame = (this.currentFrame + frames) % this.sprites.length;\n  }\n\n  /**\n   * Draws the animation appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the animation with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number) {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const animOptions = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.drawWidth,\n      drawHeight: options.drawHeight ?? this.drawHeight,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      opacity: options.opacity ?? this._opacity\n    };\n\n    this._updateValues();\n    let currSprite: Sprite;\n    if (this.currentFrame < this.sprites.length) {\n      currSprite = this.sprites[this.currentFrame];\n      currSprite.draw(animOptions);\n    }\n\n    if (this.freezeFrame !== -1 && this.currentFrame >= this.sprites.length) {\n      currSprite = this.sprites[Util.clamp(this.freezeFrame, 0, this.sprites.length - 1)];\n      currSprite.draw(animOptions);\n    }\n\n    // add the calculated width\n    if (currSprite) {\n      this.drawWidth = currSprite.drawWidth;\n      this.drawHeight = currSprite.drawHeight;\n    }\n  }\n\n  /**\n   * Plays an animation at an arbitrary location in the game.\n   * @param x  The x position in the game to play\n   * @param y  The y position in the game to play\n   */\n  public play(x: number, y: number) {\n    this.reset();\n    this._engine.playAnimation(this, x, y);\n  }\n}\n\n\n/**\n * @deprecated Use [[\"Graphics/Animation\".Animation]]\n */\nexport interface AnimationArgs extends Partial<AnimationImpl> {\n  engine: Engine;\n  sprites: Sprite[];\n  speed: number;\n  loop?: boolean;\n  anchor?: Vector;\n  rotation?: number;\n  scale?: Vector;\n  flipVertical?: boolean;\n  flipHorizontal?: boolean;\n  width?: number;\n  height?: number;\n}\n\n/**\n * Animations allow you to display a series of images one after another,\n * creating the illusion of change. Generally these images will come from a [[SpriteSheet]] source.\n * @deprecated Use [[\"Graphics/Animation\".Animation]]\n */\n@obsolete({\n  message: 'Animation will be removed in v0.26.0',\n  alternateMethod: 'Use Graphics.Animation'\n})\nexport class Animation extends Configurable(AnimationImpl) {\n  constructor(config: AnimationArgs);\n  constructor(engine: Engine, images: Sprite[], speed: number, loop?: boolean);\n  constructor(engineOrConfig: Engine | AnimationArgs, images?: Sprite[], speed?: number, loop?: boolean) {\n    super(engineOrConfig, images, speed, loop);\n  }\n}\n","/**\n * An enum that describes the strategies that rotation actions can use\n */\nexport enum RotationType {\n  /**\n   * Rotation via `ShortestPath` will use the smallest angle\n   * between the starting and ending points. This strategy is the default behavior.\n   */\n  ShortestPath = 0,\n  /**\n   * Rotation via `LongestPath` will use the largest angle\n   * between the starting and ending points.\n   */\n  LongestPath = 1,\n  /**\n   * Rotation via `Clockwise` will travel in a clockwise direction,\n   * regardless of the starting and ending points.\n   */\n  Clockwise = 2,\n  /**\n   * Rotation via `CounterClockwise` will travel in a counterclockwise direction,\n   * regardless of the starting and ending points.\n   */\n  CounterClockwise = 3\n}\n","import { vec } from '..';\nimport { Vector } from '../Algebra';\nimport { canonicalizeAngle } from '../Util/Util';\n\nexport enum MatrixLocations {\n  X = 12,\n  Y = 13\n}\n\nconst sign = (val: number) => {\n  if (val === 0) {\n    return 0;\n  }\n  return val < 0 ? -1 : 1;\n};\n\n// const multMatch = (a: number, b: number) => {\n//   if (sign(a) < 0 && sign(b) < 0) {\n//     return -Math.abs(a * b);\n//   }\n//   return a * b;\n// }\n\n// const epsilon = (val: number) => {\n//   if (val * val < .0001) {\n//     return 0;\n//   }\n//   return val;\n// }\n\n/**\n * Excalibur Matrix helper for 4x4 matrices\n *\n * Useful for webgl 4x4 matrices\n */\nexport class Matrix {\n\n  /**\n   *  4x4 matrix in column major order\n   *\n   * |         |         |          |          |\n   * | ------- | ------- | -------- |          |\n   * | data[0] | data[4] | data[8]  | data[12] |\n   * | data[1] | data[5] | data[9]  | data[13] |\n   * | data[2] | data[6] | data[10] | data[14] |\n   * | data[3] | data[7] | data[11] | data[15] |\n   *\n   */\n  public data: Float32Array = new Float32Array(16);\n\n  /**\n   * Creates an orthographic (flat non-perspective) projection\n   * https://en.wikipedia.org/wiki/Orthographic_projection\n   * @param left\n   * @param right\n   * @param bottom\n   * @param top\n   * @param near\n   * @param far\n   */\n  public static ortho(left: number, right: number, bottom: number, top: number, near: number, far: number): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = 2 / (right - left);\n    mat.data[1] = 0;\n    mat.data[2] = 0;\n    mat.data[3] = 0;\n\n    mat.data[4] = 0;\n    mat.data[5] = 2 / (top - bottom);\n    mat.data[6] = 0;\n    mat.data[7] = 0;\n\n    mat.data[8] = 0;\n    mat.data[9] = 0;\n    mat.data[10] = -2 / (far - near);\n    mat.data[11] = 0;\n\n    mat.data[12] = -(right + left) / (right - left);\n    mat.data[13] = -(top + bottom) / (top - bottom);\n    mat.data[14] = -(far + near) / (far - near);\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  /**\n   * Creates a new Matrix with the same data as the current 4x4\n   */\n  public clone(): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = this.data[0];\n    mat.data[1] = this.data[1];\n    mat.data[2] = this.data[2];\n    mat.data[3] = this.data[3];\n\n    mat.data[4] = this.data[4];\n    mat.data[5] = this.data[5];\n    mat.data[6] = this.data[6];\n    mat.data[7] = this.data[7];\n\n    mat.data[8] = this.data[8];\n    mat.data[9] = this.data[9];\n    mat.data[10] = this.data[10];\n    mat.data[11] = this.data[11];\n\n    mat.data[12] = this.data[12];\n    mat.data[13] = this.data[13];\n    mat.data[14] = this.data[14];\n    mat.data[15] = this.data[15];\n    return mat;\n  }\n\n  /**\n   * Creates a new identity matrix (a matrix that when applied does nothing)\n   */\n  public static identity(): Matrix {\n    const mat = new Matrix();\n    mat.data[0] = 1;\n    mat.data[1] = 0;\n    mat.data[2] = 0;\n    mat.data[3] = 0;\n\n    mat.data[4] = 0;\n    mat.data[5] = 1;\n    mat.data[6] = 0;\n    mat.data[7] = 0;\n\n    mat.data[8] = 0;\n    mat.data[9] = 0;\n    mat.data[10] = 1;\n    mat.data[11] = 0;\n\n    mat.data[12] = 0;\n    mat.data[13] = 0;\n    mat.data[14] = 0;\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  /**\n   * Creates a brand new translation matrix at the specified 3d point\n   * @param x\n   * @param y\n   */\n  public static translation(x: number, y: number): Matrix {\n    const mat = Matrix.identity();\n    mat.data[12] = x;\n    mat.data[13] = y;\n    return mat;\n  }\n\n  /**\n   * Creates a brand new scaling matrix with the specified scaling factor\n   * @param sx\n   * @param sy\n   */\n  public static scale(sx: number, sy: number): Matrix {\n    const mat = Matrix.identity();\n    mat.data[0] = sx;\n    mat.data[5] = sy;\n    mat.data[10] = 1;\n    mat.data[15] = 1;\n    return mat;\n  }\n\n  /**\n   * Creates a brand new rotation matrix with the specified angle\n   * @param angleRadians\n   */\n  public static rotation(angleRadians: number): Matrix {\n    const mat = Matrix.identity();\n    mat.data[0] = Math.cos(angleRadians);\n    mat.data[4] = -Math.sin(angleRadians);\n    mat.data[1] = Math.sin(angleRadians);\n    mat.data[5] = Math.cos(angleRadians);\n    return mat;\n  }\n\n  /**\n   * Multiplies the current matrix by a vector and returns the resulting vector\n   * @param other\n   */\n  multv(other: [number, number]): [number, number];\n  multv(other: Vector): Vector;\n  multv(other: [number, number] | Vector): [number, number] | Vector {\n    const z = 0;\n    if (other instanceof Vector) {\n      return new Vector(\n        other.x * this.data[0] + other.y * this.data[4] + z * this.data[6] + 1 * this.data[12],\n        other.x * this.data[1] + other.y * this.data[5] + z * this.data[9] + 1 * this.data[13]\n      );\n    } else {\n      const dest: [number, number] = [\n        other[0] * this.data[0] + other[1] * this.data[4] + z * this.data[6] + 1 * this.data[12],\n\n        other[0] * this.data[1] + other[1] * this.data[5] + z * this.data[9] + 1 * this.data[13]\n      ];\n      return dest;\n    }\n  }\n\n  /**\n   * Multiplies the current matrix by another and returns the resulting matrix\n   * @param other\n   */\n  multm(other: Matrix): Matrix {\n    const dest = new Matrix();\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const a13 = this.data[8];\n    const a23 = this.data[9];\n    const a33 = this.data[10];\n    const a43 = this.data[11];\n\n    const a14 = this.data[12];\n    const a24 = this.data[13];\n    const a34 = this.data[14];\n    const a44 = this.data[15];\n\n    const b11 = other.data[0];\n    const b21 = other.data[1];\n    const b31 = other.data[2];\n    const b41 = other.data[3];\n\n    const b12 = other.data[4];\n    const b22 = other.data[5];\n    const b32 = other.data[6];\n    const b42 = other.data[7];\n\n    const b13 = other.data[8];\n    const b23 = other.data[9];\n    const b33 = other.data[10];\n    const b43 = other.data[11];\n\n    const b14 = other.data[12];\n    const b24 = other.data[13];\n    const b34 = other.data[14];\n    const b44 = other.data[15];\n\n    dest.data[0] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n    dest.data[1] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n    dest.data[2] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n    dest.data[3] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\n    dest.data[4] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n    dest.data[5] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n    dest.data[6] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n    dest.data[7] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\n    dest.data[8] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n    dest.data[9] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n    dest.data[10] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n    dest.data[11] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\n    dest.data[12] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n    dest.data[13] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n    dest.data[14] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n    dest.data[15] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n    const s = this.getScale();\n    dest._scaleSignX = sign(s.x) * sign(dest._scaleSignX);\n    dest._scaleSignY = sign(s.y) * sign(dest._scaleSignY);\n\n    return dest;\n  }\n\n  /**\n   * Applies translation to the current matrix mutating it\n   * @param x\n   * @param y\n   */\n  translate(x: number, y: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const a13 = this.data[8];\n    const a23 = this.data[9];\n    const a33 = this.data[10];\n    const a43 = this.data[11];\n\n    const a14 = this.data[12];\n    const a24 = this.data[13];\n    const a34 = this.data[14];\n    const a44 = this.data[15];\n\n    // Doesn't change z\n    const z = 0;\n    const w = 1;\n    this.data[12] = a11 * x + a12 * y + a13 * z + a14 * w;\n    this.data[13] = a21 * x + a22 * y + a23 * z + a24 * w;\n    this.data[14] = a31 * x + a32 * y + a33 * z + a34 * w;\n    this.data[15] = a41 * x + a42 * y + a43 * z + a44 * w;\n\n    return this;\n  }\n\n  public setPosition(x: number, y: number) {\n    this.data[12] = x;\n    this.data[13] = y;\n  }\n\n  public getPosition(): Vector {\n    return vec(this.data[12], this.data[13]);\n  }\n\n  /**\n   * Applies rotation to the current matrix mutating it\n   * @param angle in Radians\n   */\n  rotate(angle: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    const sine = Math.sin(angle);\n    const cosine = Math.cos(angle);\n\n    this.data[0] = cosine * a11 + sine * a12;\n    this.data[1] = cosine * a21 + sine * a22;\n    this.data[2] = cosine * a31 + sine * a32;\n    this.data[3] = cosine * a41 + sine * a42;\n\n    this.data[4] = cosine * a12 - sine * a11;\n    this.data[5] = cosine * a22 - sine * a21;\n    this.data[6] = cosine * a32 - sine * a31;\n    this.data[7] = cosine * a42 - sine * a41;\n\n    return this;\n  }\n\n\n  /**\n   * Applies scaling to the current matrix mutating it\n   * @param x\n   * @param y\n   */\n  scale(x: number, y: number) {\n    const a11 = this.data[0];\n    const a21 = this.data[1];\n    const a31 = this.data[2];\n    const a41 = this.data[3];\n\n    const a12 = this.data[4];\n    const a22 = this.data[5];\n    const a32 = this.data[6];\n    const a42 = this.data[7];\n\n    this.data[0] = a11 * x;\n    this.data[1] = a21 * x;\n    this.data[2] = a31 * x;\n    this.data[3] = a41 * x;\n\n    this.data[4] = a12 * y;\n    this.data[5] = a22 * y;\n    this.data[6] = a32 * y;\n    this.data[7] = a42 * y;\n\n    return this;\n  }\n\n\n  public setRotation(angle: number) {\n    const currentScale = this.getScale();\n    const sine = Math.sin(angle);\n    const cosine = Math.cos(angle);\n\n    this.data[0] = cosine * currentScale.x;\n    this.data[1] = sine * currentScale.y;\n    this.data[4] = -sine * currentScale.x;\n    this.data[5] = cosine * currentScale.y;\n\n  }\n\n  public getRotation(): number {\n\n    const angle = Math.atan2(\n      this.data[1] / this.getScaleY(),\n      this.data[0] / this.getScaleX());\n    return canonicalizeAngle(angle);\n  }\n\n  public getScaleX(): number {\n    // absolute scale of the matrix (we lose sign so need to add it back)\n    const xscale = vec(this.data[0], this.data[4]).size;\n    return this._scaleSignX * xscale;\n  }\n\n  public getScaleY(): number {\n    // absolute scale of the matrix (we lose sign so need to add it back)\n    const yscale = vec(this.data[1], this.data[5]).size;\n    return this._scaleSignY * yscale;\n  }\n\n  /**\n   * Get the scale of the matrix\n   */\n  public getScale(): Vector {\n    return vec(this.getScaleX(), this.getScaleY());\n  }\n\n  private _scaleSignX = 1;\n  public setScaleX(val: number) {\n    this._scaleSignX = sign(val);\n    // negative scale acts like a 180 rotation, so flip\n    const xscale = vec(this.data[0] * this._scaleSignX, this.data[4] * this._scaleSignX).normalize();\n    this.data[0] = xscale.x * val;\n    this.data[4] = xscale.y * val;\n  }\n\n  private _scaleSignY = 1;\n  public setScaleY(val: number) {\n    this._scaleSignY = sign(val);\n    // negative scale acts like a 180 rotation, so flip\n    const yscale = vec(this.data[1] * this._scaleSignY, this.data[5] * this._scaleSignY).normalize();\n    this.data[1] = yscale.x * val;\n    this.data[5] = yscale.y * val;\n  }\n\n  public setScale(scale: Vector) {\n    this.setScaleX(scale.x);\n    this.setScaleY(scale.y);\n  }\n\n  /**\n   * Determinant of the upper left 2x2 matrix\n   */\n  public getBasisDeterminant() {\n    return (this.data[0] * this.data[5]) - (this.data[1] * this.data[4]);\n  }\n\n  public getAffineInverse(): Matrix {\n    // See http://negativeprobability.blogspot.com/2011/11/affine-transformations-and-their.html\n    // See https://www.mathsisfun.com/algebra/matrix-inverse.html\n    // Since we are actually only doing 2D transformations we can use this hack\n    // We don't actually use the 3rd or 4th dimension\n\n    const det = this.getBasisDeterminant();\n    const inverseDet = 1 / det; // todo zero check\n    const a = this.data[0];\n    const b = this.data[4];\n    const c = this.data[1];\n    const d = this.data[5];\n\n    const m = Matrix.identity();\n    // inverts rotation and scale\n    m.data[0] = d * inverseDet;\n    m.data[1] = -c * inverseDet;\n    m.data[4] = -b * inverseDet;\n    m.data[5] = a * inverseDet;\n\n    const tx = this.data[12];\n    const ty = this.data[13];\n    // invert translation\n    // transform translation into the matrix basis created by rot/scale\n    m.data[12] = -(tx * m.data[0] + ty * m.data[4]);\n    m.data[13] = -(tx * m.data[1] + ty * m.data[5]);\n\n    return m;\n  }\n\n  public isIdentity(): boolean {\n    return this.data[0] === 1 &&\n    this.data[1] === 0 &&\n    this.data[2] === 0 &&\n    this.data[3] === 0 &&\n    this.data[4] === 0 &&\n    this.data[5] === 1 &&\n    this.data[6] === 0 &&\n    this.data[7] === 0 &&\n    this.data[8] === 0 &&\n    this.data[9] === 0 &&\n    this.data[10] === 1 &&\n    this.data[11] === 0 &&\n    this.data[12] === 0 &&\n    this.data[13] === 0 &&\n    this.data[14] === 0 &&\n    this.data[15] === 1;\n  }\n\n  public toString() {\n    return `\n[${ this.data[0] } ${ this.data[4] } ${ this.data[8] } ${ this.data[12] }]\n[${ this.data[1] } ${ this.data[5] } ${ this.data[9] } ${ this.data[13] }]\n[${ this.data[2] } ${ this.data[6] } ${ this.data[10] } ${ this.data[14] }]\n[${ this.data[3] } ${ this.data[7] } ${ this.data[11] } ${ this.data[15] }]\n`;\n  }\n}\n","import { Vector } from '../Algebra';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * A definition of an EasingFunction. See [[EasingFunctions]].\n */\n// tslint:disable-next-line\nexport interface EasingFunction {\n  (currentTime: number, startValue: number, endValue: number, duration: number): number;\n}\n\n/**\n * Standard easing functions for motion in Excalibur, defined on a domain of [0, duration] and a range from [+startValue,+endValue]\n * Given a time, the function will return a value from positive startValue to positive endValue.\n *\n * ```js\n * function Linear (t) {\n *    return t * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInQuad (t) {\n *    return t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutQuad (t) {\n *    return t * (2 - t);\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutQuad (t) {\n *    return t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n * }\n *\n * // accelerating from zero velocity\n * function EaseInCubic (t) {\n *    return t * t * t;\n * }\n *\n * // decelerating to zero velocity\n * function EaseOutCubic (t) {\n *    return (--t) * t * t + 1;\n * }\n *\n * // acceleration until halfway, then deceleration\n * function EaseInOutCubic (t) {\n *    return t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1;\n * }\n * ```\n */\nexport class EasingFunctions {\n  public static CreateReversibleEasingFunction(easing: EasingFunction) {\n    return (time: number, start: number, end: number, duration: number) => {\n      if (end < start) {\n        return start - (easing(time, end, start, duration) - end);\n      } else {\n        return easing(time, start, end, duration);\n      }\n    };\n  }\n\n  @obsolete({\n    message: 'Alias for incorrect spelling used in older versions, will be removed in v0.25.0',\n    alternateMethod: 'CreateReversibleEasingFunction'\n  })\n  public static CreateReversableEasingFunction(easing: EasingFunction) {\n    return EasingFunctions.CreateReversibleEasingFunction(easing);\n  }\n\n  public static CreateVectorEasingFunction(easing: EasingFunction) {\n    return (time: number, start: Vector, end: Vector, duration: number) => {\n      return new Vector(easing(time, start.x, end.x, duration), easing(time, start.y, end.y, duration));\n    };\n  }\n\n  public static Linear: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      return (endValue * currentTime) / duration + startValue;\n    }\n  );\n\n  public static EaseInQuad = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n\n      return endValue * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return -endValue * currentTime * (currentTime - 2) + startValue;\n    }\n  );\n\n  public static EaseInOutQuad: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime + startValue;\n      }\n      currentTime--;\n\n      return (-endValue / 2) * (currentTime * (currentTime - 2) - 1) + startValue;\n    }\n  );\n\n  public static EaseInCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      return endValue * currentTime * currentTime * currentTime + startValue;\n    }\n  );\n\n  public static EaseOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration;\n      currentTime--;\n      return endValue * (currentTime * currentTime * currentTime + 1) + startValue;\n    }\n  );\n\n  public static EaseInOutCubic: EasingFunction = EasingFunctions.CreateReversibleEasingFunction(\n    (currentTime: number, startValue: number, endValue: number, duration: number) => {\n      endValue = endValue - startValue;\n      currentTime /= duration / 2;\n      if (currentTime < 1) {\n        return (endValue / 2) * currentTime * currentTime * currentTime + startValue;\n      }\n      currentTime -= 2;\n      return (endValue / 2) * (currentTime * currentTime * currentTime + 2) + startValue;\n    }\n  );\n}\n","import { Actor } from '../Actor';\nimport { Action } from './Action';\n\n/**\n * Action Queues represent an ordered sequence of actions\n *\n * Action queues are part of the [[ActionContext|Action API]] and\n * store the list of actions to be executed for an [[Actor]].\n *\n * Actors implement [[Actor.actions]] which can be manipulated by\n * advanced users to adjust the actions currently being executed in the\n * queue.\n */\nexport class ActionQueue {\n  private _actor: Actor;\n  private _actions: Action[] = [];\n  private _currentAction: Action;\n  private _completedActions: Action[] = [];\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  /**\n   * Add an action to the sequence\n   * @param action\n   */\n  public add(action: Action) {\n    this._actions.push(action);\n  }\n\n  /**\n   * Remove an action by reference from the sequence\n   * @param action\n   */\n  public remove(action: Action) {\n    const index = this._actions.indexOf(action);\n    this._actions.splice(index, 1);\n  }\n\n  /**\n   * Removes all actions from this sequence\n   */\n  public clearActions(): void {\n    this._actions.length = 0;\n    this._completedActions.length = 0;\n    if (this._currentAction) {\n      this._currentAction.stop();\n    }\n  }\n\n  /**\n   *\n   * @returns The total list of actions in this sequence complete or not\n   */\n  public getActions(): Action[] {\n    return this._actions.concat(this._completedActions);\n  }\n\n  /**\n   *\n   * @returns `true` if there are more actions to process in the sequence\n   */\n  public hasNext(): boolean {\n    return this._actions.length > 0;\n  }\n\n  /**\n   * @returns `true` if the current sequence of actions is done\n   */\n  public isComplete(): boolean {\n    return this._actions.length === 0;\n  }\n\n  /**\n   * Resets the sequence of actions, this is used to restart a sequence from the beginning\n   */\n  public reset(): void {\n    this._actions = this.getActions();\n\n    const len = this._actions.length;\n    for (let i = 0; i < len; i++) {\n      this._actions[i].reset();\n    }\n    this._completedActions = [];\n  }\n\n  /**\n   * Update the queue which updates actions and handles completing actions\n   * @param elapsedMs\n   */\n  public update(elapsedMs: number) {\n    if (this._actions.length > 0) {\n      this._currentAction = this._actions[0];\n      this._currentAction.update(elapsedMs);\n\n      if (this._currentAction.isComplete(this._actor)) {\n        this._completedActions.push(this._actions.shift());\n      }\n    }\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\nimport { ActionContext } from '../ActionContext';\nimport { ActionQueue } from '../ActionQueue';\n\nexport class Repeat implements Action {\n  private _actionQueue: ActionQueue;\n  private _repeat: number;\n  private _originalRepeat: number;\n  private _stopped: boolean = false;\n  private _repeatContext: ActionContext;\n  private _repeatBuilder: (repeatContext: ActionContext) => any;\n  constructor(actor: Actor, repeatBuilder: (repeatContext: ActionContext) => any, repeat: number) {\n    this._repeatBuilder = repeatBuilder;\n    this._repeatContext = new ActionContext(actor);\n    this._actionQueue = this._repeatContext.getQueue();\n\n    this._repeat = repeat;\n    this._originalRepeat = repeat;\n\n    this._repeatBuilder(this._repeatContext);\n    this._repeat--; // current execution is the first repeat\n  }\n\n  public update(delta: number): void {\n    if (this._actionQueue.isComplete()) {\n      this._actionQueue.clearActions();\n      this._repeatBuilder(this._repeatContext);\n      this._repeat--;\n    }\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || (this._repeat <= 0 && this._actionQueue.isComplete());\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._repeat = this._originalRepeat;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\nimport { ActionContext } from '../ActionContext';\nimport { ActionQueue } from '../ActionQueue';\n\n/**\n * RepeatForever Action implementation, it is recommended you use the fluent action\n * context API.\n *\n *\n */\nexport class RepeatForever implements Action {\n  private _actionQueue: ActionQueue;\n  private _stopped: boolean = false;\n  private _repeatContext: ActionContext;\n  private _repeatBuilder: (repeatContext: ActionContext) => any;\n  constructor(actor: Actor, repeatBuilder: (repeatContext: ActionContext) => any) {\n    this._repeatBuilder = repeatBuilder;\n    this._repeatContext = new ActionContext(actor);\n    this._actionQueue = this._repeatContext.getQueue();\n\n    this._repeatBuilder(this._repeatContext);\n  }\n\n  public update(delta: number): void {\n    if (this._stopped) {\n      return;\n    }\n\n    if (this._actionQueue.isComplete()) {\n      this._actionQueue.clearActions();\n      this._repeatBuilder(this._repeatContext);\n    }\n\n    this._actionQueue.update(delta);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n    this._actionQueue.clearActions();\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec, Vector } from '../../Algebra';\nimport { Logger } from '../../Util/Log';\nimport { Action } from '../Action';\n\nexport class MoveBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _distance: number;\n  private _speed: number;\n\n  private _start: Vector;\n  private _offset: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, offsetX: number, offsetY: number, speed: number) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = new Vector(offsetX, offsetY);\n    if (speed <= 0) {\n      Logger.getInstance().error('Attempted to moveBy with speed less than or equal to zero : ' + speed);\n      throw new Error('Speed must be greater than 0 pixels per second');\n    }\n  }\n\n  public update(_delta: number) {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._end = this._start.add(this._offset);\n      this._distance = this._offset.size;\n      this._dir = this._end.sub(this._start).normalize();\n    }\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos = vec(this._end.x, this._end.y);\n      this._actor.vel = vec(0, 0);\n    } else {\n      this._actor.vel = this._dir.scale(this._speed);\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || actor.pos.distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel = vec(0, 0);\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec, Vector } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class MoveTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distance: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, destx: number, desty: number, speed: number) {\n    this._actor = actor;\n    this._end = new Vector(destx, desty);\n    this._speed = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = new Vector(this._actor.pos.x, this._actor.pos.y);\n      this._distance = this._start.distance(this._end);\n      this._dir = this._end.sub(this._start).normalize();\n    }\n    const m = this._dir.scale(this._speed);\n    this._actor.vel = vec(m.x, m.y);\n\n    if (this.isComplete(this._actor)) {\n      this._actor.pos = vec(this._end.x, this._end.y);\n      this._actor.vel = vec(0, 0);\n    }\n  }\n\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._start) >= this._distance;\n  }\n\n  public stop(): void {\n    this._actor.vel = vec(0, 0);\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\nimport { RotationType } from '../RotationType';\nimport * as Util from '../../Util/Util';\n\nexport class RotateTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _currentNonCannonAngle: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadians: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._end = angleRadians;\n    this._speed = speed;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      this._currentNonCannonAngle = this._actor.rotation;\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (!this._shortestPathIsPositive) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n    this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._currentNonCannonAngle - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\nimport { RotationType } from '../RotationType';\nimport * as Util from '../../Util/Util';\n\nexport class RotateBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _start: number;\n  private _end: number;\n  private _speed: number;\n  private _offset: number;\n\n  private _rotationType: RotationType;\n  private _direction: number;\n  private _distance: number;\n  private _shortDistance: number;\n  private _longDistance: number;\n  private _shortestPathIsPositive: boolean;\n  private _currentNonCannonAngle: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, angleRadiansOffset: number, speed: number, rotationType?: RotationType) {\n    this._actor = actor;\n    this._speed = speed;\n    this._offset = angleRadiansOffset;\n    this._rotationType = rotationType || RotationType.ShortestPath;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._start = this._actor.rotation;\n      this._currentNonCannonAngle = this._actor.rotation;\n      this._end = this._start + this._offset;\n\n      const distance1 = Math.abs(this._end - this._start);\n      const distance2 = Util.TwoPI - distance1;\n      if (distance1 > distance2) {\n        this._shortDistance = distance2;\n        this._longDistance = distance1;\n      } else {\n        this._shortDistance = distance1;\n        this._longDistance = distance2;\n      }\n\n      this._shortestPathIsPositive = (this._start - this._end + Util.TwoPI) % Util.TwoPI >= Math.PI;\n\n      switch (this._rotationType) {\n        case RotationType.ShortestPath:\n          this._distance = this._shortDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = 1;\n          } else {\n            this._direction = -1;\n          }\n          break;\n        case RotationType.LongestPath:\n          this._distance = this._longDistance;\n          if (this._shortestPathIsPositive) {\n            this._direction = -1;\n          } else {\n            this._direction = 1;\n          }\n          break;\n        case RotationType.Clockwise:\n          this._direction = 1;\n          if (this._shortDistance >= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n        case RotationType.CounterClockwise:\n          this._direction = -1;\n          if (this._shortDistance <= 0) {\n            this._distance = this._shortDistance;\n          } else {\n            this._distance = this._longDistance;\n          }\n          break;\n      }\n    }\n\n    this._actor.rx = this._direction * this._speed;\n    this._currentNonCannonAngle += this._direction * this._speed * (_delta / 1000);\n\n    if (this.isComplete()) {\n      this._actor.rotation = this._end;\n      this._actor.rx = 0;\n      this._stopped = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    const distanceTravelled = Math.abs(this._currentNonCannonAngle - this._start);\n    return this._stopped || distanceTravelled >= Math.abs(this._distance);\n  }\n\n  public stop(): void {\n    this._actor.rx = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class ScaleTo implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startX: number;\n  private _startY: number;\n  private _endX: number;\n  private _endY: number;\n  private _speedX: number;\n  private _speedY: number;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _started = false;\n  private _stopped = false;\n  constructor(actor: Actor, scaleX: number, scaleY: number, speedX: number, speedY: number) {\n    this._actor = actor;\n    this._endX = scaleX;\n    this._endY = scaleY;\n    this._speedX = speedX;\n    this._speedY = speedY;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startX = this._actor.scale.x;\n      this._startY = this._actor.scale.y;\n      this._distanceX = Math.abs(this._endX - this._startX);\n      this._distanceY = Math.abs(this._endY - this._startY);\n    }\n\n    if (!(Math.abs(this._actor.scale.x - this._startX) >= this._distanceX)) {\n      const directionX = this._endY < this._startY ? -1 : 1;\n      this._actor.sx = this._speedX * directionX;\n    } else {\n      this._actor.sx = 0;\n    }\n\n    if (!(Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)) {\n      const directionY = this._endY < this._startY ? -1 : 1;\n      this._actor.sy = this._speedY * directionY;\n    } else {\n      this._actor.sy = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.scale = vec(this._endX, this._endY);\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.y - this._startX) >= this._distanceX && Math.abs(this._actor.scale.y - this._startY) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Vector } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class ScaleBy implements Action {\n  private _actor: Actor;\n  public x: number;\n  public y: number;\n  private _startScale: Vector;\n  private _endScale: Vector;\n  private _offset: Vector;\n  private _distanceX: number;\n  private _distanceY: number;\n  private _directionX: number;\n  private _directionY: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedX: number;\n  private _speedY: number;\n  constructor(actor: Actor, scaleOffsetX: number, scaleOffsetY: number, speed: number) {\n    this._actor = actor;\n    this._offset = new Vector(scaleOffsetX, scaleOffsetY);\n    this._speedX = this._speedY = speed;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._startScale = this._actor.scale.clone();\n      this._endScale = this._startScale.add(this._offset);\n      this._distanceX = Math.abs(this._endScale.x - this._startScale.x);\n      this._distanceY = Math.abs(this._endScale.y - this._startScale.y);\n      this._directionX = this._endScale.x < this._startScale.x ? -1 : 1;\n      this._directionY = this._endScale.y < this._startScale.y ? -1 : 1;\n    }\n\n    this._actor.sx = this._speedX * this._directionX;\n    this._actor.sy = this._speedY * this._directionY;\n\n    if (this.isComplete()) {\n      this._actor.scale = this._endScale;\n      this._actor.sx = 0;\n      this._actor.sy = 0;\n    }\n  }\n\n  public isComplete(): boolean {\n    return (\n      this._stopped ||\n      (Math.abs(this._actor.scale.x - this._startScale.x) >= this._distanceX &&\n        Math.abs(this._actor.scale.y - this._startScale.y) >= this._distanceY)\n    );\n  }\n\n  public stop(): void {\n    this._actor.sx = 0;\n    this._actor.sy = 0;\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Action } from '../Action';\n\nexport class CallMethod implements Action {\n  private _method: () => any = null;\n  private _hasBeenCalled: boolean = false;\n  constructor(method: () => any) {\n    this._method = method;\n  }\n\n  public update(_delta: number) {\n    this._method();\n    this._hasBeenCalled = true;\n  }\n  public isComplete() {\n    return this._hasBeenCalled;\n  }\n  public reset() {\n    this._hasBeenCalled = false;\n  }\n  public stop() {\n    this._hasBeenCalled = true;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec, Vector } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class EaseTo implements Action {\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1 * 1000; // 1 second\n  private _lerpStart: Vector = new Vector(0, 0);\n  private _lerpEnd: Vector = new Vector(0, 0);\n  private _initialized: boolean = false;\n  private _stopped: boolean = false;\n  private _distance: number = 0;\n  constructor(\n    public actor: Actor,\n    x: number,\n    y: number,\n    duration: number,\n    public easingFcn: (currentTime: number, startValue: number, endValue: number, duration: number) => number\n  ) {\n    this._lerpDuration = duration;\n    this._lerpEnd = new Vector(x, y);\n  }\n  private _initialize() {\n    this._lerpStart = new Vector(this.actor.pos.x, this.actor.pos.y);\n    this._currentLerpTime = 0;\n    this._distance = this._lerpStart.distance(this._lerpEnd);\n  }\n\n  public update(delta: number): void {\n    if (!this._initialized) {\n      this._initialize();\n      this._initialized = true;\n    }\n\n    // Need to update lerp time first, otherwise the first update will always be zero\n    this._currentLerpTime += delta;\n    let newX = this.actor.pos.x;\n    let newY = this.actor.pos.y;\n    if (this._currentLerpTime < this._lerpDuration) {\n      if (this._lerpEnd.x < this._lerpStart.x) {\n        newX =\n          this._lerpStart.x -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.x, this._lerpStart.x, this._lerpDuration) - this._lerpEnd.x);\n      } else {\n        newX = this.easingFcn(this._currentLerpTime, this._lerpStart.x, this._lerpEnd.x, this._lerpDuration);\n      }\n\n      if (this._lerpEnd.y < this._lerpStart.y) {\n        newY =\n          this._lerpStart.y -\n          (this.easingFcn(this._currentLerpTime, this._lerpEnd.y, this._lerpStart.y, this._lerpDuration) - this._lerpEnd.y);\n      } else {\n        newY = this.easingFcn(this._currentLerpTime, this._lerpStart.y, this._lerpEnd.y, this._lerpDuration);\n      }\n      // Given the lerp position figure out the velocity in pixels per second\n      this.actor.vel = vec((newX - this.actor.pos.x) / (delta / 1000), (newY - this.actor.pos.y) / (delta / 1000));\n    } else {\n      this.actor.pos = vec(this._lerpEnd.x, this._lerpEnd.y);\n      this.actor.vel = Vector.Zero;\n    }\n  }\n  public isComplete(actor: Actor): boolean {\n    return this._stopped || new Vector(actor.pos.x, actor.pos.y).distance(this._lerpStart) >= this._distance;\n  }\n\n  public reset(): void {\n    this._initialized = false;\n  }\n  public stop(): void {\n    this.actor.vel = vec(0, 0);\n    this._stopped = true;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\n\nexport class Blink implements Action {\n  private _timeVisible: number = 0;\n  private _timeNotVisible: number = 0;\n  private _elapsedTime: number = 0;\n  private _totalTime: number = 0;\n  private _actor: Actor;\n  private _duration: number;\n  private _stopped: boolean = false;\n  private _started: boolean = false;\n  constructor(actor: Actor, timeVisible: number, timeNotVisible: number, numBlinks: number = 1) {\n    this._actor = actor;\n    this._timeVisible = timeVisible;\n    this._timeNotVisible = timeNotVisible;\n    this._duration = (timeVisible + timeNotVisible) * numBlinks;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this._elapsedTime += delta;\n    this._totalTime += delta;\n    if (this._actor.visible && this._elapsedTime >= this._timeVisible) {\n      this._actor.visible = false;\n      this._elapsedTime = 0;\n    }\n\n    if (!this._actor.visible && this._elapsedTime >= this._timeNotVisible) {\n      this._actor.visible = true;\n      this._elapsedTime = 0;\n    }\n\n    if (this.isComplete()) {\n      this._actor.visible = true;\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._totalTime >= this._duration;\n  }\n\n  public stop(): void {\n    this._actor.visible = true;\n    this._stopped = true;\n  }\n\n  public reset() {\n    this._started = false;\n    this._elapsedTime = 0;\n    this._totalTime = 0;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Logger } from '../../Util/Log';\nimport { Action } from '../Action';\n\nexport class Fade implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _endOpacity: number;\n  private _speed: number;\n  private _multiplier: number = 1;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, endOpacity: number, speed: number) {\n    this._actor = actor;\n    this._endOpacity = endOpacity;\n    this._speed = speed;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n\n      // determine direction when we start\n      if (this._endOpacity < this._actor.opacity) {\n        this._multiplier = -1;\n      } else {\n        this._multiplier = 1;\n      }\n    }\n\n    if (this._speed > 0) {\n      this._actor.opacity += (this._multiplier * (Math.abs(this._actor.opacity - this._endOpacity) * delta)) / this._speed;\n    }\n\n    this._speed -= delta;\n\n    if (this.isComplete()) {\n      this._actor.opacity = this._endOpacity;\n    }\n\n    Logger.getInstance().debug('[Action fade] Actor opacity:', this._actor.opacity);\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || Math.abs(this._actor.opacity - this._endOpacity) < 0.05;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\n\nexport class Delay implements Action {\n  public x: number;\n  public y: number;\n  private _actor: Actor;\n  private _elapsedTime: number = 0;\n  private _delay: number;\n  private _started: boolean = false;\n  private _stopped = false;\n  constructor(actor: Actor, delay: number) {\n    this._actor = actor;\n    this._delay = delay;\n  }\n\n  public update(delta: number): void {\n    if (!this._started) {\n      this._started = true;\n    }\n\n    this.x = this._actor.pos.x;\n    this.y = this._actor.pos.y;\n\n    this._elapsedTime += delta;\n  }\n\n  isComplete(): boolean {\n    return this._stopped || this._elapsedTime >= this._delay;\n  }\n\n  public stop(): void {\n    this._stopped = true;\n  }\n\n  reset(): void {\n    this._elapsedTime = 0;\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { Action } from '../Action';\n\nexport class Die implements Action {\n  public x: number;\n  public y: number;\n\n  private _actor: Actor;\n  private _stopped = false;\n\n  constructor(actor: Actor) {\n    this._actor = actor;\n  }\n\n  public update(_delta: number): void {\n    this._actor.actions.clearActions();\n    this._actor.kill();\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    return this._stopped;\n  }\n\n  public stop(): void {\n    return;\n  }\n\n  public reset(): void {\n    return;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec, Vector } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class Follow implements Action {\n  private _actor: Actor;\n  private _actorToFollow: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _maximumDistance: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n\n  constructor(actor: Actor, actorToFollow: Actor, followDistance?: number) {\n    this._actor = actor;\n    this._actorToFollow = actorToFollow;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToFollow.pos.x, actorToFollow.pos.y);\n    this._maximumDistance = followDistance !== undefined ? followDistance : this._current.distance(this._end);\n    this._speed = 0;\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToFollowSpeed = Math.sqrt(Math.pow(this._actorToFollow.vel.x, 2) + Math.pow(this._actorToFollow.vel.y, 2));\n    if (actorToFollowSpeed !== 0) {\n      this._speed = actorToFollowSpeed;\n    }\n    this._current = vec(this._actor.pos.x, this._actor.pos.y);\n\n    this._end = vec(this._actorToFollow.pos.x, this._actorToFollow.pos.y);\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    if (this._distanceBetween >= this._maximumDistance) {\n      const m = this._dir.scale(this._speed);\n      this._actor.vel = vec(m.x, m.y);\n    } else {\n      this._actor.vel = vec(0, 0);\n    }\n\n    if (this.isComplete()) {\n      this._actor.pos = vec(this._end.x, this._end.y);\n      this._actor.vel = vec(0, 0);\n    }\n  }\n\n  public stop(): void {\n    this._actor.vel = vec(0, 0);\n    this._stopped = true;\n  }\n\n  public isComplete(): boolean {\n    // the actor following should never stop unless specified to do so\n    return this._stopped;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { Actor } from '../../Actor';\nimport { vec, Vector } from '../../Algebra';\nimport { Action } from '../Action';\n\nexport class Meet implements Action {\n  private _actor: Actor;\n  private _actorToMeet: Actor;\n  public x: number;\n  public y: number;\n  private _current: Vector;\n  private _end: Vector;\n  private _dir: Vector;\n  private _speed: number;\n  private _distanceBetween: number;\n  private _started = false;\n  private _stopped = false;\n  private _speedWasSpecified = false;\n\n  constructor(actor: Actor, actorToMeet: Actor, speed?: number) {\n    this._actor = actor;\n    this._actorToMeet = actorToMeet;\n    this._current = new Vector(this._actor.pos.x, this._actor.pos.y);\n    this._end = new Vector(actorToMeet.pos.x, actorToMeet.pos.y);\n    this._speed = speed || 0;\n\n    if (speed !== undefined) {\n      this._speedWasSpecified = true;\n    }\n  }\n\n  public update(_delta: number): void {\n    if (!this._started) {\n      this._started = true;\n      this._distanceBetween = this._current.distance(this._end);\n      this._dir = this._end.sub(this._current).normalize();\n    }\n\n    const actorToMeetSpeed = Math.sqrt(Math.pow(this._actorToMeet.vel.x, 2) + Math.pow(this._actorToMeet.vel.y, 2));\n    if (actorToMeetSpeed !== 0 && !this._speedWasSpecified) {\n      this._speed = actorToMeetSpeed;\n    }\n    this._current = vec(this._actor.pos.x, this._actor.pos.y);\n\n    this._end = vec(this._actorToMeet.pos.x, this._actorToMeet.pos.y);\n    this._distanceBetween = this._current.distance(this._end);\n    this._dir = this._end.sub(this._current).normalize();\n\n    const m = this._dir.scale(this._speed);\n    this._actor.vel = vec(m.x, m.y);\n\n    if (this.isComplete()) {\n      this._actor.pos = vec(this._end.x, this._end.y);\n      this._actor.vel = vec(0, 0);\n    }\n  }\n\n  public isComplete(): boolean {\n    return this._stopped || this._distanceBetween <= 1;\n  }\n\n  public stop(): void {\n    this._actor.vel = vec(0, 0);\n    this._stopped = true;\n  }\n\n  public reset(): void {\n    this._started = false;\n  }\n}\n","import { RotationType } from './RotationType';\n\nimport { Actor } from '../Actor';\nimport { EasingFunction, EasingFunctions } from '../Util/EasingFunctions';\nimport { ActionQueue } from './ActionQueue';\nimport { Repeat } from './Action/Repeat';\nimport { RepeatForever } from './Action/RepeatForever';\nimport { MoveBy } from './Action/MoveBy';\nimport { MoveTo } from './Action/MoveTo';\nimport { RotateTo } from './Action/RotateTo';\nimport { RotateBy } from './Action/RotateBy';\nimport { ScaleTo } from './Action/ScaleTo';\nimport { ScaleBy } from './Action/ScaleBy';\nimport { CallMethod } from './Action/CallMethod';\nimport { EaseTo } from './Action/EaseTo';\nimport { Blink } from './Action/Blink';\nimport { Fade } from './Action/Fade';\nimport { Delay } from './Action/Delay';\nimport { Die } from './Action/Die';\nimport { Follow } from './Action/Follow';\nimport { Meet } from './Action/Meet';\n\n/**\n * The fluent Action API allows you to perform \"actions\" on\n * [[Actor|Actors]] such as following, moving, rotating, and\n * more. You can implement your own actions by implementing\n * the [[Action]] interface.\n */\nexport class ActionContext {\n  private _actor: Actor;\n  private _queue: ActionQueue;\n\n  constructor(actor: Actor) {\n    this._actor = actor;\n    this._queue = new ActionQueue(actor);\n  }\n\n  public getQueue(): ActionQueue {\n    return this._queue;\n  }\n\n  public update(elapsedMs: number) {\n    this._queue.update(elapsedMs);\n  }\n\n  /**\n   * Clears all queued actions from the Actor\n   */\n  public clearActions(): void {\n    this._queue.clearActions();\n  }\n\n  /**\n   * This method will move an actor to the specified `x` and `y` position over the\n   * specified duration using a given [[EasingFunctions]] and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x         The x location to move the actor to\n   * @param y         The y location to move the actor to\n   * @param duration  The time it should take the actor to move to the new location in milliseconds\n   * @param easingFcn Use [[EasingFunctions]] or a custom function to use to calculate position\n   */\n  public easeTo(x: number, y: number, duration: number, easingFcn: EasingFunction = EasingFunctions.Linear) {\n    this._queue.add(new EaseTo(this._actor, x, y, duration, easingFcn));\n    return this;\n  }\n\n  /**\n   * This method will move an actor to the specified x and y position at the\n   * speed specified (in pixels per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param x      The x location to move the actor to\n   * @param y      The y location to move the actor to\n   * @param speed  The speed in pixels per second to move\n   */\n  public moveTo(x: number, y: number, speed: number): ActionContext {\n    this._queue.add(new MoveTo(this._actor, x, y, speed));\n    return this;\n  }\n\n  /**\n   * This method will move an actor by the specified x offset and y offset from its current position, at a certain speed.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param xOffset     The x offset to apply to this actor\n   * @param yOffset     The y location to move the actor to\n   * @param speed  The speed in pixels per second the actor should move\n   */\n  public moveBy(xOffset: number, yOffset: number, speed: number): ActionContext {\n    this._queue.add(new MoveBy(this._actor, xOffset, yOffset, speed));\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor to the specified angle at the speed\n   * specified (in radians per second) and return back the actor. This\n   * method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadians  The angle to rotate to in radians\n   * @param speed         The angular velocity of the rotation specified in radians per second\n   * @param rotationType  The [[RotationType]] to use for this rotation\n   */\n  public rotateTo(angleRadians: number, speed: number, rotationType?: RotationType): ActionContext {\n    this._queue.add(new RotateTo(this._actor, angleRadians, speed, rotationType));\n    return this;\n  }\n\n  /**\n   * This method will rotate an actor by the specified angle offset, from it's current rotation given a certain speed\n   * in radians/sec and return back the actor. This method is part\n   * of the actor 'Action' fluent API allowing action chaining.\n   * @param angleRadiansOffset  The angle to rotate to in radians relative to the current rotation\n   * @param speed          The speed in radians/sec the actor should rotate at\n   * @param rotationType  The [[RotationType]] to use for this rotation, default is shortest path\n   */\n  public rotateBy(angleRadiansOffset: number, speed: number, rotationType?: RotationType): ActionContext {\n    this._queue.add(new RotateBy(this._actor, angleRadiansOffset, speed, rotationType));\n    return this;\n  }\n\n  /**\n   * This method will scale an actor to the specified size at the speed\n   * specified (in magnitude increase per second) and return back the\n   * actor. This method is part of the actor 'Action' fluent API allowing\n   * action chaining.\n   * @param sizeX   The scaling factor to apply on X axis\n   * @param sizeY   The scaling factor to apply on Y axis\n   * @param speedX  The speed of scaling specified in magnitude increase per second on X axis\n   * @param speedY  The speed of scaling specified in magnitude increase per second on Y axis\n   */\n  public scaleTo(sizeX: number, sizeY: number, speedX: number, speedY: number): ActionContext {\n    this._queue.add(new ScaleTo(this._actor, sizeX, sizeY, speedX, speedY));\n    return this;\n  }\n\n  /**\n   * This method will scale an actor by an amount relative to the current scale at a certain speed in scale units/sec\n   * and return back the actor. This method is part of the\n   * actor 'Action' fluent API allowing action chaining.\n   * @param sizeOffsetX   The scaling factor to apply on X axis\n   * @param sizeOffsetY   The scaling factor to apply on Y axis\n   * @param speed    The speed to scale at in scale units/sec\n   */\n  public scaleBy(sizeOffsetX: number, sizeOffsetY: number, speed: number): ActionContext {\n    this._queue.add(new ScaleBy(this._actor, sizeOffsetX, sizeOffsetY, speed));\n    return this;\n  }\n\n  /**\n   * This method will cause an actor to blink (become visible and not\n   * visible). Optionally, you may specify the number of blinks. Specify the amount of time\n   * the actor should be visible per blink, and the amount of time not visible.\n   * This method is part of the actor 'Action' fluent API allowing action chaining.\n   * @param timeVisible     The amount of time to stay visible per blink in milliseconds\n   * @param timeNotVisible  The amount of time to stay not visible per blink in milliseconds\n   * @param numBlinks       The number of times to blink\n   */\n  public blink(timeVisible: number, timeNotVisible: number, numBlinks: number = 1): ActionContext {\n    this._queue.add(new Blink(this._actor, timeVisible, timeNotVisible, numBlinks));\n    return this;\n  }\n\n  /**\n   * This method will cause an actor's opacity to change from its current value\n   * to the provided value by a specified time (in milliseconds). This method is\n   * part of the actor 'Action' fluent API allowing action chaining.\n   * @param opacity  The ending opacity\n   * @param time     The time it should take to fade the actor (in milliseconds)\n   */\n  public fade(opacity: number, time: number): ActionContext {\n    this._queue.add(new Fade(this._actor, opacity, time));\n    return this;\n  }\n\n  /**\n   * This method will delay the next action from executing for a certain\n   * amount of time (in milliseconds). This method is part of the actor\n   * 'Action' fluent API allowing action chaining.\n   * @param time  The amount of time to delay the next action in the queue from executing in milliseconds\n   */\n  public delay(time: number): ActionContext {\n    this._queue.add(new Delay(this._actor, time));\n    return this;\n  }\n\n  /**\n   * This method will add an action to the queue that will remove the actor from the\n   * scene once it has completed its previous  Any actions on the\n   * action queue after this action will not be executed.\n   */\n  public die(): ActionContext {\n    this._queue.add(new Die(this._actor));\n    return this;\n  }\n\n  /**\n   * This method allows you to call an arbitrary method as the next action in the\n   * action queue. This is useful if you want to execute code in after a specific\n   * action, i.e An actor arrives at a destination after traversing a path\n   */\n  public callMethod(method: () => any): ActionContext {\n    this._queue.add(new CallMethod(method));\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the actions built in\n   * the `repeatBuilder` callback. If the number of repeats\n   * is not specified it will repeat forever. This method is part of\n   * the actor 'Action' fluent API allowing action chaining\n   *\n   * ```typescript\n   * // Move up in a zig-zag by repeated moveBy's\n   * actor.actions.repeat(repeatCtx => {\n   *  repeatCtx.moveBy(10, 0, 10);\n   *  repeatCtx.moveBy(0, 10, 10);\n   * }, 5);\n   * ```\n   *\n   * @param repeatBuilder The builder to specify the repeatable list of actions\n   * @param times  The number of times to repeat all the previous actions in the action queue. If nothing is specified the actions\n   * will repeat forever\n   */\n  public repeat(repeatBuilder: (repeatContext: ActionContext) => any, times?: number): ActionContext {\n    if (!times) {\n      this.repeatForever(repeatBuilder);\n      return this;\n    }\n    this._queue.add(new Repeat(this._actor, repeatBuilder, times));\n\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to repeat all of the actions built in\n   * the `repeatBuilder` callback. If the number of repeats\n   * is not specified it will repeat forever. This method is part of\n   * the actor 'Action' fluent API allowing action chaining\n   *\n   * ```typescript\n   * // Move up in a zig-zag by repeated moveBy's\n   * actor.actions.repeat(repeatCtx => {\n   *  repeatCtx.moveBy(10, 0, 10);\n   *  repeatCtx.moveBy(0, 10, 10);\n   * }, 5);\n   * ```\n   *\n   * @param repeatBuilder The builder to specify the repeatable list of actions\n   */\n  public repeatForever(repeatBuilder: (repeatContext: ActionContext) => any): ActionContext {\n    this._queue.add(new RepeatForever(this._actor, repeatBuilder));\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to follow another at a specified distance\n   * @param actor           The actor to follow\n   * @param followDistance  The distance to maintain when following, if not specified the actor will follow at the current distance.\n   */\n  public follow(actor: Actor, followDistance?: number): ActionContext {\n    if (followDistance === undefined) {\n      this._queue.add(new Follow(this._actor, actor));\n    } else {\n      this._queue.add(new Follow(this._actor, actor, followDistance));\n    }\n    return this;\n  }\n\n  /**\n   * This method will cause the actor to move towards another until they\n   * collide \"meet\" at a specified speed.\n   * @param actor  The actor to meet\n   * @param speed  The speed in pixels per second to move, if not specified it will match the speed of the other actor\n   */\n  public meet(actor: Actor, speed?: number): ActionContext {\n    if (speed === undefined) {\n      this._queue.add(new Meet(this._actor, actor));\n    } else {\n      this._queue.add(new Meet(this._actor, actor, speed));\n    }\n    return this;\n  }\n\n  /**\n   * Returns a promise that resolves when the current action queue up to now\n   * is finished.\n   */\n  public asPromise(): Promise<void> {\n    const temp = new Promise<void>((resolve) => {\n      this._queue.add(\n        new CallMethod(() => {\n          resolve();\n        })\n      );\n    });\n    return temp;\n  }\n}\n","import { ConvexPolygon } from './ConvexPolygon';\nimport { Circle } from './Circle';\nimport { Edge } from './Edge';\nimport { BoundingBox } from './BoundingBox';\nimport { Vector } from '../Algebra';\n\n/**\n * Excalibur shape helper for defining collision shapes quickly\n */\nexport class Shape {\n  /**\n   * Creates a box collision shape, under the hood defines a [[ConvexPolygon]] collision shape\n   * @param width Width of the box\n   * @param height Height of the box\n   * @param anchor Anchor of the box (default (.5, .5)) which positions the box relative to the center of the collider's position\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Box(width: number, height: number, anchor: Vector = Vector.Half, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: new BoundingBox(-width * anchor.x, -height * anchor.y, width - width * anchor.x, height - height * anchor.y).getPoints(),\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[ConvexPolygon|arbitrary polygon]] collision shape\n   * @param points Points specified in counter clockwise\n   * @param clockwiseWinding Optionally changed the winding of points, by default false meaning counter-clockwise winding.\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Polygon(points: Vector[], clockwiseWinding: boolean = false, offset: Vector = Vector.Zero): ConvexPolygon {\n    return new ConvexPolygon({\n      points: points,\n      offset: offset,\n      clockwiseWinding: clockwiseWinding\n    });\n  }\n\n  /**\n   * Creates a new [[circle|Circle]] collision shape\n   * @param radius Radius of the circle shape\n   * @param offset Optional offset relative to the collider in local coordinates\n   */\n  static Circle(radius: number, offset: Vector = Vector.Zero): Circle {\n    return new Circle({\n      radius: radius,\n      offset: offset\n    });\n  }\n\n  /**\n   * Creates a new [[Edge|edge]] collision shape\n   * @param begin Beginning of the edge in local coordinates to the collider\n   * @param end Ending of the edge in local coordinates to the collider\n   */\n  static Edge(begin: Vector, end: Vector): Edge {\n    return new Edge({\n      begin: begin,\n      end: end\n    });\n  }\n}\n","import { Vector } from '../Algebra';\n\n\nexport interface VectorViewOptions {\n  getX: () => number;\n  getY: () => number;\n  setX: (x: number) => void;\n  setY: (y: number) => void;\n}\nexport class VectorView extends Vector {\n  private _getX: () => number;\n  private _getY: () => number;\n  private _setX: (x: number) => void;\n  private _setY: (y: number) => void;\n  constructor(options: VectorViewOptions) {\n    super(0, 0);\n    this._getX = options.getX;\n    this._getY = options.getY;\n    this._setX = options.setX;\n    this._setY = options.setY;\n  }\n  public get x() {\n    return this._getX();\n  }\n\n  public set x(val) {\n    this._setX(val);\n  }\n\n  public get y() {\n    return this._getY();\n  }\n  public set y(val) {\n    this._setY(val);\n  }\n}\n","import { Entity } from './Entity';\n\nexport interface ComponentCtor<T extends Component = Component> {\n  new (): T;\n}\n\n/**\n * Type guard to check if a component implements clone\n * @param x\n */\nfunction hasClone(x: any): x is { clone(): any } {\n  return !!x?.clone;\n}\n\n/**\n * Plucks the string type out of a component type\n */\nexport type ComponentStringType<T> = T extends Component<infer R> ? R : string;\n\n/**\n * Components are containers for state in Excalibur, the are meant to convey capabilities that an Entity posesses\n *\n * Implementations of Component must have a zero-arg constructor to support dependecies\n *\n * ```typescript\n * class MyComponent extends ex.Component<'my'> {\n *   public readonly type = 'my';\n *   // zero arg support required if you want to use component dependencies\n *   constructor(public optionalPos?: ex.Vector) {}\n * }\n * ```\n */\nexport abstract class Component<TypeName extends string = string> {\n  /**\n   * Optionally list any component types this component depends on\n   * If the owner entity does not have these components, new components will be added to the entity\n   *\n   * Only components with zero-arg constructors are supported as automatic component dependencies\n   */\n  readonly dependencies?: ComponentCtor[];\n\n  /**\n   * Type of this component, must be a unique type among component types in you game.\n   */\n  abstract readonly type: TypeName;\n\n  /**\n   * Current owning [[Entity]], if any, of this component. Null if not added to any [[Entity]]\n   */\n  owner?: Entity = null;\n\n  /**\n   * Clones any properties on this component, if that property value has a `clone()` method it will be called\n   */\n  clone(): this {\n    const newComponent = new (this.constructor as any)();\n    for (const prop in this) {\n      if (this.hasOwnProperty(prop)) {\n        const val = this[prop];\n        if (hasClone(val) && prop !== 'owner' && prop !== 'clone') {\n          newComponent[prop] = val.clone();\n        } else {\n          newComponent[prop] = val;\n        }\n      }\n    }\n    return newComponent;\n  }\n\n  /**\n   * Optional callback called when a component is added to an entity\n   */\n  onAdd?: (owner: Entity) => void;\n\n  /**\n   * Opitonal callback called when acomponent is added to an entity\n   */\n  onRemove?: (previousOwner: Entity) => void;\n}\n\n/**\n * Tag components are a way of tagging a component with label and a simple value\n *\n * For example:\n *\n * ```typescript\n * const isOffscreen = new TagComponent('offscreen');\n * entity.addComponent(isOffscreen);\n * entity.tags.includes\n * ```\n */\nexport class TagComponent<TypeName extends string, MaybeValueType extends string | symbol | number | boolean = never> extends Component<\nTypeName\n> {\n  constructor(public readonly type: TypeName, public readonly value?: MaybeValueType) {\n    super();\n  }\n}\n","import { vec, Vector } from '../../Algebra';\nimport { Matrix, MatrixLocations } from '../../Math/matrix';\nimport { VectorView } from '../../Math/vector-view';\nimport { Component } from '../Component';\n\nconst createPosView = (matrix: Matrix) => {\n  const source = matrix;\n  return new VectorView({\n    setX: (x) => {\n      source.data[MatrixLocations.X] = x;\n    },\n    setY: (y) => {\n      source.data[MatrixLocations.Y] = y;\n    },\n    getX: () => {\n      return source.data[MatrixLocations.X];\n    },\n    getY: () => {\n      return source.data[MatrixLocations.Y];\n    }\n  });\n};\n\nconst createScaleView = (matrix: Matrix) => {\n  const source = matrix;\n  return new VectorView({\n    setX: (x) => {\n      source.setScaleX(x);\n    },\n    setY: (y) => {\n      source.setScaleY(y);\n    },\n    getX: () => {\n      return source.getScaleX();\n    },\n    getY: () => {\n      return source.getScaleY();\n    }\n  });\n};\n\n/**\n * Enum representing the coordinate plane for the position 2D vector in the [[TransformComponent]]\n */\nexport enum CoordPlane {\n  /**\n   * The world coordinate plane (default) represents world space, any entities drawn with world\n   * space move when the camera moves.\n   */\n  World = 'world',\n  /**\n   * The screen coordinate plane represents screen space, entities drawn in screen space are pinned\n   * to screen coordinates ignoring the camera.\n   */\n  Screen = 'screen'\n}\n\nexport class TransformComponent extends Component<'ex.transform'> {\n  public readonly type = 'ex.transform';\n\n  private _dirty = false;\n\n  public readonly matrix = Matrix.identity().translate(0, 0).rotate(0).scale(1, 1);\n  private _position = createPosView(this.matrix);\n  private _rotation = 0;\n  private _scale = createScaleView(this.matrix);\n\n  private _recalculate() {\n    this._rotation = this.matrix.getRotation();\n    this._dirty = false;\n  }\n\n  public getGlobalMatrix(): Matrix {\n    if (!this.parent) {\n      return this.matrix;\n    } else {\n      return this.parent.getGlobalMatrix().multm(this.matrix);\n    }\n  }\n\n  public get parent(): TransformComponent | null {\n    return this?.owner?.parent?.get(TransformComponent);\n  }\n\n  /**\n   * The [[CoordPlane|coordinate plane|]] for this transform for the entity.\n   */\n  public coordPlane = CoordPlane.World;\n\n  /**\n   * The current position of the entity in world space or in screen space depending on the the [[coordinate plan|CoordPlane]].\n   *\n   * If a parent entity exists coordinates are local to the parent.\n   */\n  public get pos(): Vector {\n    if (this._dirty) {\n      this._recalculate();\n    }\n    return this._position;\n  }\n\n  public set pos(val: Vector) {\n    this.matrix.setPosition(val.x, val.y);\n    this._dirty = true;\n  }\n\n  // Dirty flag check up the chain\n  public get dirty(): boolean {\n    if (this?.owner?.parent) {\n      const parent = this.parent;\n      return parent.dirty || this._dirty;\n    }\n    return this._dirty;\n  }\n\n  /**\n   * The current world position calculated\n   */\n  public get globalPos(): Vector {\n    const source = this.getGlobalMatrix();\n    return new VectorView({\n      getX: () => source.data[MatrixLocations.X],\n      getY: () => source.data[MatrixLocations.Y],\n      setX: (x) => {\n        if (this.parent) {\n          const [newX] = this.parent?.getGlobalMatrix().getAffineInverse().multv([x, source.data[MatrixLocations.Y]]);\n          this.matrix.data[MatrixLocations.X] = newX;\n        } else {\n          this.matrix.data[MatrixLocations.X] = x;\n        }\n      },\n      setY: (y) => {\n        if (this.parent) {\n          const [, newY] = this.parent?.getGlobalMatrix().getAffineInverse().multv([source.data[MatrixLocations.X], y]);\n          this.matrix.data[MatrixLocations.Y] = newY;\n        } else {\n          this.matrix.data[MatrixLocations.Y] = y;\n        }\n      }\n    });\n  }\n\n  public set globalPos(val: Vector) {\n    const parentTransform = this.parent;\n    if (!parentTransform) {\n      this.pos = val;\n    } else {\n      this.pos = parentTransform.getGlobalMatrix().getAffineInverse().multv(val);\n    }\n  }\n\n  /**\n   * The z-index ordering of the entity, a higher values are drawn on top of lower values.\n   * For example z=99 would be drawn on top of z=0.\n   */\n  public z: number = 0;\n\n  /**\n   * The rotation of the entity in radians. For example `Math.PI` radians is the same as 180 degrees.\n   */\n  public get rotation(): number {\n    if (this._dirty) {\n      this._recalculate();\n    }\n    return this._rotation;\n  }\n\n  public set rotation(val: number) {\n    this.matrix.setRotation(val);\n    this._dirty = true;\n  }\n\n  public get globalRotation(): number {\n    return this.getGlobalMatrix().getRotation();\n  }\n\n  public set globalRotation(val: number) {\n    const parentTransform = this.parent;\n    if (!parentTransform) {\n      this.rotation = val;\n    } else {\n      this.rotation = val - parentTransform.globalRotation;\n    }\n  }\n\n  /**\n   * The scale of the entity.\n   */\n  public get scale(): Vector {\n    if (this._dirty) {\n      this._recalculate();\n    }\n    return this._scale;\n  }\n\n  public set scale(val: Vector) {\n    this.matrix.setScale(val);\n    this._dirty = true;\n  }\n\n  public get globalScale(): Vector {\n    const source = this.getGlobalMatrix();\n    return new VectorView({\n      getX: () => source.getScaleX(),\n      getY: () => source.getScaleY(),\n      setX: (x) => {\n        if (this.parent) {\n          const globalScaleX = this.parent.globalScale.x;\n          this.matrix.setScaleX(x / globalScaleX);\n        } else {\n          this.matrix.setScaleX(x);\n        }\n      },\n      setY: (y) => {\n        if (this.parent) {\n          const globalScaleY = this.parent.globalScale.y;\n          this.matrix.setScaleY(y / globalScaleY);\n        } else {\n          this.matrix.setScaleY(y);\n        }\n      }\n    });\n  }\n\n  public set globalScale(val: Vector) {\n    const parentTransform = this.parent;\n    if (!parentTransform) {\n      this.scale = val;\n    } else {\n      this.scale = vec(val.x / parentTransform.globalScale.x, val.y / parentTransform.globalScale.y);\n    }\n  }\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { clamp } from '../Util/Util';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { EventDispatcher } from '../EventDispatcher';\nimport { SpriteSheet } from './SpriteSheet';\n\nexport interface HasTick {\n  /**\n   *\n   * @param elapsedMilliseconds The amount of real world time in milliseconds that has elapsed that must be updated in the animation\n   * @param idempotencyToken Optional idempotencyToken prevents a ticking animation from updating twice per frame\n   */\n  tick(elapsedMilliseconds: number, idempotencyToken?: number): void;\n}\n\nexport enum AnimationStrategy {\n  /**\n   * Animation ends without displaying anything\n   */\n  End = 'end',\n  /**\n   * Animation loops to the first frame after the last frame\n   */\n  Loop = 'loop',\n  /**\n   * Animation plays to the last frame, then backwards to the first frame, then repeats\n   */\n  PingPong = 'pingpong',\n\n  /**\n   * Animation ends stopping on the last frame\n   */\n  Freeze = 'freeze'\n}\n\nexport interface Frame {\n  graphic?: Graphic;\n  duration?: number; // number of ms the frame should be visible, overrides the animation duration\n}\n\nexport interface AnimationOptions {\n  frames: Frame[];\n  frameDuration?: number;\n  strategy?: AnimationStrategy;\n}\n\n// TODO wire up to new Emitter\nexport type AnimationEvents = {\n  frame: Frame;\n  loop: Animation;\n  ended: Animation;\n};\n\nexport class Animation extends Graphic implements HasTick {\n  public events = new EventDispatcher<any>(this); // TODO replace with new Emitter\n  public frames: Frame[] = [];\n  public strategy: AnimationStrategy = AnimationStrategy.Loop;\n  public frameDuration: number = 100;\n  public timeScale: number = 1;\n\n  private _idempotencyToken = -1;\n\n  private _firstTick = true;\n  private _currentFrame = 0;\n  private _timeLeftInFrame = 0;\n  private _direction = 1;\n  private _done = false;\n  private _playing = true;\n\n  constructor(options: GraphicOptions & AnimationOptions) {\n    super(options);\n    this.frames = options.frames;\n    this.strategy = options.strategy ?? this.strategy;\n    this.frameDuration = options.frameDuration ?? this.frameDuration;\n\n    this.goToFrame(0);\n  }\n\n  public clone(): Animation {\n    return new Animation({\n      frames: this.frames.map((f) => ({ ...f })),\n      frameDuration: this.frameDuration,\n      strategy: this.strategy,\n      ...this.cloneGraphicOptions()\n    });\n  }\n\n  public static fromSpriteSheet(\n    spriteSheet: SpriteSheet,\n    frameIndices: number[],\n    duration: number,\n    strategy: AnimationStrategy = AnimationStrategy.Loop\n  ): Animation {\n    return new Animation({\n      frames: spriteSheet.sprites\n        .filter((_, index) => frameIndices.indexOf(index) > -1)\n        .map((f) => ({\n          graphic: f,\n          duration: duration\n        })),\n      strategy: strategy\n    });\n  }\n\n  public get currentFrame(): Frame | null {\n    if (this._currentFrame >= 0 && this._currentFrame < this.frames.length) {\n      return this.frames[this._currentFrame];\n    }\n    return null;\n  }\n\n  public get isPlaying(): boolean {\n    return this._playing;\n  }\n\n  public play(): void {\n    this._playing = true;\n  }\n\n  public pause(): void {\n    this._playing = false;\n    this._firstTick = true;\n  }\n\n  public reset(): void {\n    this._done = false;\n    this._firstTick = true;\n    this._currentFrame = 0;\n  }\n\n  public get canFinish(): boolean {\n    switch (this.strategy) {\n      case AnimationStrategy.End:\n      case AnimationStrategy.Freeze: {\n        return true;\n      }\n      default: {\n        return false;\n      }\n    }\n  }\n\n  public get done(): boolean {\n    return this._done;\n  }\n\n  public goToFrame(frameNumber: number) {\n    this._currentFrame = frameNumber;\n    this._timeLeftInFrame = this.frameDuration;\n    const maybeFrame = this.frames[this._currentFrame];\n    if (maybeFrame && !this._done) {\n      this._timeLeftInFrame = maybeFrame?.duration || this.frameDuration;\n      this.width = maybeFrame.graphic?.width;\n      this.height = maybeFrame.graphic?.height;\n      this.events.emit('frame', maybeFrame as any);\n    }\n  }\n\n  private _nextFrame(): number {\n    const currentFrame = this._currentFrame;\n    if (this._done) {\n      return currentFrame;\n    }\n    let next = -1;\n\n    switch (this.strategy) {\n      case AnimationStrategy.Loop: {\n        next = (currentFrame + 1) % this.frames.length;\n        if (next === 0) {\n          this.events.emit('loop', this as any);\n        }\n        break;\n      }\n      case AnimationStrategy.End: {\n        next = currentFrame + 1;\n        if (next >= this.frames.length) {\n          this._done = true;\n          this._currentFrame = this.frames.length;\n          this.events.emit('end', this as any);\n        }\n        break;\n      }\n      case AnimationStrategy.Freeze: {\n        next = clamp(currentFrame + 1, 0, this.frames.length - 1);\n        if (next >= this.frames.length - 1) {\n          this._done = true;\n          this.events.emit('end', this as any);\n        }\n        break;\n      }\n      case AnimationStrategy.PingPong: {\n        if (currentFrame + this._direction >= this.frames.length) {\n          this._direction = -1;\n          this.events.emit('loop', this as any);\n        }\n\n        if (currentFrame + this._direction < 0) {\n          this._direction = 1;\n          this.events.emit('loop', this as any);\n        }\n\n        next = currentFrame + (this._direction % this.frames.length);\n        break;\n      }\n    }\n    return next;\n  }\n\n  public tick(elapsedMilliseconds: number, idempotencyToken: number = 0) {\n    if (this._idempotencyToken === idempotencyToken) {\n      return;\n    }\n    this._idempotencyToken = idempotencyToken;\n    if (!this._playing) {\n      return;\n    }\n\n    // if it's the first frame emit frame event\n    if (this._firstTick) {\n      this._firstTick = false;\n      this.events.emit('frame', this.currentFrame as any);\n    }\n\n    this._timeLeftInFrame -= elapsedMilliseconds * this.timeScale;\n    if (this._timeLeftInFrame <= 0) {\n      this.goToFrame(this._nextFrame());\n    }\n    this._updateDimensions();\n  }\n\n  private _updateDimensions() {\n    if (this.currentFrame) {\n      this.width = this.currentFrame.graphic?.width;\n      this.height = this.currentFrame.graphic?.height;\n    }\n  }\n\n  protected _drawImage(ctx: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.currentFrame) {\n      this.currentFrame.graphic.draw(ctx, x, y);\n    }\n  }\n}\n","import { vec, Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Collider } from './Collider';\nimport { CollisionType } from './CollisionType';\nimport { Physics } from '../Physics';\nimport { PreCollisionEvent, PostCollisionEvent, CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { Clonable } from '../Interfaces/Clonable';\nimport { Shape } from './Shape';\nimport { TransformComponent } from '../EntityComponentSystem/Components/TransformComponent';\n\nexport interface BodyOptions {\n  /**\n   * Optionally the actor associated with this body\n   */\n  actor?: Actor;\n  /**\n   * An optional collider to use in this body, if none is specified a default Box collider will be created.\n   */\n  collider?: Collider;\n}\n\n/**\n * Body describes all the physical properties pos, vel, acc, rotation, angular velocity\n */\nexport class Body implements Clonable<Body> {\n  private _collider: Collider;\n  public actor: Actor;\n  /**\n   * Constructs a new physics body associated with an actor\n   */\n  constructor({ actor, collider }: BodyOptions) {\n    if (!actor && !collider) {\n      throw new Error('An actor or collider are required to create a body');\n    }\n\n    this.actor = actor;\n    if (!collider && actor) {\n      this.collider = this.useBoxCollider(actor.width, actor.height, actor.anchor);\n    } else {\n      this.collider = collider;\n    }\n  }\n\n  public get id() {\n    return this.actor ? this.actor.id : -1;\n  }\n\n  /**\n   * Returns a clone of this body, not associated with any actor\n   */\n  public clone() {\n    return new Body({\n      actor: null,\n      collider: this.collider.clone()\n    });\n  }\n\n  public get active() {\n    return this.actor ? !this.actor.isKilled() : false;\n  }\n\n  public get center() {\n    return this.pos;\n  }\n\n  // TODO allow multiple colliders for a single body\n  public set collider(collider: Collider) {\n    if (collider) {\n      this._collider = collider;\n      this._collider.body = this;\n      this._wireColliderEventsToActor();\n    }\n  }\n\n  public get collider(): Collider {\n    return this._collider;\n  }\n\n  public get transform(): TransformComponent {\n    return this.actor.get(TransformComponent);\n  }\n\n  /**\n   * The (x, y) position of the actor this will be in the middle of the actor if the\n   * [[Actor.anchor]] is set to (0.5, 0.5) which is default.\n   * If you want the (x, y) position to be the top left of the actor specify an anchor of (0, 0).\n   */\n  public get pos(): Vector {\n    return this.transform.globalPos;\n  }\n\n  public set pos(val: Vector) {\n    this.transform.globalPos = val;\n  }\n\n  /**\n   * The position of the actor last frame (x, y) in pixels\n   */\n  public oldPos: Vector = new Vector(0, 0);\n\n  /**\n   * The current velocity vector (vx, vy) of the actor in pixels/second\n   */\n  public vel: Vector = new Vector(0, 0);\n\n  /**\n   * The velocity of the actor last frame (vx, vy) in pixels/second\n   */\n  public oldVel: Vector = new Vector(0, 0);\n\n  /**\n   * The current acceleration vector (ax, ay) of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may\n   * be useful to simulate a gravitational effect.\n   */\n  public acc: Vector = new Vector(0, 0);\n\n  /**\n   * Gets/sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public oldAcc: Vector = Vector.Zero;\n\n  /**\n   * The current torque applied to the actor\n   */\n  public torque: number = 0;\n\n  /**\n   * The current \"motion\" of the actor, used to calculated sleep in the physics simulation\n   */\n  public motion: number = 10;\n\n  /**\n   * Gets/sets the rotation of the body from the last frame.\n   */\n  public oldRotation: number = 0; // radians\n\n  /**\n   * The rotation of the actor in radians\n   */\n  public get rotation() {\n    return this.transform.globalRotation;\n  }\n\n  public set rotation(val: number) {\n    this.transform.globalRotation = val;\n  }\n\n  /**\n   * The scale vector of the actor\n   * @obsolete ex.Body.scale will be removed in v0.25.0, Use ex.Transform.scale\n   */\n  public get scale(): Vector {\n    return this.transform.globalScale;\n  }\n\n  public set scale(val: Vector) {\n    this.transform.globalScale = val;\n  }\n\n  /**\n   * The scale of the actor last frame\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public oldScale: Vector = Vector.One;\n\n  /**\n   * The x scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sx: number = 0; //scale/sec\n  /**\n   * The y scalar velocity of the actor in scale/second\n   * @obsolete ex.Body.scale will be removed in v0.25.0\n   */\n  public sy: number = 0; //scale/sec\n\n  /**\n   * The rotational velocity of the actor in radians/second\n   */\n  public rx: number = 0; //radians/sec\n\n  private _geometryDirty = false;\n\n  private _totalMtv: Vector = Vector.Zero;\n\n  /**\n   * Add minimum translation vectors accumulated during the current frame to resolve collisions.\n   */\n  public addMtv(mtv: Vector) {\n    this._totalMtv.addEqual(mtv);\n  }\n\n  /**\n   * Applies the accumulated translation vectors to the actors position\n   */\n  public applyMtv(): void {\n    this.pos = this.pos.add(this._totalMtv);\n    this._totalMtv.setTo(0, 0);\n  }\n\n  /**\n   * Flags the shape dirty and must be recalculated in world space\n   */\n  public markCollisionShapeDirty() {\n    this._geometryDirty = true;\n  }\n\n  public get isColliderShapeDirty(): boolean {\n    return this._geometryDirty;\n  }\n\n  /**\n   * Sets the old versions of pos, vel, acc, and scale.\n   */\n  public captureOldTransform() {\n    // Capture old values before integration step updates them\n    this.oldVel.setTo(this.vel.x, this.vel.y);\n    this.oldPos.setTo(this.pos.x, this.pos.y);\n    this.oldAcc.setTo(this.acc.x, this.acc.y);\n    this.oldScale.setTo(this.scale.x, this.scale.y);\n    this.oldRotation = this.rotation;\n  }\n\n  /**\n   * Perform euler integration at the specified time step\n   */\n  public integrate(delta: number) {\n    // Update placements based on linear algebra\n    const seconds = delta / 1000;\n\n    const totalAcc = this.acc.clone();\n    // Only active vanilla actors are affected by global acceleration\n    if (this.collider.type === CollisionType.Active) {\n      totalAcc.addEqual(Physics.acc);\n    }\n\n    this.vel.addEqual(totalAcc.scale(seconds));\n    this.pos = this.pos.add(this.vel.scale(seconds)).add(totalAcc.scale(0.5 * seconds * seconds));\n\n    this.rx += this.torque * (1.0 / this.collider.inertia) * seconds;\n    this.rotation += this.rx * seconds;\n\n    this.scale = vec(this.scale.x + (this.sx * delta) / 1000, this.scale.y + (this.sy * delta) / 1000);\n\n    if (!this.scale.equals(this.oldScale)) {\n      // change in scale effects the geometry\n      this._geometryDirty = true;\n    }\n\n    // Update colliders\n    this.collider.update();\n    this._geometryDirty = false;\n  }\n\n  /**\n   * Sets up a box geometry based on the current bounds of the associated actor of this physics body.\n   *\n   * If no width/height are specified the body will attempt to use the associated actor's width/height.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useBoxCollider(width?: number, height?: number, anchor: Vector = Vector.Half, center: Vector = Vector.Zero): Collider {\n    if (width === null || width === undefined) {\n      width = this.actor ? this.actor.width : 0;\n    }\n    if (height === null || height === undefined) {\n      height = this.actor ? this.actor.height : 0;\n    }\n\n    this.collider.shape = Shape.Box(width, height, anchor, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[ConvexPolygon|convex polygon]] collision geometry based on a list of of points relative\n   *  to the anchor of the associated actor\n   * of this physics body.\n   *\n   * Only [convex polygon](https://en.wikipedia.org/wiki/Convex_polygon) definitions are supported.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public usePolygonCollider(points: Vector[], center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Polygon(points, false, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up a [[Circle|circle collision geometry]] with a specified radius in pixels.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useCircleCollider(radius: number, center: Vector = Vector.Zero): Collider {\n    this.collider.shape = Shape.Circle(radius, center);\n    return this.collider;\n  }\n\n  /**\n   * Sets up an [[Edge|edge collision geometry]] with a start point and an end point relative to the anchor of the associated actor\n   * of this physics body.\n   *\n   * By default, the box is center is at (0, 0) which means it is centered around the actors anchor.\n   */\n  public useEdgeCollider(begin: Vector, end: Vector): Collider {\n    this.collider.shape = Shape.Edge(begin, end);\n    return this.collider;\n  }\n\n  // TODO remove this, eventually events will stay local to the thing they are around\n  private _wireColliderEventsToActor() {\n    this.collider.clear();\n    this.collider.on('precollision', (evt: PreCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('precollision', new PreCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('postcollision', (evt: PostCollisionEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('postcollision', new PostCollisionEvent(evt.target.body.actor, evt.other.body.actor, evt.side, evt.intersection));\n      }\n    });\n    this.collider.on('collisionstart', (evt: CollisionStartEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionstart', new CollisionStartEvent(evt.target.body.actor, evt.other.body.actor, evt.pair));\n      }\n    });\n    this.collider.on('collisionend', (evt: CollisionEndEvent<Collider>) => {\n      if (this.actor) {\n        this.actor.emit('collisionend', new CollisionEndEvent(evt.target.body.actor, evt.other.body.actor));\n      }\n    });\n  }\n}\n","import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Vector } from '../Algebra';\nimport { Side } from '../Collision/Side';\nimport { PreCollisionEvent, PostCollisionEvent } from '../Events';\nimport { CollisionType } from '../Collision/CollisionType';\nimport { BoundingBox } from '../Collision/Index';\n\nexport class TileMapCollisionDetection implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    const eventDispatcher = actor.eventDispatcher;\n    if (actor.body.collider.type !== CollisionType.PreventCollision && engine.currentScene && engine.currentScene.tileMaps) {\n      for (let j = 0; j < engine.currentScene.tileMaps.length; j++) {\n        const map = engine.currentScene.tileMaps[j];\n        let intersectMap: Vector;\n        let side = Side.None;\n        let max = 2;\n        while ((intersectMap = map.collides(actor))) {\n          if (max-- < 0) {\n            break;\n          }\n          side = BoundingBox.getSideFromIntersection(intersectMap);\n          eventDispatcher.emit('precollision', new PreCollisionEvent(actor, null, side, intersectMap));\n          if (actor.body.collider.type === CollisionType.Active) {\n            actor.pos = actor.pos.add(intersectMap);\n            eventDispatcher.emit('postcollision', new PostCollisionEvent(actor, null, side, intersectMap));\n          }\n        }\n      }\n    }\n  }\n}\n","import { vec, Vector } from '../Algebra';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { Color } from '../Drawing/Color';\n\nexport class CullingBox {\n  private _topLeft: Vector = new Vector(0, 0);\n  private _topRight: Vector = new Vector(0, 0);\n  private _bottomLeft: Vector = new Vector(0, 0);\n  private _bottomRight: Vector = new Vector(0, 0);\n\n  private _xCoords: Array<number>;\n  private _yCoords: Array<number>;\n  private _xMin: number;\n  private _yMin: number;\n  private _xMax: number;\n  private _yMax: number;\n\n  private _xMinWorld: number;\n  private _yMinWorld: number;\n  private _xMaxWorld: number;\n  private _yMaxWorld: number;\n\n  public isSpriteOffScreen(actor: Actor, engine: Engine): boolean {\n    const drawingWidth = actor.currentDrawing.drawWidth;\n    const drawingHeight = actor.currentDrawing.drawHeight;\n    const rotation = actor.rotation;\n    const anchor = actor.center;\n    const worldPos = actor.getGlobalPos();\n\n    this._topLeft = vec(worldPos.x - drawingWidth / 2, worldPos.y - drawingHeight / 2);\n    this._topLeft = this._topLeft.rotate(rotation, anchor);\n\n    this._topRight = vec(worldPos.x + drawingWidth / 2, worldPos.y - drawingHeight / 2);\n    this._topRight = this._topRight.rotate(rotation, anchor);\n\n    this._bottomLeft = vec(worldPos.x - drawingWidth / 2, worldPos.y + drawingHeight / 2);\n    this._bottomLeft = this._bottomLeft.rotate(rotation, anchor);\n\n    this._bottomRight = vec(worldPos.x + drawingWidth / 2, worldPos.y + drawingHeight / 2);\n    this._bottomRight = this._bottomRight.rotate(rotation, anchor);\n\n    const topLeftScreen = engine.worldToScreenCoordinates(this._topLeft);\n    const topRightScreen = engine.worldToScreenCoordinates(this._topRight);\n    const bottomLeftScreen = engine.worldToScreenCoordinates(this._bottomLeft);\n    const bottomRightScreen = engine.worldToScreenCoordinates(this._bottomRight);\n    this._xCoords = [];\n    this._yCoords = [];\n\n    this._xCoords.push(topLeftScreen.x, topRightScreen.x, bottomLeftScreen.x, bottomRightScreen.x);\n    this._yCoords.push(topLeftScreen.y, topRightScreen.y, bottomLeftScreen.y, bottomRightScreen.y);\n\n    this._xMin = Math.min.apply(null, this._xCoords);\n    this._yMin = Math.min.apply(null, this._yCoords);\n    this._xMax = Math.max.apply(null, this._xCoords);\n    this._yMax = Math.max.apply(null, this._yCoords);\n\n    const minWorld = engine.screenToWorldCoordinates(new Vector(this._xMin, this._yMin));\n    const maxWorld = engine.screenToWorldCoordinates(new Vector(this._xMax, this._yMax));\n    this._xMinWorld = minWorld.x;\n    this._yMinWorld = minWorld.y;\n    this._xMaxWorld = maxWorld.x;\n    this._yMaxWorld = maxWorld.y;\n\n    const boundingPoints = [\n      new Vector(this._xMin, this._yMin), // top left\n      new Vector(this._xMax, this._yMin), // top right\n      new Vector(this._xMin, this._yMax), // bottom left\n      new Vector(this._xMax, this._yMax) // bottom right\n    ];\n\n    // sprite can be wider than canvas screen (and still visible within canvas)\n    // top or bottom of sprite must be within canvas\n    if (\n      boundingPoints[0].x < 0 &&\n      boundingPoints[1].x > engine.canvas.clientWidth &&\n      (boundingPoints[0].y > 0 || boundingPoints[2].y < engine.canvas.clientHeight)\n    ) {\n      return false;\n    }\n\n    // sprite can be taller than canvas screen (and still visible within canvas)\n    // left or right of sprite must be within canvas\n    if (\n      boundingPoints[0].y < 0 &&\n      boundingPoints[2].y > engine.canvas.clientHeight &&\n      (boundingPoints[1].x > 0 || boundingPoints[0].x < engine.canvas.clientWidth)\n    ) {\n      return false;\n    }\n\n    // otherwise if any corner is visible, we're not offscreen\n    for (let i = 0; i < boundingPoints.length; i++) {\n      if (\n        boundingPoints[i].x > 0 &&\n        boundingPoints[i].y > 0 &&\n        boundingPoints[i].x < engine.canvas.clientWidth &&\n        boundingPoints[i].y < engine.canvas.clientHeight\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // bounding rectangle\n    ctx.beginPath();\n    ctx.strokeStyle = Color.White.toString();\n    ctx.rect(this._xMinWorld, this._yMinWorld, this._xMaxWorld - this._xMinWorld, this._yMaxWorld - this._yMinWorld);\n    ctx.stroke();\n\n    ctx.fillStyle = Color.Red.toString();\n    ctx.beginPath();\n    ctx.arc(this._topLeft.x, this._topLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Green.toString();\n    ctx.beginPath();\n    ctx.arc(this._topRight.x, this._topRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Blue.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomLeft.x, this._bottomLeft.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    ctx.fillStyle = Color.Magenta.toString();\n    ctx.beginPath();\n    ctx.arc(this._bottomRight.x, this._bottomRight.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n  }\n}\n","import { CullingBox } from './../Util/CullingBox';\nimport { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\nimport { ExitViewPortEvent, EnterViewPortEvent } from '../Events';\nimport { TagComponent } from '../EntityComponentSystem';\n\nexport class OffscreenCulling implements Trait {\n  public cullingBox: CullingBox = new CullingBox();\n\n  public update(actor: Actor, engine: Engine) {\n    const events = actor.eventDispatcher;\n\n    let isSpriteOffScreen = true;\n    if (actor.currentDrawing != null) {\n      isSpriteOffScreen = this.cullingBox.isSpriteOffScreen(actor, engine);\n    }\n\n    let actorBoundsOffscreen = false;\n    if (engine && engine.currentScene && engine.currentScene.camera && engine.currentScene.camera.viewport && !actor.parent) {\n      actorBoundsOffscreen = !engine.currentScene.camera.viewport.intersect(actor.body.collider.bounds);\n    }\n\n    if (!actor.isOffScreen) {\n      if (actorBoundsOffscreen && isSpriteOffScreen) {\n        events.emit('exitviewport', new ExitViewPortEvent(actor));\n        actor.addComponent(new TagComponent('offscreen'));\n      }\n    } else {\n      if (!actorBoundsOffscreen || !isSpriteOffScreen) {\n        events.emit('enterviewport', new EnterViewPortEvent(actor));\n        actor.removeComponent('offscreen');\n      }\n    }\n  }\n}\n","import { Trait } from '../Interfaces/Trait';\nimport { Actor } from '../Actor';\nimport { Engine } from '../Engine';\n\nexport interface CapturePointerConfig {\n  /**\n   * Capture PointerMove events (may be expensive!)\n   */\n  captureMoveEvents: boolean;\n\n  /**\n   * Capture PointerDrag events (may be expensive!)\n   */\n  captureDragEvents: boolean;\n}\n\n/**\n * Revises pointer events path accordingly to the actor\n */\nexport class CapturePointer implements Trait {\n  public update(actor: Actor, engine: Engine) {\n    if (!actor.enableCapturePointer) {\n      return;\n    }\n    if (actor.isKilled()) {\n      return;\n    }\n\n    engine.input.pointers.checkAndUpdateActorUnderPointer(actor);\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport { Vector } from '../Algebra';\n\n/**\n * A canvas linecap style. \"butt\" is the default flush style, \"round\" is a semi-circle cap with a radius half the width of\n * the line, and \"square\" is a rectangle that is an equal width and half height cap.\n */\nexport type LineCapStyle = 'butt' | 'round' | 'square';\n\n/* istanbul ignore next */\n/**\n * Draw a line on canvas context\n *\n * @param ctx The canvas context\n * @param color The color of the line\n * @param x1 The start x coordinate\n * @param y1 The start y coordinate\n * @param x2 The ending x coordinate\n * @param y2 The ending y coordinate\n * @param thickness The line thickness\n * @param cap The [[LineCapStyle]] (butt, round, or square)\n */\nexport function line(\n  ctx: CanvasRenderingContext2D,\n  color: Color = Color.Red,\n  x1: number,\n  y1: number,\n  x2: number,\n  y2: number,\n  thickness: number = 1,\n  cap: LineCapStyle = 'butt'\n) {\n  ctx.beginPath();\n  ctx.lineWidth = thickness;\n  ctx.lineCap = cap;\n  ctx.strokeStyle = color.toString();\n  ctx.moveTo(x1, y1);\n  ctx.lineTo(x2, y2);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/* istanbul ignore next */\n/**\n * Draw the vector as a point onto the canvas.\n */\nexport function point(ctx: CanvasRenderingContext2D, color: Color = Color.Red, point: Vector): void {\n  ctx.beginPath();\n  ctx.strokeStyle = color.toString();\n  ctx.arc(point.x, point.y, 5, 0, Math.PI * 2);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Draw the vector as a line onto the canvas starting a origin point.\n */\n/* istanbul ignore next */\n/**\n *\n */\nexport function vector(ctx: CanvasRenderingContext2D, color: Color, origin: Vector, vector: Vector, scale: number = 1.0): void {\n  const c = color ? color.toString() : 'blue';\n  const v = vector.scale(scale);\n  ctx.beginPath();\n  ctx.strokeStyle = c;\n  ctx.moveTo(origin.x, origin.y);\n  ctx.lineTo(origin.x + v.x, origin.y + v.y);\n  ctx.closePath();\n  ctx.stroke();\n}\n\n/**\n * Represents border radius values\n */\nexport interface BorderRadius {\n  /**\n   * Top-left\n   */\n  tl: number;\n  /**\n   * Top-right\n   */\n  tr: number;\n  /**\n   * Bottom-right\n   */\n  br: number;\n  /**\n   * Bottom-left\n   */\n  bl: number;\n}\n\n/**\n * Draw a round rectangle on a canvas context\n *\n * @param ctx The canvas context\n * @param x The top-left x coordinate\n * @param y The top-left y coordinate\n * @param width The width of the rectangle\n * @param height The height of the rectangle\n * @param radius The border radius of the rectangle\n * @param stroke The [[Color]] to stroke rectangle with\n * @param fill The [[Color]] to fill rectangle with\n */\nexport function roundRect(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n  radius: number | BorderRadius = 5,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  let br: BorderRadius;\n\n  if (typeof radius === 'number') {\n    br = { tl: radius, tr: radius, br: radius, bl: radius };\n  } else {\n    const defaultRadius: BorderRadius = { tl: 0, tr: 0, br: 0, bl: 0 };\n\n    for (const prop in defaultRadius) {\n      if (defaultRadius.hasOwnProperty(prop)) {\n        const side = <keyof BorderRadius>prop;\n        br[side] = radius[side] || defaultRadius[side];\n      }\n    }\n  }\n\n  ctx.beginPath();\n  ctx.moveTo(x + br.tl, y);\n  ctx.lineTo(x + width - br.tr, y);\n  ctx.quadraticCurveTo(x + width, y, x + width, y + br.tr);\n  ctx.lineTo(x + width, y + height - br.br);\n  ctx.quadraticCurveTo(x + width, y + height, x + width - br.br, y + height);\n  ctx.lineTo(x + br.bl, y + height);\n  ctx.quadraticCurveTo(x, y + height, x, y + height - br.bl);\n  ctx.lineTo(x, y + br.tl);\n  ctx.quadraticCurveTo(x, y, x + br.tl, y);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n\n/**\n *\n */\nexport function circle(\n  ctx: CanvasRenderingContext2D,\n  x: number,\n  y: number,\n  radius: number,\n  stroke: Color = Color.White,\n  fill: Color = null\n) {\n  ctx.beginPath();\n  ctx.arc(x, y, radius, 0, Math.PI * 2);\n  ctx.closePath();\n\n  if (fill) {\n    ctx.fillStyle = fill.toString();\n    ctx.fill();\n  }\n\n  if (stroke) {\n    ctx.strokeStyle = stroke.toString();\n    ctx.stroke();\n  }\n}\n","/**\n * CollisionGroups indicate like members that do not collide with each other. Use [[CollisionGroupManager]] to create [[CollisionGroup]]s\n *\n * For example:\n *\n * Players have collision group \"player\"\n *\n * ![Player Collision Group](/assets/images/docs/CollisionGroupsPlayer.png)\n *\n * Enemies have collision group \"enemy\"\n *\n * ![Enemy Collision Group](/assets/images/docs/CollisionGroupsEnemy.png)\n *\n * Blocks have collision group \"ground\"\n *\n * ![Ground collision group](/assets/images/docs/CollisionGroupsGround.png)\n *\n * Players don't collide with each other, but enemies and blocks. Likewise, enemies don't collide with each other but collide\n * with players and blocks.\n *\n * This is done with bitmasking, see the following pseudo-code\n *\n * PlayerGroup = `0b001`\n * PlayerGroupMask = `0b110`\n *\n * EnemyGroup = `0b010`\n * EnemyGroupMask = `0b101`\n *\n * BlockGroup = `0b100`\n * BlockGroupMask = `0b011`\n *\n * Should Players collide? No because the bitwise mask evaluates to 0\n * `(player1.group & player2.mask) === 0`\n * `(0b001 & 0b110) === 0`\n *\n * Should Players and Enemies collide? Yes because the bitwise mask is non-zero\n * `(player1.group & enemy1.mask) === 1`\n * `(0b001 & 0b101) === 1`\n *\n * Should Players and Blocks collide? Yes because the bitwise mask is non-zero\n * `(player1.group & blocks1.mask) === 1`\n * `(0b001 & 0b011) === 1`\n */\nexport class CollisionGroup {\n  /**\n   * The `All` [[CollisionGroup]] is a special group that collides with all other groups including itself,\n   * it is the default collision group on colliders.\n   */\n  public static All = new CollisionGroup('Collide with all groups', -1, -1);\n\n  private _name: string;\n  private _category: number;\n  private _mask: number;\n\n  /**\n   * **STOP!!** It is preferred that [[CollisionGroupManager.create]] is used to create collision groups\n   *  unless you know how to construct the proper bitmasks. See https://github.com/excaliburjs/Excalibur/issues/1091 for more info.\n   * @param name Name of the collision group\n   * @param category 32 bit category for the group, should be a unique power of 2. For example `0b001` or `0b010`\n   * @param mask 32 bit mask of category, or `~category` generally. For a category of `0b001`, the mask would be `0b110`\n   */\n  constructor(name: string, category: number, mask: number) {\n    this._name = name;\n    this._category = category;\n    this._mask = mask;\n  }\n\n  /**\n   * Get the name of the collision group\n   */\n  public get name() {\n    return this._name;\n  }\n\n  /**\n   * Get the category of the collision group, a 32 bit number which should be a unique power of 2\n   */\n  public get category() {\n    return this._category;\n  }\n\n  /**\n   * Get the mask for this collision group\n   */\n  public get mask() {\n    return this._mask;\n  }\n\n  /**\n   * Evaluates whether 2 collision groups can collide\n   * @param other  CollisionGroup\n   */\n  public canCollide(other: CollisionGroup): boolean {\n    return (this.category & other.mask) !== 0 && (other.category & this.mask) !== 0;\n  }\n}\n","import { Physics } from './../Physics';\nimport { Color } from './../Drawing/Color';\nimport { CollisionContact } from './CollisionContact';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\n/**\n * Models a potential collision between 2 bodies\n */\nexport class Pair {\n  public id: string = null;\n  public collision: CollisionContact = null;\n\n  constructor(public colliderA: Collider, public colliderB: Collider) {\n    this.id = Pair.calculatePairHash(colliderA, colliderB);\n  }\n\n  public static canCollide(colliderA: Collider, colliderB: Collider) {\n    // If both are in the same collision group short circuit\n    if (!colliderA.group.canCollide(colliderB.group)) {\n      return false;\n    }\n\n    // if both are fixed short circuit\n    if (colliderA.type === CollisionType.Fixed && colliderB.type === CollisionType.Fixed) {\n      return false;\n    }\n\n    // if the either is prevent collision short circuit\n    if (colliderB.type === CollisionType.PreventCollision || colliderA.type === CollisionType.PreventCollision) {\n      return false;\n    }\n\n    // if either is dead short circuit\n    if (!colliderA.active || !colliderB.active) {\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Returns whether or not it is possible for the pairs to collide\n   */\n  public get canCollide(): boolean {\n    const actorA = this.colliderA;\n    const actorB = this.colliderB;\n    return Pair.canCollide(actorA, actorB);\n  }\n\n  /**\n   * Runs the collision intersection logic on the members of this pair\n   */\n  public collide() {\n    this.collision = this.colliderA.collide(this.colliderB);\n  }\n\n  /**\n   * Resolves the collision body position and velocity if a collision occurred\n   */\n  public resolve(strategy: CollisionResolutionStrategy) {\n    if (this.collision) {\n      this.collision.resolve(strategy);\n    }\n  }\n\n  /**\n   * Calculates the unique pair hash id for this collision pair\n   */\n  public static calculatePairHash(colliderA: Collider, colliderB: Collider): string {\n    if (colliderA.id < colliderB.id) {\n      return `#${colliderA.id}+${colliderB.id}`;\n    } else {\n      return `#${colliderB.id}+${colliderA.id}`;\n    }\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (this.collision) {\n      if (Physics.showContacts) {\n        DrawUtil.point(ctx, Color.Red, this.collision.point);\n      }\n      if (Physics.showCollisionNormals) {\n        DrawUtil.vector(ctx, Color.Cyan, this.collision.point, this.collision.normal, 30);\n      }\n    }\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport * as DrawUtil from '../Util/DrawUtil';\nimport { Eventable } from '../Interfaces/Index';\nimport { GameEvent } from '../Events';\nimport { Actor } from '../Actor';\nimport { Body } from './Body';\nimport { CollisionShape } from './CollisionShape';\nimport { Vector, Line } from '../Algebra';\nimport { Physics } from '../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { CollisionType } from './CollisionType';\nimport { CollisionGroup } from './CollisionGroup';\nimport { CollisionContact } from './CollisionContact';\nimport { EventDispatcher } from '../EventDispatcher';\nimport { Pair } from './Pair';\nimport { Clonable } from '../Interfaces/Clonable';\n\n/**\n * Type guard function to determine whether something is a Collider\n */\nexport function isCollider(x: Actor | Collider): x is Collider {\n  return x instanceof Collider;\n}\n\nexport interface ColliderOptions {\n  /**\n   * Optional [[CollisionShape|Shape]] to use with this collider, the shape defines the collidable\n   * region along with the [[BoundingBox|bounding box]]\n   */\n  shape?: CollisionShape;\n  /**\n   * Optional body to associate with this collider\n   */\n  body?: Body;\n  /**\n   * Optional pixel offset from the position of the body\n   */\n  offset?: Vector;\n  /**\n   * Optional collision group on this collider\n   */\n  group?: CollisionGroup;\n  /**\n   * Optional [[CollisionType|collision type]], if not specified the default is [[CollisionType.PreventCollision]]\n   */\n  type?: CollisionType;\n  /**\n   * Optional local bounds if other bounds are required instead of the bounding box from the shape. This overrides shape bounds.\n   */\n  localBounds?: BoundingBox;\n  /**\n   * Optional flag to indicate moment of inertia from the shape should be used, by default it is true.\n   */\n  useShapeInertia?: boolean;\n}\n\n/**\n * Collider describes material properties like shape,\n * bounds, friction of the physics object. Only **one** collider can be associated with a body at a time\n */\n\nexport class Collider implements Eventable, Clonable<Collider> {\n  private _shape: CollisionShape;\n  public useShapeInertia: boolean;\n  private _events: EventDispatcher<Collider> = new EventDispatcher<Collider>(this);\n\n  constructor({ body, type, group, shape, offset, useShapeInertia = true }: ColliderOptions) {\n    // If shape is not supplied see if the body has an existing collider with a shape\n    if (body && body.collider && !shape) {\n      this._shape = body.collider.shape;\n    } else {\n      this._shape = shape;\n      this.body = body;\n    }\n    this.useShapeInertia = useShapeInertia;\n    this._shape.collider = this;\n    this.type = type || this.type;\n    this.group = group || this.group;\n    this.offset = offset || Vector.Zero;\n  }\n\n  /**\n   * Returns a clone of the current collider, not associated with any body\n   */\n  public clone() {\n    return new Collider({\n      body: null,\n      type: this.type,\n      shape: this._shape.clone(),\n      group: this.group,\n      offset: this.offset\n    });\n  }\n\n  /**\n   * Get the unique id of the collider\n   */\n  public get id(): number {\n    return this.body ? this.body.id : -1;\n  }\n\n  /**\n   * Gets or sets the current collision type of this collider. By\n   * default it is ([[CollisionType.PreventCollision]]).\n   */\n  public type: CollisionType = CollisionType.PreventCollision;\n\n  /**\n   * Gets or sets the current [[CollisionGroup|collision group]] for the collider, colliders with like collision groups do not collide.\n   * By default, the collider will collide with [[CollisionGroup|all groups]].\n   */\n  public group: CollisionGroup = CollisionGroup.All;\n\n  /*\n   * Get the shape of the collider as a [[CollisionShape]]\n   */\n  public get shape(): CollisionShape {\n    return this._shape;\n  }\n\n  /**\n   * Set the shape of the collider as a [[CollisionShape]], if useShapeInertia is set the collider will use inertia from the shape.\n   */\n  public set shape(shape: CollisionShape) {\n    this._shape = shape;\n    this._shape.collider = this;\n    if (this.useShapeInertia) {\n      this.inertia = isNaN(this._shape.inertia) ? this.inertia : this._shape.inertia;\n    }\n  }\n\n  /**\n   * Return a reference to the body associated with this collider\n   */\n  public body: Body;\n\n  /**\n   * The center of the collider in world space\n   */\n  public get center(): Vector {\n    return this.bounds.center;\n  }\n\n  /**\n   * Is this collider active, if false it wont collide\n   */\n  public get active(): boolean {\n    return this.body.active;\n  }\n\n  /**\n   * Collide 2 colliders and product a collision contact if there is a collision, null if none\n   *\n   * Collision vector is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other\n   */\n  public collide(other: Collider): CollisionContact | null {\n    return this.shape.collide(other.shape);\n  }\n\n  /**\n   * Find the closest line between 2 colliders\n   *\n   * Line is in the direction of the other collider. Away from this collider, this -> other.\n   * @param other Other collider\n   */\n  public getClosestLineBetween(other: Collider): Line {\n    return this.shape.getClosestLineBetween(other.shape);\n  }\n\n  /**\n   * Gets the current pixel offset of the collider\n   */\n  public get offset() {\n    return this.shape.offset.clone();\n  }\n\n  /**\n   * Sets the pixel offset of the collider\n   */\n  public set offset(offset: Vector) {\n    this.shape.offset = offset.clone();\n  }\n\n  /**\n   * The current mass of the actor, mass can be thought of as the resistance to acceleration.\n   */\n  public mass: number = 1.0;\n\n  /**\n   * The current moment of inertia, moment of inertia can be thought of as the resistance to rotation.\n   */\n  public inertia: number = 1000;\n\n  /**\n   * The coefficient of friction on this actor\n   */\n  public friction: number = 0.99;\n\n  /**\n   * The also known as coefficient of restitution of this actor, represents the amount of energy preserved after collision or the\n   * bounciness. If 1, it is 100% bouncy, 0 it completely absorbs.\n   */\n  public bounciness: number = 0.2;\n\n  /**\n   * Returns a boolean indicating whether this body collided with\n   * or was in stationary contact with\n   * the body of the other [[Collider]]\n   */\n  public touching(other: Collider): boolean {\n    const pair = new Pair(this, other);\n    pair.collide();\n\n    if (pair.collision) {\n      return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] calculated for this instant in world space.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get bounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.bounds;\n    }\n\n    if (this.body) {\n      return new BoundingBox().translate(this.body.pos);\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Returns the collider's [[BoundingBox]] relative to the body's position.\n   * If there is no shape, a point bounding box is returned\n   */\n  public get localBounds(): BoundingBox {\n    if (this.shape) {\n      return this.shape.localBounds;\n    }\n    return new BoundingBox();\n  }\n\n  /**\n   * Updates the collision shapes geometry and internal caches if needed\n   */\n  public update() {\n    if (this.shape) {\n      this.shape.recalc();\n    }\n  }\n\n  emit(eventName: string, event: GameEvent<Collider>): void {\n    this._events.emit(eventName, event);\n  }\n  on(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.on(eventName, handler);\n  }\n  off(eventName: string, handler?: (event: GameEvent<Collider>) => void): void {\n    this._events.off(eventName, handler);\n  }\n  once(eventName: string, handler: (event: GameEvent<Collider>) => void): void {\n    this._events.once(eventName, handler);\n  }\n\n  clear() {\n    this._events.clear();\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // Draw motion vectors\n    if (Physics.showMotionVectors) {\n      DrawUtil.vector(ctx, Color.Yellow, this.body.pos, this.body.acc.add(Physics.acc));\n      DrawUtil.vector(ctx, Color.Red, this.body.pos, this.body.vel);\n      DrawUtil.point(ctx, Color.Red, this.body.pos);\n    }\n\n    if (Physics.showBounds) {\n      this.bounds.debugDraw(ctx, Color.Yellow);\n    }\n\n    if (Physics.showArea) {\n      this.shape.debugDraw(ctx, Color.Green);\n    }\n  }\n}\n","export interface Message<T> {\n  type: string;\n  data: T;\n}\n\nexport interface Observer<T> {\n  notify(message: T): void;\n}\n\nexport type MaybeObserver<T> = Partial<Observer<T>>;\n\nexport class Observable<T> {\n  public observers: Observer<T>[] = [];\n\n  register(observer: Observer<T>) {\n    this.observers.push(observer);\n  }\n\n  unregister(observer: Observer<T>) {\n    const i = this.observers.indexOf(observer);\n    if (i !== -1) {\n      this.observers.splice(i, 1);\n    }\n  }\n\n  notifyAll(message: T) {\n    this.observers.forEach((o) => o.notify(message));\n  }\n\n  clear() {\n    this.observers.length = 0;\n  }\n}\n","import { GameEvent } from './Events';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Eventable } from './Interfaces/Evented';\n\n/**\n * Excalibur base class that provides basic functionality such as [[EventDispatcher]]\n * and extending abilities for vanilla Javascript projects\n */\nexport class Class implements Eventable {\n  /**\n   * Direct access to the game object event dispatcher.\n   */\n  public eventDispatcher: EventDispatcher;\n\n  constructor() {\n    this.eventDispatcher = new EventDispatcher(this);\n  }\n\n  /**\n   * Alias for `addEventListener`. You can listen for a variety of\n   * events off of the engine; see the events section below for a complete list.\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public on(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.on(eventName, handler);\n  }\n\n  /**\n   * Alias for `removeEventListener`. If only the eventName is specified\n   * it will remove all handlers registered for that specific event. If the eventName\n   * and the handler instance are specified only that handler will be removed.\n   *\n   * @param eventName  Name of the event to listen for\n   * @param handler    Event handler for the thrown event\n   */\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.off(eventName, handler);\n  }\n\n  /**\n   * Emits a new event\n   * @param eventName   Name of the event to emit\n   * @param eventObject Data associated with this event\n   */\n  public emit(eventName: string, eventObject: GameEvent<any>) {\n    this.eventDispatcher.emit(eventName, eventObject);\n  }\n\n  /**\n   * Once listens to an event one time, then unsubscribes from that event\n   *\n   * @param eventName The name of the event to subscribe to once\n   * @param handler   The handler of the event that will be auto unsubscribed\n   */\n  public once(eventName: string, handler: (event: GameEvent<any>) => void) {\n    this.eventDispatcher.once(eventName, handler);\n  }\n}\n","import { Component, ComponentCtor, TagComponent } from './Component';\n\nimport { Observable, Message } from '../Util/Observable';\nimport { Class } from '../Class';\nimport { OnInitialize, OnPreUpdate, OnPostUpdate } from '../Interfaces/LifecycleEvents';\nimport { Engine } from '../Engine';\nimport { InitializeEvent, PreUpdateEvent, PostUpdateEvent } from '../Events';\nimport { Util } from '..';\n\n/**\n * Interface holding an entity component pair\n */\nexport interface EntityComponent {\n  component: Component;\n  entity: Entity;\n}\n\n/**\n * AddedComponent message\n */\nexport class AddedComponent implements Message<EntityComponent> {\n  readonly type: 'Component Added' = 'Component Added';\n  constructor(public data: EntityComponent) {}\n}\n\n/**\n * Type guard to know if message is f an Added Component\n */\nexport function isAddedComponent(x: Message<EntityComponent>): x is AddedComponent {\n  return !!x && x.type === 'Component Added';\n}\n\n/**\n * RemovedComponent message\n */\nexport class RemovedComponent implements Message<EntityComponent> {\n  readonly type: 'Component Removed' = 'Component Removed';\n  constructor(public data: EntityComponent) {}\n}\n\n/**\n * Type guard to know if message is for a Removed Component\n */\nexport function isRemovedComponent(x: Message<EntityComponent>): x is RemovedComponent {\n  return !!x && x.type === 'Component Removed';\n}\n\n/**\n * An Entity is the base type of anything that can have behavior in Excalibur, they are part of the built in entity component system\n *\n * Entities can be strongly typed with the components they contain\n *\n * ```typescript\n * const entity = new Entity<ComponentA | ComponentB>();\n * entity.components.a; // Type ComponentA\n * entity.components.b; // Type ComponentB\n * ```\n */\nexport class Entity extends Class implements OnInitialize, OnPreUpdate, OnPostUpdate {\n  private static _ID = 0;\n\n  constructor(components?: Component[]) {\n    super();\n    if (components) {\n      for (const component of components) {\n        this.addComponent(component);\n      }\n    }\n  }\n\n  /**\n   * The unique identifier for the entity\n   */\n  public id: number = Entity._ID++;\n\n  /**\n   * Whether this entity is active, if set to false it will be reclaimed\n   */\n  public active: boolean = true;\n\n  /**\n   * Kill the entity, means it will no longer be updated. Kills are deferred to the end of the update.\n   */\n  public kill() {\n    this.active = false;\n  }\n\n  public isKilled() {\n    return !this.active;\n  }\n\n  /**\n   * Specifically get the tags on the entity from [[TagComponent]]\n   */\n  public get tags(): readonly string[] {\n    return this._tagsMemo;\n  }\n\n  /**\n   * Check if a tag exists on the entity\n   * @param tag name to check for\n   */\n  public hasTag(tag: string): boolean {\n    return this.tags.includes(tag);\n  }\n\n  /**\n   * Adds a tag to an entity\n   * @param tag\n   * @returns Entity\n   */\n  public addTag(tag: string) {\n    return this.addComponent(new TagComponent(tag));\n  }\n\n  /**\n   * Removes a tag on the entity\n   *\n   * Removals are deferred until the end of update\n   * @param tag\n   * @param force Remove component immediately, no deferred\n   */\n  public removeTag(tag: string, force = false) {\n    return this.removeComponent(tag, force);\n  }\n\n  /**\n   * The types of the components on the Entity\n   */\n  public get types(): string[] {\n    return this._typesMemo;\n  }\n\n  /**\n   * Bucket to hold on to deferred removals\n   */\n  private _componentsToRemove: (Component | string)[] = [];\n  private _componentTypeToInstance = new Map<ComponentCtor, Component>();\n  private _componentStringToInstance = new Map<string, Component>();\n\n  private _tagsMemo: string[] = [];\n  private _typesMemo: string[] = [];\n  private _rebuildMemos() {\n    this._tagsMemo = Array.from(this._componentStringToInstance.values())\n      .filter((c) => c instanceof TagComponent)\n      .map((c) => c.type);\n    this._typesMemo = Array.from(this._componentStringToInstance.keys());\n  }\n\n  public getComponents(): Component[] {\n    return Array.from(this._componentStringToInstance.values());\n  }\n\n  /**\n   * Observable that keeps track of component add or remove changes on the entity\n   */\n  public componentAdded$ = new Observable<AddedComponent>();\n  private _notifyAddComponent(component: Component) {\n    this._rebuildMemos();\n    const added = new AddedComponent({\n      component,\n      entity: this\n    });\n    this.componentAdded$.notifyAll(added);\n  }\n\n  public componentRemoved$ = new Observable<RemovedComponent>();\n  private _notifyRemoveComponent(component: Component) {\n    const removed = new RemovedComponent({\n      component,\n      entity: this\n    });\n    this.componentRemoved$.notifyAll(removed);\n    this._rebuildMemos();\n  }\n\n  private _parent: Entity = null;\n  public get parent(): Entity {\n    return this._parent;\n  }\n\n  public childrenAdded$ = new Observable<Entity>();\n  public childrenRemoved$ = new Observable<Entity>();\n\n  private _children: Entity[] = [];\n  /**\n   * Get the direct children of this entity\n   */\n  public get children(): readonly Entity[] {\n    return this._children;\n  }\n\n  /**\n   * Unparents this entity, if there is a parent. Otherwise it does nothing.\n   */\n  public unparent() {\n    if (this._parent) {\n      this._parent.removeChild(this);\n      this._parent = null;\n    }\n  }\n\n  /**\n   * Adds an entity to be a child of this entity\n   * @param entity\n   */\n  public addChild(entity: Entity): Entity {\n    if (entity.parent === null) {\n      if (this.getAncestors().includes(entity)) {\n        throw new Error('Cycle detected, cannot add entity');\n      }\n      this._children.push(entity);\n      entity._parent = this;\n      this.childrenAdded$.notifyAll(entity);\n    } else {\n      throw new Error('Entity already has a parent, cannot add without unparenting');\n    }\n    return this;\n  }\n\n  /**\n   * Remove an entity from children if it exists\n   * @param entity\n   */\n  public removeChild(entity: Entity): Entity {\n    if (entity.parent === this) {\n      Util.removeItemFromArray(entity, this._children);\n      entity._parent = null;\n      this.childrenRemoved$.notifyAll(entity);\n    }\n    return this;\n  }\n\n  /**\n   * Removes all children from this entity\n   */\n  public removeAllChildren(): Entity {\n    this.children.forEach((c) => {\n      this.removeChild(c);\n    });\n    return this;\n  }\n\n  /**\n   * Returns a list of parent entities starting with the topmost parent. Includes the current entity.\n   */\n  public getAncestors(): Entity[] {\n    const result: Entity[] = [this];\n    let current = this.parent;\n    while (current) {\n      result.push(current);\n      current = current.parent;\n    }\n    return result.reverse();\n  }\n\n  /**\n   * Returns a list of all the entities that descend from this entity. Includes the current entity.\n   */\n  public getDescendants(): Entity[] {\n    let result: Entity[] = [this];\n    let queue: Entity[] = [this];\n    while (queue.length > 0) {\n      const curr = queue.pop();\n      queue = queue.concat(curr.children);\n      result = result.concat(curr.children);\n    }\n    return result;\n  }\n\n  /**\n   * Creates a deep copy of the entity and a copy of all its components\n   */\n  public clone(): Entity {\n    const newEntity = new Entity();\n    for (const c of this.types) {\n      newEntity.addComponent(this.get(c).clone());\n    }\n    for (const child of this.children) {\n      newEntity.addChild(child.clone());\n    }\n    return newEntity;\n  }\n\n  /**\n   * Adds a copy of all the components from another template entity as a \"prefab\"\n   * @param templateEntity Entity to use as a template\n   * @param force Force component replacement if it aleady exists on the target entity\n   */\n  public addTemplate(templateEntity: Entity, force: boolean = false): Entity {\n    for (const c of templateEntity.getComponents()) {\n      this.addComponent(c.clone(), force);\n    }\n    for (const child of templateEntity.children) {\n      this.addChild(child.clone().addTemplate(child));\n    }\n    return this;\n  }\n\n  /**\n   * Adds a component to the entity\n   * @param component Component or Entity to add copy of components from\n   * @param force Optionally overwrite any existing components of the same type\n   */\n  public addComponent<T extends Component>(component: T, force: boolean = false): Entity {\n    // if component already exists, skip if not forced\n    if (this.has(component.type)) {\n      if (force) {\n        // Remove existing component type if exists when forced\n        this.removeComponent(component);\n      } else {\n        // early exit component exiss\n        return this;\n      }\n    }\n\n    // TODO circular dependencies will be a problem\n    if (component.dependencies && component.dependencies.length) {\n      for (const ctor of component.dependencies) {\n        this.addComponent(new ctor());\n      }\n    }\n\n    component.owner = this;\n    const constuctorType = component.constructor as ComponentCtor<T>;\n    this._componentTypeToInstance.set(constuctorType, component);\n    this._componentStringToInstance.set(component.type, component);\n    if (component.onAdd) {\n      component.onAdd(this);\n    }\n    this._notifyAddComponent(component);\n\n    return this;\n  }\n\n  /**\n   * Removes a component from the entity, by default removals are deferred to the end of entity update to avoid consistency issues\n   *\n   * Components can be force removed with the `force` flag, the removal is not deferred and happens immediately\n   * @param componentOrType\n   * @param force\n   */\n  public removeComponent<ComponentOrType extends string | Component>(componentOrType: ComponentOrType, force = false): Entity {\n    if (force) {\n      if (typeof componentOrType === 'string') {\n        this._removeComponentByType(componentOrType);\n      } else if (componentOrType instanceof Component) {\n        this._removeComponentByType(componentOrType.type);\n      }\n    } else {\n      this._componentsToRemove.push(componentOrType);\n    }\n\n    return this as any;\n  }\n\n  private _removeComponentByType(type: string) {\n    if (this.has(type)) {\n      const component = this.get(type);\n      component.owner = null;\n      if (component.onRemove) {\n        component.onRemove(this);\n      }\n      const ctor = component.constructor as ComponentCtor;\n      this._componentTypeToInstance.delete(ctor);\n      this._componentStringToInstance.delete(component.type);\n      this._notifyRemoveComponent(component);\n    }\n  }\n\n  /**\n   * @hidden\n   * @internal\n   */\n  public processComponentRemoval() {\n    for (const componentOrType of this._componentsToRemove) {\n      const type = typeof componentOrType === 'string' ? componentOrType : componentOrType.type;\n      this._removeComponentByType(type);\n    }\n    this._componentsToRemove.length = 0;\n  }\n\n  /**\n   * Check if a component type exists\n   * @param type\n   */\n  public has<T extends Component>(type: ComponentCtor<T>): boolean;\n  public has(type: string): boolean;\n  public has<T extends Component>(type: ComponentCtor<T> | string): boolean {\n    if (typeof type === 'string') {\n      return this._componentStringToInstance.has(type);\n    } else {\n      return this._componentTypeToInstance.has(type);\n    }\n  }\n\n  /**\n   * Get a component by type with typecheck\n   *\n   * (Does not work on tag components, use .hasTag(\"mytag\") instead)\n   * @param type\n   */\n  public get<T extends Component>(type: ComponentCtor<T>): T | null;\n  public get<T extends Component>(type: string): T | null;\n  public get<T extends Component>(type: ComponentCtor<T> | string): T | null {\n    if (typeof type === 'string') {\n      return this._componentStringToInstance.get(type) as T;\n    } else {\n      return this._componentTypeToInstance.get(type) as T;\n    }\n  }\n\n  private _isInitialized = false;\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * Initializes this entity, meant to be called by the Scene before first update not by users of Excalibur.\n   *\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overriden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  /**\n   * `onInitialize` is called before the first update of the entity. This method is meant to be\n   * overridden.\n   *\n   * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n   */\n  public onInitialize(_engine: Engine): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before an entity is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after an entity is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   *\n   * Entity update lifecycle, called internally\n   *\n   * @internal\n   * @param engine\n   * @param delta\n   */\n  public update(engine: Engine, delta: number): void {\n    this._initialize(engine);\n    this._preupdate(engine, delta);\n    for (const child of this.children) {\n      child.update(engine, delta);\n    }\n    this._postupdate(engine, delta);\n  }\n}\n","import { Component } from '../EntityComponentSystem';\n\nexport class CanvasDrawComponent extends Component<'ex.canvas'> {\n  public readonly type = 'ex.canvas';\n\n  constructor(public draw?: (ctx: CanvasRenderingContext2D, delta: number) => void) {\n    super();\n    // eslint-disable-next-line @typescript-eslint/no-empty-function\n    this.draw = this.draw ?? (() => {});\n  }\n}\n","import { Vector, vec } from '../Algebra';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { BoundingBox } from '../Collision/BoundingBox';\n\nexport interface GraphicOptions {\n  /**\n   * The width of the graphic\n   */\n  width?: number;\n  /**\n   * The height of the graphic\n   */\n  height?: number;\n  /**\n   * SHould the graphic be flipped horizontally\n   */\n  flipHorizontal?: boolean;\n  /**\n   * Should the graphic be flipped vertically\n   */\n  flipVertical?: boolean;\n  /**\n   * The rotation of the graphic\n   */\n  rotation?: number;\n  /**\n   * The scale of the graphic\n   */\n  scale?: Vector;\n  /**\n   * The opacity of the graphic\n   */\n  opacity?: number;\n  /**\n   * The origin of the drawing in pixels to use when applying transforms, by default it will be the center of the image\n   */\n  origin?: Vector;\n}\n\n/**\n * A Graphic is the base Excalibur primitive for something that can be drawn to the [[ExcaliburGraphicsContext]].\n * [[Sprite]], [[Animation]], [[GraphicsGroup]], [[Canvas]], [[Rectangle]], [[Circle]], and [[Polygon]] all derive from the\n * [[Graphic]] abstract class.\n *\n * Implementors of a Graphic must override the abstract [[Graphic._drawImage]] method to render an image to the graphics context. Graphic\n * handles all the position, rotation, and scale transformations in [[Graphic._preDraw]] and [[Graphic._postDraw]]\n */\nexport abstract class Graphic {\n  private static _ID: number = 0;\n  readonly id = Graphic._ID++;\n\n  /**\n   * Gets or sets wether to show debug information about the graphic\n   */\n  public showDebug: boolean = false;\n\n  /**\n   * Gets or sets the flipHorizontal, which will flip the graphic horizontally (across the y axis)\n   */\n  public flipHorizontal: boolean = false;\n\n  /**\n   * Gets or sets the flipVertical, which will flip the graphic vertically (across the x axis)\n   */\n  public flipVertical: boolean = false;\n\n  /**\n   * Gets or sets the rotation of the graphic\n   */\n  public rotation: number = 0;\n\n  /**\n   * Gets or sets the opacity of the graphic, 0 is transparent, 1 is solid (opaque).\n   */\n  public opacity: number = 1;\n\n  /**\n   * Gets or sets the scale of the graphic, this affects the width and\n   */\n  public scale = Vector.One;\n\n  /**\n   * Gets or sets the origin of the graphic, if not set the center of the graphic is the origin\n   */\n  public origin: Vector | null = null;\n\n  constructor(options?: GraphicOptions) {\n    if (options) {\n      this.origin = options.origin ?? this.origin;\n      this.flipHorizontal = options.flipHorizontal ?? this.flipHorizontal;\n      this.flipVertical = options.flipVertical ?? this.flipVertical;\n      this.rotation = options.rotation ?? this.rotation;\n      this.opacity = options.opacity ?? this.opacity;\n      this.scale = options.scale ?? this.scale;\n    }\n  }\n\n  public cloneGraphicOptions(): GraphicOptions {\n    return {\n      origin: this.origin ? this.origin.clone() : null,\n      flipHorizontal: this.flipHorizontal,\n      flipVertical: this.flipVertical,\n      rotation: this.rotation,\n      opacity: this.opacity,\n      scale: this.scale ? this.scale.clone() : null\n    };\n  }\n\n  private _width: number = 0;\n\n  /**\n   * Gets or sets the width of the graphic (always positive)\n   */\n  public get width() {\n    return Math.abs(this._width * this.scale.x);\n  }\n\n  private _height: number = 0;\n\n  /**\n   * Gets or sets the height of the graphic (always positive)\n   */\n  public get height() {\n    return Math.abs(this._height * this.scale.y);\n  }\n\n  public set width(value: number) {\n    this._width = value;\n  }\n\n  public set height(value: number) {\n    this._height = value;\n  }\n\n  /**\n   * Gets a copy of the bounds in pixels occupied by the graphic on the the screen. This includes scale.\n   */\n  public get localBounds(): BoundingBox {\n    return BoundingBox.fromDimension(this.width, this.height, Vector.Zero);\n  }\n\n  /**\n   * Draw the whole graphic to the context including transform\n   * @param ex The excalibur graphics context\n   * @param x\n   * @param y\n   */\n  public draw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    this._preDraw(ex, x, y);\n    this._drawImage(ex, 0, 0);\n    this._postDraw(ex);\n  }\n\n  /**\n   * Meant to be overriden by the graphic implementation to draw the underlying image (HTMLCanvasElement or HTMLImageElement)\n   * to the graphics context without transform. Transformations like position, rotation, and scale are handled by [[Graphic._preDraw]]\n   * and [[Graphic._postDraw]]\n   * @param ex The excalibur graphics context\n   * @param x\n   * @param y\n   */\n  protected abstract _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number): void;\n\n  /**\n   * Apply affine transformations to the graphics context to manipulate the graphic before [[Graphic._drawImage]]\n   * @param ex\n   * @param x\n   * @param y\n   */\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    ex.save();\n    ex.translate(x, y);\n    ex.scale(this.scale.x, this.scale.y);\n    this._rotate(ex);\n    this._flip(ex);\n    // it is important to multiply alphas so graphics respect the current context\n    ex.opacity = ex.opacity * this.opacity;\n  }\n\n  protected _rotate(ex: ExcaliburGraphicsContext) {\n    const scaleDirX = this.scale.x > 0 ? 1 : -1;\n    const scaleDirY = this.scale.y > 0 ? 1 : -1;\n    const origin = this.origin ?? vec(this.width / 2, this.height / 2);\n    ex.translate(origin.x, origin.y);\n    ex.rotate(this.rotation);\n    // This is for handling direction changes 1 or -1, that way we don't have mismatched translates()\n    ex.scale(scaleDirX, scaleDirY);\n    ex.translate(-origin.x, -origin.y);\n  }\n\n  protected _flip(ex: ExcaliburGraphicsContext) {\n    if (this.flipHorizontal) {\n      ex.translate(this.width / this.scale.x, 0);\n      ex.scale(-1, 1);\n    }\n\n    if (this.flipVertical) {\n      ex.translate(0, this.height / this.scale.y);\n      ex.scale(1, -1);\n    }\n  }\n\n  /**\n   * Apply any addtional work after [[Graphic._drawImage]] and restore the context state.\n   * @param ex\n   */\n  protected _postDraw(ex: ExcaliburGraphicsContext): void {\n    if (this.showDebug) {\n      ex.debug.drawRect(0, 0, this.width, this.height);\n    }\n    ex.restore();\n  }\n\n  /**\n   * Returns a new instance of the graphic that has the same properties\n   */\n  abstract clone(): Graphic;\n}\n","import { Vector } from '../Algebra';\nimport { Graphic, GraphicOptions } from './Graphic';\nimport { Animation, HasTick } from './Animation';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { BoundingBox } from '../Collision/Index';\n\nexport interface GraphicsGroupingOptions {\n  members: GraphicsGrouping[];\n}\n\nexport interface GraphicsGrouping {\n  pos: Vector;\n  graphic: Graphic;\n}\n\nexport class GraphicsGroup extends Graphic implements HasTick {\n  public members: GraphicsGrouping[] = [];\n\n  constructor(options: GraphicsGroupingOptions & GraphicOptions) {\n    super(options);\n    this.members = options.members;\n    this._updateDimensions();\n  }\n\n  public clone(): GraphicsGroup {\n    return new GraphicsGroup({\n      members: [...this.members],\n      ...this.cloneGraphicOptions()\n    });\n  }\n\n  private _updateDimensions(): BoundingBox {\n    let bb = new BoundingBox();\n    for (const { graphic, pos } of this.members) {\n      bb = graphic.localBounds.translate(pos).combine(bb);\n    }\n\n    this.width = bb.width;\n    this.height = bb.height;\n\n    return bb;\n  }\n\n  public get localBounds(): BoundingBox {\n    let bb = new BoundingBox();\n    for (const { graphic, pos } of this.members) {\n      bb = graphic.localBounds.translate(pos).combine(bb);\n    }\n    return bb;\n  }\n\n  private _isAnimationOrGroup(graphic: Graphic): graphic is Animation | GraphicsGroup {\n    return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n  }\n\n  public tick(elapsedMilliseconds: number, idempotencyToken?: number) {\n    for (const member of this.members) {\n      const maybeAnimation = member.graphic;\n      if (this._isAnimationOrGroup(maybeAnimation)) {\n        maybeAnimation.tick(elapsedMilliseconds, idempotencyToken);\n      }\n    }\n  }\n\n  public reset() {\n    for (const member of this.members) {\n      const maybeAnimation = member.graphic;\n      if (this._isAnimationOrGroup(maybeAnimation)) {\n        maybeAnimation.reset();\n      }\n    }\n  }\n\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    this._updateDimensions();\n    super._preDraw(ex, x, y);\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    for (const member of this.members) {\n      ex.save();\n      ex.translate(x, y);\n      member.graphic.draw(ex, member.pos.x, member.pos.y);\n      if (this.showDebug) {\n        /* istanbul ignore next */\n        ex.debug.drawRect(0, 0, this.width, this.height);\n      }\n      ex.restore();\n    }\n  }\n}\n","import { Vector, vec } from '../Algebra';\nimport { Graphic } from './Graphic';\nimport { Animation } from './Animation';\nimport { GraphicsGroup } from './GraphicsGroup';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { Logger } from '../Util/Log';\nimport { BoundingBox } from '../Collision/Index';\nimport { Component } from '../EntityComponentSystem/Component';\n\nexport interface GraphicsShowOptions {\n  offset?: Vector;\n  anchor?: Vector;\n}\n\nexport interface GraphicsComponentOptions {\n  onPostDraw?: (ex: ExcaliburGraphicsContext, elapsed: number) => void;\n  onPreDraw?: (ex: ExcaliburGraphicsContext, elapsed: number) => void;\n\n  /**\n   * Name of current graphic to use\n   */\n  current?: string;\n\n  /**\n   * Optionally copy instances of graphics by calling .clone(), you may set this to false to avoid sharing graphics when added to the\n   * component for performance reasons. By default graphics are not copied and are shared when added to the component.\n   */\n  copyGraphics?: boolean;\n\n  /**\n   * Optional visible flag, if the graphics component is not visible it will not be displayed\n   */\n  visible?: boolean;\n\n  /**\n   * Optional opacity\n   */\n  opacity?: number;\n\n  /**\n   * List of graphics\n   */\n  graphics?: { [graphicName: string]: Graphic };\n\n  /**\n   * Optional offset in absolute pixels to shift all graphics in this component from each graphic's anchor (default is top left corner)\n   */\n  offset?: Vector;\n\n  /**\n   * Optional anchor\n   */\n  anchor?: Vector;\n}\n\nexport interface GraphicsLayerOptions {\n  /**\n   * Name of the layer required, for example 'background'\n   */\n  name: string;\n  /**\n   * Order of the layer, a layer with order -1 will be below a layer with order of 1\n   */\n  order: number;\n  /**\n   * Offset to shift the entire layer\n   */\n  offset?: Vector;\n}\nexport class GraphicsLayer {\n  public graphics: { graphic: Graphic; options: GraphicsShowOptions }[] = [];\n  constructor(private _options: GraphicsLayerOptions, private _graphics: GraphicsComponent) {}\n  public get name(): string {\n    return this._options.name;\n  }\n\n  /**\n   * Remove any instance(s) of a graphic currently being shown in this layer\n   */\n  public hide(nameOrGraphic: string | Graphic): void;\n  /**\n   * Remove all currently shown graphics in this layer\n   */\n  public hide(): void;\n  public hide(nameOrGraphic?: string | Graphic): void {\n    if (!nameOrGraphic) {\n      this.graphics.length = 0;\n    } else {\n      let gfx: Graphic = null;\n      if (nameOrGraphic instanceof Graphic) {\n        gfx = nameOrGraphic;\n      } else {\n        gfx = this._graphics.getGraphic(nameOrGraphic);\n      }\n      this.graphics = this.graphics.filter((g) => g.graphic !== gfx);\n    }\n  }\n\n  /**\n   * Show a graphic by name or instance at an offset, graphics are shown in the order in which `show()` is called.\n   *\n   * If `show()` is called multiple times for the same graphic it will be shown multiple times.\n   * @param nameOrGraphic\n   * @param options\n   */\n  public show<T extends Graphic = Graphic>(nameOrGraphic: string | T, options?: GraphicsShowOptions): T {\n    options = { offset: this._graphics.offset.clone(), anchor: this._graphics.anchor.clone(), ...options };\n    let gfx: Graphic;\n    if (nameOrGraphic instanceof Graphic) {\n      gfx = this._graphics.copyGraphics ? nameOrGraphic.clone() : nameOrGraphic;\n    } else {\n      gfx = this._graphics.getGraphic(nameOrGraphic);\n      if (!gfx) {\n        Logger.getInstance().error(\n          `No such graphic added to component named ${nameOrGraphic}. These named graphics are available: `,\n          this._graphics.getNames()\n        );\n      }\n    }\n    if (gfx) {\n      this.graphics.push({ graphic: gfx, options });\n      return gfx as T;\n    } else {\n      return null;\n    }\n  }\n\n  /**\n   * Use a specific graphic, swap out any current graphics being shown\n   * @param nameOrGraphic\n   * @param options\n   */\n  public use<T extends Graphic = Graphic>(nameOrGraphic: string | T, options?: GraphicsShowOptions): T {\n    options = { offset: this._graphics.offset.clone(), anchor: this._graphics.anchor.clone(), ...options };\n    this.hide();\n    return this.show<T>(nameOrGraphic, options);\n  }\n\n  /**\n   * Current order of the layer, higher numbers are on top, lower numbers are on the bottom.\n   *\n   * For example a layer with `order = -1` would be under a layer of `order = 1`\n   */\n  public get order(): number {\n    return this._options.order;\n  }\n\n  /**\n   * Set the order of the layer, higher numbers are on top, lower numbers are on the bottom.\n   *\n   * For example a layer with `order = -1` would be under a layer of `order = 1`\n   */\n  public set order(order: number) {\n    this._options.order = order;\n  }\n\n  /**\n   * Get or set the pixel offset from the layer anchor for all graphics in the layer\n   */\n  public get offset(): Vector {\n    return this._options.offset ?? Vector.Zero;\n  }\n\n  public set offset(value: Vector) {\n    this._options.offset = value;\n  }\n}\n\nexport class GraphicsLayers {\n  private _layers: GraphicsLayer[] = [];\n  private _layerMap: { [layerName: string]: GraphicsLayer } = {};\n  public default: GraphicsLayer;\n  constructor(private _component: GraphicsComponent) {\n    this.default = new GraphicsLayer({ name: 'default', order: 0 }, _component);\n    this._maybeAddLayer(this.default);\n  }\n  public create(options: GraphicsLayerOptions): GraphicsLayer {\n    const layer = new GraphicsLayer(options, this._component);\n    return this._maybeAddLayer(layer);\n  }\n\n  /**\n   * Retrieve a single layer by name\n   * @param name\n   */\n  public get(name: string): GraphicsLayer;\n  /**\n   * Retrieve all layers\n   */\n  public get(): readonly GraphicsLayer[];\n  public get(name?: string): GraphicsLayer | readonly GraphicsLayer[] {\n    if (name) {\n      return this._getLayer(name);\n    }\n    return this._layers;\n  }\n\n  public has(name: string): boolean {\n    return name in this._layerMap;\n  }\n\n  private _maybeAddLayer(layer: GraphicsLayer) {\n    if (this._layerMap[layer.name]) {\n      // todo log warning\n      return this._layerMap[layer.name];\n    }\n    this._layerMap[layer.name] = layer;\n    this._layers.push(layer);\n    this._layers.sort((a, b) => a.order - b.order);\n    return layer;\n  }\n\n  private _getLayer(name: string): GraphicsLayer | undefined {\n    return this._layerMap[name];\n  }\n}\n\n/**\n * Component to manage drawings, using with the position component\n */\nexport class GraphicsComponent extends Component<'ex.graphics'> {\n  readonly type = 'ex.graphics';\n\n  private _graphics: { [graphicName: string]: Graphic } = {};\n\n  public layers: GraphicsLayers;\n\n  public getGraphic(name: string): Graphic | undefined {\n    return this._graphics[name];\n  }\n\n  /**\n   * Get registered graphics names\n   */\n  public getNames(): string[] {\n    return Object.keys(this._graphics);\n  }\n\n  public onPreDraw: (ctx: ExcaliburGraphicsContext, elapsedMilliseconds: number) => void;\n  public onPostDraw: (ctx: ExcaliburGraphicsContext, elapsedMilliseconds: number) => void;\n\n  /**\n   * Sets or gets wether any drawing should be visible in this component\n   */\n  public visible: boolean = true;\n\n  /**\n   * Sets or gets wither all drawings should have an opacity applied\n   */\n  public opacity: number = 1;\n\n  /**\n   * Offset to apply to graphics by default\n   */\n  public offset: Vector = Vector.Zero;\n\n  /**\n   * Anchor to apply to graphics by default\n   */\n  public anchor: Vector = Vector.Half;\n\n  /**\n   * If set to true graphics added to the component will be copied. This can affect performance\n   */\n  public copyGraphics: boolean = false;\n\n  constructor(options?: GraphicsComponentOptions) {\n    super();\n    // Defaults\n    options = {\n      visible: this.visible,\n      ...options\n    };\n\n    const { current, anchor, opacity, visible, graphics, offset, copyGraphics, onPreDraw, onPostDraw } = options;\n\n    this._graphics = graphics || {};\n    this.offset = offset ?? this.offset;\n    this.opacity = opacity ?? this.opacity;\n    this.anchor = anchor ?? this.anchor;\n    this.copyGraphics = copyGraphics ?? this.copyGraphics;\n    this.onPreDraw = onPreDraw ?? this.onPreDraw;\n    this.onPostDraw = onPostDraw ?? this.onPostDraw;\n    this.visible = !!visible;\n\n    this.layers = new GraphicsLayers(this);\n    if (current && this._graphics[current]) {\n      this.show(this._graphics[current]);\n    }\n  }\n\n  /**\n   * Returns the currently displayed graphics and their offsets, empty array if hidden\n   */\n  public get current(): { graphic: Graphic; options: GraphicsShowOptions }[] {\n    return this.layers.default.graphics;\n  }\n\n  /**\n   * Returns all graphics associated with this component\n   */\n  public get graphics(): { [graphicName: string]: Graphic } {\n    return this._graphics;\n  }\n\n  /**\n   * Adds a named graphic to this component, if the name is \"default\" or not specified, it will be shown by default without needing to call\n   * `show(\"default\")`\n   * @param graphic\n   */\n  public add(graphic: Graphic): Graphic;\n  public add(name: string, graphic: Graphic): Graphic;\n  public add(nameOrGraphic: string | Graphic, graphic?: Graphic): Graphic {\n    let name = 'default';\n    let graphicToSet: Graphic = null;\n    if (typeof nameOrGraphic === 'string') {\n      name = nameOrGraphic;\n      graphicToSet = graphic;\n    } else {\n      graphicToSet = nameOrGraphic;\n    }\n\n    this._graphics[name] = this.copyGraphics ? graphicToSet.clone() : graphicToSet;\n    if (name === 'default') {\n      this.show('default');\n    }\n    return graphicToSet;\n  }\n\n  /**\n   * Show a graphic by name on the **default** layer, returns the new [[Graphic]]\n   */\n  public show<T extends Graphic = Graphic>(nameOrGraphic: string | T, options?: GraphicsShowOptions): T {\n    return this.layers.default.show<T>(nameOrGraphic, options);\n  }\n\n  /**\n   * Use a graphic only, swap out any graphics on the **default** layer, returns the new [[Graphic]]\n   * @param nameOrGraphic\n   * @param options\n   */\n  public use<T extends Graphic = Graphic>(nameOrGraphic: string | T, options?: GraphicsShowOptions): T {\n    return this.layers.default.use<T>(nameOrGraphic, options);\n  }\n\n  /**\n   * Remove any instance(s) of a graphic currently being shown in the **default** layer\n   */\n  public hide(nameOrGraphic: string | Graphic): void;\n  /**\n   * Remove all currently shown graphics in the **default** layer\n   */\n  public hide(): void;\n  public hide(nameOrGraphic?: string | Graphic): void {\n    this.layers.default.hide(nameOrGraphic);\n  }\n\n  private _isAnimationOrGroup(graphic: Graphic): graphic is Animation | GraphicsGroup {\n    return graphic instanceof Animation || graphic instanceof GraphicsGroup;\n  }\n\n  private _bounds: BoundingBox = null;\n  public set localBounds(bounds: BoundingBox) {\n    this._bounds = bounds;\n  }\n\n  public get localBounds(): BoundingBox {\n    if (this._bounds) {\n      return this._bounds;\n    }\n    let bb = new BoundingBox();\n    for (const layer of this.layers.get()) {\n      for (const {\n        graphic,\n        options: { offset, anchor }\n      } of layer.graphics) {\n        const bounds = graphic.localBounds;\n        const offsetX = -bounds.width * graphic.scale.x * anchor.x + offset.x;\n        const offsetY = -bounds.height * graphic.scale.y * anchor.y + offset.y;\n        bb = graphic?.localBounds.translate(vec(offsetX + layer.offset.x, offsetY + layer.offset.y)).combine(bb);\n      }\n    }\n    return bb;\n  }\n\n  /**\n   * Update underlying graphics if necesary, called internally\n   * @param elapsed\n   * @internal\n   */\n  public update(elapsed: number, idempotencyToken: number = 0) {\n    for (const layer of this.layers.get()) {\n      for (const { graphic } of layer.graphics) {\n        if (this._isAnimationOrGroup(graphic)) {\n          graphic?.tick(elapsed, idempotencyToken);\n        }\n      }\n    }\n  }\n}\n","/**\n * Checks if the current number is a power of two\n */\nexport function isPowerOfTwo(x: number): boolean {\n  return (x & (x - 1)) === 0;\n}\n\n/**\n * Returns the next highest power of two\n */\nexport function nextHighestPowerOfTwo(x: number): number {\n  --x;\n  for (let i = 1; i < 32; i <<= 1) {\n    x = x | (x >> i);\n  }\n  return x + 1;\n}\n\n/**\n * Returns the input number if a power of two, otherwise the next highest power of two\n */\nexport function ensurePowerOfTwo(x: number): number {\n  if (!isPowerOfTwo(x)) {\n    return nextHighestPowerOfTwo(x);\n  }\n  return x;\n}\n","/**\n * Watch an object with a proxy\n */\nexport function watch<T extends object>(type: T, change: (type: T) => any): T {\n  if (!type) {\n    return type;\n  }\n  if ((type as any).__isProxy === undefined) {\n    // expando hack to mark a proxy\n    return new Proxy(type, {\n      set: (obj, prop, value) => {\n        // The default behavior to store the value\n        if ((obj as any)[prop] !== value) {\n          (obj as any)[prop] = value;\n          // Avoid watching private junk\n          if (typeof prop === 'string') {\n            if (prop[0] !== '_') {\n              change(obj);\n            }\n          }\n        }\n        // Indicate success\n        return true;\n      },\n      get: (obj, prop) => {\n        if (prop !== '__isProxy') {\n          return (obj as any)[prop];\n        }\n        return true;\n      }\n    });\n  }\n  return type;\n}\n","import { HTMLImageSource } from './ExcaliburGraphicsContext';\nimport { ensurePowerOfTwo, isPowerOfTwo } from './webgl-util';\n\n/**\n * Manages loading image sources into webgl textures, a unique id is associated with all sources\n */\nexport class TextureLoader {\n  private static _POT_CANVAS = document.createElement('canvas');\n  private static _POT_CTX = TextureLoader._POT_CANVAS.getContext('2d');\n\n  private static _GL: WebGLRenderingContext;\n\n  private static _TEXTURE_MAP = new Map<HTMLImageSource, WebGLTexture>();\n\n  public static registerContext(context: WebGLRenderingContext): void {\n    TextureLoader._GL = context;\n  }\n\n  /**\n   * Get [[WebGLTexture]] from a source image\n   * @param image\n   */\n  public static get(image: HTMLImageSource): WebGLTexture {\n    return TextureLoader._TEXTURE_MAP.get(image);\n  }\n\n  /**\n   * Returns whether a source image has been loaded as a texture\n   * @param image\n   */\n  public static has(image: HTMLImageSource): boolean {\n    return TextureLoader._TEXTURE_MAP.has(image);\n  }\n\n  /**\n   * Loads a graphic into webgl and returns it's texture info, a webgl context must be previously registered\n   * @param image Source graphic\n   * @param forceUpdate Optionally force a texture to be reloaded, useful if the source graphic has changed\n   */\n  public static load(image: HTMLImageSource, forceUpdate = false): WebGLTexture {\n    // Ignore loading if webgl is not registered\n    const gl = TextureLoader._GL;\n    if (!gl) {\n      return null;\n    }\n\n    let tex: WebGLTexture = null;\n    // If reuse the texture if it's from the same source\n    if (TextureLoader.has(image)) {\n      tex = TextureLoader.get(image);\n    }\n\n    // Update existing webgl texture and return early\n    if (tex) {\n      if (forceUpdate) {\n        gl.bindTexture(gl.TEXTURE_2D, tex);\n        const source = TextureLoader.toPowerOfTwoImage(image);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n      }\n      return tex;\n    }\n\n    // No texture exists create a new one\n    tex = gl.createTexture();\n    const source = TextureLoader.toPowerOfTwoImage(image);\n\n    gl.bindTexture(gl.TEXTURE_2D, tex);\n\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\n    // NEAREST for pixels\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, source);\n\n    TextureLoader._TEXTURE_MAP.set(image, tex);\n    return tex;\n  }\n\n  /**\n   * Converts source images into power of two images, WebGL only supports POT images\n   * https://www.khronos.org/webgl/wiki/WebGL_and_OpenGL_Differences#Non-Power_of_Two_Texture_Support\n   * @param image\n   */\n  public static toPowerOfTwoImage(image: HTMLImageSource): HTMLImageSource {\n    const potCanvas = TextureLoader._POT_CANVAS;\n    const potCtx = TextureLoader._POT_CTX;\n    if (!isPowerOfTwo(image.width) || !isPowerOfTwo(image.height)) {\n      // Scale up the texture to the next highest power of two dimensions.\n\n      potCanvas.width = ensurePowerOfTwo(image.width);\n      potCanvas.height = ensurePowerOfTwo(image.height);\n      potCtx.imageSmoothingEnabled = false;\n      potCtx.clearRect(0, 0, potCanvas.width, potCanvas.height);\n      potCtx.drawImage(image, 0, 0, image.width, image.height);\n      image = potCanvas;\n    }\n    return image;\n  }\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { Color } from '../Drawing/Color';\nimport { ensurePowerOfTwo } from './Context/webgl-util';\nimport { Vector } from '../Algebra';\nimport { BoundingBox } from '../Collision/BoundingBox';\nimport { watch } from '../Util/Watch';\nimport { TextureLoader } from './Context/texture-loader';\n\nexport interface RasterOptions {\n  smoothing?: boolean;\n  color?: Color;\n  strokeColor?: Color;\n  lineWidth?: number;\n  lineDash?: number[];\n  padding?: number;\n}\n\n/**\n * A Raster is a Graphic that needs to be first painted to a HTMLCanvasElement before it can be drawn to the\n * [[ExcaliburGraphicsContext]]. This is useful for generating custom images using the 2D canvas api.\n *\n * Implementors must implemenet the [[Raster.execute]] method to rasterize their drawing.\n */\nexport abstract class Raster extends Graphic {\n  public _bitmap: HTMLCanvasElement;\n  protected _ctx: CanvasRenderingContext2D;\n  private _dirty: boolean = true;\n\n  constructor(options?: GraphicOptions & RasterOptions) {\n    super(options);\n    if (options) {\n      this.color = options.color ?? Color.Black;\n      this.strokeColor = options?.strokeColor;\n      this.smoothing = options.smoothing ?? this.smoothing;\n      this.lineWidth = options.lineWidth ?? this.lineWidth;\n      this.lineDash = options.lineDash ?? this.lineDash;\n      this.padding = options.padding ?? this.padding;\n    }\n\n    this._bitmap = document.createElement('canvas');\n    // get the default canvas width/height as a fallback\n    const bitmapWidth = options?.width ?? this._bitmap.width;\n    const bitmapHeight = options?.height ?? this._bitmap.height;\n    // Rasters use power of two images as an optimization for webgl\n    this.width = ensurePowerOfTwo(bitmapWidth);\n    this.height = ensurePowerOfTwo(bitmapHeight);\n    const maybeCtx = this._bitmap.getContext('2d');\n    if (!maybeCtx) {\n      /* istanbul ignore next */\n      throw new Error('Browser does not support 2d canvas drawing, cannot create Raster graphic');\n    } else {\n      this._ctx = maybeCtx;\n    }\n  }\n\n  public cloneRasterOptions(): RasterOptions {\n    return {\n      color: this.color ? this.color.clone() : null,\n      strokeColor: this.strokeColor ? this.strokeColor.clone() : null,\n      smoothing: this.smoothing,\n      lineWidth: this.lineWidth,\n      lineDash: this.lineDash,\n      padding: this.padding\n    };\n  }\n\n  /**\n   * Gets whether the graphic is dirty, this means there are changes that haven't been re-rasterized\n   */\n  public get dirty() {\n    return this._dirty;\n  }\n\n  /**\n   * Flags the graphic as dirty, meaning it must be re-rasterized before draw.\n   * This should be called any time the graphics state changes such that it affects the outputed drawing\n   */\n  public flagDirty() {\n    this._dirty = true;\n  }\n\n  private _originalWidth: number;\n  /**\n   * Gets or sets the current width of the Raster graphic. Setting the width will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   *\n   * Any `padding`s set will be factored into the width\n   */\n  public get width() {\n    return this._getTotalWidth();\n  }\n  public set width(value: number) {\n    this._bitmap.width = value;\n    this._originalWidth = value;\n    this.flagDirty();\n  }\n\n  private _originalHeight: number;\n  /**\n   * Gets or sets the current height of the Raster graphic. Setting the height will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   *\n   * Any `padding` set will be factored into the height\n   */\n  public get height() {\n    return this._getTotalHeight();\n  }\n\n  public set height(value: number) {\n    this._bitmap.height = value;\n    this._originalHeight = value;\n    this.flagDirty();\n  }\n\n  private _getTotalWidth() {\n    return (this._originalWidth ?? this._bitmap.width) + this.padding * 2;\n  }\n\n  private _getTotalHeight() {\n    return (this._originalHeight ?? this._bitmap.height) + this.padding * 2;\n  }\n\n  /**\n   * Returns the local bounds of the Raster including the padding\n   */\n  public get localBounds() {\n    return BoundingBox.fromDimension(this._getTotalWidth() * this.scale.x, this._getTotalHeight() * this.scale.y, Vector.Zero);\n  }\n\n  private _smoothing: boolean = false;\n  /**\n   * Gets or sets the smoothing (anti-aliasing of the graphic). Setting the height will cause the raster\n   * to be flagged dirty causing a re-raster on the next draw.\n   */\n  public get smoothing() {\n    return this._smoothing;\n  }\n  public set smoothing(value: boolean) {\n    this._smoothing = value;\n    this.flagDirty();\n  }\n\n  private _color: Color = watch(Color.Black, () => this.flagDirty());\n  /**\n   * Gets or sets the fillStyle of the Raster graphic. Setting the fillStyle will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get color() {\n    return this._color;\n  }\n  public set color(value) {\n    if (!this._color?.equal(value)) {\n      this.flagDirty();\n    }\n    this._color = watch(value, () => this.flagDirty());\n  }\n\n  private _strokeColor: Color;\n  /**\n   * Gets or sets the strokeStyle of the Raster graphic. Setting the strokeStyle will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get strokeColor() {\n    return this._strokeColor;\n  }\n  public set strokeColor(value) {\n    if (!this._strokeColor?.equal(value)) {\n      this.flagDirty();\n    }\n    this._strokeColor = watch(value, () => this.flagDirty());\n  }\n\n  private _lineWidth: number = 1;\n  /**\n   * Gets or sets the line width of the Raster graphic. Setting the lineWidth will cause the raster to be\n   * flagged dirty causing a re-raster on the next draw.\n   */\n  public get lineWidth() {\n    return this._lineWidth;\n  }\n  public set lineWidth(value) {\n    this._lineWidth = value;\n    this.flagDirty();\n  }\n\n  private _lineDash: number[] = [];\n  public get lineDash() {\n    return this._lineDash;\n  }\n\n  public set lineDash(value) {\n    this._lineDash = value;\n    this.flagDirty();\n  }\n\n  private _padding: number = 0;\n  public get padding() {\n    return this._padding;\n  }\n\n  public set padding(value: number) {\n    this._padding = value;\n    this.flagDirty();\n  }\n\n  /**\n   * Rasterize the graphic to a bitmap making it usuable as in excalibur. Rasterize is called automatically if\n   * the graphic is [[Raster.dirty]] on the next [[Graphic.draw]] call\n   */\n  public rasterize(): void {\n    this._dirty = false;\n    this._ctx.clearRect(0, 0, this._getTotalWidth(), this._getTotalHeight());\n    this._ctx.save();\n    this._applyRasterProperites(this._ctx);\n    this.execute(this._ctx);\n    this._ctx.restore();\n    // The webgl texture needs to be updated if it exists after a raster cycle\n    TextureLoader.load(this._bitmap, true);\n  }\n\n  protected _applyRasterProperites(ctx: CanvasRenderingContext2D) {\n    this._bitmap.width = this._getTotalWidth();\n    this._bitmap.height = this._getTotalHeight();\n    ctx.translate(this.padding, this.padding);\n    ctx.imageSmoothingEnabled = this.smoothing;\n    ctx.lineWidth = this.lineWidth;\n    ctx.setLineDash(this.lineDash ?? ctx.getLineDash());\n    ctx.strokeStyle = this.strokeColor?.toString();\n    ctx.fillStyle = this.color?.toString();\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this._dirty) {\n      this.rasterize();\n    }\n\n    ex.drawImage(this._bitmap, x, y);\n  }\n\n  /**\n   * Executes drawing implemenation of the graphic, this is where the specific drawing code for the graphic\n   * should be implemented. Once `rasterize()` the graphic can be drawn to the [[ExcaliburGraphicsContext]] via `draw(...)`\n   * @param ctx Canvas to draw the graphic to\n   */\n  abstract execute(ctx: CanvasRenderingContext2D): void;\n}\n","import { Raster, RasterOptions } from './Raster';\n\nexport interface RectangleOptions {\n  width: number;\n  height: number;\n}\n\n/**\n * A Rectangle [[Graphic]] for drawing rectangles to the [[ExcaliburGraphicsContext]]\n */\nexport class Rectangle extends Raster {\n  constructor(options: RasterOptions & RectangleOptions) {\n    super(options);\n    this.width = options.width;\n    this.height = options.height;\n    this.rasterize();\n  }\n\n  public clone(): Rectangle {\n    return new Rectangle({\n      width: this.width,\n      height: this.height,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.color) {\n      ctx.fillRect(0, 0, this.width, this.height);\n    }\n    if (this.strokeColor) {\n      ctx.strokeRect(0, 0, this.width, this.height);\n    }\n  }\n}\n","import { Texture } from './Resources/Texture';\nimport {\n  InitializeEvent,\n  KillEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  PostCollisionEvent,\n  PreCollisionEvent,\n  CollisionStartEvent,\n  CollisionEndEvent,\n  PostKillEvent,\n  PreKillEvent,\n  GameEvent,\n  ExitTriggerEvent,\n  EnterTriggerEvent,\n  EnterViewPortEvent,\n  ExitViewPortEvent\n} from './Events';\nimport { PointerEvent, WheelEvent, PointerDragEvent, PointerEventName } from './Input/PointerEvents';\nimport { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { Sprite } from './Drawing/Sprite';\nimport { Animation } from './Drawing/Animation';\nimport { Trait } from './Interfaces/Trait';\nimport { Drawable } from './Interfaces/Drawable';\nimport { CanInitialize, CanUpdate, CanDraw, CanBeKilled } from './Interfaces/LifecycleEvents';\nimport { Scene } from './Scene';\nimport { Logger } from './Util/Log';\nimport { ActionContext } from './Actions/ActionContext';\nimport { vec, Vector } from './Algebra';\nimport { Body } from './Collision/Body';\nimport { Eventable } from './Interfaces/Evented';\nimport { Actionable } from './Actions/Actionable';\nimport { Configurable } from './Configurable';\nimport * as Traits from './Traits/Index';\nimport * as Events from './Events';\nimport { PointerEvents } from './Interfaces/PointerEventHandlers';\nimport { CollisionType } from './Collision/CollisionType';\nimport { obsolete } from './Util/Decorators';\nimport { Collider } from './Collision/Collider';\nimport { Shape } from './Collision/Shape';\n\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { CanvasDrawComponent } from './Drawing/CanvasDrawComponent';\nimport { TransformComponent } from './EntityComponentSystem/Components/TransformComponent';\nimport { GraphicsComponent } from './Graphics/GraphicsComponent';\nimport { Rectangle } from './Graphics/Rectangle';\nimport { Flags, Legacy } from './Flags';\n\n/**\n * Type guard for checking if something is an Actor\n * @param x\n */\nexport function isActor(x: any): x is Actor {\n  return x instanceof Actor;\n}\n\nexport interface ActorArgs extends Partial<ActorImpl> {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n  pos?: Vector;\n  vel?: Vector;\n  acc?: Vector;\n  rotation?: number;\n  rx?: number;\n  z?: number;\n  color?: Color;\n  visible?: boolean;\n  body?: Body;\n  collisionType?: CollisionType;\n}\n\nexport interface ActorDefaults {\n  anchor: Vector;\n}\n\n/**\n * @hidden\n */\n\nexport class ActorImpl extends Entity implements Actionable, Eventable, PointerEvents, CanInitialize, CanUpdate, CanDraw, CanBeKilled {\n  // #region Properties\n\n  /**\n   * Indicates the next id to be set\n   */\n  public static defaults: ActorDefaults = {\n    anchor: Vector.Half\n  };\n\n  /**\n   * The physics body the is associated with this actor. The body is the container for all physical properties, like position, velocity,\n   * acceleration, mass, inertia, etc.\n   */\n  public get body(): Body {\n    return this._body;\n  }\n\n  public set body(body: Body) {\n    this._body = body;\n    this._body.actor = this;\n  }\n\n  private _body: Body;\n\n  /**\n   * Gets the position vector of the actor in pixels\n   */\n  public get pos(): Vector {\n    return this.body.pos;\n  }\n\n  /**\n   * Sets the position vector of the actor in pixels\n   */\n  public set pos(thePos: Vector) {\n    this.body.pos = thePos;\n  }\n\n  /**\n   * Gets the position vector of the actor from the last frame\n   */\n  public get oldPos(): Vector {\n    return this.body.oldPos;\n  }\n\n  /**\n   * Sets the position vector of the actor in the last frame\n   */\n  public set oldPos(thePos: Vector) {\n    this.body.oldPos.setTo(thePos.x, thePos.y);\n  }\n\n  /**\n   * Gets the velocity vector of the actor in pixels/sec\n   */\n  public get vel(): Vector {\n    return this.body.vel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor in pixels/sec\n   */\n  public set vel(theVel: Vector) {\n    this.body.vel = theVel;\n  }\n\n  /**\n   * Gets the velocity vector of the actor from the last frame\n   */\n  public get oldVel(): Vector {\n    return this.body.oldVel;\n  }\n\n  /**\n   * Sets the velocity vector of the actor from the last frame\n   */\n  public set oldVel(theVel: Vector) {\n    this.body.oldVel.setTo(theVel.x, theVel.y);\n  }\n\n  /**\n   * Gets the acceleration vector of the actor in pixels/second/second. An acceleration pointing down such as (0, 100) may be\n   * useful to simulate a gravitational effect.\n   */\n  public get acc(): Vector {\n    return this.body.acc;\n  }\n\n  /**\n   * Sets the acceleration vector of teh actor in pixels/second/second\n   */\n  public set acc(theAcc: Vector) {\n    this.body.acc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Sets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public set oldAcc(theAcc: Vector) {\n    this.body.oldAcc.setTo(theAcc.x, theAcc.y);\n  }\n\n  /**\n   * Gets the acceleration of the actor from the last frame. This does not include the global acc [[Physics.acc]].\n   */\n  public get oldAcc(): Vector {\n    return this.body.oldAcc;\n  }\n\n  /**\n   * Gets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public get rotation(): number {\n    return this.body.rotation;\n  }\n\n  /**\n   * Sets the rotation of the actor in radians. 1 radian = 180/PI Degrees.\n   */\n  public set rotation(theAngle: number) {\n    this.body.rotation = theAngle;\n  }\n\n  /**\n   * Gets the rotational velocity of the actor in radians/second\n   */\n  public get rx(): number {\n    return this.body.rx;\n  }\n\n  /**\n   * Sets the rotational velocity of the actor in radians/sec\n   */\n  public set rx(angularVelocity: number) {\n    this.body.rx = angularVelocity;\n  }\n\n  /**\n   * The anchor to apply all actor related transformations like rotation,\n   * translation, and scaling. By default the anchor is in the center of\n   * the actor. By default it is set to the center of the actor (.5, .5)\n   *\n   * An anchor of (.5, .5) will ensure that drawings are centered.\n   *\n   * Use `anchor.setTo` to set the anchor to a different point using\n   * values between 0 and 1. For example, anchoring to the top-left would be\n   * `Actor.anchor.setTo(0, 0)` and top-right would be `Actor.anchor.setTo(0, 1)`.\n   */\n  public anchor: Vector;\n\n  private _height: number = 0;\n  private _width: number = 0;\n\n  /**\n   * Gets the scale vector of the actor\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get scale(): Vector {\n    return this.get(TransformComponent).scale;\n  }\n\n  /**\n   * Sets the scale vector of the actor for\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set scale(scale: Vector) {\n    this.get(TransformComponent).scale = scale;\n  }\n\n  /**\n   * Gets the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get oldScale(): Vector {\n    return this.body.oldScale;\n  }\n\n  /**\n   * Sets the the old scale of the actor last frame\n   * @obsolete ex.Actor.scale will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public set oldScale(scale: Vector) {\n    this.body.oldScale = scale;\n  }\n\n  /**\n   * Gets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sx(): number {\n    return this.body.sx;\n  }\n\n  /**\n   * Sets the x scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sx will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sx will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sx(scalePerSecondX: number) {\n    this.body.sx = scalePerSecondX;\n  }\n\n  /**\n   * Gets the y scalar velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  public get sy(): number {\n    return this.body.sy;\n  }\n\n  /**\n   * Sets the y scale velocity of the actor in scale/second\n   * @obsolete ex.Actor.sy will be removed in v0.25.0, set width and height directly in constructor\n   */\n  @obsolete({ message: 'ex.Actor.sy will be removed in v0.25.0', alternateMethod: 'Set width and height directly in constructor' })\n  public set sy(scalePerSecondY: number) {\n    this.body.sy = scalePerSecondY;\n  }\n\n  /**\n   * Indicates whether the actor is physically in the viewport\n   */\n  public get isOffScreen(): boolean {\n    return this.hasTag('offscreen');\n  }\n  /**\n   * The visibility of an actor\n   * @deprecated Use [[GraphicsComponent.visible|Actor.graphics.visible]]\n   */\n  @obsolete({ message: 'Actor.visible will be removed in v0.26.0', alternateMethod: 'Use Actor.graphics.visible' })\n  public get visible(): boolean {\n    return this.graphics.visible;\n  }\n\n  public set visible(isVisible: boolean) {\n    this.graphics.visible = isVisible;\n  }\n\n  /**\n   * The opacity of an actor. Passing in a color in the [[constructor]] will use the\n   * color's opacity.\n   */\n  public opacity: number = 1;\n  public previousOpacity: number = 1;\n\n  /**\n   * [[ActionContext|Action context]] of the actor. Useful for scripting actor behavior.\n   */\n  public actions: ActionContext;\n\n  /**\n   * Convenience reference to the global logger\n   */\n  public logger: Logger = Logger.getInstance();\n\n  /**\n   * The scene that the actor is in\n   */\n  public scene: Scene = null;\n\n  public frames: { [key: string]: Drawable } = {};\n\n  /**\n   * Access to the current drawing for the actor, this can be\n   * an [[Animation]], [[Sprite]], or [[Polygon]].\n   * Set drawings with [[setDrawing]].\n   */\n  public currentDrawing: Drawable = null;\n\n  /**\n   * Draggable helper\n   */\n\n  private _draggable: boolean = false;\n  private _dragging: boolean = false;\n\n  private _pointerDragStartHandler = () => {\n    this._dragging = true;\n  };\n\n  private _pointerDragEndHandler = () => {\n    this._dragging = false;\n  };\n\n  private _pointerDragMoveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  private _pointerDragLeaveHandler = (pe: PointerEvent) => {\n    if (this._dragging) {\n      this.pos = pe.pointer.lastWorldPos;\n    }\n  };\n\n  public get draggable(): boolean {\n    return this._draggable;\n  }\n\n  public set draggable(isDraggable: boolean) {\n    if (isDraggable) {\n      if (isDraggable && !this._draggable) {\n        this.on('pointerdragstart', this._pointerDragStartHandler);\n        this.on('pointerdragend', this._pointerDragEndHandler);\n        this.on('pointerdragmove', this._pointerDragMoveHandler);\n        this.on('pointerdragleave', this._pointerDragLeaveHandler);\n      } else if (!isDraggable && this._draggable) {\n        this.off('pointerdragstart', this._pointerDragStartHandler);\n        this.off('pointerdragend', this._pointerDragEndHandler);\n        this.off('pointerdragmove', this._pointerDragMoveHandler);\n        this.off('pointerdragleave', this._pointerDragLeaveHandler);\n      }\n\n      this._draggable = isDraggable;\n    }\n  }\n\n  /**\n   * Modify the current actor update pipeline.\n   */\n  public traits: Trait[] = [];\n\n  /**\n   * Sets the color of the actor. A rectangle of this color will be\n   * drawn if no [[Drawable]] is specified as the actors drawing.\n   *\n   * The default is `null` which prevents a rectangle from being drawn.\n   */\n  public get color(): Color {\n    return this._color;\n  }\n  public set color(v: Color) {\n    this._color = v.clone();\n  }\n  private _color: Color;\n\n  /**\n   * Whether or not to enable the [[CapturePointer]] trait that propagates\n   * pointer events to this actor\n   */\n  public enableCapturePointer: boolean = false;\n\n  /**\n   * Configuration for [[CapturePointer]] trait\n   */\n  public capturePointer: Traits.CapturePointerConfig = {\n    captureMoveEvents: false,\n    captureDragEvents: false\n  };\n\n  private _isKilled: boolean = false;\n\n  // #endregion\n\n  public transform: TransformComponent;\n  public graphics: GraphicsComponent;\n\n  /**\n   * @param xOrConfig The starting x coordinate of the actor, or an option bag of [[ActorArgs]]\n   * @param y         The starting y coordinate of the actor\n   * @param width     The starting width of the actor\n   * @param height    The starting height of the actor\n   * @param color     The starting color of the actor. Leave null to draw a transparent actor. The opacity of the color will be used as the\n   * initial [[opacity]].\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super([new TransformComponent(), new GraphicsComponent(), new CanvasDrawComponent((ctx, delta) => this.draw(ctx, delta))]);\n\n    this.transform = this.get(TransformComponent);\n    this.graphics = this.get(GraphicsComponent);\n\n    // initialize default options\n    this._initDefaults();\n\n    let shouldInitializeBody = true;\n    let collisionType = CollisionType.Passive;\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      if (config.pos) {\n        xOrConfig = config.pos ? config.pos.x : 0;\n        y = config.pos ? config.pos.y : 0;\n      } else {\n        xOrConfig = config.x || 0;\n        y = config.y || 0;\n      }\n      width = config.width;\n      height = config.height;\n      color = config.color;\n\n      if (config.body) {\n        shouldInitializeBody = false;\n        this.body = config.body;\n      }\n\n      if (config.anchor) {\n        this.anchor = config.anchor;\n      }\n\n      if (config.collisionType) {\n        collisionType = config.collisionType;\n      }\n    }\n\n    // Body and collider bounds are still determined by actor width/height\n    this._width = width || 0;\n    this._height = height || 0;\n\n    // Initialize default collider to be a box\n    if (shouldInitializeBody) {\n      this.body = new Body({\n        collider: new Collider({\n          type: collisionType,\n          shape: Shape.Box(this._width, this._height, this.anchor)\n        })\n      });\n    }\n\n    // Position uses body to store values must be initialized after body\n    this.pos = vec((xOrConfig as number) ?? 0, y ?? 0);\n\n    if (color) {\n      this.color = color;\n      // set default opacity of an actor to the color\n      this.opacity = color.a;\n    }\n\n    if (color) {\n      this.graphics.add(\n        new Rectangle({\n          color: color,\n          width: this._width,\n          height: this._height\n        })\n      );\n    }\n\n    // Build default pipeline\n    this.traits.push(new Traits.TileMapCollisionDetection());\n    if (Flags.isEnabled(Legacy.LegacyDrawing)) {\n      // TODO remove offscreen trait after legacy drawing removed\n      this.traits.push(new Traits.OffscreenCulling());\n    }\n    this.traits.push(new Traits.CapturePointer());\n\n    // Build the action queue\n    this.actions = new ActionContext(this);\n  }\n\n  /**\n   * `onInitialize` is called before the first update of the actor. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   *\n   * Synonymous with the event handler `.on('initialize', (evt) => {...})`\n   */\n  public onInitialize(_engine: Engine): void {\n    // Override me\n  }\n\n  /**\n   * Initializes this actor and all it's child actors, meant to be called by the Scene before first update not by users of Excalibur.\n   *\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n    for (const child of this.children) {\n      child._initialize(engine);\n    }\n  }\n\n  private _initDefaults() {\n    this.anchor = Actor.defaults.anchor.clone();\n  }\n\n  // #region Events\n\n  private _capturePointerEvents: PointerEventName[] = [\n    'pointerup',\n    'pointerdown',\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureMoveEvents: PointerEventName[] = [\n    'pointermove',\n    'pointerenter',\n    'pointerleave',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _captureDragEvents: PointerEventName[] = [\n    'pointerdragstart',\n    'pointerdragend',\n    'pointerdragmove',\n    'pointerdragenter',\n    'pointerdragleave'\n  ];\n\n  private _checkForPointerOptIn(eventName: string) {\n    if (eventName) {\n      const normalized = <PointerEventName>eventName.toLowerCase();\n\n      if (this._capturePointerEvents.indexOf(normalized) !== -1) {\n        this.enableCapturePointer = true;\n\n        if (this._captureMoveEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureMoveEvents = true;\n        }\n\n        if (this._captureDragEvents.indexOf(normalized) !== -1) {\n          this.capturePointer.captureDragEvents = true;\n        }\n      }\n    }\n  }\n\n  public on(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public on(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touched a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public on(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public on(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public on(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public on(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public on(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public on(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public on(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent<Actor>) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Actor>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Actor>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public on(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public on(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.exittrigger, handler: (event: ExitTriggerEvent) => void): void;\n  public once(eventName: Events.entertrigger, handler: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public once(eventName: Events.collisionstart, handler: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public once(eventName: Events.collisionend, handler: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public once(eventName: Events.precollision, handler: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public once(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public once(eventName: Events.kill, handler: (event: KillEvent) => void): void;\n  public once(eventName: Events.postkill, handler: (event: PostKillEvent) => void): void;\n  public once(eventName: Events.prekill, handler: (event: PreKillEvent) => void): void;\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent<Actor>) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Actor>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Actor>) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: Events.pointerup, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerdown, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerenter, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerleave, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointermove, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointercancel, handler: (event: PointerEvent) => void): void;\n  public once(eventName: Events.pointerwheel, handler: (event: WheelEvent) => void): void;\n  public once(eventName: Events.pointerdragstart, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragend, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragenter, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragleave, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.pointerdragmove, handler: (event: PointerDragEvent) => void): void;\n  public once(eventName: Events.enterviewport, handler: (event: EnterViewPortEvent) => void): void;\n  public once(eventName: Events.exitviewport, handler: (event: ExitViewPortEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Actor>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    this._checkForPointerOptIn(eventName);\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.exittrigger, handler?: (event: ExitTriggerEvent) => void): void;\n  public off(eventName: Events.entertrigger, handler?: (event: EnterTriggerEvent) => void): void;\n  /**\n   * The **collisionstart** event is fired when a [[Body|physics body]], usually attached to an actor,\n   *  first starts colliding with another [[Body|body]], and will not fire again while in contact until\n   *  the the pair separates and collides again.\n   * Use cases for the **collisionstart** event may be detecting when an actor has touch a surface\n   * (like landing) or if a item has been touched and needs to be picked up.\n   */\n  public off(eventName: Events.collisionstart, handler?: (event: CollisionStartEvent) => void): void;\n  /**\n   * The **collisionend** event is fired when two [[Body|physics bodies]] are no longer in contact.\n   * This event will not fire again until another collision and separation.\n   *\n   * Use cases for the **collisionend** event might be to detect when an actor has left a surface\n   * (like jumping) or has left an area.\n   */\n  public off(eventName: Events.collisionend, handler?: (event: CollisionEndEvent) => void): void;\n  /**\n   * The **precollision** event is fired **every frame** where a collision pair is found and two\n   * bodies are intersecting.\n   *\n   * This event is useful for building in custom collision resolution logic in Passive-Passive or\n   * Active-Passive scenarios. For example in a breakout game you may want to tweak the angle of\n   * ricochet of the ball depending on which side of the paddle you hit.\n   */\n  public off(eventName: Events.precollision, handler?: (event: PreCollisionEvent) => void): void;\n  /**\n   * The **postcollision** event is fired for **every frame** where collision resolution was performed.\n   * Collision resolution is when two bodies influence each other and cause a response like bouncing\n   * off one another. It is only possible to have *postcollision* event in Active-Active and Active-Fixed\n   * type collision pairs.\n   *\n   * Post collision would be useful if you need to know that collision resolution is happening or need to\n   * tweak the default resolution.\n   */\n  public off(eventName: Events.postcollision, handler: (event: PostCollisionEvent) => void): void;\n  public off(eventName: Events.pointerup, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerdown, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerenter, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerleave, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointermove, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointercancel, handler?: (event: PointerEvent) => void): void;\n  public off(eventName: Events.pointerwheel, handler?: (event: WheelEvent) => void): void;\n  public off(eventName: Events.pointerdragstart, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragend, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragenter, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragleave, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.pointerdragmove, handler?: (event: PointerDragEvent) => void): void;\n  public off(eventName: Events.prekill, handler?: (event: PreKillEvent) => void): void;\n  public off(eventName: Events.postkill, handler?: (event: PostKillEvent) => void): void;\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<Actor>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: Events.PostUpdateEvent<Actor>) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: Events.PreUpdateEvent<Actor>) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n  public off(eventName: Events.enterviewport, handler?: (event: EnterViewPortEvent) => void): void;\n  public off(eventName: Events.exitviewport, handler?: (event: ExitViewPortEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<Actor>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  // #endregion\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPreKill]] lifecycle event\n   * @internal\n   */\n  public _prekill(_scene: Scene) {\n    super.emit('prekill', new PreKillEvent(this));\n    this.onPreKill(_scene);\n  }\n\n  /**\n   * Safe to override onPreKill lifecycle event handler. Synonymous with `.on('prekill', (evt) =>{...})`\n   *\n   * `onPreKill` is called directly before an actor is killed and removed from its current [[Scene]].\n   */\n  public onPreKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _prekill handler for [[onPostKill]] lifecycle event\n   * @internal\n   */\n  public _postkill(_scene: Scene) {\n    super.emit('postkill', new PostKillEvent(this));\n    this.onPostKill(_scene);\n  }\n\n  /**\n   * Safe to override onPostKill lifecycle event handler. Synonymous with `.on('postkill', (evt) => {...})`\n   *\n   * `onPostKill` is called directly after an actor is killed and remove from its current [[Scene]].\n   */\n  public onPostKill(_scene: Scene) {\n    // Override me\n  }\n\n  /**\n   * If the current actor is a member of the scene, this will remove\n   * it from the scene graph. It will no longer be drawn or updated.\n   */\n  public kill() {\n    if (this.scene) {\n      this._prekill(this.scene);\n      this.emit('kill', new KillEvent(this));\n      this._isKilled = true;\n      this.scene.remove(this);\n      this._postkill(this.scene);\n    } else {\n      this.logger.warn('Cannot kill actor, it was never added to the Scene');\n    }\n  }\n\n  /**\n   * If the current actor is killed, it will now not be killed.\n   */\n  public unkill() {\n    this._isKilled = false;\n  }\n\n  /**\n   * Indicates wether the actor has been killed.\n   */\n  public isKilled(): boolean {\n    return this._isKilled;\n  }\n\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * the key.\n   * @param key The key of the drawing\n   * @deprecated Use [[GraphicsComponent.show|Actor.graphics.show]] or [[GraphicsComponent.swap|Actor.graphics.swap]]\n   */\n  public setDrawing(key: string): void;\n  /**\n   * Sets the current drawing of the actor to the drawing corresponding to\n   * an `enum` key (e.g. `Animations.Left`)\n   * @param key The `enum` key of the drawing\n   * @deprecated Use [[GraphicsComponent.show|Actor.graphics.show]] or [[GraphicsComponent.swap|Actor.graphics.swap]]\n   */\n  public setDrawing(key: number): void;\n  @obsolete({\n    message: 'Actor.setDrawing will be removed in v0.26.0',\n    alternateMethod: 'Use Actor.graphics.show() or Actor.graphics.swap()'\n  })\n  public setDrawing(key: any): void {\n    key = key.toString();\n    if (this.currentDrawing !== this.frames[<string>key]) {\n      if (this.frames[key] != null) {\n        this.frames[key].reset();\n        this.currentDrawing = this.frames[key];\n      } else {\n        Logger.getInstance().error(`the specified drawing key ${key} does not exist`);\n      }\n    }\n    if (this.currentDrawing && this.currentDrawing instanceof Animation) {\n      this.currentDrawing.tick(0);\n    }\n  }\n\n  /**\n   * Adds a whole texture as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   * @deprecated Use [[GraphicsComponent.add|Actor.graphics.add]]\n   */\n  public addDrawing(texture: Texture): void;\n  /**\n   * Adds a whole sprite as the \"default\" drawing. Set a drawing using [[setDrawing]].\n   * @deprecated Use [[GraphicsComponent.add|Actor.graphics.add]]\n   */\n  public addDrawing(sprite: Sprite): void;\n  /**\n   * Adds a drawing to the list of available drawings for an actor. Set a drawing using [[setDrawing]].\n   * @param key     The key to associate with a drawing for this actor\n   * @param drawing This can be an [[Animation]], [[Sprite]], or [[Polygon]].\n   * @deprecated Use [[GraphicsComponent.add|Actor.graphics.add]]\n   */\n  public addDrawing(key: any, drawing: Drawable): void;\n  @obsolete({\n    message: 'Actor.addDrawing will be removed in v0.26.0',\n    alternateMethod: 'Use Actor.graphics.add()'\n  })\n  public addDrawing(): void {\n    if (arguments.length === 2) {\n      this.frames[<string>arguments[0]] = arguments[1];\n      if (!this.currentDrawing) {\n        this.currentDrawing = arguments[1];\n      }\n    } else {\n      if (arguments[0] instanceof Sprite) {\n        this.addDrawing('default', arguments[0]);\n      }\n      if (arguments[0] instanceof Texture) {\n        this.addDrawing('default', arguments[0].asSprite());\n      }\n    }\n  }\n\n  public get z(): number {\n    return this.getZIndex();\n  }\n\n  public set z(newZ: number) {\n    this.setZIndex(newZ);\n  }\n\n  /**\n   * Gets the z-index of an actor. The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   * @deprecated Use [[Actor.z]]\n   */\n  @obsolete({\n    message: 'Actor.getZIndex will be removed in v0.26.0',\n    alternateMethod: 'Use Actor.transform.z or Actor.z'\n  })\n  public getZIndex(): number {\n    return this.get(TransformComponent).z;\n  }\n\n  /**\n   * Sets the z-index of an actor and updates it in the drawing list for the scene.\n   * The z-index determines the relative order an actor is drawn in.\n   * Actors with a higher z-index are drawn on top of actors with a lower z-index\n   * @param newIndex new z-index to assign\n   * @deprecated Use [[Actor.z]]\n   */\n  @obsolete({\n    message: 'Actor.setZIndex will be removed in v0.26.0',\n    alternateMethod: 'Use Actor.transform.z or Actor.z'\n  })\n  public setZIndex(newIndex: number) {\n    this.get(TransformComponent).z = newIndex;\n  }\n\n  /**\n   * Get the center point of an actor\n   */\n  public get center(): Vector {\n    return new Vector(this.pos.x + this.width / 2 - this.anchor.x * this.width, this.pos.y + this.height / 2 - this.anchor.y * this.height);\n  }\n\n  public get width() {\n    return this._width * this.getGlobalScale().x;\n  }\n\n  public set width(width: number) {\n    this._width = width / this.scale.x;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  public get height() {\n    return this._height * this.getGlobalScale().y;\n  }\n\n  public set height(height: number) {\n    this._height = height / this.scale.y;\n    this.body.collider.shape = Shape.Box(this._width, this._height, this.anchor);\n    this.body.markCollisionShapeDirty();\n  }\n\n  /**\n   * Gets this actor's rotation taking into account any parent relationships\n   *\n   * @returns Rotation angle in radians\n   */\n  public getGlobalRotation(): number {\n    return this.get(TransformComponent).globalRotation;\n  }\n\n  /**\n   * Gets an actor's world position taking into account parent relationships, scaling, rotation, and translation\n   *\n   * @returns Position in world coordinates\n   */\n  public getGlobalPos(): Vector {\n    return this.get(TransformComponent).globalPos;\n  }\n\n  /**\n   * Gets the global scale of the Actor\n   */\n  public getGlobalScale(): Vector {\n    return this.get(TransformComponent).globalScale;\n  }\n\n  // #region Collision\n\n  /**\n   * Tests whether the x/y specified are contained in the actor\n   * @param x  X coordinate to test (in world coordinates)\n   * @param y  Y coordinate to test (in world coordinates)\n   * @param recurse checks whether the x/y are contained in any child actors (if they exist).\n   */\n  public contains(x: number, y: number, recurse: boolean = false): boolean {\n    const point = vec(x, y);\n    const containment = this.body.collider.shape.contains(point);\n\n    if (recurse) {\n      return (\n        containment ||\n        this.children.some((child: Actor) => {\n          return child.contains(x, y, true);\n        })\n      );\n    }\n\n    return containment;\n  }\n\n  /**\n   * Returns true if the two actor.body.collider.shape's surfaces are less than or equal to the distance specified from each other\n   * @param actor     Actor to test\n   * @param distance  Distance in pixels to test\n   */\n  public within(actor: Actor, distance: number): boolean {\n    return this.body.collider.shape.getClosestLineBetween(actor.body.collider.shape).getLength() <= distance;\n  }\n\n  // #endregion\n\n  // #region Update\n\n  /**\n   * Called by the Engine, updates the state of the actor\n   * @internal\n   * @param engine The reference to the current game engine\n   * @param delta  The time elapsed since the last update in milliseconds\n   */\n  public update(engine: Engine, delta: number) {\n    this._initialize(engine);\n    this._preupdate(engine, delta);\n\n    // Tick animations\n    const drawing = this.currentDrawing;\n    if (drawing && drawing instanceof Animation) {\n      drawing.tick(delta, engine.stats.currFrame.id);\n    }\n\n    // Update action context\n    this.actions.update(delta);\n\n    // Update color only opacity\n    if (this.color) {\n      this.color.a = this.opacity;\n    }\n\n    if (this.opacity === 0) {\n      this.visible = false;\n    }\n\n    // capture old transform\n    this.body.captureOldTransform();\n\n    // Run Euler integration\n    this.body.integrate(delta);\n\n    // Update actor pipeline (movement, collision detection, event propagation, offscreen culling)\n    for (const trait of this.traits) {\n      trait.update(this, engine, delta);\n    }\n\n    // Update child actors\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].update(engine, delta);\n    // }\n\n    this._postupdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before an actor is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('postupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after an actor is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  // endregion\n\n  // #region Drawing\n  /**\n   * Called by the Engine, draws the actor to the screen\n   * @param ctx   The rendering context\n   * @param delta The time since the last draw in milliseconds\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    // translate canvas by anchor offset\n    ctx.save();\n    ctx.translate(-(this._width * this.anchor.x), -(this._height * this.anchor.y));\n\n    this._predraw(ctx, delta);\n\n    if (this.currentDrawing) {\n      const drawing = this.currentDrawing;\n      // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n      const offsetX = (this._width - drawing.drawWidth) * this.anchor.x;\n      const offsetY = (this._height - drawing.drawHeight) * this.anchor.y;\n\n      this.currentDrawing.draw({ ctx, x: offsetX, y: offsetY, opacity: this.opacity });\n    } else {\n      if (this.color && this.body && this.body.collider && this.body.collider.shape && !this.body.collider.bounds.hasZeroDimensions()) {\n        this.body.collider.shape.draw(ctx, this.color, new Vector(0, 0));\n      }\n    }\n    ctx.restore();\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('predraw', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before an actor is drawn, but after local transforms are made.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('postdraw', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after an actor is drawn, and before local transforms are removed.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // Override me\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   * @internal\n   */\n  public _predraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('predraw', new PreDrawEvent(ctx, delta, this));\n    this.onPreDraw(ctx, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   * @internal\n   */\n  public _postdraw(ctx: CanvasRenderingContext2D, delta: number): void {\n    this.emit('postdraw', new PreDrawEvent(ctx, delta, this));\n    this.onPostDraw(ctx, delta);\n  }\n\n  /**\n   * Called by the Engine, draws the actors debugging to the screen\n   * @param ctx The rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n\n    this.body.collider.debugDraw(ctx);\n\n    // Draw actor bounding box\n    const bb = this.body.collider.localBounds.translate(this.getGlobalPos());\n    bb.debugDraw(ctx);\n\n    // Draw actor Id\n    ctx.fillText('id: ' + this.id, bb.left + 3, bb.top + 10);\n\n    // Draw actor anchor Vector\n    ctx.fillStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    ctx.arc(this.getGlobalPos().x, this.getGlobalPos().y, 3, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.fill();\n\n    // Culling Box debug draw\n    for (let j = 0; j < this.traits.length; j++) {\n      if (this.traits[j] instanceof Traits.OffscreenCulling) {\n        (<Traits.OffscreenCulling>this.traits[j]).cullingBox.debugDraw(ctx); // eslint-disable-line\n      }\n    }\n\n    // Unit Circle debug draw\n    ctx.strokeStyle = Color.Yellow.toString();\n    ctx.beginPath();\n    const radius = Math.min(this.width, this.height);\n    ctx.arc(this.getGlobalPos().x, this.getGlobalPos().y, radius, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n    const ticks: { [key: string]: number } = {\n      '0 Pi': 0,\n      'Pi/2': Math.PI / 2,\n      Pi: Math.PI,\n      '3/2 Pi': (3 * Math.PI) / 2\n    };\n\n    const oldFont = ctx.font;\n    for (const tick in ticks) {\n      ctx.fillStyle = Color.Yellow.toString();\n      ctx.font = '14px';\n      ctx.textAlign = 'center';\n      ctx.fillText(\n        tick,\n        this.getGlobalPos().x + Math.cos(ticks[tick]) * (radius + 10),\n        this.getGlobalPos().y + Math.sin(ticks[tick]) * (radius + 10)\n      );\n    }\n\n    ctx.font = oldFont;\n\n    // Draw child actors\n    // for (let i = 0; i < this.children.length; i++) {\n    //   this.children[i].debugDraw(ctx);\n    // }\n\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n  // #endregion\n}\n\n/**\n * The most important primitive in Excalibur is an `Actor`. Anything that\n * can move on the screen, collide with another `Actor`, respond to events,\n * or interact with the current scene, must be an actor. An `Actor` **must**\n * be part of a [[Scene]] for it to be drawn to the screen.\n */\nexport class Actor extends Configurable(ActorImpl) {\n  constructor();\n  constructor(config?: ActorArgs);\n  constructor(x?: number, y?: number, width?: number, height?: number, color?: Color);\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number, color?: Color) {\n    super(xOrConfig, y, width, height, color);\n  }\n}\n","/**\n * Internal class used to build instances of AudioContext\n */\n/* istanbul ignore next */\nexport class AudioContextFactory {\n  private static _INSTANCE: AudioContext = null;\n\n  public static create(): AudioContext {\n    if (!this._INSTANCE) {\n      if ((<any>window).AudioContext || (<any>window).webkitAudioContext) {\n        this._INSTANCE = new AudioContext();\n      }\n    }\n\n    return this._INSTANCE;\n  }\n}\n","import { AudioContextFactory } from '../Resources/Sound/AudioContext';\nimport { Logger } from './Log';\n\nexport interface LegacyWebAudioSource {\n  playbackState: string;\n  PLAYING_STATE: 'playing';\n  FINISHED_STATE: 'finished';\n}\n\n/**\n * Patch for detecting legacy web audio in browsers\n * @internal\n * @param source\n */\nfunction isLegacyWebAudioSource(source: any): source is LegacyWebAudioSource {\n  return !!source.playbackState;\n}\n\nexport class WebAudio {\n  private static _UNLOCKED: boolean = false;\n\n  /**\n   * Play an empty sound to unlock Safari WebAudio context. Call this function\n   * right after a user interaction event.\n   * @source https://paulbakaus.com/tutorials/html5/web-audio-on-ios/\n   */\n  static unlock(): Promise<boolean> {\n    const promise = new Promise<boolean>((resolve, reject) => {\n      if (WebAudio._UNLOCKED || !AudioContextFactory.create()) {\n        return resolve(true);\n      }\n      const unlockTimeoutTimer = setTimeout(() => {\n        Logger.getInstance().warn('Excalibur was unable to unlock the audio context, audio probably will not play in this browser.');\n        resolve(false);\n      }, 200);\n\n      const audioContext = AudioContextFactory.create();\n      audioContext.resume().then(\n        () => {\n          // create empty buffer and play it\n          const buffer = audioContext.createBuffer(1, 1, 22050);\n          const source = audioContext.createBufferSource();\n          let ended = false;\n\n          source.buffer = buffer;\n          source.connect(audioContext.destination);\n          source.onended = () => (ended = true);\n\n          source.start(0);\n\n          // by checking the play state after some time, we know if we're really unlocked\n          setTimeout(() => {\n            if (isLegacyWebAudioSource(source)) {\n              if (source.playbackState === source.PLAYING_STATE || source.playbackState === source.FINISHED_STATE) {\n                WebAudio._UNLOCKED = true;\n              }\n            } else {\n              if (audioContext.currentTime > 0 || ended) {\n                WebAudio._UNLOCKED = true;\n              }\n            }\n          }, 0);\n\n          clearTimeout(unlockTimeoutTimer);\n          resolve(true);\n        },\n        () => {\n          reject();\n        }\n      );\n    });\n\n\n    return promise;\n  }\n\n  static isUnlocked() {\n    return this._UNLOCKED;\n  }\n}\n","import { GraphicOptions } from './Graphic';\nimport { Raster, RasterOptions } from './Raster';\n\nexport interface CanvasOptions {\n  draw?: (ctx: CanvasRenderingContext2D) => void;\n  cache?: boolean;\n}\n\n/**\n * A canvas [[Graphic]] to provide an adapter between the 2D Canvas API and the [[ExcaliburGraphicsContext]].\n *\n * The [[Canvas]] works by re-rastering a draw handler to a HTMLCanvasElement for every draw which is then passed\n * to the [[ExcaliburGraphicsContext]] implementation as a rendered image.\n *\n * **Low performance API**\n */\nexport class Canvas extends Raster {\n  /**\n   * Return the 2D graphics context of this canvas\n   */\n  public get ctx() {\n    return this._ctx;\n  }\n\n  constructor(private _options: GraphicOptions & RasterOptions & CanvasOptions) {\n    super(_options);\n  }\n\n  public clone(): Canvas {\n    return new Canvas({\n      ...this._options,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this._options?.draw) {\n      this._options?.draw(ctx);\n    }\n    if (!this._options.cache) {\n      this.flagDirty();\n    }\n  }\n}\n","import { Color } from './Drawing/Color';\nimport { WebAudio } from './Util/WebAudio';\nimport { Engine } from './Engine';\nimport { Loadable } from './Interfaces/Loadable';\nimport { Class } from './Class';\nimport * as DrawUtil from './Util/DrawUtil';\n\nimport logoImg from './Loader.logo.png';\nimport loaderCss from './Loader.css';\nimport { Canvas } from './Graphics/Canvas';\nimport { Vector } from './Algebra';\nimport { clamp, delay } from './Util/Util';\n\n/**\n * Pre-loading assets\n *\n * The loader provides a mechanism to preload multiple resources at\n * one time. The loader must be passed to the engine in order to\n * trigger the loading progress bar.\n *\n * The [[Loader]] itself implements [[Loadable]] so you can load loaders.\n *\n * ## Example: Pre-loading resources for a game\n *\n * ```js\n * // create a loader\n * var loader = new ex.Loader();\n *\n * // create a resource dictionary (best practice is to keep a separate file)\n * var resources = {\n *   TextureGround: new ex.Texture(\"/images/textures/ground.png\"),\n *   SoundDeath: new ex.Sound(\"/sound/death.wav\", \"/sound/death.mp3\")\n * };\n *\n * // loop through dictionary and add to loader\n * for (var loadable in resources) {\n *   if (resources.hasOwnProperty(loadable)) {\n *     loader.addResource(resources[loadable]);\n *   }\n * }\n *\n * // start game\n * game.start(loader).then(function () {\n *   console.log(\"Game started!\");\n * });\n * ```\n *\n * ## Customize the Loader\n *\n * The loader can be customized to show different, text, logo, background color, and button.\n *\n * ```typescript\n * const loader = new ex.Loader([playerTexture]);\n *\n * // The loaders button text can simply modified using this\n * loader.playButtonText = 'Start the best game ever';\n *\n * // The logo can be changed by inserting a base64 image string here\n *\n * loader.logo = 'data:image/png;base64,iVBORw...';\n * loader.logoWidth = 15;\n * loader.logoHeight = 14;\n *\n * // The background color can be changed like so by supplying a valid CSS color string\n *\n * loader.backgroundColor = 'red'\n * loader.backgroundColor = '#176BAA'\n *\n * // To build a completely new button\n * loader.startButtonFactory = () => {\n *     let myButton = document.createElement('button');\n *     myButton.textContent = 'The best button';\n *     return myButton;\n * };\n *\n * engine.start(loader).then(() => {});\n * ```\n */\nexport class Loader extends Class implements Loadable<Loadable<any>[]> {\n  public canvas: Canvas = new Canvas({\n    smoothing: true,\n    draw: this.draw.bind(this)\n  });\n  private _resourceList: Loadable<any>[] = [];\n  private _index = 0;\n\n  private _playButtonShown: boolean = false;\n  private _resourceCount: number = 0;\n  private _numLoaded: number = 0;\n  private _progressCounts: { [key: string]: number } = {};\n  private _totalCounts: { [key: string]: number } = {};\n  private _engine: Engine;\n\n  // logo drawing stuff\n\n  // base64 string encoding of the excalibur logo (logo-white.png)\n  public logo = logoImg;\n  public logoWidth = 468;\n  public logoHeight = 118;\n  /**\n   * Positions the top left corner of the logo image\n   * If not set, the loader automatically positions the logo\n   */\n  public logoPosition: Vector | null;\n  /**\n   * Positions the top left corner of the play button.\n   * If not set, the loader automatically positions the play button\n   */\n  public playButtonPosition: Vector | null;\n  /**\n   * Positions the top left corner of the loading bar\n   * If not set, the loader automatically positions the loading bar\n   */\n  public loadingBarPosition: Vector | null;\n\n  /**\n   * Gets or sets the color of the loading bar, default is [[Color.White]]\n   */\n  public loadingBarColor: Color = Color.White;\n\n  /**\n   * Gets or sets the background color of the loader as a hex string\n   */\n  public backgroundColor: string = '#176BAA';\n\n  protected _imageElement: HTMLImageElement;\n  protected get _image() {\n    if (!this._imageElement) {\n      this._imageElement = new Image();\n      this._imageElement.src = this.logo;\n    }\n\n    return this._imageElement;\n  }\n\n  public suppressPlayButton: boolean = false;\n  public get playButtonRootElement(): HTMLElement | null {\n    return this._playButtonRootElement;\n  }\n  public get playButtonElement(): HTMLButtonElement | null {\n    return this._playButtonElement;\n  }\n  protected _playButtonRootElement: HTMLElement;\n  protected _playButtonElement: HTMLButtonElement;\n  protected _styleBlock: HTMLStyleElement;\n  /** Loads the css from Loader.css */\n  protected _playButtonStyles: string = loaderCss.toString();\n  protected get _playButton() {\n    const existingRoot = document.getElementById('excalibur-play-root');\n    if (existingRoot) {\n      this._playButtonRootElement = existingRoot;\n    }\n    if (!this._playButtonRootElement) {\n      this._playButtonRootElement = document.createElement('div');\n      this._playButtonRootElement.id = 'excalibur-play-root';\n      this._playButtonRootElement.style.position = 'absolute';\n      document.body.appendChild(this._playButtonRootElement);\n    }\n    if (!this._styleBlock) {\n      this._styleBlock = document.createElement('style');\n      this._styleBlock.textContent = this._playButtonStyles;\n      document.head.appendChild(this._styleBlock);\n    }\n    if (!this._playButtonElement) {\n      this._playButtonElement = this.startButtonFactory();\n      this._playButtonRootElement.appendChild(this._playButtonElement);\n    }\n    return this._playButtonElement;\n  }\n\n  /**\n   * Get/set play button text\n   */\n  public playButtonText: string = 'Play game';\n\n  /**\n   * Return a html button element for excalibur to use as a play button\n   */\n  public startButtonFactory = () => {\n    let buttonElement: HTMLButtonElement = document.getElementById('excalibur-play') as HTMLButtonElement;\n    if (!buttonElement) {\n      buttonElement = document.createElement('button');\n    }\n\n    buttonElement.id = 'excalibur-play';\n    buttonElement.textContent = this.playButtonText;\n    buttonElement.style.display = 'none';\n    return buttonElement;\n  };\n\n  /**\n   * @param loadables  Optionally provide the list of resources you want to load at constructor time\n   */\n  constructor(loadables?: Loadable<any>[]) {\n    super();\n\n    if (loadables) {\n      this.addResources(loadables);\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    this._engine = engine;\n    this.canvas.width = this._engine.canvas.width;\n    this.canvas.height = this._engine.canvas.height;\n  }\n\n  /**\n   * Add a resource to the loader to load\n   * @param loadable  Resource to add\n   */\n  public addResource(loadable: Loadable<any>) {\n    const key = this._index++;\n    this._resourceList.push(loadable);\n    this._progressCounts[key] = 0;\n    this._totalCounts[key] = 1;\n    this._resourceCount++;\n  }\n\n  /**\n   * Add a list of resources to the loader to load\n   * @param loadables  The list of resources to load\n   */\n  public addResources(loadables: Loadable<any>[]) {\n    let i = 0;\n    const len = loadables.length;\n\n    for (i; i < len; i++) {\n      this.addResource(loadables[i]);\n    }\n  }\n\n  /**\n   * Returns true if the loader has completely loaded all resources\n   */\n  public isLoaded() {\n    return this._numLoaded === this._resourceCount;\n  }\n\n  /**\n   * Shows the play button and returns a promise that resolves when clicked\n   */\n  public showPlayButton(): Promise<void> {\n    if (this.suppressPlayButton) {\n      return Promise.resolve();\n    } else {\n      this._playButtonShown = true;\n      this._playButton.style.display = 'block';\n      document.body.addEventListener('keyup', (evt: KeyboardEvent) => {\n        if (evt.key === 'Enter') {\n          this._playButton.click();\n        }\n      });\n      const promise = new Promise<void>((resolve) => {\n        const startButtonHandler = (e: Event) => {\n          // We want to stop propogation to keep bubbling to the engine pointer handlers\n          e.stopPropagation();\n          resolve();\n        };\n        this._playButton.addEventListener('click', startButtonHandler);\n        this._playButton.addEventListener('touchend', startButtonHandler);\n        this._playButton.addEventListener('pointerup', startButtonHandler);\n      });\n\n      return promise;\n    }\n  }\n\n  public hidePlayButton() {\n    this._playButtonShown = false;\n    this._playButton.style.display = 'none';\n  }\n\n  /**\n   * Clean up generated elements for the loader\n   */\n  public dispose() {\n    if (this._playButtonRootElement.parentElement) {\n      this._playButtonRootElement.removeChild(this._playButtonElement);\n      document.body.removeChild(this._playButtonRootElement);\n      document.head.removeChild(this._styleBlock);\n      this._playButtonRootElement = null;\n      this._playButtonElement = null;\n      this._styleBlock = null;\n    }\n  }\n\n  update(_engine: Engine, _delta: number): void {\n    // override me\n  }\n\n  data: Loadable<any>[];\n\n  /**\n   * Begin loading all of the supplied resources, returning a promise\n   * that resolves when loading of all is complete\n   */\n  public async load(): Promise<Loadable<any>[]> {\n    await Promise.all(\n      this._resourceList.map((r) =>\n        r.load().finally(() => {\n          // capture progress\n          this._numLoaded++;\n        })\n      )\n    );\n\n    // short delay in showing the button for aesthetics\n    await delay(200);\n    await this.showPlayButton();\n    // Unlock browser AudioContext in after user gesture\n    // See: https://github.com/excaliburjs/Excalibur/issues/262\n    // See: https://github.com/excaliburjs/Excalibur/issues/1031\n    await WebAudio.unlock();\n    this.hidePlayButton();\n\n    return (this.data = this._resourceList);\n  }\n\n  public markResourceComplete(): void {\n    this._numLoaded++;\n  }\n\n  /**\n   * Returns the progess of the loader as a number between [0, 1] inclusive.\n   */\n  public get progress(): number {\n    return this._resourceCount > 0 ? clamp(this._numLoaded, 0, this._resourceCount) / this._resourceCount : 1;\n  }\n\n  /**\n   * Loader draw function. Draws the default Excalibur loading screen.\n   * Override `logo`, `logoWidth`, `logoHeight` and `backgroundColor` properties\n   * to customize the drawing, or just override entire method.\n   */\n  public draw(ctx: CanvasRenderingContext2D) {\n    const canvasHeight = this._engine.canvasHeight / this._engine.pixelRatio;\n    const canvasWidth = this._engine.canvasWidth / this._engine.pixelRatio;\n\n    if (this._playButtonRootElement) {\n      const left = this._engine.canvas.offsetLeft;\n      const top = this._engine.canvas.offsetTop;\n      const buttonWidth = this._playButton.clientWidth;\n      const buttonHeight = this._playButton.clientHeight;\n      if (this.playButtonPosition) {\n        this._playButtonRootElement.style.left = `${this.playButtonPosition.x}px`;\n        this._playButtonRootElement.style.top = `${this.playButtonPosition.y}px`;\n      } else {\n        this._playButtonRootElement.style.left = `${left + canvasWidth / 2 - buttonWidth / 2}px`;\n        this._playButtonRootElement.style.top = `${top + canvasHeight / 2 - buttonHeight / 2 + 100}px`;\n      }\n    }\n\n    ctx.fillStyle = this.backgroundColor;\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n\n    let logoY = canvasHeight / 2;\n    const width = Math.min(this.logoWidth, canvasWidth * 0.75);\n    let logoX = canvasWidth / 2 - width / 2;\n\n    if (this.logoPosition) {\n      logoX = this.logoPosition.x;\n      logoY = this.logoPosition.y;\n    }\n\n    const imageHeight = Math.floor(width * (this.logoHeight / this.logoWidth)); // OG height/width factor\n    const oldAntialias = this._engine.getAntialiasing();\n    this._engine.setAntialiasing(true);\n    if (!this.logoPosition) {\n      ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY - imageHeight - 20, width, imageHeight);\n    } else {\n      ctx.drawImage(this._image, 0, 0, this.logoWidth, this.logoHeight, logoX, logoY, width, imageHeight);\n    }\n\n    // loading box\n    if (!this.suppressPlayButton && this._playButtonShown) {\n      this._engine.setAntialiasing(oldAntialias);\n      return;\n    }\n\n    let loadingX = logoX;\n    let loadingY = logoY;\n    if (this.loadingBarPosition) {\n      loadingX = this.loadingBarPosition.x;\n      loadingY = this.loadingBarPosition.y;\n    }\n\n    ctx.lineWidth = 2;\n    DrawUtil.roundRect(ctx, loadingX, loadingY, width, 20, 10, this.loadingBarColor);\n    const progress = width * this.progress;\n    const margin = 5;\n    const progressWidth = progress - margin * 2;\n    const height = 20 - margin * 2;\n    DrawUtil.roundRect(\n      ctx,\n      loadingX + margin,\n      loadingY + margin,\n      progressWidth > 10 ? progressWidth : 10,\n      height,\n      5,\n      null,\n      this.loadingBarColor\n    );\n    this._engine.setAntialiasing(oldAntialias);\n  }\n}\n","export default \"data:image/png;base64,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\"","import { Logger } from './Log';\n/**\n * This is the list of features that will be used to log the supported\n * features to the console when Detector.logBrowserFeatures() is called.\n */\n\nconst REPORTED_FEATURES: { [key: string]: string } = {\n  webgl: 'WebGL',\n  webaudio: 'WebAudio',\n  gamepadapi: 'Gamepad API'\n};\n\n/**\n * Interface for detected browser features matrix\n */\nexport interface DetectedFeatures {\n  readonly canvas: boolean;\n  readonly arraybuffer: boolean;\n  readonly dataurl: boolean;\n  readonly objecturl: boolean;\n  readonly rgba: boolean;\n  readonly webaudio: boolean;\n  readonly webgl: boolean;\n  readonly gamepadapi: boolean;\n}\n\ninterface CriticalTests {\n  canvasSupport(): boolean;\n  arrayBufferSupport(): boolean;\n  dataUrlSupport(): boolean;\n  objectUrlSupport(): boolean;\n  rgbaSupport(): boolean;\n}\n\ninterface WarningTests {\n  webAudioSupport(): boolean;\n  webglSupport(): boolean;\n}\n\n/**\n * Excalibur internal feature detection helper class\n */\nexport class Detector {\n  private _features: DetectedFeatures = null;\n\n  public failedTests: string[] = [];\n\n  public constructor() {\n    this._features = this._loadBrowserFeatures();\n  }\n\n  /**\n   * Returns a map of currently supported browser features. This method\n   * treats the features as a singleton and will only calculate feature\n   * support if it has not previously been done.\n   */\n  public getBrowserFeatures(): DetectedFeatures {\n    if (this._features === null) {\n      this._features = this._loadBrowserFeatures();\n    }\n    return this._features;\n  }\n\n  /**\n   * Report on non-critical browser support for debugging purposes.\n   * Use native browser console colors for visibility.\n   */\n  public logBrowserFeatures(): void {\n    let msg = '%cSUPPORTED BROWSER FEATURES\\n==========================%c\\n';\n    const args = ['font-weight: bold; color: navy', 'font-weight: normal; color: inherit'];\n\n    const supported: any = this.getBrowserFeatures();\n    for (const feature of Object.keys(REPORTED_FEATURES)) {\n      if (supported[feature]) {\n        msg += '(%c\\u2713%c)'; // (✓)\n        args.push('font-weight: bold; color: green');\n        args.push('font-weight: normal; color: inherit');\n      } else {\n        msg += '(%c\\u2717%c)'; // (✗)\n        args.push('font-weight: bold; color: red');\n        args.push('font-weight: normal; color: inherit');\n      }\n\n      msg += ' ' + REPORTED_FEATURES[feature] + '\\n';\n    }\n\n    args.unshift(msg);\n    // eslint-disable-next-line no-console\n    console.log.apply(console, args);\n  }\n\n  /**\n   * Executes several IIFE's to get a constant reference to supported\n   * features within the current execution context.\n   */\n  private _loadBrowserFeatures(): DetectedFeatures {\n    return {\n      // IIFE to check canvas support\n      canvas: (() => {\n        return this._criticalTests.canvasSupport();\n      })(),\n\n      // IIFE to check arraybuffer support\n      arraybuffer: (() => {\n        return this._criticalTests.arrayBufferSupport();\n      })(),\n\n      // IIFE to check dataurl support\n      dataurl: (() => {\n        return this._criticalTests.dataUrlSupport();\n      })(),\n\n      // IIFE to check objecturl support\n      objecturl: (() => {\n        return this._criticalTests.objectUrlSupport();\n      })(),\n\n      // IIFE to check rgba support\n      rgba: (() => {\n        return this._criticalTests.rgbaSupport();\n      })(),\n\n      // IIFE to check webaudio support\n      webaudio: (() => {\n        return this._warningTest.webAudioSupport();\n      })(),\n\n      // IIFE to check webgl support\n      webgl: (() => {\n        return this._warningTest.webglSupport();\n      })(),\n\n      // IIFE to check gamepadapi support\n      gamepadapi: (() => {\n        return !!(<any>navigator).getGamepads;\n      })()\n    };\n  }\n\n  // critical browser features required for ex to run\n  private _criticalTests: CriticalTests = {\n    // Test canvas/2d context support\n    canvasSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('2d'));\n    },\n\n    // Test array buffer support ex uses for downloading binary data\n    arrayBufferSupport: function() {\n      const xhr = new XMLHttpRequest();\n      xhr.open('GET', '/');\n      try {\n        xhr.responseType = 'arraybuffer';\n      } catch (e) {\n        return false;\n      }\n      return xhr.responseType === 'arraybuffer';\n    },\n\n    // Test data urls ex uses for sprites\n    dataUrlSupport: function() {\n      const canvas = document.createElement('canvas');\n      return canvas.toDataURL('image/png').indexOf('data:image/png') === 0;\n    },\n\n    // Test object url support for loading\n    objectUrlSupport: function() {\n      return 'URL' in window && 'revokeObjectURL' in URL && 'createObjectURL' in URL;\n    },\n\n    // RGBA support for colors\n    rgbaSupport: function() {\n      const style = document.createElement('a').style;\n      style.cssText = 'background-color:rgba(150,255,150,.5)';\n      return ('' + style.backgroundColor).indexOf('rgba') > -1;\n    }\n  };\n\n  // warnings excalibur performance will be degraded\n  private _warningTest: WarningTests = {\n    webAudioSupport: function() {\n      return !!(\n        (<any>window).AudioContext ||\n        (<any>window).webkitAudioContext ||\n        (<any>window).mozAudioContext ||\n        (<any>window).msAudioContext ||\n        (<any>window).oAudioContext\n      );\n    },\n    webglSupport: function() {\n      const elem = document.createElement('canvas');\n      return !!(elem.getContext && elem.getContext('webgl'));\n    }\n  };\n\n  public test(): boolean {\n    // Critical test will for ex not to run\n    let failedCritical = false;\n    for (const test in this._criticalTests) {\n      if (!this._criticalTests[<keyof CriticalTests>test].call(this)) {\n        this.failedTests.push(test);\n        Logger.getInstance().error('Critical browser feature missing, Excalibur requires:', test);\n        failedCritical = true;\n      }\n    }\n    if (failedCritical) {\n      return false;\n    }\n\n    // Warning tests do not for ex to return false to compatibility\n    for (const warning in this._warningTest) {\n      if (!this._warningTest[<keyof WarningTests>warning]()) {\n        Logger.getInstance().warn('Warning browser feature missing, Excalibur will have reduced performance:', warning);\n      }\n    }\n\n    return true;\n  }\n}\n","import { Vector } from './Algebra';\nimport { Engine } from './Engine';\nimport { Actor, ActorArgs } from './Actor';\nimport * as Traits from './Traits/Index';\nimport { CollisionType } from './Collision/CollisionType';\nimport { Shape } from './Collision/Shape';\nimport { CoordPlane, TransformComponent } from './EntityComponentSystem/Components/TransformComponent';\n\n/**\n * Helper [[Actor]] primitive for drawing UI's, optimized for UI drawing. Does\n * not participate in collisions. Drawn on top of all other actors.\n */\nexport class ScreenElement extends Actor {\n  protected _engine: Engine;\n\n  constructor();\n  constructor(xOrConfig?: number, y?: number, width?: number, height?: number);\n  constructor(config?: ActorArgs);\n  /**\n   * @param xOrConfig  The starting x coordinate of the actor or the actor option bag\n   * @param y       The starting y coordinate of the actor\n   * @param width   The starting width of the actor\n   * @param height  The starting height of the actor\n   */\n  constructor(xOrConfig?: number | ActorArgs, y?: number, width?: number, height?: number) {\n    if (typeof xOrConfig !== 'object') {\n      super(<number>xOrConfig, y, width, height);\n    } else {\n      super(<ActorArgs>xOrConfig);\n    }\n    this.get(TransformComponent).coordPlane = CoordPlane.Screen;\n    this.traits = [];\n    this.traits.push(new Traits.CapturePointer());\n    this.anchor = Vector.Zero;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.body.collider.shape = Shape.Box(this.width, this.height, this.anchor);\n    this.enableCapturePointer = true;\n  }\n\n  public _initialize(engine: Engine) {\n    this._engine = engine;\n    super._initialize(engine);\n  }\n\n  public contains(x: number, y: number, useWorld: boolean = true) {\n    if (useWorld) {\n      return super.contains(x, y);\n    }\n\n    const coords = this._engine.worldToScreenCoordinates(new Vector(x, y));\n    return super.contains(coords.x, coords.y);\n  }\n}\n","import { Scene } from './Scene';\n\nexport interface TimerOptions {\n  repeats?: boolean;\n  numberOfRepeats?: number;\n  fcn?: () => void;\n  interval: number;\n}\n\n/**\n * The Excalibur timer hooks into the internal timer and fires callbacks,\n * after a certain interval, optionally repeating.\n */\nexport class Timer {\n  public static id: number = 0;\n  public id: number = 0;\n  public interval: number = 10;\n  public repeats: boolean = false;\n  public maxNumberOfRepeats: number = -1;\n  private _elapsedTime: number = 0;\n  private _totalTimeAlive: number = 0;\n  private _paused: boolean = false;\n  private _numberOfTicks: number = 0;\n  private _callbacks: Array<() => void>;\n  public complete: boolean = false;\n  public scene: Scene = null;\n\n  /**\n   * @param options    Options - repeats, numberOfRepeats, fcn, interval\n   * @param repeats    Indicates whether this call back should be fired only once, or repeat after every interval as completed.\n   * @param numberOfRepeats Specifies a maximum number of times that this timer will execute.\n   * @param fcn        The callback to be fired after the interval is complete.\n   */\n  constructor(options: TimerOptions);\n  constructor(fcn: TimerOptions | (() => void), interval?: number, repeats?: boolean, numberOfRepeats?: number) {\n    if (typeof fcn !== 'function') {\n      const options = fcn;\n      fcn = options.fcn;\n      interval = options.interval;\n      repeats = options.repeats;\n      numberOfRepeats = options.numberOfRepeats;\n    }\n\n    if (!!numberOfRepeats && numberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = numberOfRepeats;\n      if (!repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.id = Timer.id++;\n    this.interval = interval || this.interval;\n    this.repeats = repeats || this.repeats;\n\n    this._callbacks = [];\n\n    if (fcn) {\n      this.on(fcn);\n    }\n  }\n\n  /**\n   * Adds a new callback to be fired after the interval is complete\n   * @param fcn The callback to be added to the callback list, to be fired after the interval is complete.\n   */\n  public on(fcn: () => void) {\n    this._callbacks.push(fcn);\n  }\n\n  /**\n   * Removes a callback from the callback list to be fired after the interval is complete.\n   * @param fcn The callback to be removed from the callback list, to be fired after the interval is complete.\n   */\n  public off(fcn: () => void) {\n    const index = this._callbacks.indexOf(fcn);\n    this._callbacks.splice(index, 1);\n  }\n\n  /**\n   * Updates the timer after a certain number of milliseconds have elapsed. This is used internally by the engine.\n   * @param delta  Number of elapsed milliseconds since the last update.\n   */\n  public update(delta: number) {\n    if (!this._paused) {\n      this._totalTimeAlive += delta;\n      this._elapsedTime += delta;\n\n      if (this.maxNumberOfRepeats > -1 && this._numberOfTicks >= this.maxNumberOfRepeats) {\n        this.complete = true;\n      }\n\n      if (!this.complete && this._elapsedTime >= this.interval) {\n        this._callbacks.forEach((c) => {\n          c.call(this);\n        });\n\n        this._numberOfTicks++;\n        if (this.repeats) {\n          this._elapsedTime = 0;\n        } else {\n          this.complete = true;\n        }\n      }\n    }\n  }\n\n  /**\n   * Resets the timer so that it can be reused, and optionally reconfigure the timers interval.\n   * @param newInterval If specified, sets a new non-negative interval in milliseconds to refire the callback\n   * @param newNumberOfRepeats If specified, sets a new non-negative upper limit to the number of time this timer executes\n   */\n  public reset(newInterval?: number, newNumberOfRepeats?: number) {\n    if (!!newInterval && newInterval >= 0) {\n      this.interval = newInterval;\n    }\n\n    if (!!this.maxNumberOfRepeats && this.maxNumberOfRepeats >= 0) {\n      this.maxNumberOfRepeats = newNumberOfRepeats;\n      if (!this.repeats) {\n        throw new Error('repeats must be set to true if numberOfRepeats is set');\n      }\n    }\n\n    this.complete = false;\n    this._elapsedTime = 0;\n    this._numberOfTicks = 0;\n  }\n\n  public get timesRepeated(): number {\n    return this._numberOfTicks;\n  }\n\n  public getTimeRunning(): number {\n    return this._totalTimeAlive;\n  }\n\n  /**\n   * Pauses the timer so that no more time will be incremented towards the next call\n   */\n  public pause() {\n    this._paused = true;\n  }\n\n  /**\n   * Unpauses the timer. Time will now increment towards the next call\n   */\n  public unpause() {\n    this._paused = false;\n  }\n\n  /**\n   * Cancels the timer, preventing any further executions.\n   */\n  public cancel() {\n    if (this.scene) {\n      this.scene.cancelTimer(this);\n    }\n  }\n}\n","import { Physics } from './../Physics';\nimport { BoundingBox } from './BoundingBox';\nimport { Body } from './Body';\n\nimport { Ray } from '../Algebra';\nimport { Logger } from '../Util/Log';\n\n/**\n * Dynamic Tree Node used for tracking bounds within the tree\n */\nexport class TreeNode {\n  public left: TreeNode;\n  public right: TreeNode;\n  public bounds: BoundingBox;\n  public height: number;\n  public body: Body;\n  constructor(public parent?: TreeNode) {\n    this.parent = parent || null;\n    this.body = null;\n    this.bounds = new BoundingBox();\n    this.left = null;\n    this.right = null;\n    this.height = 0;\n  }\n\n  public isLeaf(): boolean {\n    return !this.left && !this.right;\n  }\n}\n\n/**\n * The DynamicTrees provides a spatial partitioning data structure for quickly querying for overlapping bounding boxes for\n * all tracked bodies. The worst case performance of this is O(n*log(n)) where n is the number of bodies in the tree.\n *\n * Internally the bounding boxes are organized as a balanced binary tree of bounding boxes, where the leaf nodes are tracked bodies.\n * Every non-leaf node is a bounding box that contains child bounding boxes.\n */\nexport class DynamicTree {\n  public root: TreeNode;\n  public nodes: { [key: number]: TreeNode };\n  constructor(public worldBounds: BoundingBox = new BoundingBox(-Number.MAX_VALUE, -Number.MAX_VALUE, Number.MAX_VALUE, Number.MAX_VALUE)) {\n    this.root = null;\n    this.nodes = {};\n  }\n\n  /**\n   * Inserts a node into the dynamic tree\n   */\n  private _insert(leaf: TreeNode): void {\n    // If there are no nodes in the tree, make this the root leaf\n    if (this.root === null) {\n      this.root = leaf;\n      this.root.parent = null;\n      return;\n    }\n\n    // Search the tree for a node that is not a leaf and find the best place to insert\n    const leafAABB = leaf.bounds;\n    let currentRoot = this.root;\n    while (!currentRoot.isLeaf()) {\n      const left = currentRoot.left;\n      const right = currentRoot.right;\n\n      const area = currentRoot.bounds.getPerimeter();\n      const combinedAABB = currentRoot.bounds.combine(leafAABB);\n      const combinedArea = combinedAABB.getPerimeter();\n\n      // Calculate cost heuristic for creating a new parent and leaf\n      const cost = 2 * combinedArea;\n\n      // Minimum cost of pushing the leaf down the tree\n      const inheritanceCost = 2 * (combinedArea - area);\n\n      // Cost of descending\n      let leftCost = 0;\n      const leftCombined = leafAABB.combine(left.bounds);\n      let newArea;\n      let oldArea;\n      if (left.isLeaf()) {\n        leftCost = leftCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = left.bounds.getPerimeter();\n        newArea = leftCombined.getPerimeter();\n        leftCost = newArea - oldArea + inheritanceCost;\n      }\n\n      let rightCost = 0;\n      const rightCombined = leafAABB.combine(right.bounds);\n      if (right.isLeaf()) {\n        rightCost = rightCombined.getPerimeter() + inheritanceCost;\n      } else {\n        oldArea = right.bounds.getPerimeter();\n        newArea = rightCombined.getPerimeter();\n        rightCost = newArea - oldArea + inheritanceCost;\n      }\n\n      // cost is acceptable\n      if (cost < leftCost && cost < rightCost) {\n        break;\n      }\n\n      // Descend to the depths\n      if (leftCost < rightCost) {\n        currentRoot = left;\n      } else {\n        currentRoot = right;\n      }\n    }\n\n    // Create the new parent node and insert into the tree\n    const oldParent = currentRoot.parent;\n    const newParent = new TreeNode(oldParent);\n    newParent.bounds = leafAABB.combine(currentRoot.bounds);\n    newParent.height = currentRoot.height + 1;\n\n    if (oldParent !== null) {\n      // The sibling node was not the root\n      if (oldParent.left === currentRoot) {\n        oldParent.left = newParent;\n      } else {\n        oldParent.right = newParent;\n      }\n\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n    } else {\n      // The sibling node was the root\n      newParent.left = currentRoot;\n      newParent.right = leaf;\n\n      currentRoot.parent = newParent;\n      leaf.parent = newParent;\n      this.root = newParent;\n    }\n\n    // Walk up the tree fixing heights and AABBs\n    let currentNode = leaf.parent;\n    while (currentNode) {\n      currentNode = this._balance(currentNode);\n\n      if (!currentNode.left) {\n        throw new Error('Parent of current leaf cannot have a null left child' + currentNode);\n      }\n      if (!currentNode.right) {\n        throw new Error('Parent of current leaf cannot have a null right child' + currentNode);\n      }\n\n      currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n      currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n\n      currentNode = currentNode.parent;\n    }\n  }\n\n  /**\n   * Removes a node from the dynamic tree\n   */\n  private _remove(leaf: TreeNode) {\n    if (leaf === this.root) {\n      this.root = null;\n      return;\n    }\n\n    const parent = leaf.parent;\n    const grandParent = parent.parent;\n    let sibling: TreeNode;\n    if (parent.left === leaf) {\n      sibling = parent.right;\n    } else {\n      sibling = parent.left;\n    }\n\n    if (grandParent) {\n      if (grandParent.left === parent) {\n        grandParent.left = sibling;\n      } else {\n        grandParent.right = sibling;\n      }\n      sibling.parent = grandParent;\n\n      let currentNode = grandParent;\n      while (currentNode) {\n        currentNode = this._balance(currentNode);\n        currentNode.bounds = currentNode.left.bounds.combine(currentNode.right.bounds);\n        currentNode.height = 1 + Math.max(currentNode.left.height, currentNode.right.height);\n\n        currentNode = currentNode.parent;\n      }\n    } else {\n      this.root = sibling;\n      sibling.parent = null;\n    }\n  }\n\n  /**\n   * Tracks a body in the dynamic tree\n   */\n  public trackBody(body: Body) {\n    const node = new TreeNode();\n    node.body = body;\n    node.bounds = body.collider.bounds;\n    node.bounds.left -= 2;\n    node.bounds.top -= 2;\n    node.bounds.right += 2;\n    node.bounds.bottom += 2;\n    this.nodes[body.id] = node;\n    this._insert(node);\n  }\n\n  /**\n   * Updates the dynamic tree given the current bounds of each body being tracked\n   */\n  public updateBody(body: Body) {\n    const node = this.nodes[body.id];\n    if (!node) {\n      return false;\n    }\n    const b = body.collider.bounds;\n\n    // if the body is outside the world no longer update it\n    if (!this.worldBounds.contains(b)) {\n      Logger.getInstance().warn('Collider with id ' + body.id + ' is outside the world bounds and will no longer be tracked for physics');\n      this.untrackBody(body);\n      return false;\n    }\n\n    if (node.bounds.contains(b)) {\n      return false;\n    }\n\n    this._remove(node);\n    b.left -= Physics.boundsPadding;\n    b.top -= Physics.boundsPadding;\n    b.right += Physics.boundsPadding;\n    b.bottom += Physics.boundsPadding;\n\n    const multdx = body.vel.x * Physics.dynamicTreeVelocityMultiplier;\n    const multdy = body.vel.y * Physics.dynamicTreeVelocityMultiplier;\n\n    if (multdx < 0) {\n      b.left += multdx;\n    } else {\n      b.right += multdx;\n    }\n\n    if (multdy < 0) {\n      b.top += multdy;\n    } else {\n      b.bottom += multdy;\n    }\n\n    node.bounds = b;\n    this._insert(node);\n    return true;\n  }\n\n  /**\n   * Untracks a body from the dynamic tree\n   */\n  public untrackBody(body: Body) {\n    const node = this.nodes[body.collider.id];\n    if (!node) {\n      return;\n    }\n    this._remove(node);\n    this.nodes[body.collider.id] = null;\n    delete this.nodes[body.collider.id];\n  }\n\n  /**\n   * Balances the tree about a node\n   */\n  private _balance(node: TreeNode) {\n    if (node === null) {\n      throw new Error('Cannot balance at null node');\n    }\n\n    if (node.isLeaf() || node.height < 2) {\n      return node;\n    }\n\n    const left = node.left;\n    const right = node.right;\n\n    const a = node;\n    const b = left;\n    const c = right;\n    const d = left.left;\n    const e = left.right;\n    const f = right.left;\n    const g = right.right;\n\n    const balance = c.height - b.height;\n    // Rotate c node up\n    if (balance > 1) {\n      // Swap the right node with it's parent\n      c.left = a;\n      c.parent = a.parent;\n      a.parent = c;\n\n      // The original node's old parent should point to the right node\n      // this is mega confusing\n      if (c.parent) {\n        if (c.parent.left === a) {\n          c.parent.left = c;\n        } else {\n          c.parent.right = c;\n        }\n      } else {\n        this.root = c;\n      }\n\n      // Rotate\n      if (f.height > g.height) {\n        c.right = f;\n        a.right = g;\n        g.parent = a;\n\n        a.bounds = b.bounds.combine(g.bounds);\n        c.bounds = a.bounds.combine(f.bounds);\n\n        a.height = 1 + Math.max(b.height, g.height);\n        c.height = 1 + Math.max(a.height, f.height);\n      } else {\n        c.right = g;\n        a.right = f;\n        f.parent = a;\n\n        a.bounds = b.bounds.combine(f.bounds);\n        c.bounds = a.bounds.combine(g.bounds);\n\n        a.height = 1 + Math.max(b.height, f.height);\n        c.height = 1 + Math.max(a.height, g.height);\n      }\n\n      return c;\n    }\n    // Rotate left node up\n    if (balance < -1) {\n      // swap\n      b.left = a;\n      b.parent = a.parent;\n      a.parent = b;\n\n      // node's old parent should point to b\n      if (b.parent) {\n        if (b.parent.left === a) {\n          b.parent.left = b;\n        } else {\n          if (b.parent.right !== a) {\n            throw 'Error rotating Dynamic Tree';\n          }\n          b.parent.right = b;\n        }\n      } else {\n        this.root = b;\n      }\n\n      // rotate\n      if (d.height > e.height) {\n        b.right = d;\n        a.left = e;\n        e.parent = a;\n\n        a.bounds = c.bounds.combine(e.bounds);\n        b.bounds = a.bounds.combine(d.bounds);\n\n        a.height = 1 + Math.max(c.height, e.height);\n        b.height = 1 + Math.max(a.height, d.height);\n      } else {\n        b.right = e;\n        a.left = d;\n        d.parent = a;\n\n        a.bounds = c.bounds.combine(d.bounds);\n        b.bounds = a.bounds.combine(e.bounds);\n\n        a.height = 1 + Math.max(c.height, d.height);\n        b.height = 1 + Math.max(a.height, e.height);\n      }\n      return b;\n    }\n\n    return node;\n  }\n\n  /**\n   * Returns the internal height of the tree, shorter trees are better. Performance drops as the tree grows\n   */\n  public getHeight(): number {\n    if (this.root === null) {\n      return 0;\n    }\n    return this.root.height;\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be colliding with the provided body.\n   *\n   * In the query callback, it will be passed a potential collider. Returning true from this callback indicates\n   * that you are complete with your query and you do not want to continue. Returning false will continue searching\n   * the tree until all possible colliders have been returned.\n   */\n  public query(body: Body, callback: (other: Body) => boolean): void {\n    const bounds = body.collider.bounds;\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.intersect(bounds)) {\n        if (currentNode.isLeaf() && currentNode.body !== body) {\n          if (callback.call(body, currentNode.body)) {\n            return true;\n          }\n        } else {\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false;\n    };\n    helper(this.root);\n  }\n\n  /**\n   * Queries the Dynamic Axis Aligned Tree for bodies that could be intersecting. By default the raycast query uses an infinitely\n   * long ray to test the tree specified by `max`.\n   *\n   * In the query callback, it will be passed a potential body that intersects with the raycast. Returning true from this\n   * callback indicates that your are complete with your query and do not want to continue. Return false will continue searching\n   * the tree until all possible bodies that would intersect with the ray have been returned.\n   */\n  public rayCastQuery(ray: Ray, max: number = Infinity, callback: (other: Body) => boolean): void {\n    const helper = (currentNode: TreeNode): boolean => {\n      if (currentNode && currentNode.bounds.rayCast(ray, max)) {\n        if (currentNode.isLeaf()) {\n          if (callback.call(ray, currentNode.body)) {\n            // ray hit a leaf! return the body\n            return true;\n          }\n        } else {\n          // ray hit but not at a leaf, recurse deeper\n          return helper(currentNode.left) || helper(currentNode.right);\n        }\n      }\n      return false; // ray missed\n    };\n    helper(this.root);\n  }\n\n  public getNodes(): TreeNode[] {\n    const helper = (currentNode: TreeNode): TreeNode[] => {\n      if (currentNode) {\n        return [currentNode].concat(helper(currentNode.left), helper(currentNode.right));\n      } else {\n        return [];\n      }\n    };\n    return helper(this.root);\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    // draw all the nodes in the Dynamic Tree\n    const helper = (currentNode: TreeNode) => {\n      if (currentNode) {\n        if (currentNode.isLeaf()) {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'green';\n        } else {\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = 'white';\n        }\n        currentNode.bounds.debugDraw(ctx);\n\n        if (currentNode.left) {\n          helper(currentNode.left);\n        }\n        if (currentNode.right) {\n          helper(currentNode.right);\n        }\n      }\n    };\n\n    helper(this.root);\n  }\n}\n","import { Physics } from './../Physics';\nimport { CollisionBroadphase } from './CollisionResolver';\nimport { DynamicTree } from './DynamicTree';\nimport { Pair } from './Pair';\nimport { Body } from './Body';\n\nimport { Vector, Ray } from '../Algebra';\nimport { FrameStats } from '../Debug';\nimport { CollisionResolutionStrategy } from '../Physics';\nimport { Logger } from '../Util/Log';\nimport { CollisionStartEvent, CollisionEndEvent } from '../Events';\nimport { CollisionType } from './CollisionType';\nimport { Collider } from './Collider';\n\nexport class DynamicTreeCollisionBroadphase implements CollisionBroadphase {\n  private _dynamicCollisionTree = new DynamicTree();\n  private _collisionHash: { [key: string]: boolean } = {};\n  private _collisionPairCache: Pair[] = [];\n  private _lastFramePairs: Pair[] = [];\n  private _lastFramePairsHash: { [pairId: string]: Pair } = {};\n\n  /**\n   * Tracks a physics body for collisions\n   */\n  public track(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot track null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.trackBody(target);\n  }\n\n  /**\n   * Untracks a physics body\n   */\n  public untrack(target: Body): void {\n    if (!target) {\n      Logger.getInstance().warn('Cannot untrack a null physics body');\n      return;\n    }\n    this._dynamicCollisionTree.untrackBody(target);\n  }\n\n  private _shouldGenerateCollisionPair(colliderA: Collider, colliderB: Collider) {\n    // if the collision pair has been calculated already short circuit\n    const hash = Pair.calculatePairHash(colliderA, colliderB);\n    if (this._collisionHash[hash]) {\n      return false; // pair exists easy exit return false\n    }\n\n    return Pair.canCollide(colliderA, colliderB);\n  }\n\n  /**\n   * Detects potential collision pairs in a broadphase approach with the dynamic aabb tree strategy\n   */\n  public broadphase(targets: Body[], delta: number, stats?: FrameStats): Pair[] {\n    const seconds = delta / 1000;\n\n    // Retrieve the list of potential colliders, exclude killed, prevented, and self\n    const potentialColliders = targets\n      .map((t) => t.collider)\n      .filter((other) => {\n        return other.active && other.type !== CollisionType.PreventCollision;\n      });\n\n    // clear old list of collision pairs\n    this._collisionPairCache = [];\n    this._collisionHash = {};\n\n    // check for normal collision pairs\n    let collider: Collider;\n    for (let j = 0, l = potentialColliders.length; j < l; j++) {\n      collider = potentialColliders[j];\n\n      // Query the collision tree for potential colliders\n      this._dynamicCollisionTree.query(collider.body, (other: Body) => {\n        if (this._shouldGenerateCollisionPair(collider, other.collider)) {\n          const pair = new Pair(collider, other.collider);\n          this._collisionHash[pair.id] = true;\n          this._collisionPairCache.push(pair);\n        }\n        // Always return false, to query whole tree. Returning true in the query method stops searching\n        return false;\n      });\n    }\n    if (stats) {\n      stats.physics.pairs = this._collisionPairCache.length;\n    }\n\n    // Check dynamic tree for fast moving objects\n    // Fast moving objects are those moving at least there smallest bound per frame\n    if (Physics.checkForFastBodies) {\n      for (const collider of potentialColliders) {\n        // Skip non-active objects. Does not make sense on other collision types\n        if (collider.type !== CollisionType.Active) {\n          continue;\n        }\n\n        // Maximum travel distance next frame\n        const updateDistance =\n          collider.body.vel.size * seconds + // velocity term\n          collider.body.acc.size * 0.5 * seconds * seconds; // acc term\n\n        // Find the minimum dimension\n        const minDimension = Math.min(collider.bounds.height, collider.bounds.width);\n        if (Physics.disableMinimumSpeedForFastBody || updateDistance > minDimension / 2) {\n          if (stats) {\n            stats.physics.fastBodies++;\n          }\n\n          // start with the oldPos because the integration for actors has already happened\n          // objects resting on a surface may be slightly penetrating in the current position\n          const updateVec = collider.body.pos.sub(collider.body.oldPos);\n          const centerPoint = collider.shape.center;\n          const furthestPoint = collider.shape.getFurthestPoint(collider.body.vel);\n          const origin: Vector = furthestPoint.sub(updateVec);\n\n          const ray: Ray = new Ray(origin, collider.body.vel);\n\n          // back the ray up by -2x surfaceEpsilon to account for fast moving objects starting on the surface\n          ray.pos = ray.pos.add(ray.dir.scale(-2 * Physics.surfaceEpsilon));\n          let minBody: Body;\n          let minTranslate: Vector = new Vector(Infinity, Infinity);\n          this._dynamicCollisionTree.rayCastQuery(ray, updateDistance + Physics.surfaceEpsilon * 2, (other: Body) => {\n            if (collider.body !== other && other.collider.shape && Pair.canCollide(collider, other.collider)) {\n              const hitPoint = other.collider.shape.rayCast(ray, updateDistance + Physics.surfaceEpsilon * 10);\n              if (hitPoint) {\n                const translate = hitPoint.sub(origin);\n                if (translate.size < minTranslate.size) {\n                  minTranslate = translate;\n                  minBody = other;\n                }\n              }\n            }\n            return false;\n          });\n\n          if (minBody && Vector.isValid(minTranslate)) {\n            const pair = new Pair(collider, minBody.collider);\n            if (!this._collisionHash[pair.id]) {\n              this._collisionHash[pair.id] = true;\n              this._collisionPairCache.push(pair);\n            }\n            // move the fast moving object to the other body\n            // need to push into the surface by ex.Physics.surfaceEpsilon\n            const shift = centerPoint.sub(furthestPoint);\n            collider.body.pos = origin\n              .add(shift)\n              .add(minTranslate)\n              .add(ray.dir.scale(2 * Physics.surfaceEpsilon));\n            collider.shape.recalc();\n\n            if (stats) {\n              stats.physics.fastBodyCollisions++;\n            }\n          }\n        }\n      }\n    }\n    // return cache\n    return this._collisionPairCache;\n  }\n\n  /**\n   * Applies narrow phase on collision pairs to find actual area intersections\n   * Adds actual colliding pairs to stats' Frame data\n   */\n  public narrowphase(pairs: Pair[], stats?: FrameStats): Pair[] {\n    for (let i = 0; i < pairs.length; i++) {\n      pairs[i].collide();\n      if (stats && pairs[i].collision) {\n        stats.physics.collisions++;\n        stats.physics.collidersHash[pairs[i].id] = pairs[i];\n      }\n    }\n    return pairs.filter((p) => p.collision);\n  }\n\n  /**\n   * Perform collision resolution given a strategy (rigid body or box) and move objects out of intersect.\n   */\n  public resolve(pairs: Pair[], delta: number, strategy: CollisionResolutionStrategy): Pair[] {\n    for (const pair of pairs) {\n      pair.resolve(strategy);\n\n      if (pair.collision) {\n        pair.colliderA.body.applyMtv();\n        pair.colliderB.body.applyMtv();\n        // todo still don't like this, this is a small integration step to resolve narrowphase collisions\n        pair.colliderA.body.integrate(delta * Physics.collisionShift);\n        pair.colliderB.body.integrate(delta * Physics.collisionShift);\n      }\n    }\n\n    return pairs.filter((p) => p.canCollide);\n  }\n\n  public runCollisionStartEnd(pairs: Pair[]) {\n    const currentFrameHash: { [pairId: string]: Pair } = {};\n\n    for (const p of pairs) {\n      // load currentFrameHash\n      currentFrameHash[p.id] = p;\n\n      // find all new collisions\n      if (!this._lastFramePairsHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionstart', new CollisionStartEvent(actor1, actor2, p));\n        actor2.emit('collisionstart', new CollisionStartEvent(actor2, actor1, p));\n      }\n    }\n\n    // find all old collisions\n    for (const p of this._lastFramePairs) {\n      if (!currentFrameHash[p.id]) {\n        const actor1 = p.colliderA;\n        const actor2 = p.colliderB;\n        actor1.emit('collisionend', new CollisionEndEvent(actor1, actor2));\n        actor2.emit('collisionend', new CollisionEndEvent(actor2, actor1));\n      }\n    }\n\n    // reset the last frame cache\n    this._lastFramePairs = pairs;\n    this._lastFramePairsHash = currentFrameHash;\n  }\n\n  /**\n   * Update the dynamic tree positions\n   */\n  public update(targets: Body[]): number {\n    let updated = 0;\n    const len = targets.length;\n\n    for (let i = 0; i < len; i++) {\n      if (this._dynamicCollisionTree.updateBody(targets[i])) {\n        updated++;\n      }\n    }\n    return updated;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    if (Physics.broadphaseDebug) {\n      this._dynamicCollisionTree.debugDraw(ctx);\n    }\n\n    if (Physics.showContacts || Physics.showCollisionNormals) {\n      for (const pair of this._collisionPairCache) {\n        pair.debugDraw(ctx);\n      }\n    }\n  }\n}\n","import { Resource } from '../Resources/Resource';\nimport { Texture } from '../Resources/Texture';\nimport { Sprite } from './Sprite';\nimport { Loadable } from '../Interfaces/Index';\n\nexport class ImageSource implements Loadable<HTMLImageElement> {\n  private _resource: Resource<Blob>;\n\n  /**\n   * The original size of the source image in pixels\n   */\n  public get width() {\n    return this.image.naturalWidth;\n  }\n\n  /**\n   * The original height of the source image in pixels\n   */\n  public get height() {\n    return this.image.naturalHeight;\n  }\n\n  /**\n   * Returns true if the Texture is completely loaded and is ready\n   * to be drawn.\n   */\n  public isLoaded(): boolean {\n    return !!this.data.src;\n  }\n\n  /**\n   * Access to the underlying html image elmeent\n   */\n  public data: HTMLImageElement = new Image();\n  public get image(): HTMLImageElement {\n    return this.data;\n  }\n\n  /**\n   * Promise the resolves when the image is loaded and ready for use, does not initiate loading\n   */\n  public ready: Promise<HTMLImageElement>;\n  private _loadedResolve: (value?: HTMLImageElement | PromiseLike<HTMLImageElement>) => void;\n\n  /**\n   * The path to the image, can also be a data url like 'data:image/'\n   * @param path\n   */\n  constructor(public readonly path: string, bustCache: boolean = false) {\n    this._resource = new Resource(path, 'blob', bustCache);\n    this.ready = new Promise<HTMLImageElement>((resolve) => {\n      this._loadedResolve = resolve;\n    });\n  }\n\n  /**\n   * Begins loading the image and returns a promise that resolves when the image is loaded\n   */\n  async load(): Promise<HTMLImageElement> {\n    if (this.isLoaded()) {\n      return this.data;\n    }\n    try {\n      // Load base64 or blob if needed\n      let url: string;\n      if (!this.path.includes('data:image/')) {\n        const blob = await this._resource.load();\n        url = URL.createObjectURL(blob);\n      } else {\n        url = this.path;\n      }\n\n      // Decode the image\n      const image = new Image();\n      image.src = url;\n      await image.decode();\n\n      // Set results\n      this.data = image;\n    } catch {\n      await Promise.reject('Error loading texture');\n    }\n    // todo emit complete\n    this._loadedResolve(this.data);\n    return this.data;\n  }\n\n  /**\n   * Build a sprite from this ImageSource\n   */\n  public toSprite(): Sprite {\n    return Sprite.from(this);\n  }\n\n  /**\n   * Create a ImageSource from legacy texture\n   * @param tex\n   */\n  public static fromLegacyTexture(tex: Texture): ImageSource {\n    const image = new ImageSource(tex.path);\n    if (tex.isLoaded()) {\n      image.data = tex.data;\n    } else {\n      tex.loaded.then(() => {\n        image.data = tex.data;\n      });\n    }\n    return image;\n  }\n\n  /**\n   * Unload images from memory\n   */\n  unload(): void {\n    this.data = new Image();\n  }\n}\n","import { Graphic, GraphicOptions } from './Graphic';\nimport { ImageSource } from './ImageSource';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\n\nimport { Sprite as LegacySprite } from '../Drawing/Sprite';\nimport { Texture } from '../Resources/Texture';\n\nexport type SourceView = { x: number; y: number; width: number; height: number };\nexport type DestinationSize = { width: number; height: number };\n\nexport interface SpriteOptions {\n  /**\n   * Image to create a sprite from\n   */\n  image: ImageSource;\n  /**\n   * By default the source is the entire dimension of the [[ImageSource]]\n   */\n  sourceView?: { x: number; y: number; width: number; height: number };\n  /**\n   * By default the size of the final sprite is the size of the [[ImageSource]]\n   */\n  destSize?: { width: number; height: number };\n}\n\nexport class Sprite extends Graphic {\n  public image: ImageSource;\n  public sourceView: SourceView;\n  public destSize: DestinationSize;\n\n  public static from(image: ImageSource): Sprite {\n    return new Sprite({\n      image: image\n    });\n  }\n\n  constructor(options: GraphicOptions & SpriteOptions) {\n    super(options);\n    this.image = options.image;\n    this.sourceView = options.sourceView ?? { x: 0, y: 0, width: 0, height: 0 };\n    this.destSize = options.destSize ?? { width: 0, height: 0 };\n    this._updateSpriteDimensions();\n    this.image.ready.then(() => {\n      this._updateSpriteDimensions();\n    });\n  }\n\n  private _updateSpriteDimensions() {\n    const { width: nativeWidth, height: nativeHeight } = this.image;\n    // This code uses || to avoid 0's\n    // If the source is not specified, use the native dimension\n    this.sourceView.width = this.sourceView?.width || nativeWidth;\n    this.sourceView.height = this.sourceView?.height || nativeHeight;\n\n    // If the destination is not specified, use the source if specified, then native\n    this.destSize.width = this.destSize?.width || this.sourceView?.width || nativeWidth;\n    this.destSize.height = this.destSize?.height || this.sourceView?.height || nativeHeight;\n\n    this.width = Math.ceil(this.destSize.width);\n    this.height = Math.ceil(this.destSize.height);\n  }\n\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    if (this.image.isLoaded()) {\n      this._updateSpriteDimensions();\n    }\n    super._preDraw(ex, x, y);\n  }\n\n  public _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    if (this.image.isLoaded()) {\n      this._updateSpriteDimensions();\n      ex.drawImage(\n        this.image.image,\n        this.sourceView.x,\n        this.sourceView.y,\n        this.sourceView.width,\n        this.sourceView.height,\n        x,\n        y,\n        this.destSize.width,\n        this.destSize.height\n      );\n    }\n  }\n\n  /**\n   * Create a ImageSource from legacy texture\n   * @param sprite\n   */\n  public static fromLegacySprite(sprite: LegacySprite): Sprite {\n    const tex = sprite.texture;\n    const image = ImageSource.fromLegacyTexture(tex);\n    return new Sprite({\n      image,\n      sourceView: {\n        x: sprite.x,\n        y: sprite.y,\n        width: sprite.width,\n        height: sprite.height\n      }\n    });\n  }\n\n  public static toLegacySprite(sprite: Sprite): LegacySprite {\n    const image = sprite.image;\n    const tex = new Texture(image.path);\n    tex.data = image.image;\n\n    return new LegacySprite(tex, sprite.sourceView.x, sprite.sourceView.y, sprite.sourceView.width, sprite.sourceView.height);\n  }\n\n  public clone(): Sprite {\n    return new Sprite({\n      image: this.image,\n      sourceView: { ...this.sourceView },\n      destSize: { ...this.destSize },\n      ...this.cloneGraphicOptions()\n    });\n  }\n}\n","import { ImageSource } from './ImageSource';\nimport { Sprite } from './Sprite';\nimport { SpriteSheet as LegacySpriteSheet } from '../Drawing/SpriteSheet';\n\n\n/**\n * Specify sprite sheet spacing options, useful if your sprites are not tightly packed\n * and have space between them.\n */\nexport interface SpriteSheetSpacingDimensions {\n  /**\n   * The starting point to offset and start slicing the sprite sheet from the top left of the image.\n   * Default is (0, 0)\n   */\n  originOffset?: { x?: number, y?: number };\n\n  /**\n   * The margin between sprites.\n   * Default is (0, 0)\n   */\n  margin?: {x?: number, y?: number};\n}\n\n/**\n * Sprite sheet options for slicing up images\n */\nexport interface SpriteSheetGridOptions {\n  /**\n   * Source image to use for each sprite\n   */\n  image: ImageSource;\n  /**\n   * Grid definition for the sprite sheet\n   */\n  grid: {\n    /**\n     * Number of rows in the sprite sheet\n     */\n    rows: number;\n    /**\n     * Number of columns in the sprite sheet\n     */\n    columns: number;\n    /**\n     * Width of each individual sprite\n     */\n    spriteWidth: number;\n    /**\n     * Height of each individual sprite\n     */\n    spriteHeight: number;\n  };\n  /**\n   * Optionally specifiy any spacing information between sprites\n   */\n  spacing?: SpriteSheetSpacingDimensions;\n}\n\nexport interface SpriteSheetOptions {\n  sprites: Sprite[];\n}\n\n/**\n * Represents a collection of sprites from a source image\n */\nexport class SpriteSheet {\n  public readonly sprites: Sprite[] = [];\n\n  /**\n   * Build a new sprite sheet from a list of sprites\n   * @param options\n   */\n  constructor(options: SpriteSheetOptions) {\n    const { sprites } = options;\n    this.sprites = sprites;\n  }\n\n  /**\n   * To a graphics sprite sheet from a legacy sprite sheet\n   */\n  public static fromLegacySpriteSheet(legacySpriteSheet: LegacySpriteSheet): SpriteSheet {\n    const sprites = legacySpriteSheet.sprites.map(oldSprite => Sprite.fromLegacySprite(oldSprite));\n    return new SpriteSheet({\n      sprites\n    });\n  }\n\n  /**\n   * Parse a sprite sheet from grid options\n   * @param options\n   */\n  public static fromGrid(options: SpriteSheetGridOptions): SpriteSheet {\n    const sprites: Sprite[] = [];\n    options.spacing = options.spacing ?? {};\n    const {\n      image,\n      grid: { rows, columns: cols, spriteWidth, spriteHeight },\n      spacing: { originOffset, margin }\n    } = options;\n    const offsetDefaults = { x: 0, y: 0, ...originOffset};\n    const marginDefaults = { x: 0, y: 0, ...margin};\n    for (let x = 0; x < cols; x++) {\n      for (let y = 0; y < rows; y++) {\n        sprites[x + y * cols] = new Sprite({\n          image: image,\n          sourceView: {\n            x: x * spriteWidth + marginDefaults.x * x + offsetDefaults.x,\n            y: y * spriteHeight + marginDefaults.y * y + offsetDefaults.y,\n            width: spriteWidth,\n            height: spriteHeight\n          },\n          destSize: { height: spriteHeight, width: spriteWidth }\n        });\n      }\n    }\n    return new SpriteSheet({\n      sprites: sprites\n    });\n  }\n}\n","import { Engine } from './Engine';\nimport { EasingFunction, EasingFunctions } from './Util/EasingFunctions';\nimport { Vector, vec } from './Algebra';\nimport { Actor } from './Actor';\nimport { removeItemFromArray } from './Util/Util';\nimport { CanUpdate, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { PreUpdateEvent, PostUpdateEvent, GameEvent, InitializeEvent } from './Events';\nimport { Class } from './Class';\nimport { BoundingBox } from './Collision/BoundingBox';\nimport { Logger } from './Util/Log';\nimport { ExcaliburGraphicsContext } from './Graphics/Context/ExcaliburGraphicsContext';\n\n/**\n * Interface that describes a custom camera strategy for tracking targets\n */\nexport interface CameraStrategy<T> {\n  /**\n   * Target of the camera strategy that will be passed to the action\n   */\n  target: T;\n\n  /**\n   * Camera strategies perform an action to calculate a new focus returned out of the strategy\n   * @param target The target object to apply this camera strategy (if any)\n   * @param camera The current camera implementation in excalibur running the game\n   * @param engine The current engine running the game\n   * @param delta The elapsed time in milliseconds since the last frame\n   */\n  action: (target: T, camera: Camera, engine: Engine, delta: number) => Vector;\n}\n\n/**\n * Container to house convenience strategy methods\n * @internal\n */\nexport class StrategyContainer {\n  constructor(public camera: Camera) {}\n\n  /**\n   * Creates and adds the [[LockCameraToActorStrategy]] on the current camera.\n   * @param actor The actor to lock the camera to\n   */\n  public lockToActor(actor: Actor) {\n    this.camera.addStrategy(new LockCameraToActorStrategy(actor));\n  }\n\n  /**\n   * Creates and adds the [[LockCameraToActorAxisStrategy]] on the current camera\n   * @param actor The actor to lock the camera to\n   * @param axis The axis to follow the actor on\n   */\n  public lockToActorAxis(actor: Actor, axis: Axis) {\n    this.camera.addStrategy(new LockCameraToActorAxisStrategy(actor, axis));\n  }\n\n  /**\n   * Creates and adds the [[ElasticToActorStrategy]] on the current camera\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param actor Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  public elasticToActor(actor: Actor, cameraElasticity: number, cameraFriction: number) {\n    this.camera.addStrategy(new ElasticToActorStrategy(actor, cameraElasticity, cameraFriction));\n  }\n\n  /**\n   * Creates and adds the [[RadiusAroundActorStrategy]] on the current camera\n   * @param actor Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  public radiusAroundActor(actor: Actor, radius: number) {\n    this.camera.addStrategy(new RadiusAroundActorStrategy(actor, radius));\n  }\n\n  /**\n   * Creates and adds the [[LimitCameraBoundsStrategy]] on the current camera\n   * @param box The bounding box to limit the camera to.\n   */\n  public limitCameraBounds(box: BoundingBox) {\n    this.camera.addStrategy(new LimitCameraBoundsStrategy(box));\n  }\n}\n\n/**\n * Camera axis enum\n */\nexport enum Axis {\n  X,\n  Y\n}\n\n/**\n * Lock a camera to the exact x/y position of an actor.\n */\nexport class LockCameraToActorStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor) {}\n  public action = (target: Actor, _cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    return center;\n  };\n}\n\n/**\n * Lock a camera to a specific axis around an actor.\n */\nexport class LockCameraToActorAxisStrategy implements CameraStrategy<Actor> {\n  constructor(public target: Actor, public axis: Axis) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const center = target.center;\n    const currentFocus = cam.getFocus();\n    if (this.axis === Axis.X) {\n      return new Vector(center.x, currentFocus.y);\n    } else {\n      return new Vector(currentFocus.x, center.y);\n    }\n  };\n}\n\n/**\n * Using [Hook's law](https://en.wikipedia.org/wiki/Hooke's_law), elastically move the camera towards the target actor.\n */\nexport class ElasticToActorStrategy implements CameraStrategy<Actor> {\n  /**\n   * If cameraElasticity < cameraFriction < 1.0, the behavior will be a dampened spring that will slowly end at the target without bouncing\n   * If cameraFriction < cameraElasticity < 1.0, the behavior will be an oscillating spring that will over\n   * correct and bounce around the target\n   *\n   * @param target Target actor to elastically follow\n   * @param cameraElasticity [0 - 1.0] The higher the elasticity the more force that will drive the camera towards the target\n   * @param cameraFriction [0 - 1.0] The higher the friction the more that the camera will resist motion towards the target\n   */\n  constructor(public target: Actor, public cameraElasticity: number, public cameraFriction: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    let focus = cam.getFocus();\n    let cameraVel = cam.vel.clone();\n\n    // Calculate the stretch vector, using the spring equation\n    // F = kX\n    // https://en.wikipedia.org/wiki/Hooke's_law\n    // Apply to the current camera velocity\n    const stretch = position.sub(focus).scale(this.cameraElasticity); // stretch is X\n    cameraVel = cameraVel.add(stretch);\n\n    // Calculate the friction (-1 to apply a force in the opposition of motion)\n    // Apply to the current camera velocity\n    const friction = cameraVel.scale(-1).scale(this.cameraFriction);\n    cameraVel = cameraVel.add(friction);\n\n    // Update position by velocity deltas\n    focus = focus.add(cameraVel);\n\n    return focus;\n  };\n}\n\nexport class RadiusAroundActorStrategy implements CameraStrategy<Actor> {\n  /**\n   *\n   * @param target Target actor to follow when it is \"radius\" pixels away\n   * @param radius Number of pixels away before the camera will follow\n   */\n  constructor(public target: Actor, public radius: number) {}\n  public action = (target: Actor, cam: Camera, _eng: Engine, _delta: number) => {\n    const position = target.center;\n    const focus = cam.getFocus();\n\n    const direction = position.sub(focus);\n    const distance = direction.size;\n    if (distance >= this.radius) {\n      const offset = distance - this.radius;\n      return focus.add(direction.normalize().scale(offset));\n    }\n    return focus;\n  };\n}\n\n/**\n * Prevent a camera from going beyond the given camera dimensions.\n */\nexport class LimitCameraBoundsStrategy implements CameraStrategy<BoundingBox> {\n  /**\n   * Useful for limiting the camera to a [[TileMap]]'s dimensions, or a specific area inside the map.\n   *\n   * Note that this strategy does not perform any movement by itself.\n   * It only sets the camera position to within the given bounds when the camera has gone beyond them.\n   * Thus, it is a good idea to combine it with other camera strategies and set this strategy as the last one.\n   *\n   * Make sure that the camera bounds are at least as large as the viewport size.\n   *\n   * @param target The bounding box to limit the camera to\n   */\n\n  boundSizeChecked: boolean = false; // Check and warn only once\n\n  constructor(public target: BoundingBox) {}\n\n  public action = (target: BoundingBox, cam: Camera, _eng: Engine, _delta: number) => {\n    const focus = cam.getFocus();\n\n    if (!this.boundSizeChecked) {\n      if (target.bottom - target.top < _eng.drawHeight || target.right - target.left < _eng.drawWidth) {\n        Logger.getInstance().warn('Camera bounds should not be smaller than the engine viewport');\n      }\n      this.boundSizeChecked = true;\n    }\n\n    let focusX = focus.x;\n    let focusY = focus.y;\n    if (focus.x < target.left + _eng.halfDrawWidth) {\n      focusX = target.left + _eng.halfDrawWidth;\n    } else if (focus.x > target.right - _eng.halfDrawWidth) {\n      focusX = target.right - _eng.halfDrawWidth;\n    }\n\n    if (focus.y < target.top + _eng.halfDrawHeight) {\n      focusY = target.top + _eng.halfDrawHeight;\n    } else if (focus.y > target.bottom - _eng.halfDrawHeight) {\n      focusY = target.bottom - _eng.halfDrawHeight;\n    }\n\n    return vec(focusX, focusY);\n  };\n}\n\n/**\n * Cameras\n *\n * [[Camera]] is the base class for all Excalibur cameras. Cameras are used\n * to move around your game and set focus. They are used to determine\n * what is \"off screen\" and can be used to scale the game.\n *\n */\nexport class Camera extends Class implements CanUpdate, CanInitialize {\n  protected _follow: Actor;\n\n  private _cameraStrategies: CameraStrategy<any>[] = [];\n\n  public strategy: StrategyContainer = new StrategyContainer(this);\n\n  /**\n   * Get or set current zoom of the camera, defaults to 1\n   */\n  private _z = 1;\n  public get zoom(): number {\n    return this._z;\n  }\n\n  public set zoom(val: number) {\n    this._z = val;\n    if (this._engine) {\n      this._halfWidth = this._engine.halfDrawWidth;\n      this._halfHeight = this._engine.halfDrawHeight;\n    }\n  }\n  /**\n   * Get or set rate of change in zoom, defaults to 0\n   */\n  public dz: number = 0;\n  /**\n   * Get or set zoom acceleration\n   */\n  public az: number = 0;\n\n  /**\n   * Current rotation of the camera\n   */\n  public rotation: number = 0;\n\n  /**\n   * Current angular velocity\n   */\n  public rx: number = 0;\n\n  /**\n   * Get or set the camera's angular velocity\n   */\n  public get angularVelocity(): number {\n    return this.rx;\n  }\n\n  public set angularVelocity(value: number) {\n    this.rx = value;\n  }\n\n  /**\n   * Get or set the camera's position\n   */\n  public pos: Vector = Vector.Zero;\n\n  /**\n   * Get or set the camera's velocity\n   */\n  public vel: Vector = Vector.Zero;\n\n  /**\n   * GEt or set the camera's acceleration\n   */\n  public acc: Vector = Vector.Zero;\n\n  private _cameraMoving: boolean = false;\n  private _currentLerpTime: number = 0;\n  private _lerpDuration: number = 1000; // 1 second\n  private _lerpStart: Vector = null;\n  private _lerpEnd: Vector = null;\n  private _lerpResolve: (value: Vector) => void;\n  private _lerpPromise: Promise<Vector>;\n\n  //camera effects\n  protected _isShaking: boolean = false;\n  private _shakeMagnitudeX: number = 0;\n  private _shakeMagnitudeY: number = 0;\n  private _shakeDuration: number = 0;\n  private _elapsedShakeTime: number = 0;\n  private _xShake: number = 0;\n  private _yShake: number = 0;\n\n  protected _isZooming: boolean = false;\n  private _zoomStart: number = 1;\n  private _zoomEnd: number = 1;\n  private _currentZoomTime: number = 0;\n  private _zoomDuration: number = 0;\n\n  private _zoomResolve: (val: boolean) => void;\n  private _zoomPromise: Promise<boolean>;\n  private _zoomEasing: EasingFunction = EasingFunctions.EaseInOutCubic;\n  private _easing: EasingFunction = EasingFunctions.EaseInOutCubic;\n\n  private _halfWidth: number = 0;\n  private _halfHeight: number = 0;\n\n  /**\n   * Get the camera's x position\n   */\n  public get x() {\n    return this.pos.x;\n  }\n\n  /**\n   * Set the camera's x position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set x(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos = vec(value, this.pos.y);\n    }\n  }\n\n  /**\n   * Get the camera's y position\n   */\n  public get y() {\n    return this.pos.y;\n  }\n\n  /**\n   * Set the camera's y position (cannot be set when following an [[Actor]] or when moving)\n   */\n  public set y(value: number) {\n    if (!this._follow && !this._cameraMoving) {\n      this.pos = vec(this.pos.x, value);\n    }\n  }\n\n  /**\n   * Get or set the camera's x velocity\n   */\n  public get dx() {\n    return this.vel.x;\n  }\n\n  public set dx(value: number) {\n    this.vel = vec(value, this.vel.y);\n  }\n\n  /**\n   * Get or set the camera's y velocity\n   */\n  public get dy() {\n    return this.vel.y;\n  }\n\n  public set dy(value: number) {\n    this.vel = vec(this.vel.x, value);\n  }\n\n  /**\n   * Get or set the camera's x acceleration\n   */\n  public get ax() {\n    return this.acc.x;\n  }\n\n  public set ax(value: number) {\n    this.acc = vec(value, this.acc.y);\n  }\n\n  /**\n   * Get or set the camera's y acceleration\n   */\n  public get ay() {\n    return this.acc.y;\n  }\n\n  public set ay(value: number) {\n    this.acc = vec(this.acc.x, value);\n  }\n\n  /**\n   * Returns the focal point of the camera, a new point giving the x and y position of the camera\n   */\n  public getFocus() {\n    return this.pos;\n  }\n\n  /**\n   * This moves the camera focal point to the specified position using specified easing function. Cannot move when following an Actor.\n   *\n   * @param pos The target position to move to\n   * @param duration The duration in milliseconds the move should last\n   * @param [easingFn] An optional easing function ([[ex.EasingFunctions.EaseInOutCubic]] by default)\n   * @returns A [[Promise]] that resolves when movement is finished, including if it's interrupted.\n   *          The [[Promise]] value is the [[Vector]] of the target position. It will be rejected if a move cannot be made.\n   */\n  public move(pos: Vector, duration: number, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): Promise<Vector> {\n    if (typeof easingFn !== 'function') {\n      throw 'Please specify an EasingFunction';\n    }\n\n    // cannot move when following an actor\n    if (this._follow) {\n      return Promise.reject(pos);\n    }\n\n    // resolve existing promise, if any\n    if (this._lerpPromise && this._lerpResolve) {\n      this._lerpResolve(pos);\n    }\n\n    this._lerpPromise = new Promise<Vector>((resolve) => {\n      this._lerpResolve = resolve;\n    });\n    this._lerpStart = this.getFocus().clone();\n    this._lerpDuration = duration;\n    this._lerpEnd = pos;\n    this._currentLerpTime = 0;\n    this._cameraMoving = true;\n    this._easing = easingFn;\n\n    return this._lerpPromise;\n  }\n\n  /**\n   * Sets the camera to shake at the specified magnitudes for the specified duration\n   * @param magnitudeX  The x magnitude of the shake\n   * @param magnitudeY  The y magnitude of the shake\n   * @param duration    The duration of the shake in milliseconds\n   */\n  public shake(magnitudeX: number, magnitudeY: number, duration: number) {\n    this._isShaking = true;\n    this._shakeMagnitudeX = magnitudeX;\n    this._shakeMagnitudeY = magnitudeY;\n    this._shakeDuration = duration;\n  }\n\n  /**\n   * Zooms the camera in or out by the specified scale over the specified duration.\n   * If no duration is specified, it take effect immediately.\n   * @param scale    The scale of the zoom\n   * @param duration The duration of the zoom in milliseconds\n   */\n  public zoomOverTime(scale: number, duration: number = 0, easingFn: EasingFunction = EasingFunctions.EaseInOutCubic): Promise<boolean> {\n    this._zoomPromise = new Promise<boolean>((resolve) => {\n      this._zoomResolve = resolve;\n    });\n\n    if (duration) {\n      this._isZooming = true;\n      this._zoomEasing = easingFn;\n      this._currentZoomTime = 0;\n      this._zoomDuration = duration;\n      this._zoomStart = this.zoom;\n      this._zoomEnd = scale;\n    } else {\n      this._isZooming = false;\n      this.zoom = scale;\n      return Promise.resolve(true);\n    }\n\n    return this._zoomPromise;\n  }\n\n  private _viewport: BoundingBox = null;\n  /**\n   * Gets the bounding box of the viewport of this camera in world coordinates\n   */\n  public get viewport(): BoundingBox {\n    if (this._viewport) {\n      return this._viewport;\n    }\n\n    return new BoundingBox(0, 0, 0, 0);\n  }\n\n  /**\n   * Adds a new camera strategy to this camera\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public addStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    this._cameraStrategies.push(cameraStrategy);\n  }\n\n  /**\n   * Removes a camera strategy by reference\n   * @param cameraStrategy Instance of an [[CameraStrategy]]\n   */\n  public removeStrategy<T>(cameraStrategy: CameraStrategy<T>) {\n    removeItemFromArray(cameraStrategy, this._cameraStrategies);\n  }\n\n  /**\n   * Clears all camera strategies from the camera\n   */\n  public clearAllStrategies() {\n    this._cameraStrategies.length = 0;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(engine, delta, this));\n    this.onPreUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(engine, delta, this));\n    this.onPostUpdate(engine, delta);\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // Overridable\n  }\n\n  private _engine: Engine;\n  private _isInitialized = false;\n  public get isInitialized() {\n    return this._isInitialized;\n  }\n\n  public _initialize(_engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(_engine);\n      super.emit('initialize', new InitializeEvent(_engine, this));\n      this._isInitialized = true;\n      this._engine = _engine;\n      this._halfWidth = this._engine.halfDrawWidth;\n      this._halfHeight = this._engine.halfDrawHeight;\n    }\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onInitialize(_engine: Engine) {\n    // Overridable\n  }\n\n  public on(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public on(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public on(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public on(eventName: any, handler: any) {\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: 'initialize', handler?: (event: InitializeEvent) => void): void;\n  public off(eventName: 'preupdate', handler?: (event: PreUpdateEvent) => void): void;\n  public off(eventName: 'postupdate', handler?: (event: PostUpdateEvent) => void): void;\n  public off(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public off(eventName: string, handler: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  public once(eventName: 'initialize', handler: (event: InitializeEvent) => void): void;\n  public once(eventName: 'preupdate', handler: (event: PreUpdateEvent) => void): void;\n  public once(eventName: 'postupdate', handler: (event: PostUpdateEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<Camera>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public update(_engine: Engine, delta: number) {\n    this._initialize(_engine);\n    this._preupdate(_engine, delta);\n\n    // Update placements based on linear algebra\n    this.pos = this.pos.add(this.vel.scale(delta / 1000));\n    this.zoom += (this.dz * delta) / 1000;\n\n    this.vel = this.vel.add(this.acc.scale(delta / 1000));\n    this.dz += (this.az * delta) / 1000;\n\n    this.rotation += (this.angularVelocity * delta) / 1000;\n\n    if (this._isZooming) {\n      if (this._currentZoomTime < this._zoomDuration) {\n        const zoomEasing = this._zoomEasing;\n        const newZoom = zoomEasing(this._currentZoomTime, this._zoomStart, this._zoomEnd, this._zoomDuration);\n\n        this.zoom = newZoom;\n        this._currentZoomTime += delta;\n      } else {\n        this._isZooming = false;\n        this.zoom = this._zoomEnd;\n        this._currentZoomTime = 0;\n        this._zoomResolve(true);\n      }\n    }\n\n    if (this._cameraMoving) {\n      if (this._currentLerpTime < this._lerpDuration) {\n        const moveEasing = EasingFunctions.CreateVectorEasingFunction(this._easing);\n\n        const lerpPoint = moveEasing(this._currentLerpTime, this._lerpStart, this._lerpEnd, this._lerpDuration);\n\n        this.pos = lerpPoint;\n\n        this._currentLerpTime += delta;\n      } else {\n        this.pos = this._lerpEnd;\n        const end = this._lerpEnd.clone();\n\n        this._lerpStart = null;\n        this._lerpEnd = null;\n        this._currentLerpTime = 0;\n        this._cameraMoving = false;\n        // Order matters here, resolve should be last so any chain promises have a clean slate\n        this._lerpResolve(end);\n      }\n    }\n\n    if (this._isDoneShaking()) {\n      this._isShaking = false;\n      this._elapsedShakeTime = 0;\n      this._shakeMagnitudeX = 0;\n      this._shakeMagnitudeY = 0;\n      this._shakeDuration = 0;\n      this._xShake = 0;\n      this._yShake = 0;\n    } else {\n      this._elapsedShakeTime += delta;\n      this._xShake = ((Math.random() * this._shakeMagnitudeX) | 0) + 1;\n      this._yShake = ((Math.random() * this._shakeMagnitudeY) | 0) + 1;\n    }\n\n    for (const s of this._cameraStrategies) {\n      this.pos = s.action.call(s, s.target, this, _engine, delta);\n    }\n\n    this._viewport = new BoundingBox(\n      this.x - this._halfWidth,\n      this.y - this._halfHeight,\n      this.x + this._halfWidth,\n      this.y + this._halfHeight\n    );\n\n    this._postupdate(_engine, delta);\n  }\n\n  /**\n   * Applies the relevant transformations to the game canvas to \"move\" or apply effects to the Camera\n   * @param ctx    Canvas context to apply transformations\n   */\n  public draw(ctx: CanvasRenderingContext2D): void;\n  public draw(ctx: ExcaliburGraphicsContext): void;\n  public draw(ctx: CanvasRenderingContext2D | ExcaliburGraphicsContext): void {\n    let canvasWidth = 0;\n    let canvasHeight = 0;\n    if (ctx instanceof CanvasRenderingContext2D) {\n      canvasWidth = ctx.canvas.width;\n      canvasHeight = ctx.canvas.height;\n    } else {\n      canvasWidth = ctx.width;\n      canvasHeight = ctx.height;\n    }\n    const focus = this.getFocus();\n    const pixelRatio = this._engine ? this._engine.pixelRatio : 1;\n    const zoom = this.zoom;\n\n    const newCanvasWidth = canvasWidth / zoom / pixelRatio;\n    const newCanvasHeight = canvasHeight / zoom / pixelRatio;\n\n    ctx.scale(zoom, zoom);\n    ctx.translate(-focus.x + newCanvasWidth / 2 + this._xShake, -focus.y + newCanvasHeight / 2 + this._yShake);\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const focus = this.getFocus();\n    ctx.fillStyle = 'red';\n    ctx.strokeStyle = 'white';\n    ctx.lineWidth = 3;\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 15, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.arc(focus.x, focus.y, 5, 0, Math.PI * 2);\n    ctx.closePath();\n    ctx.stroke();\n\n    ctx.beginPath();\n    ctx.setLineDash([5, 15]);\n    ctx.lineWidth = 5;\n    ctx.strokeStyle = 'white';\n    ctx.strokeRect(this.viewport.left, this.viewport.top, this.viewport.width, this.viewport.height);\n    ctx.closePath();\n  }\n\n  private _isDoneShaking(): boolean {\n    return !this._isShaking || this._elapsedShakeTime >= this._shakeDuration;\n  }\n}\n","import { BoundingBox } from './Collision/BoundingBox';\nimport { Color } from './Drawing/Color';\nimport { Engine } from './Engine';\nimport { vec, Vector } from './Algebra';\nimport { Actor } from './Actor';\nimport { Logger } from './Util/Log';\nimport { SpriteSheet } from './Drawing/SpriteSheet';\nimport * as Events from './Events';\nimport { Configurable } from './Configurable';\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { TransformComponent } from './EntityComponentSystem/Components/TransformComponent';\nimport { ExcaliburGraphicsContext, GraphicsComponent } from './Graphics';\nimport * as Graphics from './Graphics';\nimport { CanvasDrawComponent, Sprite } from './Drawing/Index';\nimport { Sprite as LegacySprite } from './Drawing/Index';\nimport { removeItemFromArray } from './Util/Util';\nimport { obsolete } from './Util/Decorators';\n\n/**\n * @hidden\n */\nexport class TileMapImpl extends Entity {\n  private _collidingX: number = -1;\n  private _collidingY: number = -1;\n  private _onScreenXStart: number = 0;\n  private _onScreenXEnd: number = 9999;\n  private _onScreenYStart: number = 0;\n  private _onScreenYEnd: number = 9999;\n  private _spriteSheets: { [key: string]: Graphics.SpriteSheet } = {};\n\n  private _legacySpriteMap = new Map<Graphics.Sprite, Sprite>();\n  public logger: Logger = Logger.getInstance();\n  public data: Cell[] = [];\n  public visible = true;\n  public isOffscreen = false;\n  public cellWidth: number;\n  public cellHeight: number;\n  public rows: number;\n  public cols: number;\n\n  private _transform: TransformComponent;\n\n  public get x(): number {\n    return this._transform.pos.x ?? 0;\n  }\n\n  public set x(val: number) {\n    if (this._transform?.pos) {\n      this.get(TransformComponent).pos = vec(val, this.y);\n    }\n  }\n\n  public get y(): number {\n    return this._transform?.pos.y ?? 0;\n  }\n\n  public set y(val: number) {\n    if (this._transform?.pos) {\n      this._transform.pos = vec(this.x, val);\n    }\n  }\n\n  public get z(): number {\n    return this._transform.z ?? 0;\n  }\n\n  public set z(val: number) {\n    if (this._transform?.z) {\n      this._transform.z = val;\n    }\n  }\n\n  public get rotation(): number {\n    return this._transform?.rotation ?? 0;\n  }\n\n  public set rotation(val: number) {\n    if (this._transform?.rotation) {\n      this._transform.rotation = val;\n    }\n  }\n\n  public get scale(): Vector {\n    return this._transform?.scale ?? Vector.One;\n  }\n  public set scale(val: Vector) {\n    if (this._transform?.scale) {\n      this._transform.scale = val;\n    }\n  }\n\n  public get pos(): Vector {\n    return this._transform.pos;\n  }\n\n  public set pos(val: Vector) {\n    this._transform.pos = val;\n  }\n\n  public on(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<TileMap>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<TileMap>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: Events.GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * @param xOrConfig     The x coordinate to anchor the TileMap's upper left corner (should not be changed once set) or TileMap option bag\n   * @param y             The y coordinate to anchor the TileMap's upper left corner (should not be changed once set)\n   * @param cellWidth     The individual width of each cell (in pixels) (should not be changed once set)\n   * @param cellHeight    The individual height of each cell (in pixels) (should not be changed once set)\n   * @param rows          The number of rows in the TileMap (should not be changed once set)\n   * @param cols          The number of cols in the TileMap (should not be changed once set)\n   */\n  constructor(xOrConfig: number | TileMapArgs, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number) {\n    super([\n      new TransformComponent(),\n      new GraphicsComponent({\n        onPostDraw: (ctx, delta) => this.draw(ctx, delta)\n      }),\n      new CanvasDrawComponent((ctx, delta) => this.draw(ctx, delta))\n    ]);\n\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      cellWidth = config.cellWidth;\n      cellHeight = config.cellHeight;\n      rows = config.rows;\n      cols = config.cols;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.cellWidth = cellWidth;\n    this.cellHeight = cellHeight;\n    this.rows = rows;\n    this.cols = cols;\n    this.data = new Array<Cell>(rows * cols);\n    for (let i = 0; i < cols; i++) {\n      for (let j = 0; j < rows; j++) {\n        (() => {\n          const cd = new Cell(i * cellWidth + <number>xOrConfig, j * cellHeight + y, cellWidth, cellHeight, i + j * cols);\n          this.data[i + j * cols] = cd;\n        })();\n      }\n    }\n    this._transform = this.get(TransformComponent);\n    this.get(GraphicsComponent).localBounds = new BoundingBox({\n      left: 0,\n      top: 0,\n      right: this.cols * this.cellWidth,\n      bottom: this.rows * this.cellHeight\n    });\n  }\n\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n  }\n\n  /**\n   *\n   * @param key\n   * @param spriteSheet\n   * @deprecated No longer used, will be removed in v0.26.0\n   */\n  public registerSpriteSheet(key: string, spriteSheet: SpriteSheet): void;\n  public registerSpriteSheet(key: string, spriteSheet: Graphics.SpriteSheet): void;\n  @obsolete({ message: 'No longer used, will be removed in v0.26.0' })\n  public registerSpriteSheet(key: string, spriteSheet: SpriteSheet | Graphics.SpriteSheet): void {\n    if (spriteSheet instanceof Graphics.SpriteSheet) {\n      this._spriteSheets[key] = spriteSheet;\n    } else {\n      this._spriteSheets[key] = Graphics.SpriteSheet.fromLegacySpriteSheet(spriteSheet);\n    }\n  }\n\n  /**\n   * Returns the intersection vector that can be used to resolve collisions with actors. If there\n   * is no collision null is returned.\n   */\n  public collides(actor: Actor): Vector {\n    const width = actor.pos.x + actor.width;\n    const height = actor.pos.y + actor.height;\n    const actorBounds = actor.body.collider.bounds;\n    const overlaps: Vector[] = [];\n    if (actor.width <= 0 || actor.height <= 0) {\n      return null;\n    }\n    // trace points for overlap\n    for (let x = actorBounds.left; x <= width; x += Math.min(actor.width / 2, this.cellWidth / 2)) {\n      for (let y = actorBounds.top; y <= height; y += Math.min(actor.height / 2, this.cellHeight / 2)) {\n        const cell = this.getCellByPoint(x, y);\n        if (cell && cell.solid) {\n          const overlap = actorBounds.intersect(cell.bounds);\n          const dir = actor.center.sub(cell.center);\n          if (overlap && overlap.dot(dir) > 0) {\n            overlaps.push(overlap);\n          }\n        }\n      }\n    }\n    if (overlaps.length === 0) {\n      return null;\n    }\n    // Return the smallest change other than zero\n    const result = overlaps.reduce((accum, next) => {\n      let x = accum.x;\n      let y = accum.y;\n      if (Math.abs(accum.x) < Math.abs(next.x)) {\n        x = next.x;\n      }\n      if (Math.abs(accum.y) < Math.abs(next.y)) {\n        y = next.y;\n      }\n      return new Vector(x, y);\n    });\n    return result;\n  }\n\n  /**\n   * Returns the [[Cell]] by index (row major order)\n   */\n  public getCellByIndex(index: number): Cell {\n    return this.data[index];\n  }\n  /**\n   * Returns the [[Cell]] by its x and y coordinates\n   */\n  public getCell(x: number, y: number): Cell {\n    if (x < 0 || y < 0 || x >= this.cols || y >= this.rows) {\n      return null;\n    }\n    return this.data[x + y * this.cols];\n  }\n  /**\n   * Returns the [[Cell]] by testing a point in global coordinates,\n   * returns `null` if no cell was found.\n   */\n  public getCellByPoint(x: number, y: number): Cell {\n    x = Math.floor((x - this.x) / this.cellWidth);\n    y = Math.floor((y - this.y) / this.cellHeight);\n    const cell = this.getCell(x, y);\n    if (x >= 0 && y >= 0 && x < this.cols && y < this.rows && cell) {\n      return cell;\n    }\n    return null;\n  }\n\n  public onPreUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  public onPostUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  public update(engine: Engine, delta: number) {\n    this.onPreUpdate(engine, delta);\n    this.emit('preupdate', new Events.PreUpdateEvent(engine, delta, this));\n\n    const worldBounds = engine.getWorldBounds();\n    const worldCoordsUpperLeft = vec(worldBounds.left, worldBounds.top);\n    const worldCoordsLowerRight = vec(worldBounds.right, worldBounds.bottom);\n\n    this._onScreenXStart = Math.max(Math.floor((worldCoordsUpperLeft.x - this.x) / this.cellWidth) - 2, 0);\n    this._onScreenYStart = Math.max(Math.floor((worldCoordsUpperLeft.y - this.y) / this.cellHeight) - 2, 0);\n    this._onScreenXEnd = Math.max(Math.floor((worldCoordsLowerRight.x - this.x) / this.cellWidth) + 2, 0);\n    this._onScreenYEnd = Math.max(Math.floor((worldCoordsLowerRight.y - this.y) / this.cellHeight) + 2, 0);\n    this._transform.pos = vec(this.x, this.y);\n\n    this.onPostUpdate(engine, delta);\n    this.emit('postupdate', new Events.PostUpdateEvent(engine, delta, this));\n  }\n\n  /**\n   * Draws the tile map to the screen. Called by the [[Scene]].\n   * @param ctx CanvasRenderingContext2D or ExcaliburGraphicsContext\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D | ExcaliburGraphicsContext, delta: number): void {\n    this.emit('predraw', new Events.PreDrawEvent(ctx as any, delta, this)); // TODO fix event\n\n    let x = this._onScreenXStart;\n    const xEnd = Math.min(this._onScreenXEnd, this.cols);\n    let y = this._onScreenYStart;\n    const yEnd = Math.min(this._onScreenYEnd, this.rows);\n\n    let sprites: Graphics.Sprite[], spriteIndex: number, cslen: number;\n\n    for (x; x < xEnd; x++) {\n      for (y; y < yEnd; y++) {\n        // get non-negative tile sprites\n        sprites = this.getCell(x, y).sprites;\n\n        for (spriteIndex = 0, cslen = sprites.length; spriteIndex < cslen; spriteIndex++) {\n          // draw sprite, warning if sprite doesn't exist\n          const sprite = sprites[spriteIndex];\n          if (sprite) {\n            if (!(ctx instanceof CanvasRenderingContext2D)) {\n              sprite.draw(ctx, x * this.cellWidth, y * this.cellHeight);\n            } else {\n              // TODO legacy drawing mode\n              if (!this._legacySpriteMap.has(sprite)) {\n                this._legacySpriteMap.set(sprite, Graphics.Sprite.toLegacySprite(sprite));\n              }\n              this._legacySpriteMap.get(sprite).draw(ctx, x * this.cellWidth, y * this.cellHeight);\n            }\n          }\n        }\n      }\n      y = this._onScreenYStart;\n    }\n\n    this.emit('postdraw', new Events.PostDrawEvent(ctx as any, delta, this));\n  }\n\n  /**\n   * Draws all the tile map's debug info. Called by the [[Scene]].\n   * @param ctx  The current rendering context\n   */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    const width = this.cols * this.cellWidth;\n    const height = this.rows * this.cellHeight;\n    ctx.save();\n    ctx.strokeStyle = Color.Red.toString();\n    for (let x = 0; x < this.cols + 1; x++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x + x * this.cellWidth, this.y);\n      ctx.lineTo(this.x + x * this.cellWidth, this.y + height);\n      ctx.stroke();\n    }\n    for (let y = 0; y < this.rows + 1; y++) {\n      ctx.beginPath();\n      ctx.moveTo(this.x, this.y + y * this.cellHeight);\n      ctx.lineTo(this.x + width, this.y + y * this.cellHeight);\n      ctx.stroke();\n    }\n    const solid = Color.Red;\n    solid.a = 0.3;\n    this.data\n      .filter(function (cell) {\n        return cell.solid;\n      })\n      .forEach(function (cell) {\n        ctx.fillStyle = solid.toString();\n        ctx.fillRect(cell.x, cell.y, cell.width, cell.height);\n      });\n    if (this._collidingY > -1 && this._collidingX > -1) {\n      ctx.fillStyle = Color.Cyan.toString();\n      ctx.fillRect(\n        this.x + this._collidingX * this.cellWidth,\n        this.y + this._collidingY * this.cellHeight,\n        this.cellWidth,\n        this.cellHeight\n      );\n    }\n    ctx.restore();\n  }\n}\n\nexport interface TileMapArgs extends Partial<TileMapImpl> {\n  x: number;\n  y: number;\n  cellWidth: number;\n  cellHeight: number;\n  rows: number;\n  cols: number;\n}\n\n/**\n * The [[TileMap]] class provides a lightweight way to do large complex scenes with collision\n * without the overhead of actors.\n */\nexport class TileMap extends Configurable(TileMapImpl) {\n  constructor(config: TileMapArgs);\n  constructor(x: number, y: number, cellWidth: number, cellHeight: number, rows: number, cols: number);\n  constructor(xOrConfig: number | TileMapArgs, y?: number, cellWidth?: number, cellHeight?: number, rows?: number, cols?: number) {\n    super(xOrConfig, y, cellWidth, cellHeight, rows, cols);\n  }\n}\n\n/**\n * @hidden\n */\nexport class CellImpl extends Entity {\n  private _bounds: BoundingBox;\n  public x: number;\n  public y: number;\n  public width: number;\n  public height: number;\n  public index: number;\n  public solid: boolean = false;\n  public sprites: Graphics.Sprite[] = [];\n\n  // public transform: TransformComponent;\n  // public graphics: GraphicsComponent;\n\n  /**\n   * @param xOrConfig Gets or sets x coordinate of the cell in world coordinates or cell option bag\n   * @param y       Gets or sets y coordinate of the cell in world coordinates\n   * @param width   Gets or sets the width of the cell\n   * @param height  Gets or sets the height of the cell\n   * @param index   The index of the cell in row major order\n   * @param solid   Gets or sets whether this cell is solid\n   * @param sprites The list of tile sprites to use to draw in this cell (in order)\n   */\n  constructor(\n    xOrConfig: number | CellArgs,\n    y: number,\n    width: number,\n    height: number,\n    index: number,\n    solid: boolean = false,\n    sprites: Graphics.Sprite[] = []\n  ) {\n    super();\n    if (xOrConfig && typeof xOrConfig === 'object') {\n      const config = xOrConfig;\n      xOrConfig = config.x;\n      y = config.y;\n      width = config.width;\n      height = config.height;\n      index = config.index;\n      solid = config.solid;\n      sprites = config.sprites;\n    }\n    this.x = <number>xOrConfig;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.index = index;\n    this.solid = solid;\n    this.sprites = sprites;\n    this._bounds = new BoundingBox(this.x, this.y, this.x + this.width, this.y + this.height);\n  }\n\n  public get bounds() {\n    return this._bounds;\n  }\n\n  public get center(): Vector {\n    return new Vector(this.x + this.width / 2, this.y + this.height / 2);\n  }\n\n  /**\n   * Add another [[Sprite]] to this cell\n   * @deprecated Use addSprite, will be removed in v0.26.0\n   */\n  @obsolete({ message: 'Will be removed in v0.26.0', alternateMethod: 'addSprite' })\n  public pushSprite(sprite: Graphics.Sprite | LegacySprite) {\n    this.addSprite(sprite);\n  }\n\n  /**\n   * Add another [[Sprite]] to this TileMap cell\n   * @param sprite\n   */\n  public addSprite(sprite: Graphics.Sprite | LegacySprite) {\n    if (sprite instanceof LegacySprite) {\n      this.sprites.push(Graphics.Sprite.fromLegacySprite(sprite));\n    } else {\n      this.sprites.push(sprite);\n    }\n  }\n\n  /**\n   * Remove an instance of [[Sprite]] from this cell\n   */\n  public removeSprite(sprite: Graphics.Sprite | LegacySprite) {\n    removeItemFromArray(sprite, this.sprites);\n  }\n  /**\n   * Clear all sprites from this cell\n   */\n  public clearSprites() {\n    this.sprites.length = 0;\n  }\n}\n\nexport interface CellArgs extends Partial<CellImpl> {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  index: number;\n  solid?: boolean;\n  sprites?: Graphics.Sprite[];\n}\n\n/**\n * TileMap Cell\n *\n * A light-weight object that occupies a space in a collision map. Generally\n * created by a [[TileMap]].\n *\n * Cells can draw multiple sprites. Note that the order of drawing is the order\n * of the sprites in the array so the last one will be drawn on top. You can\n * use transparency to create layers this way.\n */\nexport class Cell extends Configurable(CellImpl) {\n  constructor(config: CellArgs);\n  constructor(x: number, y: number, width: number, height: number, index: number, solid?: boolean, sprites?: Graphics.Sprite[]);\n  constructor(\n    xOrConfig: number | CellArgs,\n    y?: number,\n    width?: number,\n    height?: number,\n    index?: number,\n    solid?: boolean,\n    sprites?: Graphics.Sprite[]\n  ) {\n    super(xOrConfig, y, width, height, index, solid, sprites);\n  }\n}\n","import { Actor } from '../Actor';\nimport { ScreenElement } from '../ScreenElement';\nimport { Label } from '../Label';\nimport { Trigger } from '../Trigger';\n\n/**\n * Type guard to detect if something is an actor\n * @deprecated Will be removed in v0.26.0\n * @param actor\n */\nexport function isVanillaActor(actor: Actor) {\n  return !(actor instanceof ScreenElement) && !(actor instanceof Trigger) && !(actor instanceof Label);\n}\n\n/**\n * Type guard to detect a screen element\n * @todo move to ScreenElement\n */\nexport function isScreenElement(actor: Actor) {\n  return actor instanceof ScreenElement;\n}\n","import { Color } from './Drawing/Color';\nimport { Engine } from './Engine';\nimport { EventDispatcher } from './EventDispatcher';\nimport { Actor, isActor } from './Actor';\nimport { Vector } from './Algebra';\nimport { ExitTriggerEvent, EnterTriggerEvent, CollisionEndEvent, CollisionStartEvent } from './Events';\nimport * as Util from './Util/Util';\nimport { CollisionType } from './Collision/CollisionType';\n\n/**\n * ITriggerOptions\n */\nexport interface TriggerOptions {\n  // position of the trigger\n  pos: Vector;\n  // width of the trigger\n  width: number;\n  // height of the trigger\n  height: number;\n  // whether the trigger is visible or not\n  visible: boolean;\n  // action to take when triggered\n  action: () => void;\n  // if specified the trigger will only fire on a specific actor and overrides any filter\n  target: Actor;\n  // Returns true if the triggers should fire on the collided actor\n  filter: (actor: Actor) => boolean;\n  // -1 if it should repeat forever\n  repeat: number;\n}\n\nconst triggerDefaults: Partial<TriggerOptions> = {\n  pos: Vector.Zero,\n  width: 10,\n  height: 10,\n  visible: false,\n  action: () => {\n    return;\n  },\n  filter: () => true,\n  repeat: -1\n};\n\n/**\n * Triggers are a method of firing arbitrary code on collision. These are useful\n * as 'buttons', 'switches', or to trigger effects in a game. By default triggers\n * are invisible, and can only be seen when [[Trigger.visible]] is set to `true`.\n */\nexport class Trigger extends Actor {\n  private _target: Actor;\n  /**\n   * Action to fire when triggered by collision\n   */\n  public action: () => void = () => {\n    return;\n  };\n  /**\n   * Filter to add additional granularity to action dispatch, if a filter is specified the action will only fire when\n   * filter return true for the collided actor.\n   */\n  public filter: (actor: Actor) => boolean = () => true;\n  /**\n   * Number of times to repeat before killing the trigger,\n   */\n  public repeat: number = -1;\n\n  /**\n   *\n   * @param opts Trigger options\n   */\n  constructor(opts: Partial<TriggerOptions>) {\n    super(opts.pos.x, opts.pos.y, opts.width, opts.height);\n    opts = Util.extend({}, triggerDefaults, opts);\n\n    this.filter = opts.filter || this.filter;\n    this.repeat = opts.repeat || this.repeat;\n    this.action = opts.action || this.action;\n    if (opts.target) {\n      this.target = opts.target;\n    }\n\n    this.visible = opts.visible;\n    this.body.collider.type = CollisionType.Passive;\n    this.eventDispatcher = new EventDispatcher(this);\n\n    this.on('collisionstart', (evt: CollisionStartEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('enter', new EnterTriggerEvent(this, evt.other));\n        this._dispatchAction();\n        // remove trigger if its done, -1 repeat forever\n        if (this.repeat === 0) {\n          this.kill();\n        }\n      }\n    });\n\n    this.on('collisionend', (evt: CollisionEndEvent<Actor>) => {\n      if (isActor(evt.other) && this.filter(evt.other)) {\n        this.emit('exit', new ExitTriggerEvent(this, evt.other));\n      }\n    });\n  }\n\n  public set target(target: Actor) {\n    this._target = target;\n    this.filter = (actor: Actor) => actor === target;\n  }\n\n  public get target() {\n    return this._target;\n  }\n\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n  }\n\n  private _dispatchAction() {\n    this.action.call(this);\n    this.repeat--;\n  }\n\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    // Meant to draw debug information about actors\n    ctx.save();\n    ctx.translate(this.pos.x, this.pos.y);\n\n    const bb = this.body.collider.bounds;\n    const wp = this.getGlobalPos();\n    bb.left = bb.left - wp.x;\n    bb.right = bb.right - wp.x;\n    bb.top = bb.top - wp.y;\n    bb.bottom = bb.bottom - wp.y;\n\n    // Currently collision primitives cannot rotate\n    // ctx.rotate(this.rotation);\n    ctx.fillStyle = Color.Violet.toString();\n    ctx.strokeStyle = Color.Violet.toString();\n    ctx.fillText('Trigger', 10, 10);\n    bb.debugDraw(ctx);\n\n    ctx.restore();\n  }\n}\n","import { Entity } from './Entity';\nimport { Message, Observer } from '../Util/Observable';\nimport { Component } from './Component';\nimport { Scene } from '../Scene';\n\n/**\n * Enum that determines whether to run the system in the update or draw phase\n */\nexport enum SystemType {\n  Update = 'update',\n  Draw = 'draw'\n}\n\nexport type SystemTypes<ComponentTypes> = ComponentTypes extends Component<infer TypeName> ? TypeName : never;\n\n/**\n * An Excalibur [[System]] that updates entities of certain types.\n * Systems are scene specific\n *\n * Excalibur Systems currently require at least 1 Component type to operated\n *\n * Multiple types are declared as a type union\n * For example:\n *\n * ```typescript\n * class MySystem extends System<ComponentA | ComponentB> {\n *   public readonly types = ['a', 'b'] as const;\n *   public readonly systemType = SystemType.Update;\n *   public update(entities: Entity<ComponentA | ComponentB>) {\n *      ...\n *   }\n * }\n * ```\n */\nexport abstract class System<ComponentTypeUnion extends Component = Component, ContextType = Scene>\nimplements Observer<AddedEntity | RemovedEntity> {\n  /**\n   * The types of entities that this system operates on\n   * For example ['transform', 'motion']\n   */\n  abstract readonly types: readonly SystemTypes<ComponentTypeUnion>[];\n\n  /**\n   * Determine whether the system is called in the [[SystemType.Update]] or the [[SystemType.Draw]] phase. Update is first, then Draw.\n   */\n  abstract readonly systemType: SystemType;\n\n  /**\n   * System can execute in priority order, by default all systems are priority 0. Lower values indicated higher priority.\n   * For a system to execute before all other a lower priority value (-1 for example) must be set.\n   * For a system to exectue after all other a higher priority value (10 for example) must be set.\n   */\n  public priority: number = 0;\n\n  /**\n   * Optionally specify a sort order for entities passed to the your system\n   * @param a The left entity\n   * @param b The right entity\n   */\n  sort?(a: Entity, b: Entity): number;\n\n  /**\n   * Optionally specify an initialize handler\n   * @param scene\n   */\n  initialize?(engine: ContextType): void;\n\n  /**\n   * Update all entities that match this system's types\n   * @param entities Entities to update that match this system's types\n   * @param delta Time in milliseconds\n   */\n  abstract update(entities: Entity[], delta: number): void;\n\n  /**\n   * Optionally run a preupdate before the system processes matching entities\n   * @param engine\n   * @param delta Time in milliseconds since the last frame\n   */\n  preupdate?(engine: ContextType, delta: number): void;\n\n  /**\n   * Optionally run a postupdate after the system processes matching entities\n   * @param engine\n   * @param delta Time in milliseconds since the last frame\n   */\n  postupdate?(engine: ContextType, delta: number): void;\n\n  /**\n   * Optionally run a debug draw step to visualize the internals of the system\n   */\n  debugDraw?(ctx: CanvasRenderingContext2D, delta: number): void;\n\n  /**\n   * Systems observe when entities match their types or no longer match their types, override\n   * @param _entityAddedOrRemoved\n   */\n  public notify(_entityAddedOrRemoved: AddedEntity | RemovedEntity) {\n    // Override me\n  }\n}\n\n/**\n * An [[Entity]] with [[Component]] types that matches a [[System]] types exists in the current scene.\n */\nexport class AddedEntity implements Message<Entity> {\n  readonly type: 'Entity Added' = 'Entity Added';\n  constructor(public data: Entity) {}\n}\n\n/**\n * Type guard to check for AddedEntity messages\n * @param x\n */\nexport function isAddedSystemEntity(x: Message<Entity>): x is AddedEntity {\n  return !!x && x.type === 'Entity Added';\n}\n\n/**\n * An [[Entity]] with [[Component]] types that no longer matches a [[System]] types exists in the current scene.\n */\nexport class RemovedEntity implements Message<Entity> {\n  readonly type: 'Entity Removed' = 'Entity Removed';\n  constructor(public data: Entity) {}\n}\n\n/**\n * type guard to check for the RemovedEntity message\n */\nexport function isRemoveSystemEntity(x: Message<Entity>): x is RemovedEntity {\n  return !!x && x.type === 'Entity Removed';\n}\n","import { Entity, RemovedComponent, AddedComponent, isAddedComponent, isRemovedComponent } from './Entity';\nimport { Observer } from '../Util/Observable';\nimport { World } from './World';\nimport { Util } from '..';\n\n// Add/Remove entitys and components\n\nexport class EntityManager<ContextType = any> implements Observer<RemovedComponent | AddedComponent> {\n  public entities: Entity[] = [];\n  public _entityIndex: { [entityId: string]: Entity } = {};\n\n  constructor(private _world: World<ContextType>) {}\n\n  /**\n   * EntityManager observes changes on entities\n   * @param message\n   */\n  public notify(message: RemovedComponent | AddedComponent): void {\n    if (isAddedComponent(message)) {\n      // we don't need the component, it's already on the entity\n      this._world.queryManager.addEntity(message.data.entity);\n    }\n\n    if (isRemovedComponent(message)) {\n      this._world.queryManager.removeComponent(message.data.entity, message.data.component);\n    }\n  }\n\n  /**\n   * Adds an entity to be tracked by the EntityManager\n   * @param entity\n   */\n  public addEntity(entity: Entity): void {\n    if (entity && !this._entityIndex[entity.id]) {\n      this._entityIndex[entity.id] = entity;\n      this.entities.push(entity);\n      this._world.queryManager.addEntity(entity);\n      entity.componentAdded$.register(this);\n      entity.componentRemoved$.register(this);\n\n      // if entity has children\n      entity.children.forEach((c) => this.addEntity(c));\n      entity.childrenAdded$.register({\n        notify: (e => {\n          this.addEntity(e);\n        })\n      });\n      entity.childrenRemoved$.register({\n        notify: (e => {\n          this.removeEntity(e);\n        })\n      });\n    }\n  }\n\n  public removeEntity(entity: Entity): void;\n  public removeEntity(id: number): void;\n  public removeEntity(idOrEntity: number | Entity): void {\n    let id = 0;\n    if (idOrEntity instanceof Entity) {\n      id = idOrEntity.id;\n    } else {\n      id = idOrEntity;\n    }\n    const entity = this._entityIndex[id];\n    delete this._entityIndex[id];\n    if (entity) {\n      Util.removeItemFromArray(entity, this.entities);\n      this._world.queryManager.removeEntity(entity);\n      entity.componentAdded$.unregister(this);\n      entity.componentRemoved$.unregister(this);\n\n      // if entity has children\n      entity.children.forEach((c) => this.removeEntity(c));\n      entity.childrenAdded$.clear();\n      entity.childrenRemoved$.clear();\n    }\n  }\n\n  public processComponentRemovals(): void {\n    for (const entity of this.entities) {\n      entity.processComponentRemoval();\n    }\n  }\n\n  public getById(id: number): Entity {\n    return this._entityIndex[id];\n  }\n\n  public clear(): void {\n    for (const entity of this.entities) {\n      this.removeEntity(entity);\n    }\n  }\n}\n","export const buildTypeKey = (types: readonly string[]) => {\n  const key = [...types].sort((a, b) => a.localeCompare(b)).join('+');\n  return key;\n};\n","import { Entity } from './Entity';\nimport { buildTypeKey } from './Util';\nimport { Observable } from '../Util/Observable';\nimport { Util, Component, ComponentCtor } from '..';\nimport { AddedEntity, RemovedEntity } from './System';\n\n/**\n * Represents query for entities that match a list of types that is cached and observable\n *\n * Queries can be strongly typed by supplying a type union in the optional type parameter\n * ```typescript\n * const queryAB = new ex.Query<ComponentTypeA | ComponentTypeB>(['A', 'B']);\n * ```\n */\nexport class Query<T extends Component = Component> extends Observable<AddedEntity | RemovedEntity> {\n  public types: readonly string[];\n  private _entities: Entity[] = [];\n  private _key: string;\n  public get key(): string {\n    if (this._key) {\n      return this._key;\n    }\n    return (this._key = buildTypeKey(this.types));\n  }\n\n  constructor(types: readonly string[]);\n  constructor(types: readonly ComponentCtor<T>[]);\n  constructor(types: readonly string[] | readonly ComponentCtor<T>[]) {\n    super();\n    if (types[0] instanceof Function) {\n      this.types = (types as ComponentCtor<T>[]).map(T =>  (new T).type);\n    } else {\n      this.types = types as string[];\n    }\n  }\n\n  /**\n   * Returns a list of entities that match the query\n   *\n   * @param sort Optional sorting function to sort entities returned from the query\n   */\n  public getEntities(sort?: (a: Entity, b: Entity) => number): Entity[] {\n    if (sort) {\n      this._entities.sort(sort);\n    }\n    return this._entities;\n  }\n\n  /**\n   * Add an entity to the query, will only be added if the entity matches the query types\n   * @param entity\n   */\n  public addEntity(entity: Entity): void {\n    if (!Util.contains(this._entities, entity) && this.matches(entity)) {\n      this._entities.push(entity);\n      this.notifyAll(new AddedEntity(entity));\n    }\n  }\n\n  /**\n   * If the entity is part of the query it will be removed regardless of types\n   * @param entity\n   */\n  public removeEntity(entity: Entity): void {\n    if (Util.removeItemFromArray(entity, this._entities)) {\n      this.notifyAll(new RemovedEntity(entity));\n    }\n  }\n\n  /**\n   * Removes all entities and observers from the query\n   */\n  public clear(): void {\n    this._entities.length = 0;\n    for (const observer of this.observers) {\n      this.unregister(observer);\n    }\n  }\n\n  /**\n   * Returns whether the entity's types match query\n   * @param entity\n   */\n  public matches(entity: Entity): boolean;\n\n  /**\n   * Returns whether the list of ComponentTypes have at least the same types as the query\n   * @param types\n   */\n  public matches(types: string[]): boolean;\n  public matches(typesOrEntity: string[] | Entity): boolean {\n    let types: string[] = [];\n    if (typesOrEntity instanceof Entity) {\n      types = typesOrEntity.types;\n    } else {\n      types = typesOrEntity;\n    }\n\n    let matches = true;\n    for (const type of this.types) {\n      matches = matches && types.indexOf(type) > -1;\n      if (!matches) {\n        return false;\n      }\n    }\n    return matches;\n  }\n\n  public contain(type: string) {\n    return this.types.indexOf(type) > -1;\n  }\n}\n","import { Entity } from './Entity';\nimport { buildTypeKey } from './Util';\nimport { Query } from './Query';\nimport { Component } from './Component';\nimport { World } from './World';\n\n/**\n * The query manager is responsible for updating all queries when entities/components change\n */\nexport class QueryManager {\n  private _queries: { [entityComponentKey: string]: Query<any> } = {};\n\n  constructor(private _world: World<any>) {}\n\n  /**\n   * Adds a query to the manager and populates with any entities that match\n   * @param query\n   */\n  private _addQuery(query: Query<any>) {\n    this._queries[buildTypeKey(query.types)] = query;\n    for (const entity of this._world.entityManager.entities) {\n      query.addEntity(entity);\n    }\n  }\n\n  /**\n   * Removes the query if there are no observers left\n   * @param query\n   */\n  public maybeRemoveQuery(query: Query): void {\n    if (query.observers.length === 0) {\n      query.clear();\n      delete this._queries[buildTypeKey(query.types)];\n    }\n  }\n\n  /**\n   * Adds the entity to any matching query in the query manage\n   * @param entity\n   */\n  public addEntity(entity: Entity) {\n    for (const queryType in this._queries) {\n      if (this._queries[queryType]) {\n        this._queries[queryType].addEntity(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes an entity from queries if the removed component disqualifies it\n   * @param entity\n   * @param component\n   */\n  public removeComponent(entity: Entity, component: Component) {\n    for (const queryType in this._queries) {\n      // If the component being removed from an entity is a part of a query,\n      // it is now disqualified from that query, remove it\n      if (this._queries[queryType].contain(component.type)) {\n        this._queries[queryType].removeEntity(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes an entity from all queries it is currently a part of\n   * @param entity\n   */\n  public removeEntity(entity: Entity) {\n    for (const queryType in this._queries) {\n      this._queries[queryType].removeEntity(entity);\n    }\n  }\n\n  /**\n   * Creates a populated query and returns, if the query already exists that will be returned instead of a new instance\n   * @param types\n   */\n  public createQuery<T extends Component = Component>(types: readonly string[]): Query<T> {\n    const maybeExistingQuery = this.getQuery<T>(types);\n    if (maybeExistingQuery) {\n      return maybeExistingQuery;\n    }\n    const query = new Query<T>(types);\n    this._addQuery(query);\n    return query;\n  }\n\n  /**\n   * Retrieves an existing query by types if it exists otherwise returns null\n   * @param types\n   */\n  public getQuery<T extends Component = Component>(types: readonly string[]): Query<T> {\n    const key = buildTypeKey(types);\n    if (this._queries[key]) {\n      return this._queries[key] as Query<T>;\n    }\n    return null;\n  }\n}\n","import { System, SystemType } from './System';\nimport { Scene, Util } from '..';\nimport { World } from './World';\n\n/**\n * The SystemManager is responsible for keeping track of all systems in a scene.\n * Systems are scene specific\n */\nexport class SystemManager<ContextType> {\n  /**\n   * List of systems, to add a new system call [[SystemManager.addSystem]]\n   */\n  public systems: System<any, ContextType>[] = [];\n  public _keyToSystem: { [key: string]: System<any, ContextType> };\n  constructor(private _world: World<ContextType>) {}\n\n  /**\n   * Adds a system to the manager, it will now be updated every frame\n   * @param system\n   */\n  public addSystem(system: System<any, ContextType>): void {\n    // validate system has types\n    if (!system.types || system.types.length === 0) {\n      throw new Error(`Attempted to add a System without any types`);\n    }\n\n    const query = this._world.queryManager.createQuery(system.types);\n    this.systems.push(system);\n    this.systems.sort((a, b) => a.priority - b.priority);\n    query.register(system);\n    if (system.initialize) {\n      system.initialize(this._world.context);\n    }\n  }\n\n  /**\n   * Removes a system from the manager, it will no longer be updated\n   * @param system\n   */\n  public removeSystem(system: System<any, ContextType>) {\n    Util.removeItemFromArray(system, this.systems);\n    const query = this._world.queryManager.getQuery(system.types);\n    if (query) {\n      query.unregister(system);\n      this._world.queryManager.maybeRemoveQuery(query);\n    }\n  }\n\n  /**\n   * Updates all systems\n   * @param type whether this is an update or draw system\n   * @param context context reference\n   * @param delta time in milliseconds\n   */\n  public updateSystems(type: SystemType, context: ContextType, delta: number) {\n    const systems = this.systems.filter((s) => s.systemType === type);\n    for (const s of systems) {\n      if (s.preupdate) {\n        s.preupdate(context, delta);\n      }\n    }\n\n    for (const s of systems) {\n      // Get entities that match the system types, pre-sort\n      const entities = this._world.queryManager.getQuery(s.types).getEntities(s.sort);\n      // Initialize entities if needed\n      if (context instanceof Scene) {\n        for (const entity of entities) {\n          entity._initialize(context?.engine);\n        }\n      }\n      s.update(entities, delta);\n    }\n\n    for (const s of systems) {\n      if (s.postupdate) {\n        s.postupdate(context, delta);\n      }\n    }\n  }\n\n  public clear(): void {\n    for (const system of this.systems) {\n      this.removeSystem(system);\n    }\n  }\n}\n","import { Entity } from './Entity';\nimport { EntityManager } from './EntityManager';\nimport { QueryManager } from './QueryManager';\nimport { System, SystemType } from './System';\nimport { SystemManager } from './SystemManager';\n\n/**\n * The World is a self-contained entity component system for a particular context.\n */\nexport class World<ContextType> {\n  public queryManager: QueryManager = new QueryManager(this);\n  public entityManager: EntityManager = new EntityManager(this);\n  public systemManager: SystemManager<ContextType> = new SystemManager<ContextType>(this);\n\n  /**\n   * The context type is passed to the system updates\n   * @param context\n   */\n  constructor(public context: ContextType) {}\n\n  /**\n   * Update systems by type and time elapsed in milliseconds\n   */\n  update(type: SystemType, delta: number) {\n    this.systemManager.updateSystems(type, this.context, delta);\n    this.entityManager.processComponentRemovals();\n  }\n\n  /**\n   * Add an entity to the ECS world\n   * @param entity\n   */\n  add(entity: Entity): void;\n  /**\n   * Add a system to the ECS world\n   * @param system\n   */\n  add(system: System<any, ContextType>): void;\n  add(entityOrSystem: Entity | System<any, ContextType>): void {\n    if (entityOrSystem instanceof Entity) {\n      this.entityManager.addEntity(entityOrSystem);\n    }\n\n    if (entityOrSystem instanceof System) {\n      this.systemManager.addSystem(entityOrSystem);\n    }\n  }\n\n  /**\n   * Remove an entity from the ECS world\n   * @param entity\n   */\n  remove(entity: Entity): void;\n  /**\n   * Remove a system from the ECS world\n   * @param system\n   */\n  remove(system: System<any, ContextType>): void;\n  remove(entityOrSystem: Entity | System<any, ContextType>): void {\n    if (entityOrSystem instanceof Entity) {\n      this.entityManager.removeEntity(entityOrSystem);\n    }\n\n    if (entityOrSystem instanceof System) {\n      this.systemManager.removeSystem(entityOrSystem);\n    }\n  }\n\n  clearEntities(): void {\n    this.entityManager.clear();\n  }\n\n  clearSystems(): void {\n    this.systemManager.clear();\n  }\n}\n","export class GraphicsDiagnostics {\n  public static DrawCallCount: number = 0;\n  public static DrawnImagesCount: number = 0;\n  public static clear(): void {\n    GraphicsDiagnostics.DrawCallCount = 0;\n    GraphicsDiagnostics.DrawnImagesCount = 0;\n  }\n}\n","import { isActor } from '../Actor';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { Scene } from '../Scene';\nimport { GraphicsComponent } from './GraphicsComponent';\nimport { vec, Vector } from '../Algebra';\nimport { Color } from '../Drawing/Color';\nimport { CoordPlane, TransformComponent } from '../EntityComponentSystem/Components/TransformComponent';\nimport { Entity } from '../EntityComponentSystem/Entity';\nimport { Camera } from '../Camera';\nimport { System, SystemType, TagComponent } from '../EntityComponentSystem';\nimport { Engine } from '../Engine';\nimport { GraphicsDiagnostics } from './GraphicsDiagnostics';\nimport { EnterViewPortEvent, ExitViewPortEvent } from '../Events';\n\nexport class GraphicsSystem extends System<TransformComponent | GraphicsComponent> {\n  public readonly types = ['ex.transform', 'ex.graphics'] as const;\n  public readonly systemType = SystemType.Draw;\n  public priority = 0;\n  private _token = 0;\n  private _graphicsContext: ExcaliburGraphicsContext;\n  private _camera: Camera;\n  private _engine: Engine;\n\n  public initialize(scene: Scene): void {\n    this._graphicsContext = scene.engine.graphicsContext;\n    this._camera = scene.camera;\n    this._engine = scene.engine;\n  }\n\n  public sort(a: Entity, b: Entity) {\n    return a.get(TransformComponent).z - b.get(TransformComponent).z;\n  }\n\n  public update(entities: Entity[], delta: number): void {\n    this._clearScreen();\n    this._token++;\n    let transform: TransformComponent;\n    let graphics: GraphicsComponent;\n\n    for (const entity of entities) {\n      transform = entity.get(TransformComponent);\n      graphics = entity.get(GraphicsComponent);\n\n      // Figure out if entities are offscreen\n      const entityOffscreen = this._isOffscreen(transform, graphics);\n      if (entityOffscreen && !entity.hasTag('offscreen')) {\n        entity.eventDispatcher.emit('exitviewport', new ExitViewPortEvent(entity));\n        entity.addComponent(new TagComponent('offscreen'));\n      }\n\n      if (!entityOffscreen && entity.hasTag('offscreen')) {\n        entity.eventDispatcher.emit('enterviewport', new EnterViewPortEvent(entity));\n        entity.removeComponent('offscreen');\n      }\n      // Skip entities that have graphics offscreen\n      if (entityOffscreen) {\n        continue;\n      }\n\n      // This optionally sets our camera based on the entity coord plan (world vs. screen)\n      this._pushCameraTransform(transform);\n\n      this._graphicsContext.save();\n\n      // Optionally run the onPreDraw graphics lifecycle draw\n      if (graphics.onPreDraw) {\n        graphics.onPreDraw(this._graphicsContext, delta);\n      }\n\n      // Tick any graphics state (but only once) for animations and graphics groups\n      graphics.update(delta, this._token);\n\n      // Position the entity\n      this._applyTransform(entity);\n\n      this._graphicsPositionDebugDraw();\n\n      this._graphicsContext.opacity = graphics.opacity * ((entity as any).opacity ?? 1);\n\n      // Draw the graphics component\n      this._drawGraphicsComponent(graphics);\n\n      // Optionally run the onPostDraw graphics lifecycle draw\n      if (graphics.onPostDraw) {\n        graphics.onPostDraw(this._graphicsContext, delta);\n      }\n\n      this._graphicsContext.restore();\n\n      // Draw the graphics bounds\n      this._graphicsBoundsDebugDraw(entity, transform, graphics);\n\n      // Reset the transform back to the original\n      this._popCameraTransform(transform);\n    }\n\n    this._graphicsContext.flush();\n    this._engine.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\n    this._engine.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\n  }\n\n  private _clearScreen(): void {\n    this._graphicsContext.clear();\n  }\n\n  private _isOffscreen(transform: TransformComponent, graphics: GraphicsComponent) {\n    if (transform.coordPlane === CoordPlane.World) {\n      const graphicsOffscreen = !this._camera.viewport.intersect(graphics.localBounds.transform(transform.getGlobalMatrix()));\n      return graphicsOffscreen;\n    } else {\n      // TODO sceen coordinates\n      return false;\n    }\n  }\n\n  private _drawGraphicsComponent(graphicsComponent: GraphicsComponent) {\n    if (graphicsComponent.visible) {\n      // this should be moved to the graphics system\n      for (const layer of graphicsComponent.layers.get()) {\n        for (const {\n          graphic,\n          options: { offset, anchor }\n        } of layer.graphics) {\n          // See https://github.com/excaliburjs/Excalibur/pull/619 for discussion on this formula\n          const offsetX = -graphic.width * anchor.x + offset.x;\n          const offsetY = -graphic.height * anchor.y + offset.y;\n\n          graphic?.draw(this._graphicsContext, offsetX + layer.offset.x, offsetY + layer.offset.y);\n\n          if (this._engine?.isDebug) {\n            /* istanbul ignore next */\n            graphic?.localBounds.translate(vec(offsetX + layer.offset.x, offsetY + layer.offset.y)).draw(this._graphicsContext, Color.Red);\n          }\n        }\n      }\n      if (this._engine?.isDebug) {\n        /* istanbul ignore next */\n        graphicsComponent.localBounds.draw(this._graphicsContext, Color.Red);\n      }\n    }\n  }\n\n  /**\n   * This applies the current entity transform to the graphics context\n   * @param entity\n   */\n  private _applyTransform(entity: Entity): void {\n    const ancestors = entity.getAncestors();\n    for (const ancestor of ancestors) {\n      const transform = ancestor?.get(TransformComponent);\n      if (transform) {\n        this._graphicsContext.translate(transform.pos.x, transform.pos.y);\n        this._graphicsContext.scale(transform.scale.x, transform.scale.y);\n        this._graphicsContext.rotate(transform.rotation);\n      }\n    }\n  }\n\n  /**\n   * Applies the current camera transform if in world coordinates\n   * @param transform\n   */\n  private _pushCameraTransform(transform: TransformComponent) {\n    // Establish camera offset per entity\n    if (transform.coordPlane === CoordPlane.World) {\n      this._graphicsContext.save();\n      if (this._camera) {\n        this._camera.draw(this._graphicsContext);\n      }\n    }\n  }\n\n  /**\n   * Resets the current camera transform if in world coordinates\n   * @param transform\n   */\n  private _popCameraTransform(transform: TransformComponent) {\n    if (transform.coordPlane === CoordPlane.World) {\n      // Apply camera world offset\n      this._graphicsContext.restore();\n    }\n  }\n\n  /* istanbul ignore next */\n  private _graphicsPositionDebugDraw() {\n    if (this._engine?.isDebug) {\n      this._graphicsContext.debug.drawPoint(Vector.Zero, { color: Color.Yellow, size: 5 });\n    }\n  }\n\n  /* istanbul ignore next */\n  private _graphicsBoundsDebugDraw(entity: Entity, _transform: TransformComponent, _graphics: GraphicsComponent) {\n    if (this._engine?.isDebug) {\n      if (isActor(entity)) {\n        const bb = entity.body.collider.localBounds.translate(entity.getGlobalPos());\n        bb.draw(this._graphicsContext);\n      }\n    }\n  }\n}\n","import { Engine } from '../Engine';\nimport { Actor } from '../Actor';\nimport { Entity, System, SystemType } from '../EntityComponentSystem';\nimport { CanvasDrawComponent } from './CanvasDrawComponent';\nimport { Scene } from '../Scene';\nimport { Camera } from '../Camera';\nimport { CoordPlane, TransformComponent } from '../EntityComponentSystem/Components/TransformComponent';\nimport { GraphicsDiagnostics } from '../Graphics/GraphicsDiagnostics';\n\n/**\n * Draws anything with a transform and a \"draw\" method\n */\nexport class CanvasDrawingSystem extends System<TransformComponent | CanvasDrawComponent> {\n  public readonly types = ['ex.transform', 'ex.canvas'] as const;\n  public systemType = SystemType.Draw;\n  public priority = -1;\n\n  private _ctx: CanvasRenderingContext2D;\n  private _camera: Camera;\n  private _engine: Engine;\n\n  public initialize(scene: Scene): void {\n    this._ctx = scene.engine.ctx;\n    this._engine = scene.engine;\n    this._camera = scene.camera;\n  }\n\n  public sort(a: Entity, b: Entity) {\n    return a.get(TransformComponent).z - b.get(TransformComponent).z;\n  }\n\n  public update(entities: Entity[], delta: number) {\n    this._clearScreen();\n\n    let transform: TransformComponent;\n    let canvasdraw: CanvasDrawComponent;\n    const length = entities.length;\n    for (let i = 0; i < length; i++) {\n      if ((entities[i] as Actor).visible && !(entities[i] as Actor).isOffScreen) {\n        transform = entities[i].get(TransformComponent);\n        canvasdraw = entities[i].get(CanvasDrawComponent);\n\n        this._ctx.save();\n        this._pushCameraTransform(transform);\n\n        this._ctx.save();\n        this._applyTransform(entities[i]);\n        canvasdraw.draw(this._ctx, delta);\n        this._ctx.restore();\n\n        this._popCameraTransform(transform);\n        this._ctx.restore();\n      }\n\n      if (this._engine.isDebug) {\n        this._ctx.save();\n        this._pushCameraTransform(transform);\n        this._ctx.strokeStyle = 'yellow';\n        (entities[i] as Actor).debugDraw(this._ctx);\n        this._popCameraTransform(transform);\n        this._ctx.restore();\n      }\n    }\n    if (this._engine.isDebug) {\n      this._ctx.save();\n      this._camera.draw(this._ctx);\n      this._camera.debugDraw(this._ctx);\n      this._ctx.restore();\n    }\n\n    this._engine.stats.currFrame.graphics.drawnImages = GraphicsDiagnostics.DrawnImagesCount;\n    this._engine.stats.currFrame.graphics.drawCalls = GraphicsDiagnostics.DrawCallCount;\n  }\n\n  private _applyTransform(entity: Entity) {\n    const ancestors = entity.getAncestors();\n    for (const ancestor of ancestors) {\n      const transform = ancestor?.get(TransformComponent);\n      if (transform) {\n        this._ctx.translate(transform.pos.x, transform.pos.y);\n        this._ctx.rotate(transform.rotation);\n        this._ctx.scale(transform.scale.x, transform.scale.y);\n      }\n    }\n  }\n\n  private _clearScreen(): void {\n    this._ctx.clearRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\n    this._ctx.fillStyle = this._engine.backgroundColor.toString();\n    this._ctx.fillRect(0, 0, this._ctx.canvas.width, this._ctx.canvas.height);\n  }\n\n  private _pushCameraTransform(transform: TransformComponent) {\n    if (transform.coordPlane === CoordPlane.World) {\n      // Apply camera transform to place entity in world space\n      this._ctx.save();\n      if (this._camera) {\n        this._camera.draw(this._ctx);\n      }\n    }\n  }\n\n  private _popCameraTransform(transform: TransformComponent) {\n    if (transform.coordPlane === CoordPlane.World) {\n      // Restore back to screen space from world space if we were drawing an entity there\n      this._ctx.restore();\n    }\n  }\n}\n","import { Logger } from '../Util/Log';\nimport { Class } from '../Class';\nimport * as Events from '../Events';\n\n/**\n * Enum representing physical input key codes\n */\nexport enum Keys {\n  // NUMPAD\n  Num0 = 'Numpad0',\n  Num1 = 'Numpad1',\n  Num2 = 'Numpad2',\n  Num3 = 'Numpad3',\n  Num4 = 'Numpad4',\n  Num5 = 'Numpad5',\n  Num6 = 'Numpad6',\n  Num7 = 'Numpad7',\n  Num8 = 'Numpad8',\n  Num9 = 'Numpad9',\n  NumAdd = 'NumpadAdd',\n  NumSubtract = 'NumpadSubtract',\n  NumMultiply = 'NumpadMultiply',\n  NumDivide = 'NumpadDivide',\n  // NumComma = 'NumpadComma', // not x-browser\n  NumDecimal = 'NumpadDecimal',\n  Numpad0 = 'Numpad0',\n  Numpad1 = 'Numpad1',\n  Numpad2 = 'Numpad2',\n  Numpad3 = 'Numpad3',\n  Numpad4 = 'Numpad4',\n  Numpad5 = 'Numpad5',\n  Numpad6 = 'Numpad6',\n  Numpad7 = 'Numpad7',\n  Numpad8 = 'Numpad8',\n  Numpad9 = 'Numpad9',\n  NumpadAdd = 'NumpadAdd',\n  NumpadSubtract = 'NumpadSubtract',\n  NumpadMultiply = 'NumpadMultiply',\n  NumpadDivide = 'NumpadDivide',\n  // NumpadComma = 'NumpadComma', // not x-browser\n  NumpadDecimal = 'NumpadDecimal',\n\n  // MODIFIERS\n  NumLock = 'NumLock',\n  ShiftLeft = 'ShiftLeft',\n  ShiftRight = 'ShiftRight',\n  AltLeft = 'AltLeft',\n  AltRight = 'AltRight',\n\n  // NUMBERS\n  Key0 = 'Digit0',\n  Key1 = 'Digit1',\n  Key2 = 'Digit2',\n  Key3 = 'Digit3',\n  Key4 = 'Digit4',\n  Key5 = 'Digit5',\n  Key6 = 'Digit6',\n  Key7 = 'Digit7',\n  Key8 = 'Digit8',\n  Key9 = 'Digit9',\n  Digit0 = 'Digit0',\n  Digit1 = 'Digit1',\n  Digit2 = 'Digit2',\n  Digit3 = 'Digit3',\n  Digit4 = 'Digit4',\n  Digit5 = 'Digit5',\n  Digit6 = 'Digit6',\n  Digit7 = 'Digit7',\n  Digit8 = 'Digit8',\n  Digit9 = 'Digit9',\n\n  // LETTERS\n  A = 'KeyA',\n  B = 'KeyB',\n  C = 'KeyC',\n  D = 'KeyD',\n  E = 'KeyE',\n  F = 'KeyF',\n  G = 'KeyG',\n  H = 'KeyH',\n  I = 'KeyI',\n  J = 'KeyJ',\n  K = 'KeyK',\n  L = 'KeyL',\n  M = 'KeyM',\n  N = 'KeyN',\n  O = 'KeyO',\n  P = 'KeyP',\n  Q = 'KeyQ',\n  R = 'KeyR',\n  S = 'KeyS',\n  T = 'KeyT',\n  U = 'KeyU',\n  V = 'KeyV',\n  W = 'KeyW',\n  X = 'KeyX',\n  Y = 'KeyY',\n  Z = 'KeyZ',\n  KeyA = 'KeyA',\n  KeyB = 'KeyB',\n  KeyC = 'KeyC',\n  KeyD = 'KeyD',\n  KeyE = 'KeyE',\n  KeyF = 'KeyF',\n  KeyG = 'KeyG',\n  KeyH = 'KeyH',\n  KeyI = 'KeyI',\n  KeyJ = 'KeyJ',\n  KeyK = 'KeyK',\n  KeyL = 'KeyL',\n  KeyM = 'KeyM',\n  KeyN = 'KeyN',\n  KeyO = 'KeyO',\n  KeyP = 'KeyP',\n  KeyQ = 'KeyQ',\n  KeyR = 'KeyR',\n  KeyS = 'KeyS',\n  KeyT = 'KeyT',\n  KeyU = 'KeyU',\n  KeyV = 'KeyV',\n  KeyW = 'KeyW',\n  KeyX = 'KeyX',\n  KeyY = 'KeyY',\n  KeyZ = 'KeyZ',\n\n  // SYMBOLS\n  Semicolon = 'Semicolon',\n  Quote = 'Quote',\n  Comma = 'Comma',\n  Minus = 'Minus',\n  Period = 'Period',\n  Slash = 'Slash',\n  Equal = 'Equal',\n  BracketLeft = 'BracketLeft',\n  Backslash = 'Backslash',\n  BracketRight = 'BracketRight',\n  Backquote = 'Backquote',\n\n  // DIRECTIONS\n  Up = 'ArrowUp',\n  Down = 'ArrowDown',\n  Left = 'ArrowLeft',\n  Right = 'ArrowRight',\n  ArrowUp = 'ArrowUp',\n  ArrowDown = 'ArrowDown',\n  ArrowLeft = 'ArrowLeft',\n  ArrowRight = 'ArrowRight',\n\n  // OTHER\n  Space = 'Space',\n  Esc = 'Escape',\n  Escape = 'Escape'\n}\n\n/**\n * Event thrown on a game object for a key event\n */\nexport class KeyEvent extends Events.GameEvent<any> {\n  /**\n   * @param key  The key responsible for throwing the event\n   * @param value The key's typed value the browser detected\n   * @param originalEvent The original keyboard event that Excalibur handled\n   */\n  constructor(public key: Keys, public value?: string, public originalEvent?: KeyboardEvent) {\n    super();\n  }\n}\n\n/**\n * Provides keyboard support for Excalibur.\n */\nexport class Keyboard extends Class {\n  private _keys: Keys[] = [];\n  private _keysUp: Keys[] = [];\n  private _keysDown: Keys[] = [];\n\n  constructor() {\n    super();\n  }\n\n  public on(eventName: Events.press, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.release, handler: (event: KeyEvent) => void): void;\n  public on(eventName: Events.hold, handler: (event: KeyEvent) => void): void;\n  public on(eventName: string, handler: (event: Events.GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Initialize Keyboard event listeners\n   */\n  init(global?: GlobalEventHandlers): void {\n    if (!global) {\n      try {\n        // Try and listen to events on top window frame if within an iframe.\n        //\n        // See https://github.com/excaliburjs/Excalibur/issues/1294\n        //\n        // Attempt to add an event listener, which triggers a DOMException on\n        // cross-origin iframes\n        const noop = () => {\n          return;\n        };\n        window.top.addEventListener('blur', noop);\n        window.top.removeEventListener('blur', noop);\n\n        // this will be the same as window if not embedded within an iframe\n        global = window.top;\n      } catch {\n        // fallback to current frame\n        global = window;\n\n        Logger.getInstance().warn(\n          'Failed to bind to keyboard events to top frame. ' +\n            'If you are trying to embed Excalibur in a cross-origin iframe, keyboard events will not fire.'\n        );\n      }\n    }\n\n    global.addEventListener('blur', () => {\n      this._keys.length = 0; // empties array efficiently\n    });\n\n    // key up is on window because canvas cannot have focus\n    global.addEventListener('keyup', (ev: KeyboardEvent) => {\n      const code = ev.code as Keys;\n      const key = this._keys.indexOf(code);\n      this._keys.splice(key, 1);\n      this._keysUp.push(code);\n      const keyEvent = new KeyEvent(code, ev.key, ev);\n\n      // alias the old api, we may want to deprecate this in the future\n      this.eventDispatcher.emit('up', keyEvent);\n      this.eventDispatcher.emit('release', keyEvent);\n    });\n\n    // key down is on window because canvas cannot have focus\n    global.addEventListener('keydown', (ev: KeyboardEvent) => {\n      const code = ev.code as Keys;\n      if (this._keys.indexOf(code) === -1) {\n        this._keys.push(code);\n        this._keysDown.push(code);\n        const keyEvent = new KeyEvent(code, ev.key, ev);\n        this.eventDispatcher.emit('down', keyEvent);\n        this.eventDispatcher.emit('press', keyEvent);\n      }\n    });\n  }\n\n  public update() {\n    // Reset keysDown and keysUp after update is complete\n    this._keysDown.length = 0;\n    this._keysUp.length = 0;\n\n    // Emit synthetic \"hold\" event\n    for (let i = 0; i < this._keys.length; i++) {\n      this.eventDispatcher.emit('hold', new KeyEvent(this._keys[i]));\n    }\n  }\n\n  /**\n   * Gets list of keys being pressed down\n   */\n  public getKeys(): Keys[] {\n    return this._keys;\n  }\n\n  /**\n   * Tests if a certain key was just pressed this frame. This is cleared at the end of the update frame.\n   * @param key Test whether a key was just pressed\n   */\n  public wasPressed(key: Keys): boolean {\n    return this._keysDown.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key is held down. This is persisted between frames.\n   * @param key  Test whether a key is held down\n   */\n  public isHeld(key: Keys): boolean {\n    return this._keys.indexOf(key) > -1;\n  }\n\n  /**\n   * Tests if a certain key was just released this frame. This is cleared at the end of the update frame.\n   * @param key  Test whether a key was just released\n   */\n  public wasReleased(key: Keys): boolean {\n    return this._keysUp.indexOf(key) > -1;\n  }\n}\n","import { Actor } from '../Actor';\nimport { Vector } from '../Algebra';\nimport { Class } from '../Class';\nimport * as Actors from '../Util/Actors';\nimport { removeItemFromArray } from '../Util/Util';\nimport { PointerMoveEvent, PointerDownEvent, PointerUpEvent, WheelEvent } from './PointerEvents';\n\nexport interface ActorsUnderPointer {\n  [ActorId: number]: Actor;\n  length: number;\n}\n\n/**\n * The type of pointer for a [[PointerEvent]].\n */\nexport enum PointerType {\n  Touch = 'Touch',\n  Mouse = 'Mouse',\n  Pen = 'Pen',\n  Unknown = 'Unknown'\n}\n\n/**\n * Determines the scope of handling mouse/touch events. See [[Pointers]] for more information.\n */\nexport enum PointerScope {\n  /**\n   * Handle events on the `canvas` element only. Events originating outside the\n   * `canvas` will not be handled.\n   */\n  Canvas = 'Canvas',\n\n  /**\n   * Handles events on the entire document. All events will be handled by Excalibur.\n   */\n  Document = 'Document'\n}\n\n/**\n * Captures and dispatches PointerEvents\n */\nexport class Pointer extends Class {\n  private static _MAX_ID = 0;\n  public readonly id = Pointer._MAX_ID++;\n  private _isDown: boolean = false;\n  private _wasDown: boolean = false;\n\n  private _actorsUnderPointer: ActorsUnderPointer = { length: 0 };\n\n  private _actors: Actor[] = [];\n  private _actorsLastFrame: Actor[] = [];\n  private _actorsNoLongerUnderPointer: Actor[] = [];\n\n  private _actorSortingFcn = (a: Actor, b: Actor) => {\n    if (a.z === b.z) {\n      return b.id - a.id;\n    }\n    return b.z - a.z;\n  };\n\n  /**\n   * Whether the Pointer is currently dragging.\n   */\n  public get isDragging(): boolean {\n    return this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just started dragging.\n   */\n  public get isDragStart(): boolean {\n    return !this._wasDown && this._isDown;\n  }\n\n  /**\n   * Whether the Pointer just ended dragging.\n   */\n  public get isDragEnd(): boolean {\n    return this._wasDown && !this._isDown;\n  }\n\n  /**\n   * Returns true if pointer has any actors under\n   */\n  public get hasActorsUnderPointer(): boolean {\n    return !!this._actorsUnderPointer.length;\n  }\n\n  /**\n   * The last position on the document this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastPagePos: Vector = null;\n\n  /**\n   * The last position on the screen this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastScreenPos: Vector = null;\n\n  /**\n   * The last position in the game world coordinates this pointer was at. Can be `null` if pointer was never active.\n   */\n  public lastWorldPos: Vector = null;\n\n  /**\n   * Returns the currently dragging target or null if it isn't exist\n   */\n  public dragTarget: Actor = null;\n\n  constructor() {\n    super();\n\n    this.on('move', this._onPointerMove);\n    this.on('down', this._onPointerDown);\n    this.on('up', this._onPointerUp);\n  }\n\n  on(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  on(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  on(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  on(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  on(event: string, handler: (event: any) => void): void {\n    super.on(event, handler);\n  }\n\n  once(event: 'move', handler: (event: PointerMoveEvent) => void): void;\n  once(event: 'down', handler: (event: PointerDownEvent) => void): void;\n  once(event: 'up', handler: (event: PointerUpEvent) => void): void;\n  once(event: 'wheel', handler: (event: WheelEvent) => void): void;\n  once(event: string, handler: (event: any) => void): void {\n    super.once(event, handler);\n  }\n\n  off(event: 'move', handler?: (event: PointerMoveEvent) => void): void;\n  off(event: 'down', handler?: (event: PointerDownEvent) => void): void;\n  off(event: 'up', handler?: (event: PointerUpEvent) => void): void;\n  off(event: 'wheel', handler?: (event: WheelEvent) => void): void;\n  off(event: string, handler?: (event: any) => void): void {\n    super.off(event, handler);\n  }\n\n  /**\n   * Update the state of current pointer, meant to be called a the end of frame\n   */\n  public update(): void {\n    if (this._wasDown && !this._isDown) {\n      this._wasDown = false;\n    } else if (!this._wasDown && this._isDown) {\n      this._wasDown = true;\n    }\n    this._actorsLastFrame = [...this._actors];\n    this._actorsNoLongerUnderPointer = [];\n  }\n\n  /**\n   * Adds an Actor to actorsUnderPointer object.\n   * @param actor An Actor to be added;\n   */\n  public addActorUnderPointer(actor: Actor): void {\n    if (!this.isActorAliveUnderPointer(actor)) {\n      this._actorsUnderPointer[actor.id] = actor;\n      this._actorsUnderPointer.length += 1;\n      this._actors.push(actor);\n    }\n\n    // Actors are processed in z-order highest z to lowest\n    // ties are broken by id highest id (newest) to lowest id (oldest)\n    this._actors.sort(this._actorSortingFcn);\n  }\n\n  /**\n   * Removes an Actor from actorsUnderPointer object.\n   * @param actor An Actor to be removed;\n   */\n  public removeActorUnderPointer(actor: Actor): void {\n    if (this.isActorAliveUnderPointer(actor)) {\n      delete this._actorsUnderPointer[actor.id];\n      this._actorsUnderPointer.length -= 1;\n      removeItemFromArray(actor, this._actors);\n      this._actorsNoLongerUnderPointer.push(actor);\n    }\n  }\n\n  /**\n   * Returns all actors under this pointer this frame\n   */\n  public getActorsUnderPointer(): Actor[] {\n    return this._actors;\n  }\n\n  /**\n   * Returns all actors that are no longer under the pointer this frame\n   */\n  public getActorsUnderPointerLastFrame(): Actor[] {\n    return this._actorsLastFrame;\n  }\n\n  /**\n   * Returns all actors relevant for events to pointer this frame\n   */\n  public getActorsForEvents(): Actor[] {\n    return this._actors.concat(this._actorsLastFrame).filter((actor, i, self) => {\n      return self.indexOf(actor) === i; // de-dup\n    }).sort(this._actorSortingFcn); // sort by z\n  }\n\n  /**\n   * Checks if Pointer location has a specific Actor bounds contained underneath.\n   * @param actor An Actor for check;\n   */\n  public checkActorUnderPointer(actor: Actor): boolean {\n    if (this.lastWorldPos) {\n      return actor.contains(this.lastWorldPos.x, this.lastWorldPos.y, !Actors.isScreenElement(actor));\n    }\n    return false;\n  }\n\n  /**\n   * Checks if an actor was under the pointer last frame\n   * @param actor\n   */\n  public wasActorUnderPointer(actor: Actor): boolean {\n    return this._actorsLastFrame.indexOf(actor) > -1;\n  }\n\n  /**\n   * Checks if Pointer has a specific Actor in ActorsUnderPointer list.\n   * @param actor An Actor for check;\n   */\n  public isActorAliveUnderPointer(actor: Actor): boolean {\n    return !!(!actor.isKilled() && actor.scene && this._actorsUnderPointer.hasOwnProperty(actor.id.toString()));\n  }\n\n  private _onPointerMove(ev: PointerMoveEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n  }\n\n  private _onPointerDown(ev: PointerDownEvent): void {\n    this.lastPagePos = new Vector(ev.pagePos.x, ev.pagePos.y);\n    this.lastScreenPos = new Vector(ev.screenPos.x, ev.screenPos.y);\n    this.lastWorldPos = new Vector(ev.worldPos.x, ev.worldPos.y);\n    this._isDown = true;\n  }\n\n  private _onPointerUp(_ev: PointerUpEvent): void {\n    this._isDown = false;\n    this.dragTarget = null;\n  }\n}\n","import { Actor } from '../Actor';\nimport { Vector, GlobalCoordinates } from '../Algebra';\nimport { Pointer, PointerType } from './Pointer';\nimport { GameEvent } from '../Events';\n\n/**\n * Native browser button enumeration\n */\nexport enum NativePointerButton {\n  NoButton = -1,\n  Left = 0,\n  Middle = 1,\n  Right = 2,\n  Unknown = 3\n}\n\n/**\n * The mouse button being pressed.\n */\nexport enum PointerButton {\n  Left = 'Left',\n  Middle = 'Middle',\n  Right = 'Right',\n  Unknown = 'Unknown',\n  NoButton = 'NoButton'\n}\n\nexport enum WheelDeltaMode {\n  Pixel = 'Pixel',\n  Line = 'Line',\n  Page = 'Page'\n}\n\n/**\n * Type that indicates Excalibur's valid synthetic pointer events\n */\nexport type PointerEventName =\n  | 'pointerdragstart'\n  | 'pointerdragend'\n  | 'pointerdragmove'\n  | 'pointerdragenter'\n  | 'pointerdragleave'\n  | 'pointermove'\n  | 'pointerenter'\n  | 'pointerleave'\n  | 'pointerup'\n  | 'pointerdown';\n\n/**\n * Pointer events\n *\n * Represents a mouse, touch, or stylus event. See [[Pointers]] for more information on\n * handling pointer input.\n *\n * For mouse-based events, you can inspect [[PointerEvent.button]] to see what button was pressed.\n */\nexport class PointerEvent extends GameEvent<Actor> {\n  protected _name: string;\n\n  public get name() {\n    return this._name;\n  }\n\n  /** The world coordinates of the event. */\n  public get worldPos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  /** The page coordinates of the event. */\n  public get pagePos(): Vector {\n    return this.coordinates.pagePos.clone();\n  }\n\n  /** The screen coordinates of the event. */\n  public get screenPos(): Vector {\n    return this.coordinates.screenPos.clone();\n  }\n\n  /**\n   * @param coordinates         The [[GlobalCoordinates]] of the event\n   * @param pointer             The [[Pointer]] of the event\n   * @param index               The index of the pointer (zero-based)\n   * @param pointerType         The type of pointer\n   * @param button              The button pressed (if [[PointerType.Mouse]])\n   * @param ev                  The raw DOM event being handled\n   */\n  constructor(\n    protected coordinates: GlobalCoordinates,\n    public pointer: Pointer,\n    public index: number,\n    public pointerType: PointerType,\n    public button: PointerButton,\n    public ev: any\n  ) {\n    super();\n  }\n\n  public get pos(): Vector {\n    return this.coordinates.worldPos.clone();\n  }\n\n  public _canceled = false;\n\n  /**\n   * Cancels pointer event propogation, event will not be transmitted to any other actors\n   */\n  public cancel() {\n    this._canceled = true;\n  }\n\n  /**\n   *\n   * @returns If the event is canceled it will no longer be transmitted to any other actors\n   */\n  public isCanceled(){\n    return this._canceled;\n  }\n\n  public propagate(actor: Actor): void {\n    this.doAction(actor);\n\n    if (this.bubbles && !this.isCanceled() && actor.parent) {\n      this.propagate(actor.parent as Actor); // TODO not true\n    }\n  }\n\n  /**\n   * Action, that calls when event happens\n   */\n  public doAction(actor: Actor): void {\n    if (actor) {\n      this._onActionStart(actor);\n      actor.emit(this._name, this);\n      this._onActionEnd(actor);\n    }\n  }\n\n  protected _onActionStart(_actor?: Actor) {\n    // to be rewritten\n  }\n\n  protected _onActionEnd(_actor?: Actor) {\n    // to be rewritten\n  }\n}\n\nexport class PointerEventFactory<T extends PointerEvent> {\n  constructor(\n    protected _pointerEventType: new (\n      coordinates: GlobalCoordinates,\n      pointer: Pointer,\n      index: number,\n      pointerType: PointerType,\n      button: PointerButton,\n      ev: any\n    ) => T\n  ) {}\n\n  /**\n   * Create specific PointerEvent\n   */\n  public create(\n    coordinates: GlobalCoordinates,\n    pointer: Pointer,\n    index: number,\n    pointerType: PointerType,\n    button: PointerButton,\n    ev: any\n  ): T {\n    return new this._pointerEventType(coordinates, pointer, index, pointerType, button, ev);\n  }\n}\n\nexport class PointerDragEvent extends PointerEvent {}\n\nexport class PointerUpEvent extends PointerEvent {\n  protected _name = 'pointerup';\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragEnd && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragend', this);\n    }\n  }\n}\n\nexport class PointerDownEvent extends PointerEvent {\n  protected _name = 'pointerdown';\n\n  protected _onActionEnd(actor: Actor) {\n    if (this.pointer.isDragStart && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragstart', this);\n    }\n  }\n}\n\nexport class PointerMoveEvent extends PointerEvent {\n  protected _name = 'pointermove';\n\n  public propagate(actor: Actor): void {\n    // If the actor was under the pointer last frame, but not this one it left\n    // if (this.pointer.wasActorUnderPointer(actor) && !this.pointer.isActorUnderPointer(actor)) {\n    //   this._onActorLeave(actor);\n    //   return;\n    // }\n\n    if (this.pointer.isActorAliveUnderPointer(actor)) {\n      this.doAction(actor);\n\n      if (this.bubbles && !this.isCanceled() && actor.parent) {\n        this.propagate(actor.parent as Actor); // TODO not true\n      }\n    }\n  }\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n\n    // In the case this is new\n    // if (this.pointer.checkActorUnderPointer(actor) && !this.pointer.wasActorUnderPointer(actor)) {\n    //   this._onActorEnter(actor);\n    // }\n\n    if (this.pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragmove', this);\n    }\n  }\n\n  // private _onActorEnter(actor: Actor) {\n  //   const pe = createPointerEventByName('enter', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.addActorUnderPointer(actor);\n\n  //   if (this.pointer.isDragging) {\n  //     this.pointer.dragTarget = actor;\n  //   }\n  // }\n\n  // private _onActorLeave(actor: Actor) {\n  //   const pe = createPointerEventByName('leave', this.coordinates, this.pointer, this.index, this.pointerType, this.button, this.ev);\n  //   pe.propagate(actor);\n  //   this.pointer.removeActorUnderPointer(actor);\n  // }\n}\n\nexport class PointerEnterEvent extends PointerEvent {\n  protected _name = 'pointerenter';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragenter', this);\n    }\n  }\n}\n\nexport class PointerLeaveEvent extends PointerEvent {\n  protected _name = 'pointerleave';\n\n  protected _onActionStart(actor: Actor) {\n    if (!actor.capturePointer.captureMoveEvents) {\n      return;\n    }\n  }\n\n  protected _onActionEnd(actor: Actor) {\n    const pointer = this.pointer;\n\n    if (pointer.isDragging && actor.capturePointer.captureDragEvents) {\n      actor.eventDispatcher.emit('pointerdragleave', this);\n    }\n  }\n}\n\nexport class PointerCancelEvent extends PointerEvent {\n  protected _name = 'pointercancel';\n}\n/**\n * Wheel Events\n *\n * Represents a mouse wheel event. See [[Pointers]] for more information on\n * handling point input.\n */\nexport class WheelEvent extends GameEvent<Actor> {\n  /**\n   * @param x            The `x` coordinate of the event (in world coordinates)\n   * @param y            The `y` coordinate of the event (in world coordinates)\n   * @param pageX        The `x` coordinate of the event (in document coordinates)\n   * @param pageY        The `y` coordinate of the event (in document coordinates)\n   * @param screenX      The `x` coordinate of the event (in screen coordinates)\n   * @param screenY      The `y` coordinate of the event (in screen coordinates)\n   * @param index        The index of the pointer (zero-based)\n   * @param deltaX       The type of pointer\n   * @param deltaY       The type of pointer\n   * @param deltaZ       The type of pointer\n   * @param deltaMode    The type of movement [[WheelDeltaMode]]\n   * @param ev           The raw DOM event being handled\n   */\n  constructor(\n    public x: number,\n    public y: number,\n    public pageX: number,\n    public pageY: number,\n    public screenX: number,\n    public screenY: number,\n    public index: number,\n    public deltaX: number,\n    public deltaY: number,\n    public deltaZ: number,\n    public deltaMode: WheelDeltaMode,\n    public ev: any\n  ) {\n    super();\n  }\n\n  private _isCanceled = false;\n\n  /**\n   * Cancels pointer event propogation, event will not be transmitted to any other actors\n   */\n  public cancel() {\n    this._isCanceled = true;\n  }\n\n  /**\n   *\n   * @returns If the event is canceled it will no longer be transmitted to any other actors\n   */\n  public isCanceled() {\n    return this._isCanceled;\n  }\n}\n\n/**\n *\n */\nexport function createPointerEventByName(\n  eventName: string,\n  coordinates: GlobalCoordinates,\n  pointer: Pointer,\n  index: number,\n  pointerType: PointerType,\n  button: PointerButton,\n  ev: any\n) {\n  let factory: PointerEventFactory<PointerEvent>;\n\n  switch (eventName) {\n    case 'up':\n      factory = new PointerEventFactory(<any>PointerUpEvent);\n      break;\n    case 'down':\n      factory = new PointerEventFactory(<any>PointerDownEvent);\n      break;\n    case 'move':\n      factory = new PointerEventFactory(<any>PointerMoveEvent);\n      break;\n    case 'cancel':\n      factory = new PointerEventFactory(<any>PointerCancelEvent);\n      break;\n    case 'enter':\n      factory = new PointerEventFactory(<any>PointerEnterEvent);\n      break;\n    case 'leave':\n      factory = new PointerEventFactory(<any>PointerLeaveEvent);\n      break;\n  }\n\n  return factory.create(coordinates, pointer, index, pointerType, button, ev);\n}\n","import { Logger } from './../Util/Log';\nimport { PostProcessor } from './PostProcessor';\nimport { Engine } from '../Engine';\n\nexport enum ColorBlindness {\n  Protanope,\n  Deuteranope,\n  Tritanope\n}\n\n/**\n * This post processor can correct colors and simulate color blindness.\n * It is possible to use this on every game, but the game's performance\n * will suffer measurably. It's better to use it as a helpful tool while developing your game.\n * Remember, the best practice is to design with color blindness in mind.\n */\nexport class ColorBlindCorrector implements PostProcessor {\n  /*eslint-disable */\n  private _vertexShader =\n    '' +\n    'attribute vec2 a_position;' +\n    'attribute vec2 a_texCoord;' +\n    'uniform vec2 u_resolution;' +\n    'varying vec2 v_texCoord;' +\n    'void main() {' +\n    // convert the rectangle from pixels to 0.0 to 1.0\n    'vec2 zeroToOne = a_position / u_resolution;' +\n    // convert from 0->1 to 0->2\n    'vec2 zeroToTwo = zeroToOne * 2.0;' +\n    // convert from 0->2 to -1->+1 (clipspace)\n    'vec2 clipSpace = zeroToTwo - 1.0;' +\n    'gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);' +\n    // pass the texCoord to the fragment shader\n    // The GPU will interpolate this value between points.\n    'v_texCoord = a_texCoord;' +\n    '}';\n\n  private _fragmentShader =\n    'precision mediump float;' +\n    // our texture\n    'uniform sampler2D u_image;' +\n    // the texCoords passed in from the vertex shader.\n    'varying vec2 v_texCoord;' +\n    // Color blind conversions\n    /*'mat3 m[9] =' +\n   '{' +\n      'mat3(1.0, 0.0, 0.0,  0.0, 1.0, 0.0,  0.0, 0.0, 1.0  ),' + // normal\n      'mat3(0.567, 0.433, 0.0,  0.558, 0.442, 0.0,  0.0, 0.242, 0.758),' + // protanopia\n      'mat3(0.817, 0.183, 0.0,  0.333, 0.667, 0.0,  0.0, 0.125,0.875),' + // protanomaly\n      'mat3(0.625, 0.375, 0.0,  0.7, 0.3, 0.0,  0.0, 0.3,0.7  ),' + // deuteranopia\n      'mat3(0.8, 0.2, 0.0,  0.258, 0.742, 0.0,  0.0, 0.142,0.858),' + // deuteranomaly\n      'mat3(0.95, 0.05, 0.0,  0.0, 0.433, 0.567,  0.0, 0.475,0.525),' + // tritanopia\n      'mat3(0.967, 0.033, 0.0,  0.0, 0.733, 0.267,  0.0, 0.183,0.817),' + // tritanomaly\n      'mat3(0.299, 0.587, 0.114,  0.299, 0.587, 0.114,  0.299, 0.587,0.114),' + // achromatopsia\n      'mat3(0.618, 0.320, 0.062,  0.163, 0.775, 0.062,  0.163, 0.320,0.516)' +  // achromatomaly\n   '};' +*/\n\n    'void main() {' +\n    'vec4 o =  texture2D(u_image, v_texCoord);' +\n    // RGB to LMS matrix conversion\n    'float L = (17.8824 * o.r) + (43.5161 * o.g) + (4.11935 * o.b);' +\n    'float M = (3.45565 * o.r) + (27.1554 * o.g) + (3.86714 * o.b);' +\n    'float S = (0.0299566 * o.r) + (0.184309 * o.g) + (1.46709 * o.b);' +\n    // Simulate color blindness\n\n    '//MODE CODE//' +\n    /* Deuteranope for testing\n      'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n            'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n            'float s = 0.0 * L + 0.0 * M + 1.0 * S;' +*/\n\n    // LMS to RGB matrix conversion\n    'vec4 error;' +\n    'error.r = (0.0809444479 * l) + (-0.130504409 * m) + (0.116721066 * s);' +\n    'error.g = (-0.0102485335 * l) + (0.0540193266 * m) + (-0.113614708 * s);' +\n    'error.b = (-0.000365296938 * l) + (-0.00412161469 * m) + (0.693511405 * s);' +\n    'error.a = 1.0;' +\n    'vec4 diff = o - error;' +\n    'vec4 correction;' +\n    'correction.r = 0.0;' +\n    'correction.g =  (diff.r * 0.7) + (diff.g * 1.0);' +\n    'correction.b =  (diff.r * 0.7) + (diff.b * 1.0);' +\n    'correction = o + correction;' +\n    'correction.a = o.a;' +\n    '//SIMULATE//' +\n    '}';\n\n  /*eslint-enable */\n  private _internalCanvas: HTMLCanvasElement;\n  private _gl: WebGLRenderingContext;\n  private _program: WebGLProgram;\n\n  constructor(public engine: Engine, public simulate: boolean = false, public colorMode: ColorBlindness = ColorBlindness.Protanope) {\n    this._internalCanvas = document.createElement('canvas');\n    this._internalCanvas.width = engine.drawWidth;\n    this._internalCanvas.height = engine.drawHeight;\n\n    // eslint-disable-next-line\n    this._gl = <WebGLRenderingContext>this._internalCanvas.getContext('webgl', { preserveDrawingBuffer: true });\n\n    this._program = this._gl.createProgram();\n    const fragmentShader = this._getShader('Fragment', this._getFragmentShaderByMode(colorMode));\n    const vertextShader = this._getShader('Vertex', this._vertexShader);\n\n    this._gl.attachShader(this._program, vertextShader);\n    this._gl.attachShader(this._program, fragmentShader);\n    this._gl.linkProgram(this._program);\n\n    if (!this._gl.getProgramParameter(this._program, this._gl.LINK_STATUS)) {\n      Logger.getInstance().error('Unable to link shader program!');\n    }\n\n    this._gl.useProgram(this._program);\n  }\n\n  private _getFragmentShaderByMode(colorMode: ColorBlindness) {\n    let code = '';\n    if (colorMode === ColorBlindness.Protanope) {\n      code =\n        'float l = 0.0 * L + 2.02344 * M + -2.52581 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Deuteranope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.494207 * L + 0.0 * M + 1.24827 * S;' +\n        'float s = 0.0 * L + 0.0 * M + 1.0 * S;';\n    } else if (colorMode === ColorBlindness.Tritanope) {\n      code =\n        'float l = 1.0 * L + 0.0 * M + 0.0 * S;' +\n        'float m = 0.0 * L + 1.0 * M + 0.0 * S;' +\n        'float s = -0.395913 * L + 0.801109 * M + 0.0 * S;';\n    }\n\n    if (this.simulate) {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = error.rgba;');\n    } else {\n      this._fragmentShader = this._fragmentShader.replace('//SIMULATE//', 'gl_FragColor = correction.rgba;');\n    }\n\n    return this._fragmentShader.replace('//MODE CODE//', code);\n  }\n\n  private _setRectangle(x: number, y: number, width: number, height: number) {\n    const x1 = x;\n    const x2 = x + width;\n    const y1 = y;\n    const y2 = y + height;\n    this._gl.bufferData(this._gl.ARRAY_BUFFER, new Float32Array([x1, y1, x2, y1, x1, y2, x1, y2, x2, y1, x2, y2]), this._gl.STATIC_DRAW);\n  }\n\n  private _getShader(type: string, program: string): WebGLShader {\n    let shader: WebGLShader;\n    if (type === 'Fragment') {\n      shader = this._gl.createShader(this._gl.FRAGMENT_SHADER);\n    } else if (type === 'Vertex') {\n      shader = this._gl.createShader(this._gl.VERTEX_SHADER);\n    } else {\n      Logger.getInstance().error('Error unknown shader type', type);\n    }\n\n    this._gl.shaderSource(shader, program);\n    this._gl.compileShader(shader);\n\n    if (!this._gl.getShaderParameter(shader, this._gl.COMPILE_STATUS)) {\n      Logger.getInstance().error('Unable to compile shader!', this._gl.getShaderInfoLog(shader));\n      return null;\n    }\n\n    return shader;\n  }\n\n  public process(image: ImageData, out: CanvasRenderingContext2D) {\n    // look up where the vertex data needs to go.\n    const positionLocation = this._gl.getAttribLocation(this._program, 'a_position');\n    const texCoordLocation = this._gl.getAttribLocation(this._program, 'a_texCoord');\n\n    const texCoordBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, texCoordBuffer);\n    this._gl.bufferData(\n      this._gl.ARRAY_BUFFER,\n      new Float32Array([0.0, 0.0, 1.0, 0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0, 1.0]),\n      this._gl.STATIC_DRAW\n    );\n    this._gl.enableVertexAttribArray(texCoordLocation);\n    this._gl.vertexAttribPointer(texCoordLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Create a texture.\n    const texture = this._gl.createTexture();\n    this._gl.bindTexture(this._gl.TEXTURE_2D, texture);\n\n    // Set the parameters so we can render any size image.\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_S, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_WRAP_T, this._gl.CLAMP_TO_EDGE);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MIN_FILTER, this._gl.NEAREST);\n    this._gl.texParameteri(this._gl.TEXTURE_2D, this._gl.TEXTURE_MAG_FILTER, this._gl.NEAREST);\n    // Flip the texture when unpacking into the gl context, gl reads textures in the opposite order as everything else :/\n    this._gl.pixelStorei(this._gl.UNPACK_FLIP_Y_WEBGL, 1);\n    // Upload the image into the texture.\n    this._gl.texImage2D(this._gl.TEXTURE_2D, 0, this._gl.RGBA, this._gl.RGBA, this._gl.UNSIGNED_BYTE, image);\n\n    // lookup uniforms\n    const resolutionLocation = this._gl.getUniformLocation(this._program, 'u_resolution');\n\n    // set the resolution\n    this._gl.uniform2f(resolutionLocation, this._internalCanvas.width, this._internalCanvas.height);\n\n    // Create a buffer for the position of the rectangle corners.\n    const positionBuffer = this._gl.createBuffer();\n    this._gl.bindBuffer(this._gl.ARRAY_BUFFER, positionBuffer);\n    this._gl.enableVertexAttribArray(positionLocation);\n    this._gl.vertexAttribPointer(positionLocation, 2, this._gl.FLOAT, false, 0, 0);\n\n    // Set a rectangle the same size as the image.\n    this._setRectangle(0, 0, image.width, image.height);\n\n    // Draw the rectangle.\n    this._gl.drawArrays(this._gl.TRIANGLES, 0, 6);\n\n    // Grab transformed image from internal canvas\n    const pixelData = new Uint8Array(image.width * image.height * 4);\n    this._gl.readPixels(0, 0, image.width, image.height, this._gl.RGBA, this._gl.UNSIGNED_BYTE, pixelData);\n\n    (<any>image.data).set(pixelData);\n\n    out.putImageData(image, 0, 0);\n  }\n}\n","import { Class } from './../Class';\nimport { GameEvent, GamepadConnectEvent, GamepadDisconnectEvent, GamepadButtonEvent, GamepadAxisEvent } from '../Events';\nimport * as Events from '../Events';\n\n/**\n * Excalibur leverages the HTML5 Gamepad API [where it is supported](http://caniuse.com/#feat=gamepad)\n * to provide controller support for your games.\n */\nexport class Gamepads extends Class {\n  /**\n   * Whether or not to poll for Gamepad input (default: `false`)\n   */\n  public enabled = false;\n\n  /**\n   * Whether or not Gamepad API is supported\n   */\n  public supported = !!(<any>navigator).getGamepads;\n\n  /**\n   * The minimum value an axis has to move before considering it a change\n   */\n  public static MinAxisMoveThreshold = 0.05;\n\n  private _gamePadTimeStamps = [0, 0, 0, 0];\n  private _oldPads: Gamepad[] = [];\n  private _pads: Gamepad[] = [];\n  private _initSuccess: boolean = false;\n  private _navigator: NavigatorGamepads = <any>navigator;\n  private _minimumConfiguration: GamepadConfiguration = null;\n\n  constructor() {\n    super();\n  }\n\n  public init() {\n    if (!this.supported) {\n      return;\n    }\n    if (this._initSuccess) {\n      return;\n    }\n\n    // In Chrome, this will return 4 undefined items until a button is pressed\n    // In FF, this will not return any items until a button is pressed\n    this._oldPads = this._clonePads(this._navigator.getGamepads());\n    if (this._oldPads.length && this._oldPads[0]) {\n      this._initSuccess = true;\n    }\n  }\n\n  /**\n   * Sets the minimum gamepad configuration, for example {axis: 4, buttons: 4} means\n   * this game requires at minimum 4 axis inputs and 4 buttons, this is not restrictive\n   * all other controllers with more axis or buttons are valid as well. If no minimum\n   * configuration is set all pads are valid.\n   */\n  public setMinimumGamepadConfiguration(config: GamepadConfiguration): void {\n    this._enableAndUpdate(); // if config is used, implicitly enable\n    this._minimumConfiguration = config;\n  }\n\n  /**\n   * When implicitly enabled, set the enabled flag and run an update so information is updated\n   */\n  private _enableAndUpdate() {\n    if (!this.enabled) {\n      this.enabled = true;\n      this.update();\n    }\n  }\n\n  /**\n   * Checks a navigator gamepad against the minimum configuration if present.\n   */\n  private _isGamepadValid(pad: NavigatorGamepad): boolean {\n    if (!this._minimumConfiguration) {\n      return true;\n    }\n    if (!pad) {\n      return false;\n    }\n    const axesLength = pad.axes.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n\n    const buttonLength = pad.buttons.filter((value) => {\n      return typeof value !== undefined;\n    }).length;\n    return axesLength >= this._minimumConfiguration.axis && buttonLength >= this._minimumConfiguration.buttons && pad.connected;\n  }\n\n  public on(eventName: Events.connect, handler: (event: GamepadConnectEvent) => void): void;\n  public on(eventName: Events.disconnect, handler: (event: GamepadDisconnectEvent) => void): void;\n  public on(eventName: Events.button, handler: (event: GamepadButtonEvent) => void): void;\n  public on(eventName: Events.axis, handler: (event: GamepadAxisEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    this._enableAndUpdate(); // implicitly enable\n    super.on(eventName, handler);\n  }\n\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void) {\n    this._enableAndUpdate(); // implicitly enable\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Updates Gamepad state and publishes Gamepad events\n   */\n  public update() {\n    if (!this.enabled || !this.supported) {\n      return;\n    }\n    this.init();\n\n    const gamepads = this._navigator.getGamepads();\n\n    for (let i = 0; i < gamepads.length; i++) {\n      if (!gamepads[i]) {\n        const gamepad = this.at(i);\n        // If was connected, but now isn't emit the disconnect event\n        if (gamepad.connected) {\n          this.eventDispatcher.emit('disconnect', new GamepadDisconnectEvent(i, gamepad));\n        }\n        // Reset connection status\n        gamepad.connected = false;\n        continue;\n      } else {\n        if (!this.at(i).connected && this._isGamepadValid(gamepads[i])) {\n          this.eventDispatcher.emit('connect', new GamepadConnectEvent(i, this.at(i)));\n        }\n        // Set connection status\n        this.at(i).connected = true;\n      }\n\n      // Only supported in Chrome\n      if (gamepads[i].timestamp && gamepads[i].timestamp === this._gamePadTimeStamps[i]) {\n        continue;\n      }\n\n      this._gamePadTimeStamps[i] = gamepads[i].timestamp;\n\n      // Add reference to navigator gamepad\n      this.at(i).navigatorGamepad = gamepads[i];\n\n      // Buttons\n      let b: string, bi: number, a: string, ai: number, value: number;\n\n      for (b in Buttons) {\n        bi = <any>Buttons[b];\n        if (typeof bi === 'number') {\n          if (gamepads[i].buttons[bi]) {\n            value = gamepads[i].buttons[bi].value;\n            if (value !== this._oldPads[i].getButton(bi)) {\n              if (gamepads[i].buttons[bi].pressed) {\n                this.at(i).updateButton(bi, value);\n                this.at(i).eventDispatcher.emit('button', new GamepadButtonEvent(bi, value, this.at(i)));\n              } else {\n                this.at(i).updateButton(bi, 0);\n              }\n            }\n          }\n        }\n      }\n\n      // Axes\n      for (a in Axes) {\n        ai = <any>Axes[a];\n        if (typeof ai === 'number') {\n          value = gamepads[i].axes[ai];\n          if (value !== this._oldPads[i].getAxes(ai)) {\n            this.at(i).updateAxes(ai, value);\n            this.at(i).eventDispatcher.emit('axis', new GamepadAxisEvent(ai, value, this.at(i)));\n          }\n        }\n      }\n\n      this._oldPads[i] = this._clonePad(gamepads[i]);\n    }\n  }\n\n  /**\n   * Safely retrieves a Gamepad at a specific index and creates one if it doesn't yet exist\n   */\n  public at(index: number): Gamepad {\n    this._enableAndUpdate(); // implicitly enable gamepads when at() is called\n    if (index >= this._pads.length) {\n      // Ensure there is a pad to retrieve\n      for (let i = this._pads.length - 1, max = index; i < max; i++) {\n        this._pads.push(new Gamepad());\n        this._oldPads.push(new Gamepad());\n      }\n    }\n\n    return this._pads[index];\n  }\n\n  /**\n   * Returns a list of all valid gamepads that meet the minimum configuration requirement.\n   */\n  public getValidGamepads(): Gamepad[] {\n    this._enableAndUpdate();\n    const result: Gamepad[] = [];\n    for (let i = 0; i < this._pads.length; i++) {\n      if (this._isGamepadValid(this.at(i).navigatorGamepad) && this.at(i).connected) {\n        result.push(this.at(i));\n      }\n    }\n    return result;\n  }\n\n  /**\n   * Gets the number of connected gamepads\n   */\n  public count() {\n    return this._pads.filter((p) => p.connected).length;\n  }\n\n  private _clonePads(pads: NavigatorGamepad[]): Gamepad[] {\n    const arr = [];\n    for (let i = 0, len = pads.length; i < len; i++) {\n      arr.push(this._clonePad(pads[i]));\n    }\n    return arr;\n  }\n\n  /**\n   * Fastest way to clone a known object is to do it yourself\n   */\n  private _clonePad(pad: NavigatorGamepad): Gamepad {\n    let i, len;\n    const clonedPad = new Gamepad();\n\n    if (!pad) {\n      return clonedPad;\n    }\n\n    for (i = 0, len = pad.buttons.length; i < len; i++) {\n      if (pad.buttons[i]) {\n        clonedPad.updateButton(i, pad.buttons[i].value);\n      }\n    }\n    for (i = 0, len = pad.axes.length; i < len; i++) {\n      clonedPad.updateAxes(i, pad.axes[i]);\n    }\n\n    return clonedPad;\n  }\n}\n\n/**\n * Gamepad holds state information for a connected controller. See [[Gamepads]]\n * for more information on handling controller input.\n */\nexport class Gamepad extends Class {\n  public connected = false;\n  public navigatorGamepad: NavigatorGamepad;\n  private _buttons: number[] = new Array(16);\n  private _axes: number[] = new Array(4);\n\n  constructor() {\n    super();\n\n    for (let i = 0; i < this._buttons.length; i++) {\n      this._buttons[i] = 0;\n    }\n    for (let i = 0; i < this._axes.length; i++) {\n      this._axes[i] = 0;\n    }\n  }\n\n  /**\n   * Whether or not the given button is pressed\n   * @param button     The button to query\n   * @param threshold  The threshold over which the button is considered to be pressed\n   */\n  public isButtonPressed(button: Buttons, threshold: number = 1) {\n    return this._buttons[button] >= threshold;\n  }\n\n  /**\n   * Gets the given button value between 0 and 1\n   */\n  public getButton(button: Buttons) {\n    return this._buttons[button];\n  }\n\n  /**\n   * Gets the given axis value between -1 and 1. Values below\n   * [[MinAxisMoveThreshold]] are considered 0.\n   */\n  public getAxes(axes: Axes) {\n    const value = this._axes[axes];\n\n    if (Math.abs(value) < Gamepads.MinAxisMoveThreshold) {\n      return 0;\n    } else {\n      return value;\n    }\n  }\n\n  public updateButton(buttonIndex: number, value: number) {\n    this._buttons[buttonIndex] = value;\n  }\n\n  public updateAxes(axesIndex: number, value: number) {\n    this._axes[axesIndex] = value;\n  }\n}\n\n/**\n * Gamepad Buttons enumeration\n */\nexport enum Buttons {\n  /**\n   * Face 1 button (e.g. A)\n   */\n  Face1 = 0,\n  /**\n   * Face 2 button (e.g. B)\n   */\n  Face2 = 1,\n  /**\n   * Face 3 button (e.g. X)\n   */\n  Face3 = 2,\n  /**\n   * Face 4 button (e.g. Y)\n   */\n  Face4 = 3,\n  /**\n   * Left bumper button\n   */\n  LeftBumper = 4,\n  /**\n   * Right bumper button\n   */\n  RightBumper = 5,\n  /**\n   * Left trigger button\n   */\n  LeftTrigger = 6,\n  /**\n   * Right trigger button\n   */\n  RightTrigger = 7,\n  /**\n   * Select button\n   */\n  Select = 8,\n  /**\n   * Start button\n   */\n  Start = 9,\n  /**\n   * Left analog stick press (e.g. L3)\n   */\n  LeftStick = 10,\n  /**\n   * Right analog stick press (e.g. R3)\n   */\n  RightStick = 11,\n  /**\n   * D-pad up\n   */\n  DpadUp = 12,\n  /**\n   * D-pad down\n   */\n  DpadDown = 13,\n  /**\n   * D-pad left\n   */\n  DpadLeft = 14,\n  /**\n   * D-pad right\n   */\n  DpadRight = 15\n}\n\n/**\n * Gamepad Axes enumeration\n */\nexport enum Axes {\n  /**\n   * Left analogue stick X direction\n   */\n  LeftStickX = 0,\n  /**\n   * Left analogue stick Y direction\n   */\n  LeftStickY = 1,\n  /**\n   * Right analogue stick X direction\n   */\n  RightStickX = 2,\n  /**\n   * Right analogue stick Y direction\n   */\n  RightStickY = 3\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepads {\n  getGamepads(): NavigatorGamepad[];\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepad {\n  axes: number[];\n  buttons: NavigatorGamepadButton[];\n  connected: boolean;\n  id: string;\n  index: number;\n  mapping: string;\n  timestamp: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadButton {\n  pressed: boolean;\n  value: number;\n}\n\n/**\n * @internal\n */\nexport interface NavigatorGamepadEvent {\n  gamepad: NavigatorGamepad;\n}\n\n/**\n * @internal\n */\nexport interface GamepadConfiguration {\n  axis: number;\n  buttons: number;\n}\n","import { ScreenElement } from './ScreenElement';\nimport { Physics } from './Physics';\nimport {\n  InitializeEvent,\n  ActivateEvent,\n  DeactivateEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  PreDebugDrawEvent,\n  PostDebugDrawEvent,\n  GameEvent\n} from './Events';\nimport { Logger } from './Util/Log';\nimport { Timer } from './Timer';\nimport { DynamicTreeCollisionBroadphase } from './Collision/DynamicTreeCollisionBroadphase';\nimport { CollisionBroadphase } from './Collision/CollisionResolver';\nimport { Engine } from './Engine';\nimport { TileMap } from './TileMap';\nimport { Camera } from './Camera';\nimport { Actor } from './Actor';\nimport { Class } from './Class';\nimport { CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw } from './Interfaces/LifecycleEvents';\nimport * as Util from './Util/Util';\nimport * as Events from './Events';\nimport * as ActorUtils from './Util/Actors';\nimport { Trigger } from './Trigger';\nimport { Body } from './Collision/Body';\nimport { SystemType } from './EntityComponentSystem/System';\n// import { CanvasDrawingSystem } from './Drawing/CanvasDrawingSystem';\nimport { obsolete } from './Util/Decorators';\nimport { World } from './EntityComponentSystem/World';\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { GraphicsSystem } from './Graphics/GraphicsSystem';\nimport { CanvasDrawingSystem } from './Drawing/CanvasDrawingSystem';\nimport { Flags, Legacy } from './Flags';\n/**\n * [[Actor|Actors]] are composed together into groupings called Scenes in\n * Excalibur. The metaphor models the same idea behind real world\n * actors in a scene. Only actors in scenes will be updated and drawn.\n *\n * Typical usages of a scene include: levels, menus, loading screens, etc.\n */\nexport class Scene extends Class implements CanInitialize, CanActivate, CanDeactivate, CanUpdate, CanDraw {\n  /**\n   * Gets or sets the current camera for the scene\n   */\n  public camera: Camera;\n\n  /**\n   * The actors in the current scene\n   */\n  public actors: Actor[] = [];\n\n  /**\n   * The ECS world for the scene\n   */\n  public world = new World(this);\n\n  /**\n   * Physics bodies in the current scene\n   */\n  private _bodies: Body[] = [];\n\n  /**\n   * The triggers in the current scene\n   */\n  public triggers: Trigger[] = [];\n\n  /**\n   * The [[TileMap]]s in the scene, if any\n   */\n  public tileMaps: TileMap[] = [];\n\n  /**\n   * Access to the Excalibur engine\n   */\n  public engine: Engine;\n\n  /**\n   * The [[ScreenElement]]s in a scene, if any; these are drawn last\n   * @deprecated Use [[Scene.actors]]\n   */\n  @obsolete({\n    message: 'Will be removed in excalibur v0.26.0',\n    alternateMethod: 'ScreenElements now are normal actors with a Transform Coordinate Plane of Screen'\n  })\n  public get screenElements(): ScreenElement[] {\n    return this.actors.filter((a) => a instanceof ScreenElement) as ScreenElement[];\n  }\n\n  private _isInitialized: boolean = false;\n\n  private _broadphase: CollisionBroadphase = new DynamicTreeCollisionBroadphase();\n\n  private _killQueue: Actor[] = [];\n  private _triggerKillQueue: Trigger[] = [];\n  private _timers: Timer[] = [];\n  private _cancelQueue: Timer[] = [];\n  private _logger: Logger = Logger.getInstance();\n\n  constructor(_engine?: Engine) {\n    super();\n    this.camera = new Camera();\n    if (_engine) {\n      this.engine = _engine;\n      this.camera.x = this.engine.halfDrawWidth;\n      this.camera.y = this.engine.halfDrawHeight;\n    }\n  }\n\n  public on(eventName: Events.initialize, handler: (event: InitializeEvent<Scene>) => void): void;\n  public on(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public on(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Scene>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Scene>) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public on(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: InitializeEvent<Scene>) => void): void;\n  public once(eventName: Events.activate, handler: (event: ActivateEvent) => void): void;\n  public once(eventName: Events.deactivate, handler: (event: DeactivateEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Scene>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Scene>) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: Events.predebugdraw, handler: (event: PreDebugDrawEvent) => void): void;\n  public once(eventName: Events.postdebugdraw, handler: (event: PostDebugDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: InitializeEvent<Scene>) => void): void;\n  public off(eventName: Events.activate, handler?: (event: ActivateEvent) => void): void;\n  public off(eventName: Events.deactivate, handler?: (event: DeactivateEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent<Scene>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent<Scene>) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: Events.predebugdraw, handler?: (event: PreDebugDrawEvent) => void): void;\n  public off(eventName: Events.postdebugdraw, handler?: (event: PostDebugDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * This is called before the first update of the [[Scene]]. Initializes scene members like the camera. This method is meant to be\n   * overridden. This is where initialization of child actors should take place.\n   */\n  public onInitialize(_engine: Engine): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made active and started. It is meant to be overridden,\n   * this is where you should setup any DOM UI or event handlers needed for the scene.\n   */\n  public onActivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * This is called when the scene is made transitioned away from and stopped. It is meant to be overridden,\n   * this is where you should cleanup any DOM UI or event handlers needed for the scene.\n   */\n  public onDeactivate(_oldScene: Scene, _newScene: Scene): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreUpdate` is called directly before a scene is updated.\n   */\n  public onPreUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostUpdate lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostUpdate` is called directly after a scene is updated.\n   */\n  public onPostUpdate(_engine: Engine, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPreDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPreDraw` is called directly before a scene is drawn.\n   */\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Safe to override onPostDraw lifecycle event handler. Synonymous with `.on('preupdate', (evt) =>{...})`\n   *\n   * `onPostDraw` is called directly after a scene is drawn.\n   */\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    // will be overridden\n  }\n\n  /**\n   * Initializes actors in the scene\n   */\n  private _initializeChildren(): void {\n    for (const child of this.actors) {\n      child._initialize(this.engine);\n    }\n  }\n\n  /**\n   * Gets whether or not the [[Scene]] has been initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Initializes the scene before the first update, meant to be called by engine not by users of\n   * Excalibur\n   * @internal\n   */\n  public _initialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.engine = engine;\n      if (this.camera) {\n        this.camera.x = engine.halfDrawWidth;\n        this.camera.y = engine.halfDrawHeight;\n      }\n\n      // Initialize systems\n      if (Flags.isEnabled(Legacy.LegacyDrawing)) {\n        this.world.add(new CanvasDrawingSystem());\n      } else {\n        this.world.add(new GraphicsSystem());\n      }\n\n      // This order is important! we want to be sure any custom init that add actors\n      // fire before the actor init\n      this.onInitialize.call(this, engine);\n      this._initializeChildren();\n\n      this._logger.debug('Scene.onInitialize', this, engine);\n      this.eventDispatcher.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n    }\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Activates the scene with the base behavior, then calls the overridable `onActivate` implementation.\n   * @internal\n   */\n  public _activate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onActivate', this);\n    this.onActivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Deactivates the scene with the base behavior, then calls the overridable `onDeactivate` implementation.\n   * @internal\n   */\n  public _deactivate(oldScene: Scene, newScene: Scene): void {\n    this._logger.debug('Scene.onDeactivate', this);\n    this.onDeactivate(oldScene, newScene);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPreUpdate]] lifecycle event\n   * @internal\n   */\n  public _preupdate(_engine: Engine, delta: number): void {\n    this.emit('preupdate', new PreUpdateEvent(_engine, delta, this));\n    this.onPreUpdate(_engine, delta);\n  }\n\n  /**\n   *  It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _preupdate handler for [[onPostUpdate]] lifecycle event\n   * @internal\n   */\n  public _postupdate(_engine: Engine, delta: number): void {\n    this.emit('postupdate', new PostUpdateEvent(_engine, delta, this));\n    this.onPostUpdate(_engine, delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _predraw handler for [[onPreDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('predraw', new PreDrawEvent(_ctx, _delta, this));\n    this.onPreDraw(_ctx, _delta);\n  }\n\n  /**\n   * It is not recommended that internal excalibur methods be overridden, do so at your own risk.\n   *\n   * Internal _postdraw handler for [[onPostDraw]] lifecycle event\n   *\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, _delta: number): void {\n    this.emit('postdraw', new PostDrawEvent(_ctx, _delta, this));\n    this.onPostDraw(_ctx, _delta);\n  }\n\n  /**\n   * Updates all the actors and timers in the scene. Called by the [[Engine]].\n   * @param engine  Reference to the current Engine\n   * @param delta   The number of milliseconds since the last update\n   */\n  public update(engine: Engine, delta: number) {\n    this._preupdate(engine, delta);\n    this.world.update(SystemType.Update, delta);\n\n    if (this.camera) {\n      this.camera.update(engine, delta);\n    }\n\n    let i: number, len: number;\n    // Remove timers in the cancel queue before updating them\n    for (i = 0, len = this._cancelQueue.length; i < len; i++) {\n      this.removeTimer(this._cancelQueue[i]);\n    }\n    this._cancelQueue.length = 0;\n\n    // Cycle through timers updating timers\n    for (const timer of this._timers) {\n      timer.update(delta);\n    }\n\n    for (const entity of this.world.entityManager.entities) {\n      entity.update(engine, delta);\n    }\n\n    // Cycle through actors updating actors\n    for (i = 0, len = this.actors.length; i < len; i++) {\n      this._bodies[i] = this.actors[i].body;\n    }\n\n    this._collectActorStats(engine);\n\n    engine.input.pointers.dispatchPointerEvents();\n\n    // Run the broadphase and narrowphase\n    if (this._broadphase && Physics.enabled) {\n      const beforeBroadphase = Date.now();\n      this._broadphase.update(this._bodies, delta);\n      let pairs = this._broadphase.broadphase(this._bodies, delta, engine.stats.currFrame);\n      const afterBroadphase = Date.now();\n\n      const beforeNarrowphase = Date.now();\n      let iter: number = Physics.collisionPasses;\n      const collisionDelta = delta / iter;\n      while (iter > 0) {\n        // Run the narrowphase\n        pairs = this._broadphase.narrowphase(pairs, engine.stats.currFrame);\n        // Run collision resolution strategy\n        pairs = this._broadphase.resolve(pairs, collisionDelta, Physics.collisionResolutionStrategy);\n\n        this._broadphase.runCollisionStartEnd(pairs);\n\n        iter--;\n      }\n\n      const afterNarrowphase = Date.now();\n      engine.stats.currFrame.physics.broadphase = afterBroadphase - beforeBroadphase;\n      engine.stats.currFrame.physics.narrowphase = afterNarrowphase - beforeNarrowphase;\n    }\n\n    engine.stats.currFrame.actors.killed = this._killQueue.length + this._triggerKillQueue.length;\n\n    this._processKillQueue(this._killQueue, this.actors);\n    this._processKillQueue(this._triggerKillQueue, this.triggers);\n\n    this._postupdate(engine, delta);\n  }\n\n  private _processKillQueue(killQueue: Actor[], collection: Actor[]) {\n    // Remove actors from scene graph after being killed\n    let actorIndex: number;\n    for (const killed of killQueue) {\n      //don't remove actors that were readded during the same frame they were killed\n      if (killed.isKilled()) {\n        actorIndex = collection.indexOf(killed);\n        if (actorIndex > -1) {\n          collection.splice(actorIndex, 1);\n          this.world.remove(killed);\n          killed.children.forEach((c) => this.world.remove(c));\n        }\n      }\n    }\n    killQueue.length = 0;\n  }\n\n  /**\n   * Draws all the actors in the Scene. Called by the [[Engine]].\n   * @param ctx    The current rendering context\n   * @param delta  The number of milliseconds since the last draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, delta: number) {\n    this._predraw(ctx, delta);\n\n    this.world.update(SystemType.Draw, delta);\n\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * Draws all the actors' debug information in the Scene. Called by the [[Engine]].\n   * @param ctx  The current rendering context\n   */\n  /* istanbul ignore next */\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    this.emit('predebugdraw', new PreDebugDrawEvent(ctx, this));\n    this._broadphase.debugDraw(ctx, 20);\n    this.emit('postdebugdraw', new PostDebugDrawEvent(ctx, this));\n  }\n\n  /**\n   * Checks whether an actor is contained in this scene or not\n   */\n  public contains(actor: Actor): boolean {\n    return this.actors.indexOf(actor) > -1;\n  }\n\n  /**\n   * Adds a [[Timer]] to the current [[Scene]].\n   * @param timer  The timer to add to the current [[Scene]].\n   */\n  public add(timer: Timer): void;\n\n  /**\n   * Adds a [[TileMap]] to the [[Scene]], once this is done the [[TileMap]] will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n\n  /**\n   * Adds a [[Trigger]] to the [[Scene]], once this is done the [[Trigger]] will listen for interactions with other actors.\n   * @param trigger\n   */\n  public add(trigger: Trigger): void;\n\n  /**\n   * Adds an actor to the scene, once this is done the [[Actor]] will be drawn and updated.\n   * @param actor  The actor to add to the current scene\n   */\n  public add(actor: Actor): void;\n\n  public add(entity: Entity): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the scene.\n   * @param screenElement  The ScreenElement to add to the current scene\n   */\n  public add(screenElement: ScreenElement): void;\n  public add(entity: any): void {\n    this.world.add(entity);\n    if (entity instanceof Actor) {\n      entity.unkill();\n    }\n    if (entity instanceof Actor) {\n      if (!Util.contains(this.actors, entity)) {\n        this._broadphase.track(entity.body);\n        entity.scene = this;\n        if (entity instanceof Trigger) {\n          this.triggers.push(entity);\n        } else {\n          this.actors.push(entity);\n        }\n        // TODO remove after collision ecs\n        entity.children.forEach(c => this.add(c));\n        entity.childrenAdded$.register({\n          notify: (e => {\n            this.add(e);\n          })\n        });\n        entity.childrenRemoved$.register({\n          notify: (e => {\n            this.remove(e);\n          })\n        });\n\n      }\n      return;\n    }\n    if (entity instanceof Timer) {\n      if (!Util.contains(this._timers, entity)) {\n        this.addTimer(entity);\n      }\n      return;\n    }\n    if (entity instanceof TileMap) {\n      if (!Util.contains(this.tileMaps, entity)) {\n        this.addTileMap(entity);\n      }\n    }\n  }\n\n  /**\n   * Removes a [[Timer]] from the current scene, it will no longer be updated.\n   * @param timer  The timer to remove to the current scene.\n   */\n  public remove(timer: Timer): void;\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   * @param tileMap {TileMap}\n   */\n  public remove(tileMap: TileMap): void;\n\n  /**\n   * Removes an actor from the scene, it will no longer be drawn or updated.\n   * @param actor  The actor to remove from the current scene.\n   */\n  public remove(actor: Actor): void;\n\n  public remove(entity: Entity): void;\n\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the current scene\n   */\n  public remove(screenElement: ScreenElement): void;\n  public remove(entity: any): void {\n    this.world.remove(entity);\n    if (entity instanceof Actor) {\n      if (!Util.contains(this.actors, entity)) {\n        return;\n      }\n      this._broadphase.untrack(entity.body);\n      if (entity instanceof Trigger) {\n        this._triggerKillQueue.push(entity);\n      } else {\n        if (!entity.isKilled()) {\n          entity.kill();\n        }\n        this._killQueue.push(entity);\n      }\n    }\n    if (entity instanceof Timer) {\n      this.removeTimer(entity);\n    }\n    if (entity instanceof TileMap) {\n      this.removeTileMap(entity);\n    }\n  }\n\n  /**\n   * Adds (any) actor to act as a piece of UI, meaning it is always positioned\n   * in screen coordinates. UI actors do not participate in collisions.\n   * @todo Should this be `ScreenElement` only?\n   * @deprecated Use [[Scene.add]]\n   */\n  @obsolete({message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.add'})\n  public addScreenElement(actor: Actor) {\n    this.add(actor);\n  }\n\n  /**\n   * Removes an actor as a piece of UI\n   * @deprecated Use [[Scene.remove]]\n   */\n  @obsolete({message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.remove'})\n  public removeScreenElement(actor: Actor) {\n    this.remove(actor);\n  }\n\n  /**\n   * Adds a [[TileMap]] to the scene, once this is done the TileMap will be drawn and updated.\n   * @deprecated Use [[Scene.add]]\n   */\n  @obsolete({message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.add'})\n  public addTileMap(tileMap: TileMap) {\n    this.tileMaps.push(tileMap);\n    this.world.add(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the scene, it will no longer be drawn or updated.\n   * @deprecated Use [[Scene.remove]]\n   */\n  @obsolete({message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Scene.remove'})\n  public removeTileMap(tileMap: TileMap) {\n    const index = this.tileMaps.indexOf(tileMap);\n    if (index > -1) {\n      this.tileMaps.splice(index, 1);\n      this.world.remove(tileMap);\n    }\n  }\n\n  /**\n   * Adds a [[Timer]] to the scene\n   * @param timer  The timer to add\n   */\n  public addTimer(timer: Timer): Timer {\n    this._timers.push(timer);\n    timer.scene = this;\n    return timer;\n  }\n\n  /**\n   * Removes a [[Timer]] from the scene.\n   * @warning Can be dangerous, use [[cancelTimer]] instead\n   * @param timer  The timer to remove\n   */\n  public removeTimer(timer: Timer): Timer {\n    const i = this._timers.indexOf(timer);\n    if (i !== -1) {\n      this._timers.splice(i, 1);\n    }\n    return timer;\n  }\n\n  /**\n   * Cancels a [[Timer]], removing it from the scene nicely\n   * @param timer  The timer to cancel\n   */\n  public cancelTimer(timer: Timer): Timer {\n    this._cancelQueue.push(timer);\n    return timer;\n  }\n\n  /**\n   * Tests whether a [[Timer]] is active in the scene\n   */\n  public isTimerActive(timer: Timer): boolean {\n    return this._timers.indexOf(timer) > -1 && !timer.complete;\n  }\n\n  public isCurrentScene(): boolean {\n    if (this.engine) {\n      return this.engine.currentScene === this;\n    }\n    return false;\n  }\n\n  private _collectActorStats(engine: Engine) {\n    for (const _ui of this.screenElements) {\n      engine.stats.currFrame.actors.ui++;\n    }\n\n    for (const actor of this.actors) {\n      engine.stats.currFrame.actors.alive++;\n      for (const child of actor.children) {\n        if (ActorUtils.isScreenElement(child as Actor)) { // TODO not true\n          engine.stats.currFrame.actors.ui++;\n        } else {\n          engine.stats.currFrame.actors.alive++;\n        }\n      }\n    }\n  }\n}\n","import { Engine } from './Engine';\nimport { ColorBlindCorrector, ColorBlindness } from './PostProcessing/Index';\n\nexport interface DebugFlags {\n  colorBlindMode: ColorBlindFlags;\n}\n\nexport class ColorBlindFlags {\n  private _engine: Engine;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n  }\n\n  public correct(colorBlindness: ColorBlindness) {\n    this._engine.postProcessors.push(new ColorBlindCorrector(this._engine, false, colorBlindness));\n  }\n\n  public simulate(colorBlindness: ColorBlindness) {\n    this._engine.postProcessors.push(new ColorBlindCorrector(this._engine, true, colorBlindness));\n  }\n}\n","import { DebugFlags, ColorBlindFlags } from './DebugFlags';\nimport { Pair } from './Collision/Pair';\nimport { Engine } from './Engine';\n\n/**\n * Debug stats containing current and previous frame statistics\n */\nexport interface DebugStats {\n  currFrame: FrameStats;\n  prevFrame: FrameStats;\n}\n\n/**\n * Hash containing the [[Pair.id]]s of pairs that collided in a frame\n */\nexport interface CollidersHash {\n  [pairId: string]: Pair;\n}\n\n/**\n * Represents a frame's individual statistics\n */\nexport interface FrameStatistics {\n  /**\n   * The number of the frame\n   */\n  id: number;\n\n  /**\n   * Gets the frame's delta (time since last frame scaled by [[Engine.timescale]]) (in ms)\n   */\n  delta: number;\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  fps: number;\n\n  /**\n   * Duration statistics (in ms)\n   */\n  duration: FrameDurationStats;\n\n  /**\n   * Actor statistics\n   */\n  actors: FrameActorStats;\n\n  /**\n   * Physics statistics\n   */\n  physics: PhysicsStatistics;\n\n  /**\n   * Graphics statistics\n   */\n  graphics: GraphicsStatistics;\n}\n\n/**\n * Represents actor stats for a frame\n */\nexport interface FrameActorStats {\n  /**\n   * Gets the frame's number of actors (alive)\n   */\n  alive: number;\n\n  /**\n   * Gets the frame's number of actors (killed)\n   */\n  killed: number;\n\n  /**\n   * Gets the frame's number of remaining actors (alive - killed)\n   */\n  remaining: number;\n\n  /**\n   * Gets the frame's number of UI actors\n   */\n  ui: number;\n\n  /**\n   * Gets the frame's number of total actors (remaining + UI)\n   */\n  total: number;\n}\n\n/**\n * Represents duration stats for a frame\n */\nexport interface FrameDurationStats {\n  /**\n   * Gets the frame's total time to run the update function (in ms)\n   */\n  update: number;\n\n  /**\n   * Gets the frame's total time to run the draw function (in ms)\n   */\n  draw: number;\n\n  /**\n   * Gets the frame's total render duration (update + draw duration) (in ms)\n   */\n  total: number;\n}\n\n/**\n * Represents physics stats for the current frame\n */\nexport interface PhysicsStatistics {\n  /**\n   * Gets the number of broadphase collision pairs which\n   */\n  pairs: number;\n\n  /**\n   * Gets the number of actual collisions\n   */\n  collisions: number;\n\n  /**\n   * A Hash storing the [[Pair.id]]s of [[Pair]]s that collided in the frame\n   */\n  collidersHash: CollidersHash;\n\n  /**\n   * Gets the number of fast moving bodies using raycast continuous collisions in the scene\n   */\n  fastBodies: number;\n\n  /**\n   * Gets the number of bodies that had a fast body collision resolution\n   */\n  fastBodyCollisions: number;\n\n  /**\n   * Gets the time it took to calculate the broadphase pairs\n   */\n  broadphase: number;\n\n  /**\n   * Gets the time it took to calculate the narrowphase\n   */\n  narrowphase: number;\n}\n\nexport interface GraphicsStatistics {\n  drawCalls: number;\n  drawnImages: number;\n}\n\n/**\n * Debug statistics and flags for Excalibur. If polling these values, it would be\n * best to do so on the `postupdate` event for [[Engine]], after all values have been\n * updated during a frame.\n */\nexport class Debug implements DebugFlags {\n  private _engine: Engine;\n\n  constructor(engine: Engine) {\n    this._engine = engine;\n\n    this.colorBlindMode = new ColorBlindFlags(this._engine);\n  }\n\n  /**\n   * Performance statistics\n   */\n  public stats: DebugStats = {\n    /**\n     * Current frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[postframe]] event. See [[FrameStats]]\n     */\n    currFrame: new FrameStats(),\n\n    /**\n     * Previous frame statistics. Engine reuses this instance, use [[FrameStats.clone]] to copy frame stats.\n     * Best accessed on [[preframe]] event. Best inspected on engine event `preframe`. See [[FrameStats]]\n     */\n    prevFrame: new FrameStats()\n  };\n\n  /**\n   * Correct or simulate color blindness using [[ColorBlindness]] post processor.\n   * @warning Will reduce FPS.\n   */\n  public colorBlindMode: ColorBlindFlags;\n}\n\n/**\n * Implementation of a frame's stats. Meant to have values copied via [[FrameStats.reset]], avoid\n * creating instances of this every frame.\n */\nexport class FrameStats implements FrameStatistics {\n  private _id: number = 0;\n  private _delta: number = 0;\n  private _fps: number = 0;\n  private _actorStats: FrameActorStats = {\n    alive: 0,\n    killed: 0,\n    ui: 0,\n    get remaining() {\n      return this.alive - this.killed;\n    },\n    get total() {\n      return this.remaining + this.ui;\n    }\n  };\n  private _durationStats: FrameDurationStats = {\n    update: 0,\n    draw: 0,\n    get total() {\n      return this.update + this.draw;\n    }\n  };\n\n  private _physicsStats: PhysicsStats = new PhysicsStats();\n\n  private _graphicsStats: GraphicsStatistics = {\n    drawCalls: 0,\n    drawnImages: 0\n  }\n\n  /**\n   * Zero out values or clone other IFrameStat stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: FrameStatistics) {\n    if (otherStats) {\n      this.id = otherStats.id;\n      this.delta = otherStats.delta;\n      this.fps = otherStats.fps;\n      this.actors.alive = otherStats.actors.alive;\n      this.actors.killed = otherStats.actors.killed;\n      this.actors.ui = otherStats.actors.ui;\n      this.duration.update = otherStats.duration.update;\n      this.duration.draw = otherStats.duration.draw;\n      this._physicsStats.reset(otherStats.physics);\n      this.graphics.drawCalls = otherStats.graphics.drawCalls;\n      this.graphics.drawnImages = otherStats.graphics.drawnImages;\n    } else {\n      this.id = this.delta = this.fps = 0;\n      this.actors.alive = this.actors.killed = this.actors.ui = 0;\n      this.duration.update = this.duration.draw = 0;\n      this._physicsStats.reset();\n      this.graphics.drawnImages = this.graphics.drawCalls = 0;\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): FrameStats {\n    const fs = new FrameStats();\n\n    fs.reset(this);\n\n    return fs;\n  }\n\n  /**\n   * Gets the frame's id\n   */\n  public get id() {\n    return this._id;\n  }\n\n  /**\n   * Sets the frame's id\n   */\n  public set id(value: number) {\n    this._id = value;\n  }\n\n  /**\n   * Gets the frame's delta (time since last frame)\n   */\n  public get delta() {\n    return this._delta;\n  }\n\n  /**\n   * Sets the frame's delta (time since last frame). Internal use only.\n   * @internal\n   */\n  public set delta(value: number) {\n    this._delta = value;\n  }\n\n  /**\n   * Gets the frame's frames-per-second (FPS)\n   */\n  public get fps() {\n    return this._fps;\n  }\n\n  /**\n   * Sets the frame's frames-per-second (FPS). Internal use only.\n   * @internal\n   */\n  public set fps(value: number) {\n    this._fps = value;\n  }\n\n  /**\n   * Gets the frame's actor statistics\n   */\n  public get actors() {\n    return this._actorStats;\n  }\n\n  /**\n   * Gets the frame's duration statistics\n   */\n  public get duration() {\n    return this._durationStats;\n  }\n\n  /**\n   * Gets the frame's physics statistics\n   */\n  public get physics() {\n    return this._physicsStats;\n  }\n\n  /**\n   * Gets the frame's graphics statistics\n   */\n  public get graphics() {\n    return this._graphicsStats;\n  }\n}\n\nexport class PhysicsStats implements PhysicsStatistics {\n  private _pairs: number = 0;\n  private _collisions: number = 0;\n  private _collidersHash: CollidersHash = {};\n  private _fastBodies: number = 0;\n  private _fastBodyCollisions: number = 0;\n  private _broadphase: number = 0;\n  private _narrowphase: number = 0;\n\n  /**\n   * Zero out values or clone other IPhysicsStats stats. Allows instance reuse.\n   *\n   * @param [otherStats] Optional stats to clone\n   */\n  public reset(otherStats?: PhysicsStatistics) {\n    if (otherStats) {\n      this.pairs = otherStats.pairs;\n      this.collisions = otherStats.collisions;\n      this.collidersHash = otherStats.collidersHash;\n      this.fastBodies = otherStats.fastBodies;\n      this.fastBodyCollisions = otherStats.fastBodyCollisions;\n      this.broadphase = otherStats.broadphase;\n      this.narrowphase = otherStats.narrowphase;\n    } else {\n      this.pairs = this.collisions = this.fastBodies = 0;\n      this.fastBodyCollisions = this.broadphase = this.narrowphase = 0;\n      this.collidersHash = {};\n    }\n  }\n\n  /**\n   * Provides a clone of this instance.\n   */\n  public clone(): PhysicsStatistics {\n    const ps = new PhysicsStats();\n\n    ps.reset(this);\n\n    return ps;\n  }\n\n  public get pairs(): number {\n    return this._pairs;\n  }\n\n  public set pairs(value: number) {\n    this._pairs = value;\n  }\n\n  public get collisions(): number {\n    return this._collisions;\n  }\n\n  public set collisions(value: number) {\n    this._collisions = value;\n  }\n\n  public get collidersHash(): CollidersHash {\n    return this._collidersHash;\n  }\n\n  public set collidersHash(colliders: CollidersHash) {\n    this._collidersHash = colliders;\n  }\n\n  public get fastBodies(): number {\n    return this._fastBodies;\n  }\n\n  public set fastBodies(value: number) {\n    this._fastBodies = value;\n  }\n\n  public get fastBodyCollisions(): number {\n    return this._fastBodyCollisions;\n  }\n\n  public set fastBodyCollisions(value: number) {\n    this._fastBodyCollisions = value;\n  }\n\n  public get broadphase(): number {\n    return this._broadphase;\n  }\n\n  public set broadphase(value: number) {\n    this._broadphase = value;\n  }\n\n  public get narrowphase(): number {\n    return this._narrowphase;\n  }\n\n  public set narrowphase(value: number) {\n    this._narrowphase = value;\n  }\n}\n","import { Class } from '../Class';\nimport { Engine, ScrollPreventionMode } from '../Engine';\nimport { Pointer, PointerType } from './Pointer';\nimport {\n  PointerEvent,\n  WheelEvent,\n  NativePointerButton,\n  PointerButton,\n  WheelDeltaMode,\n  createPointerEventByName,\n  PointerLeaveEvent,\n  PointerEnterEvent\n} from './PointerEvents';\nimport { GameEvent } from '../Events';\n\nimport * as Events from '../Events';\nimport * as Util from '../Util/Util';\nimport { GlobalCoordinates, vec, Vector } from '../Algebra';\nimport { CapturePointer } from '../Traits/CapturePointer';\nimport { Actor } from '../Actor';\n\nexport type DOMPointerEvent = globalThis.PointerEvent;\n\ninterface TouchEvent extends Event {\n  altKey: boolean;\n  changedTouches: Touch[];\n  ctrlKey: boolean;\n  metaKey: boolean;\n  shiftKey: boolean;\n  targetTouches: Touch[];\n  touches: Touch[];\n  type: string;\n  target: Element;\n}\n\ninterface Touch {\n  identifier: number;\n  screenX: number;\n  screenY: number;\n  clientX: number;\n  clientY: number;\n  pageX: number;\n  pageY: number;\n  radiusX: number;\n  radiusY: number;\n  rotationAngle: number;\n  force: number;\n  target: Element;\n}\n\n/**\n * A constant used to normalize wheel events across different browsers\n *\n * This normalization factor is pulled from https://developer.mozilla.org/en-US/docs/Web/Events/wheel#Listening_to_this_event_across_browser\n */\nconst ScrollWheelNormalizationFactor = -1 / 40;\n\n/**\n * Handles pointer events (mouse, touch, stylus, etc.) and normalizes to\n * [W3C Pointer Events](http://www.w3.org/TR/pointerevents/).\n */\nexport class Pointers extends Class {\n  private _engine: Engine;\n\n  private _pointerDown: PointerEvent[] = [];\n  private _pointerUp: PointerEvent[] = [];\n  private _pointerMove: PointerEvent[] = [];\n  private _pointerCancel: PointerEvent[] = [];\n  private _wheel: WheelEvent[] = [];\n  private _pointers: Pointer[] = [];\n  private _activePointers: number[] = [];\n\n  constructor(engine: Engine) {\n    super();\n\n    this._engine = engine;\n    this._pointers.push(new Pointer());\n    this._activePointers = [-1];\n    this.primary = this._pointers[0];\n  }\n\n  public on(eventName: Events.up, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.down, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.move, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.enter, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.leave, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.cancel, handler: (event: PointerEvent) => void): void;\n  public on(eventName: Events.wheel, handler: (event: WheelEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  /**\n   * Primary pointer (mouse, 1 finger, stylus, etc.)\n   */\n  public primary: Pointer;\n\n  /**\n   * Initializes pointer event listeners\n   */\n  public init(target?: GlobalEventHandlers): void {\n    target = target || this._engine.canvas;\n\n    // Touch Events\n    target.addEventListener('touchstart', this._handleTouchEvent('down', this._pointerDown));\n    target.addEventListener('touchend', this._handleTouchEvent('up', this._pointerUp));\n    target.addEventListener('touchmove', this._handleTouchEvent('move', this._pointerMove));\n    target.addEventListener('touchcancel', this._handleTouchEvent('cancel', this._pointerCancel));\n\n    // W3C Pointer Events\n    // Current: IE11, IE10\n    if ((<any>window).PointerEvent) {\n      // IE11\n      this._engine.canvas.style.touchAction = 'none';\n      target.addEventListener('pointerdown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('pointerup', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('pointermove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('pointercancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else if ((<any>window).MSPointerEvent) {\n      // IE10\n      (this._engine.canvas.style as any).msTouchAction = 'none';\n      target.addEventListener('MSPointerDown', this._handlePointerEvent('down', this._pointerDown));\n      target.addEventListener('MSPointerUp', this._handlePointerEvent('up', this._pointerUp));\n      target.addEventListener('MSPointerMove', this._handlePointerEvent('move', this._pointerMove));\n      target.addEventListener('MSPointerCancel', this._handlePointerEvent('cancel', this._pointerCancel));\n    } else {\n      // Mouse Events\n      target.addEventListener('mousedown', this._handleMouseEvent('down', this._pointerDown));\n      target.addEventListener('mouseup', this._handleMouseEvent('up', this._pointerUp));\n      target.addEventListener('mousemove', this._handleMouseEvent('move', this._pointerMove));\n    }\n\n    // MDN MouseWheelEvent\n    const wheelOptions = {\n      passive: !(\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas\n      )\n    };\n    if ('onwheel' in document.createElement('div')) {\n      // Modern Browsers\n      target.addEventListener('wheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else if (document.onmousewheel !== undefined) {\n      // Webkit and IE\n      target.addEventListener('mousewheel', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    } else {\n      // Remaining browser and older Firefox\n      target.addEventListener('MozMousePixelScroll', this._handleWheelEvent('wheel', this._wheel), wheelOptions);\n    }\n  }\n\n  /**\n   * Synthesize a pointer event that looks like a real browser event to excalibur\n   * @param eventName\n   * @param pos\n   */\n  public triggerEvent(\n    eventName: 'up' | 'down' | 'move' | 'cancel' | 'wheel',\n    pos: Vector | GlobalCoordinates,\n    button: NativePointerButton = NativePointerButton.Left,\n    pointerType: 'mouse' | 'touch' | 'pen' = 'mouse',\n    pointerId: number = 0\n  ): void {\n    let x = 0;\n    let y = 0;\n    let coords: GlobalCoordinates;\n    if (pos instanceof GlobalCoordinates) {\n      x = pos.pagePos.x;\n      y = pos.pagePos.y;\n      coords = pos;\n    } else {\n      x = pos.x;\n      y = pos.y;\n      coords = new GlobalCoordinates(pos.clone(), pos.clone(), pos.clone());\n    }\n\n    const eventish = {\n      pageX: x,\n      pageY: y,\n      pointerId: pointerId,\n      pointerType: pointerType,\n      button: button,\n      preventDefault: () => {\n        /* do nothing */\n      }\n    };\n\n    switch (eventName) {\n      case 'move':\n        this._handlePointerEvent(eventName, this._pointerMove, coords)(eventish as DOMPointerEvent);\n        break;\n      case 'down':\n        this._handlePointerEvent(eventName, this._pointerDown, coords)(eventish as DOMPointerEvent);\n        break;\n      case 'up':\n        this._handlePointerEvent(eventName, this._pointerUp, coords)(eventish as DOMPointerEvent);\n        break;\n      case 'cancel':\n        this._handlePointerEvent(eventName, this._pointerCancel, coords)(eventish as DOMPointerEvent);\n        break;\n    }\n    for (const actor of this._engine.currentScene.actors) {\n      const capturePointer = actor.traits.filter((t) => t instanceof CapturePointer)[0];\n      if (capturePointer) {\n        capturePointer.update(actor, this._engine, 1);\n      }\n    }\n    this.dispatchPointerEvents();\n    this.update();\n  }\n\n  /**\n   * Update all pointer events and pointers, meant to be called at the end of frame\n   */\n  public update(): void {\n    this._pointerUp.length = 0;\n    this._pointerDown.length = 0;\n    this._pointerMove.length = 0;\n    this._pointerCancel.length = 0;\n    this._wheel.length = 0;\n\n    for (let i = 0; i < this._pointers.length; i++) {\n      this._pointers[i].update();\n    }\n  }\n\n  /**\n   * Safely gets a Pointer at a specific index and initializes one if it doesn't yet exist\n   * @param index  The pointer index to retrieve\n   */\n  public at(index: number): Pointer {\n    if (index >= this._pointers.length) {\n      // Ensure there is a pointer to retrieve\n      for (let i = this._pointers.length - 1, max = index; i < max; i++) {\n        this._pointers.push(new Pointer());\n        this._activePointers.push(-1);\n      }\n    }\n\n    return this._pointers[index];\n  }\n\n  /**\n   * Get number of pointers being watched\n   */\n  public count(): number {\n    return this._pointers.length;\n  }\n\n  public checkAndUpdateActorUnderPointer(actor: Actor) {\n    for (const pointer of this._pointers) {\n      if (pointer.checkActorUnderPointer(actor)) {\n        pointer.addActorUnderPointer(actor);\n      } else {\n        pointer.removeActorUnderPointer(actor);\n      }\n    }\n  }\n\n  private _dispatchWithBubble(events: PointerEvent[]) {\n    for (const evt of events) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        if (!evt.isCanceled()) {\n          evt.propagate(actor);\n        }\n        if (!evt.bubbles || evt.isCanceled()) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _dispatchPointerLeaveEvents() {\n    const lastMoveEventPerPointerPerActor: { [pointerId: string]: PointerEvent } = {};\n    const pointerLeave: PointerLeaveEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was under the pointer last frame, but not this this frame, pointer left\n        if (\n          !lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] &&\n          evt.pointer.wasActorUnderPointer(actor) &&\n          !evt.pointer.isActorAliveUnderPointer(actor) &&\n          !evt.isCanceled()\n        ) {\n          lastMoveEventPerPointerPerActor[evt.pointer.id + '+' + actor.id] = evt;\n          const pe = createPointerEventByName(\n            'leave',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n\n          pe.propagate(actor);\n          pointerLeave.push(<PointerLeaveEvent>pe);\n        }\n      }\n    }\n    return pointerLeave;\n  }\n\n  private _dispatchPointerEnterEvents() {\n    const lastMoveEventPerPointer: { [pointerId: number]: PointerEvent } = {};\n    const pointerEnter: PointerEnterEvent[] = [];\n\n    for (const evt of this._pointerMove) {\n      for (const actor of evt.pointer.getActorsForEvents()) {\n        // If the actor was not under the pointer last frame, but it is this frame, pointer entered\n        if (\n          !lastMoveEventPerPointer[evt.pointer.id] &&\n          !evt.pointer.wasActorUnderPointer(actor) &&\n          evt.pointer.isActorAliveUnderPointer(actor) &&\n          !evt.isCanceled()\n        ) {\n          lastMoveEventPerPointer[evt.pointer.id] = evt;\n          const pe = createPointerEventByName(\n            'enter',\n            new GlobalCoordinates(evt.worldPos, evt.pagePos, evt.screenPos),\n            evt.pointer,\n            evt.index,\n            evt.pointerType,\n            evt.button,\n            evt.ev\n          );\n          pe.propagate(actor);\n          pointerEnter.push(<PointerEnterEvent>pe);\n          // if pointer is dragging set the drag target\n          if (evt.pointer.isDragging) {\n            evt.pointer.dragTarget = actor;\n          }\n        }\n      }\n    }\n    return pointerEnter;\n  }\n\n  public dispatchPointerEvents() {\n    this._dispatchWithBubble(this._pointerDown);\n    this._dispatchWithBubble(this._pointerUp);\n    this._dispatchWithBubble(this._pointerMove);\n    this._dispatchPointerLeaveEvents();\n    this._dispatchPointerEnterEvents();\n    this._dispatchWithBubble(this._pointerCancel);\n\n    // TODO some duplication here\n    for (const evt of this._wheel) {\n      for (const actor of this._pointers[evt.index].getActorsUnderPointer()) {\n        this._propagateWheelPointerEvent(actor, evt);\n        if (!evt.bubbles || evt.isCanceled()) {\n          // if the event stops bubbling part way stop processing\n          break;\n        }\n      }\n    }\n  }\n\n  private _propagateWheelPointerEvent(actor: Actor, wheelEvent: WheelEvent) {\n    actor.emit('pointerwheel', wheelEvent);\n\n    // Recurse and propagate\n    if (wheelEvent.bubbles && !wheelEvent.isCanceled() && actor.parent) {\n      this._propagateWheelPointerEvent(actor.parent as Actor, wheelEvent); // TODO not true\n    }\n  }\n\n  private _handleMouseEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: MouseEvent) => {\n      e.preventDefault();\n\n      const pointer = this.at(0);\n      const coordinates = GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        0,\n        PointerType.Mouse,\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n    };\n  }\n\n  private _handleTouchEvent(eventName: string, eventArr: PointerEvent[]) {\n    return (e: TouchEvent) => {\n      e.preventDefault();\n      for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n        const index = this._pointers.length > 1 ? this._getPointerIndex(e.changedTouches[i].identifier) : 0;\n        if (index === -1) {\n          continue;\n        }\n\n        const pointer = this.at(index);\n        const coordinates = GlobalCoordinates.fromPagePosition(e.changedTouches[i].pageX, e.changedTouches[i].pageY, this._engine);\n        const pe = createPointerEventByName(eventName, coordinates, pointer, index, PointerType.Touch, PointerButton.Unknown, e);\n\n        eventArr.push(pe);\n        pointer.eventDispatcher.emit(eventName, pe);\n        this.emit(eventName, pe);\n        // only with multi-pointer\n        if (this._pointers.length > 1) {\n          if (eventName === 'up') {\n            // remove pointer ID from pool when pointer is lifted\n            this._activePointers[index] = -1;\n          } else if (eventName === 'down') {\n            // set pointer ID to given index\n            this._activePointers[index] = e.changedTouches[i].identifier;\n          }\n        }\n      }\n    };\n  }\n\n  private _handlePointerEvent(eventName: string, eventArr: PointerEvent[], coords?: GlobalCoordinates) {\n    return (e: DOMPointerEvent) => {\n      e.preventDefault();\n\n      // get the index for this pointer ID if multi-pointer is asked for\n      const index = this._pointers.length > 1 ? this._getPointerIndex(e.pointerId) : 0;\n      if (index === -1) {\n        return;\n      }\n\n      const pointer = this.at(index);\n      const coordinates = coords || GlobalCoordinates.fromPagePosition(e.pageX, e.pageY, this._engine);\n      const pe = createPointerEventByName(\n        eventName,\n        coordinates,\n        pointer,\n        index,\n        this._stringToPointerType(e.pointerType),\n        this._nativeButtonToPointerButton(e.button),\n        e\n      );\n\n      eventArr.push(pe);\n      pointer.eventDispatcher.emit(eventName, pe);\n      this.emit(eventName, pe);\n\n      // only with multi-pointer\n      if (this._pointers.length > 1) {\n        if (eventName === 'up') {\n          // remove pointer ID from pool when pointer is lifted\n          this._activePointers[index] = -1;\n        } else if (eventName === 'down') {\n          // set pointer ID to given index\n          this._activePointers[index] = e.pointerId;\n        }\n      }\n    };\n  }\n\n  private _handleWheelEvent(eventName: string, eventArr: WheelEvent[]) {\n    return (e: MouseWheelEvent) => {\n      // Should we prevent page scroll because of this event\n      if (\n        this._engine.pageScrollPreventionMode === ScrollPreventionMode.All ||\n        (this._engine.pageScrollPreventionMode === ScrollPreventionMode.Canvas && e.target === this._engine.canvas)\n      ) {\n        e.preventDefault();\n      }\n      const screen = this._engine.screen.pageToScreenCoordinates(vec(e.pageX, e.pageY));\n      const world = this._engine.screen.screenToWorldCoordinates(screen);\n\n      // deltaX, deltaY, and deltaZ are the standard modern properties\n      // wheelDeltaX, wheelDeltaY, are legacy properties in webkit browsers and older IE\n      // e.detail is only used in opera\n\n      const deltaX = e.deltaX || e.wheelDeltaX * ScrollWheelNormalizationFactor || 0;\n      const deltaY =\n        e.deltaY || e.wheelDeltaY * ScrollWheelNormalizationFactor || e.wheelDelta * ScrollWheelNormalizationFactor || e.detail || 0;\n      const deltaZ = e.deltaZ || 0;\n      let deltaMode = WheelDeltaMode.Pixel;\n\n      if (e.deltaMode) {\n        if (e.deltaMode === 1) {\n          deltaMode = WheelDeltaMode.Line;\n        } else if (e.deltaMode === 2) {\n          deltaMode = WheelDeltaMode.Page;\n        }\n      }\n\n      const we = new WheelEvent(world.x, world.y, e.pageX, e.pageY, screen.x, screen.y, 0, deltaX, deltaY, deltaZ, deltaMode, e);\n\n      eventArr.push(we);\n      this.at(0).eventDispatcher.emit(eventName, we);\n      this.emit(eventName, we);\n    };\n  }\n\n  /**\n   * Gets the index of the pointer specified for the given pointer ID or finds the next empty pointer slot available.\n   * This is required because IE10/11 uses incrementing pointer IDs so we need to store a mapping of ID => idx\n   */\n  private _getPointerIndex(pointerId: number) {\n    let idx;\n    if ((idx = this._activePointers.indexOf(pointerId)) > -1) {\n      return idx;\n    }\n\n    for (let i = 0; i < this._activePointers.length; i++) {\n      if (this._activePointers[i] === -1) {\n        return i;\n      }\n    }\n\n    // ignore pointer because game isn't watching\n    return -1;\n  }\n\n  private _nativeButtonToPointerButton(s: NativePointerButton): PointerButton {\n    switch (s) {\n      case NativePointerButton.NoButton:\n        return PointerButton.NoButton;\n      case NativePointerButton.Left:\n        return PointerButton.Left;\n      case NativePointerButton.Middle:\n        return PointerButton.Middle;\n      case NativePointerButton.Right:\n        return PointerButton.Right;\n      case NativePointerButton.Unknown:\n        return PointerButton.Unknown;\n      default:\n        return Util.fail(s);\n    }\n  }\n\n  private _stringToPointerType(s: string) {\n    switch (s) {\n      case 'touch':\n        return PointerType.Touch;\n      case 'mouse':\n        return PointerType.Mouse;\n      case 'pen':\n        return PointerType.Pen;\n      default:\n        return PointerType.Unknown;\n    }\n  }\n}\n","export interface NativeEventable {\n  addEventListener(name: string, handler: (...any: any[]) => any): any;\n  removeEventListener(name: string, handler: (...any: any[]) => any): any;\n}\n\nexport class BrowserComponent<T extends NativeEventable> {\n  private _paused = false;\n  private _nativeHandlers: { [key: string]: (handler: any) => void } = {};\n\n  on(eventName: string, handler: (evt: any) => void): void {\n    if (this._nativeHandlers[eventName]) {\n      this.off(eventName, this._nativeHandlers[eventName]);\n    }\n    this._nativeHandlers[eventName] = this._decorate(handler);\n    this.nativeComponent.addEventListener(eventName, this._nativeHandlers[eventName]);\n  }\n  off(eventName: string, handler?: (event: any) => void): void {\n    if (!handler) {\n      handler = this._nativeHandlers[eventName];\n    }\n    this.nativeComponent.removeEventListener(eventName, handler);\n    this._nativeHandlers[eventName] = null;\n  }\n\n  private _decorate(handler: (evt: any) => void): (evt: any) => void {\n    return (evt: any) => {\n      if (!this._paused) {\n        handler(evt);\n      }\n    };\n  }\n\n  public pause() {\n    this._paused = true;\n  }\n\n  public resume() {\n    this._paused = false;\n  }\n\n  public clear() {\n    for (const event in this._nativeHandlers) {\n      this.off(event);\n    }\n  }\n\n  constructor(public nativeComponent: T) {}\n}\n\nexport class BrowserEvents {\n  private _windowComponent: BrowserComponent<Window>;\n  private _documentComponent: BrowserComponent<Document>;\n  constructor(private _windowGlobal: Window, private _documentGlobal: Document) {\n    this._windowComponent = new BrowserComponent(this._windowGlobal);\n    this._documentComponent = new BrowserComponent(this._documentGlobal);\n  }\n\n  public get window(): BrowserComponent<Window> {\n    return this._windowComponent;\n  }\n\n  public get document(): BrowserComponent<Document> {\n    return this._documentComponent;\n  }\n\n  public pause() {\n    this.window.pause();\n    this.document.pause();\n  }\n\n  public resume() {\n    this.window.resume();\n    this.document.resume();\n  }\n\n  public clear() {\n    this.window.clear();\n    this.document.clear();\n  }\n}\n","import { Matrix } from '../../Math/matrix';\n\nexport class TransformStack {\n  private _transforms: Matrix[] = [];\n  private _currentTransform: Matrix = Matrix.identity();\n\n  public save(): void {\n    this._transforms.push(this._currentTransform);\n    this._currentTransform = this._currentTransform.clone();\n  }\n\n  public restore(): void {\n    this._currentTransform = this._transforms.pop();\n  }\n\n  public translate(x: number, y: number): Matrix {\n    return this._currentTransform.translate(x, y);\n  }\n\n  public rotate(angle: number): Matrix {\n    return this._currentTransform.rotate(angle);\n  }\n\n  public scale(x: number, y: number): Matrix {\n    return this._currentTransform.scale(x, y);\n  }\n\n  public set current(matrix: Matrix) {\n    this._currentTransform = matrix;\n  }\n\n  public get current(): Matrix {\n    return this._currentTransform;\n  }\n}\n","import { ExcaliburGraphicsContextState } from './ExcaliburGraphicsContext';\n\nexport class StateStack {\n  private _states: ExcaliburGraphicsContextState[] = [];\n  private _currentState: ExcaliburGraphicsContextState = this._getDefaultState();\n\n  private _getDefaultState() {\n    return {\n      opacity: 1\n    };\n  }\n\n  private _cloneState() {\n    return {\n      opacity: this._currentState.opacity\n    };\n  }\n\n  public save(): void {\n    this._states.push(this._currentState);\n    this._currentState = this._cloneState();\n  }\n\n  public restore(): void {\n    this._currentState = this._states.pop();\n  }\n\n  public get current(): ExcaliburGraphicsContextState {\n    return this._currentState;\n  }\n}\n","export interface VertexAttributeDefinition {\n  name: string;\n  size: number;\n  glType: number;\n  normalized: boolean;\n  location: number;\n}\n\nexport interface UniformDefinition {\n  name: string;\n  location: WebGLUniformLocation;\n  type: string;\n  data: any;\n}\n\n/**\n * Create a shader program for the Excalibur WebGL Graphics Context\n */\nexport class Shader {\n  public program: WebGLProgram | null = null;\n\n  public uniforms: { [variableName: string]: UniformDefinition } = {};\n  public attributes: { [variableName: string]: VertexAttributeDefinition } = {};\n  public layout: VertexAttributeDefinition[] = [];\n\n  /**\n   * Create a shader program in excalibur\n   * @param _gl WebGL graphics context\n   * @param _vertexSource Vertex shader source as a string\n   * @param _fragmentSource Fragment shader source as a string\n   */\n  constructor(private _gl: WebGLRenderingContext, private _vertexSource: string, private _fragmentSource: string) {\n    this.compile(_gl);\n  }\n\n  private _createProgram(gl: WebGLRenderingContext, vertexShader: WebGLShader, fragmentShader: WebGLShader): WebGLProgram {\n    const program = gl.createProgram();\n    if (program === null) {\n      throw Error('Could not create graphics shader program');\n    }\n\n    // attach the shaders.\n    gl.attachShader(program, vertexShader);\n    gl.attachShader(program, fragmentShader);\n\n    // link the program.\n    gl.linkProgram(program);\n\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!success) {\n      throw Error(`Could not link the program: [${gl.getProgramInfoLog(program)}]`);\n    }\n\n    return program;\n  }\n\n  private _compileShader(gl: WebGLRenderingContext, source: string, type: number): WebGLShader {\n    const shader = gl.createShader(type);\n    if (shader === null) {\n      throw Error(`Could not build shader: [${source}]`);\n    }\n\n    gl.shaderSource(shader, source);\n    gl.compileShader(shader);\n\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    if (!success) {\n      throw Error(`Could not compile shader [${gl.getShaderInfoLog(shader)}]`);\n    }\n    return shader;\n  }\n\n  /**\n   * Compile the current shader against a webgl context\n   * @param gl WebGL context\n   */\n  compile(gl: WebGLRenderingContext): WebGLProgram {\n    const vertexShader = this._compileShader(gl, this._vertexSource, gl.VERTEX_SHADER);\n    const fragmentShader = this._compileShader(gl, this._fragmentSource, gl.FRAGMENT_SHADER);\n    const program = this._createProgram(gl, vertexShader, fragmentShader);\n    return (this.program = program);\n  }\n\n  /**\n   * Add a uniform [[Matrix]] to the shader\n   * @param name Name of the uniform in the shader source\n   * @param data (4x4) matrix in column major order\n   */\n  public addUniformMatrix(name: string, data: Float32Array) {\n    if (!data) {\n      throw Error(`Shader Uniform Matrix '${name}' was set to null or undefined`);\n    }\n    const gl = this._gl;\n    this.uniforms[name] = {\n      name,\n      type: 'matrix',\n      location: gl.getUniformLocation(this.program, name),\n      data: data\n    };\n  }\n\n  /**\n   * Add a uniform array of numbers to the shader\n   * @param name Name of the uniform in the shader source\n   * @param data List of numbers\n   */\n  public addUniformIntegerArray(name: string, data: number[]) {\n    if (!data) {\n      throw Error(`Shader Uniform Integery Array '${name}' was set to null or undefined`);\n    }\n    const gl = this._gl;\n    this.uniforms[name] = {\n      name,\n      type: 'numbers',\n      location: gl.getUniformLocation(this.program, name),\n      data: data\n    };\n  }\n\n  /**\n   * Add attributes in the order they appear in the VBO\n   * @param name Name of the attribute in the shader source\n   * @param size The size of the attribute in gl.Type units, for example `vec2 a_pos` would be 2 gl.FLOAT\n   * @param glType The gl.Type of the attribute\n   */\n  public addAttribute(name: string, size: number, glType: number, normalized = false) {\n    const gl = this._gl;\n    // TODO needs to be compiled first\n    const location = gl.getAttribLocation(this.program, name);\n    this.attributes[name] = {\n      name,\n      size,\n      glType,\n      normalized,\n      location\n    };\n    this.layout.push(this.attributes[name]);\n  }\n\n  /**\n   * Number of javascript floats a vertex will take up\n   */\n  public get vertexAttributeSize(): number {\n    let vertexSize = 0;\n    for (const vert of this.layout) {\n      vertexSize += vert.size;\n    }\n    return vertexSize;\n  }\n\n  /**\n   * Total number of bytes that the vertex will take up\n   */\n  public get totalVertexSizeBytes(): number {\n    let vertexSize = 0;\n    for (const vert of this.layout) {\n      let typeSize = 1;\n      switch (vert.glType) {\n        case this._gl.FLOAT: {\n          typeSize = 4;\n          break;\n        }\n        default: {\n          typeSize = 1;\n        }\n      }\n      vertexSize += typeSize * vert.size;\n    }\n\n    return vertexSize;\n  }\n\n  /**\n   * Get a previously defined attribute size in bytes\n   * @param name\n   */\n  public getAttributeSize(name: string) {\n    let typeSize = 1;\n    switch (this.attributes[name].glType) {\n      case this._gl.FLOAT: {\n        typeSize = 4;\n        break;\n      }\n      default: {\n        typeSize = 1;\n      }\n    }\n    return typeSize * this.attributes[name].size;\n  }\n\n  /**\n   * Sets this shader program as the current in the underlying webgl context\n   *\n   * **Must** specify all attributes and uniforms before calling this\n   */\n  public use() {\n    const gl = this._gl;\n    gl.useProgram(this.program);\n    let offset = 0;\n    for (const vert of this.layout) {\n      gl.vertexAttribPointer(vert.location, vert.size, vert.glType, vert.normalized, this.totalVertexSizeBytes, offset);\n      gl.enableVertexAttribArray(vert.location);\n      offset += this.getAttributeSize(vert.name);\n    }\n\n    for (const key in this.uniforms) {\n      const uniform = this.uniforms[key];\n      switch (uniform.type) {\n        case 'matrix': {\n          gl.uniformMatrix4fv(uniform.location, false, uniform.data);\n          break;\n        }\n        case 'numbers': {\n          gl.uniform1iv(uniform.location, uniform.data);\n          break;\n        }\n      }\n    }\n  }\n}\n","import { Pool, Poolable } from '../../Util/Pool';\n\nexport class BatchCommand<T> implements Poolable {\n  _pool: Pool<this> = undefined;\n  public commands: T[] = [];\n  constructor(public max: number) {}\n\n  isFull() {\n    if (this.commands.length >= this.max) {\n      return true;\n    }\n    return false;\n  }\n\n  canAdd() {\n    return !this.isFull();\n  }\n\n  add(cmd: T) {\n    this.commands.push(cmd);\n  }\n\n  dispose() {\n    this.commands.length = 0;\n    return this;\n  }\n}\n","export interface Poolable {\n  /**\n   * Any type that is a member of a an object pool will have a reference to teh pool\n   * @internal\n   */\n  _pool?: Pool<this>;\n  dispose(): this;\n}\n\nexport class Pool<Type extends Poolable> {\n  public totalAllocations = 0;\n  public index = 0;\n  public objects: Type[] = [];\n\n  constructor(\n    public builder: (...args: any[]) => Type,\n    public recycler: (instance: Type, ...args: any[]) => Type,\n    public maxObjects: number = 100\n  ) {}\n\n  /**\n   * Use many instances out of the in the context and return all to the pool.\n   *\n   * By returning values out of the contex they will be un-hooked from the pool and are free to be passed to consumers\n   * @param context\n   */\n  using(context: (pool: Pool<Type>) => Type[] | void) {\n    const result = context(this);\n    if (result) {\n      return this.done(...result);\n    }\n    return this.done();\n  }\n\n  /**\n   * Use a single instance out of th pool and immediately return it to the pool\n   * @param context\n   */\n  borrow(context: (object: Type) => void) {\n    const object = this.get();\n    context(object);\n    this.index--;\n  }\n\n  /**\n   * Retrieve a value from the pool, will allocate a new instance if necessary or recycle from the pool\n   * @param args\n   */\n  get(...args: any[]): Type {\n    if (this.index === this.maxObjects) {\n      // TODO implement hard or soft cap\n      throw new Error('Max pooled objects reached, possible memory leak?');\n    }\n\n    if (this.objects[this.index]) {\n      // Pool has an available object already constructed\n      return this.recycler(this.objects[this.index++], ...args);\n    } else {\n      // New allocation\n      this.totalAllocations++;\n      const object = (this.objects[this.index++] = this.builder(...args));\n      object._pool = this;\n      return object;\n    }\n  }\n\n  /**\n   * Signals we are done with the pool objects for now, Reclaims all objects in the pool.\n   *\n   * If a list of pooled objects is passed to done they are un-hooked from the pool and are free\n   * to be passed to consumers\n   * @param objects A list of object to separate from the pool\n   */\n  done(...objects: Type[]): Type[];\n  done(): void;\n  done(...objects: Type[]): Type[] | void {\n    // All objects in pool now considered \"free\"\n    this.index = 0;\n    for (const object of objects) {\n      const poolIndex = this.objects.indexOf(object);\n      // Build a new object to take the pool place\n      this.objects[poolIndex] = (this as any).builder(); // TODO problematic 0-arg only support\n      this.objects[poolIndex]._pool = this;\n      this.totalAllocations++;\n      // Unhook object from the pool\n      object._pool = undefined;\n    }\n    return objects;\n  }\n}\n","import { BatchCommand } from './batch';\nimport { Shader } from './shader';\n// import { Pool, Poolable } from './pool';\nimport { GraphicsDiagnostics } from '../GraphicsDiagnostics';\nimport { Pool, Poolable } from '../../Util/Pool';\n\nexport interface Renderer {\n  render(): void;\n}\n\nexport interface Ctor<T> {\n  new (): T;\n}\n\nexport interface BatchRendererOptions<T extends Poolable> {\n  gl: WebGLRenderingContext;\n  /**\n   * Draw command constructor\n   */\n  command: Ctor<T>;\n  /**\n   * Number of vertices that are generated per draw command\n   */\n  verticesPerCommand?: number;\n  /**\n   * Maximum commands to batch before drawing\n   */\n  maxCommandsPerBatch?: number;\n  /**\n   * Override the built in command batching mechanism\n   */\n  batchFactory?: () => BatchCommand<T>;\n}\n\nexport abstract class BatchRenderer<T extends Poolable> implements Renderer {\n  priority = 0;\n  private _gl: WebGLRenderingContext;\n  private _vertices: Float32Array;\n  private _verticesPerCommand: number;\n  private _buffer: WebGLBuffer | null = null;\n  private _maxCommandsPerBatch: number = 2000;\n\n  public shader: Shader;\n\n  public commands: Pool<T>;\n  private _batchPool: Pool<BatchCommand<T>>;\n  private _batches: BatchCommand<T>[] = [];\n  constructor(options: BatchRendererOptions<T>) {\n    this._gl = options.gl;\n    const command = options.command;\n    this._verticesPerCommand = options?.verticesPerCommand ?? 1;\n    this._maxCommandsPerBatch = options?.maxCommandsPerBatch ?? this._maxCommandsPerBatch;\n    const batchFactory = options?.batchFactory ?? (() => new BatchCommand<T>(this._maxCommandsPerBatch));\n\n    this.commands = new Pool<T>(\n      () => new command(),\n      (c) => c.dispose(),\n      this._maxCommandsPerBatch\n    );\n    this._batchPool = new Pool<BatchCommand<T>>(batchFactory, (b) => b.dispose(), 100);\n  }\n\n  /**\n   * Initialize render, builds shader and initialized webgl buffers\n   */\n  public init() {\n    const gl = this._gl;\n    this.shader = this.buildShader(gl);\n    // Initialize VBO\n    // https://groups.google.com/forum/#!topic/webgl-dev-list/vMNXSNRAg8M\n    this._vertices = new Float32Array(this.shader.vertexAttributeSize * this._verticesPerCommand * this._maxCommandsPerBatch);\n    this._buffer = gl.createBuffer();\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._buffer);\n    gl.bufferData(gl.ARRAY_BUFFER, this._vertices, gl.DYNAMIC_DRAW);\n  }\n\n  public get vertexSize(): number {\n    return this.shader.vertexAttributeSize;\n  }\n\n  public addCommand(cmd: T) {\n    if (this._batches.length === 0) {\n      this._batches.push(this._batchPool.get());\n    }\n\n    const lastBatch = this._batches[this._batches.length - 1];\n    if (lastBatch.canAdd()) {\n      lastBatch.add(cmd);\n    } else {\n      const newBatch = this._batchPool.get();\n      newBatch.add(cmd);\n      this._batches.push(newBatch);\n    }\n  }\n\n  /**\n   * Construct or return the Shader to be used in this batch renderer\n   * @param gl\n   */\n  abstract buildShader(gl: WebGLRenderingContext): Shader;\n\n  /**\n   * Implement populating the vertex buffer, return the number of vertices added to the buffer\n   * @param vertices\n   * @param batch\n   */\n  abstract buildBatchVertices(vertexBuffer: Float32Array, batch: BatchCommand<T>): number;\n\n  /**\n   * Implement gl draw call to render batch. The vertextBuffer from buildBatchVertices is already bound and the data has been updated.\n   */\n  abstract renderBatch(gl: WebGLRenderingContext, batch: BatchCommand<T>, vertexCount: number): void;\n\n  /**\n   * Build batch geometry, submit to the gpu, and issue draw command to underlying webgl\n   */\n  public render(): void {\n    const gl = this._gl;\n    gl.bindBuffer(gl.ARRAY_BUFFER, this._buffer);\n    this.shader.use();\n    let drawCallCount = 0;\n    let drawnImagesCount = 0;\n    for (const batch of this._batches) {\n      // Build all geometry and ship to GPU\n      // interleave VBOs https://goharsha.com/lwjgl-tutorial-series/interleaving-buffer-objects/\n      const vertexCount = this.buildBatchVertices(this._vertices, batch);\n      gl.bufferSubData(gl.ARRAY_BUFFER, 0, this._vertices);\n\n      this.renderBatch(gl, batch, vertexCount);\n      drawnImagesCount += batch.commands.length;\n      drawCallCount++;\n    }\n    this.commands.done();\n    this._batchPool.done();\n    this._batches.length = 0;\n    GraphicsDiagnostics.DrawCallCount += drawCallCount;\n    GraphicsDiagnostics.DrawnImagesCount += drawnImagesCount;\n  }\n}\n","import { Vector } from '../../Algebra';\nimport { Color } from '../../Drawing/Color';\nimport { Shader } from './shader';\nimport lineVertexSource from './shaders/line-vertex.glsl';\nimport lineFragmentSource from './shaders/line-fragment.glsl';\nimport { BatchRenderer } from './renderer';\nimport { BatchCommand } from './batch';\nimport { WebGLGraphicsContextInfo } from './ExcaliburGraphicsContextWebGL';\nimport { Pool, Poolable } from '../../Util/Pool';\n\nexport class DrawLine implements Poolable {\n  _pool?: Pool<this>;\n  public color: Color = Color.Black;\n  public start: Vector = Vector.Zero;\n  public end: Vector = Vector.Zero;\n  public dispose() {\n    this.color.r = 0;\n    this.color.g = 0;\n    this.color.b = 0;\n    this.color.a = 1;\n    this.start.setTo(0, 0);\n    this.end.setTo(0, 0);\n    return this;\n  }\n}\n\nexport class LineRenderer extends BatchRenderer<DrawLine> {\n  constructor(gl: WebGLRenderingContext, private _contextInfo: WebGLGraphicsContextInfo) {\n    super({ gl, command: DrawLine, verticesPerCommand: 2 });\n    this.init();\n  }\n\n  buildShader(gl: WebGLRenderingContext) {\n    const shader = new Shader(gl, lineVertexSource, lineFragmentSource);\n\n    shader.addAttribute('a_position', 2, gl.FLOAT);\n    shader.addAttribute('a_color', 4, gl.FLOAT);\n    shader.addUniformMatrix('u_matrix', this._contextInfo.matrix.data);\n    return shader;\n  }\n\n  addLine(start: Vector, end: Vector, color: Color) {\n    const cmd = this.commands.get();\n    cmd.start = this._contextInfo.transform.current.multv(start);\n    cmd.end = this._contextInfo.transform.current.multv(end);\n    cmd.color = color;\n    cmd.color.a = cmd.color.a * this._contextInfo.state.current.opacity;\n    this.addCommand(cmd);\n  }\n\n  buildBatchVertices(vertexBuffer: Float32Array, batch: BatchCommand<DrawLine>): number {\n    let index = 0;\n    for (const command of batch.commands) {\n      // Start\n      vertexBuffer[index++] = command.start.x;\n      vertexBuffer[index++] = command.start.y;\n      vertexBuffer[index++] = command.color.r / 255;\n      vertexBuffer[index++] = command.color.g / 255;\n      vertexBuffer[index++] = command.color.b / 255;\n      vertexBuffer[index++] = command.color.a;\n\n      // End\n      vertexBuffer[index++] = command.end.x;\n      vertexBuffer[index++] = command.end.y;\n      vertexBuffer[index++] = command.color.r / 255;\n      vertexBuffer[index++] = command.color.g / 255;\n      vertexBuffer[index++] = command.color.b / 255;\n      vertexBuffer[index++] = command.color.a;\n    }\n    return index / this.vertexSize;\n  }\n\n  renderBatch(gl: WebGLRenderingContext, _batch: BatchCommand<DrawLine>, vertexCount: number) {\n    gl.drawArrays(gl.LINES, 0, vertexCount);\n  }\n}\n","export default \"attribute vec4 a_position;\\nattribute vec4 a_color;\\n\\nvarying lowp vec4 v_color;\\n\\nuniform mat4 u_matrix;\\n\\n\\nvoid main() {\\n   // Set the vertex position using the ortho transform matrix\\n   gl_Position = u_matrix * a_position;\\n\\n   // Passthrough the color\\n   v_color = a_color;\\n}\";","export default \"precision mediump float;\\n\\n// Color\\nvarying lowp vec4 v_color;\\n\\n\\nvoid main() {\\n  gl_FragColor = v_color;\\n}\";","import { Matrix } from '../../Math/matrix';\nimport { BoundingBox } from '../../Collision/Index';\nimport { Color } from '../../Drawing/Color';\nimport { Pool, Poolable } from '../../Util/Pool';\nimport { HTMLImageSource } from './ExcaliburGraphicsContext';\n\nexport class DrawImageCommand implements Poolable {\n  _pool: Pool<this> = undefined;\n\n  public snapToPixel: boolean = true;\n  public image: HTMLImageSource;\n  public opacity: number = 1;\n  public width: number = 0;\n  public height: number = 0;\n  public dest: [number, number] = [0, 0]; // x, y\n  public view: [number, number, number, number] = [0, 0, 0, 0]; // sx, sy, sw, sh\n  private _geom: [number, number][] = [\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0],\n    [0, 0]\n  ];\n  constructor();\n  constructor(image: HTMLImageSource, x: number, y: number);\n  constructor(image: HTMLImageSource, x: number, y: number, width?: number, height?: number);\n  constructor(\n    image: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  );\n  constructor(\n    image?: HTMLImageSource,\n    sx?: number,\n    sy?: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ) {\n    this.init(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n  }\n\n  public init(\n    image?: HTMLImageSource,\n    sx?: number,\n    sy?: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ) {\n    this.image = image;\n    this.width = image?.width || swidth || 0;\n    this.height = image?.height || sheight || 0;\n    this.view = [0, 0, swidth ?? image?.width, sheight ?? image?.height];\n    this.dest = [sx, sy];\n    // If destination is specified, update view and dest\n    if (dx !== undefined && dy !== undefined && dwidth !== undefined && dheight !== undefined) {\n      this.view = [sx, sy, swidth ?? image?.width, sheight ?? image?.height];\n      this.dest = [dx, dy];\n      this.width = dwidth;\n      this.height = dheight;\n    }\n\n    let index = 0;\n    this._geom[index++] = [this.dest[0], this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1] + this.height];\n    if (this.snapToPixel) {\n      for (const point of this._geom) {\n        point[0] = ~~point[0];\n        point[1] = ~~point[1];\n      }\n    }\n    return this;\n  }\n\n  public dispose() {\n    this.image = null;\n    this.width = 0;\n    this.height = 0;\n    this.view = [0, 0, 0, 0];\n    this.dest = [0, 0];\n\n    let index = 0;\n    this._geom[index++] = [this.dest[0], this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1]];\n    this._geom[index++] = [this.dest[0], this.dest[1] + this.height];\n    this._geom[index++] = [this.dest[0] + this.width, this.dest[1] + this.height];\n    return this;\n  }\n\n  // todo weird\n  applyTransform(transform: Matrix, opacity: number): void {\n    if (transform) {\n      for (let i = 0; i < this._geom.length; i++) {\n        this._geom[i] = transform.multv(this._geom[i]);\n        if (this.snapToPixel) {\n          this._geom[i] = [~~this._geom[i][0], ~~this._geom[i][1]];\n        }\n      }\n    }\n    this.opacity = opacity;\n  }\n\n  public get geometry() {\n    return this._geom;\n  }\n}\n\nexport class DrawRectCommand {\n  public dest: [number, number] = [0, 0];\n  public width: number = 0;\n  public height: number = 0;\n  constructor(x: number, y: number, width: number, height: number) {\n    this.dest = [x, y];\n    this.width = width;\n    this.height = height;\n  }\n}\n\nexport class DrawDebugRectCommand {\n  constructor(public bounds: BoundingBox, public color: Color) {}\n}\n","import { Shader } from './shader';\nimport imageVertexSource from './shaders/image-vertex.glsl';\nimport imageFragmentSource from './shaders/image-fragment.glsl';\nimport { BatchCommand } from './batch';\nimport { DrawImageCommand } from './draw-image-command';\nimport { Graphic } from '../Graphic';\nimport { ensurePowerOfTwo } from './webgl-util';\nimport { BatchRenderer } from './renderer';\nimport { WebGLGraphicsContextInfo } from './ExcaliburGraphicsContextWebGL';\nimport { TextureLoader } from './texture-loader';\nimport { HTMLImageSource } from './ExcaliburGraphicsContext';\n\nexport class BatchImage extends BatchCommand<DrawImageCommand> {\n  public textures: WebGLTexture[] = [];\n  public commands: DrawImageCommand[] = [];\n  private _graphicMap: { [id: string]: Graphic } = {};\n\n  constructor(public maxDraws: number, public maxTextures: number) {\n    super(maxDraws);\n  }\n\n  isFull() {\n    if (this.commands.length >= this.maxDraws) {\n      return true;\n    }\n    if (this.textures.length >= this.maxTextures) {\n      return true;\n    }\n    return false;\n  }\n\n  canAdd() {\n    if (this.commands.length >= this.maxDraws) {\n      return false;\n    }\n\n    if (this.textures.length < this.maxTextures) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private _isCommandFull() {\n    return this.commands.length >= this.maxDraws;\n  }\n\n  private _isTextureFull() {\n    return this.textures.length >= this.maxTextures;\n  }\n\n  private _wouldAddTexture(command: DrawImageCommand) {\n    return !this._graphicMap[command.image.id];\n  }\n\n  maybeAdd(command: DrawImageCommand): boolean {\n    if ((this._isCommandFull() || this._isTextureFull()) && this._wouldAddTexture(command)) {\n      return false;\n    }\n\n    this.add(command);\n    return true;\n  }\n\n  add(command: DrawImageCommand) {\n    const texture = TextureLoader.load(command.image);\n    if (this.textures.indexOf(texture) === -1) {\n      this.textures.push(texture);\n    }\n\n    this.commands.push(command);\n  }\n\n  bindTextures(gl: WebGLRenderingContext) {\n    // Bind textures in the correct order\n    for (let i = 0; i < this.maxTextures; i++) {\n      gl.activeTexture(gl.TEXTURE0 + i);\n      gl.bindTexture(gl.TEXTURE_2D, this.textures[i] || this.textures[0]);\n    }\n  }\n\n  getBatchTextureId(command: DrawImageCommand) {\n    if (command.image) {\n      return this.textures.indexOf(TextureLoader.get(command.image));\n    }\n    return -1;\n  }\n\n  dispose() {\n    this.clear();\n    return this;\n  }\n\n  clear() {\n    this.commands.length = 0;\n    this.textures.length = 0;\n    this._graphicMap = {};\n  }\n}\n\nexport class ImageRenderer extends BatchRenderer<DrawImageCommand> {\n  constructor(gl: WebGLRenderingContext, private _contextInfo: WebGLGraphicsContextInfo) {\n    super({\n      gl,\n      command: DrawImageCommand,\n      // 6 verts per quad\n      verticesPerCommand: 6,\n      maxCommandsPerBatch: 2000,\n      batchFactory: () => new BatchImage(2000, gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS))\n    });\n    TextureLoader.registerContext(gl);\n    this.init();\n  }\n\n  buildShader(gl: WebGLRenderingContext): Shader {\n    // Initialilze default batch rendering shader\n    const maxGPUTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n    const shader = new Shader(gl, imageVertexSource, this._transformFragmentSource(imageFragmentSource, maxGPUTextures));\n    shader.addAttribute('a_position', 3, gl.FLOAT);\n    shader.addAttribute('a_texcoord', 2, gl.FLOAT);\n    shader.addAttribute('a_textureIndex', 1, gl.FLOAT);\n    shader.addAttribute('a_opacity', 1, gl.FLOAT);\n    shader.addUniformMatrix('u_matrix', this._contextInfo.matrix.data);\n    // Initialize texture slots to [0, 1, 2, 3, 4, .... maxGPUTextures]\n    shader.addUniformIntegerArray(\n      'u_textures',\n      [...Array(maxGPUTextures)].map((_, i) => i)\n    );\n    return shader;\n  }\n\n  private _transformFragmentSource(source: string, maxTextures: number): string {\n    let newSource = source.replace('%%count%%', maxTextures.toString());\n    let texturePickerBuilder = '';\n    for (let i = 0; i < maxTextures; i++) {\n      texturePickerBuilder += `   } else if (v_textureIndex <= ${i}.5) {\\n\n                gl_FragColor = texture2D(u_textures[${i}], v_texcoord);\\n\n                gl_FragColor.w = gl_FragColor.w * v_opacity;\\n`;\n    }\n    newSource = newSource.replace('%%texture_picker%%', texturePickerBuilder);\n    return newSource;\n  }\n\n  public addImage(\n    graphic: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ) {\n    const command = this.commands.get().init(graphic, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n    command.applyTransform(this._contextInfo.transform.current, this._contextInfo.state.current.opacity);\n    this.addCommand(command);\n  }\n\n  public renderBatch(gl: WebGLRenderingContext, batch: BatchImage, vertexCount: number) {\n    // Bind textures in the correct order\n    batch.bindTextures(gl);\n    // draw the quads\n    gl.drawArrays(gl.TRIANGLES, 0, vertexCount);\n  }\n\n  buildBatchVertices(vertexBuffer: Float32Array, batch: BatchImage): number {\n    let vertIndex = 0;\n    let sx: number = 0;\n    let sy: number = 0;\n    let sw: number = 0;\n    let sh: number = 0;\n    let potWidth: number = 0;\n    let potHeight: number = 0;\n    let textureId = 0;\n    for (const command of batch.commands) {\n      sx = command.view[0];\n      sy = command.view[1];\n      sw = command.view[2];\n      sh = command.view[3];\n\n      potWidth = ensurePowerOfTwo(command.image.width || command.width);\n      potHeight = ensurePowerOfTwo(command.image.height || command.height);\n\n      textureId = batch.getBatchTextureId(command);\n\n      // potential optimization when divding by 2 (bitshift)\n      // Modifying the images to poweroftwo images warp the UV coordinates\n      const uvx0 = sx / potWidth;\n      const uvy0 = sy / potHeight;\n      const uvx1 = (sx + sw) / potWidth;\n      const uvy1 = (sy + sh) / potHeight;\n\n      // Quad update\n      // (0, 0, z) z-index doesn't work in batch rendering between batches\n      vertexBuffer[vertIndex++] = command.geometry[0][0]; // x + 0 * width;\n      vertexBuffer[vertIndex++] = command.geometry[0][1]; //y + 0 * height;\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx0; // 0;\n      vertexBuffer[vertIndex++] = uvy0; // 0;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n\n      // (0, 1)\n      vertexBuffer[vertIndex++] = command.geometry[1][0]; // x + 0 * width;\n      vertexBuffer[vertIndex++] = command.geometry[1][1]; // y + 1 * height;\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx0; // 0;\n      vertexBuffer[vertIndex++] = uvy1; // 1;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n\n      // (1, 0)\n      vertexBuffer[vertIndex++] = command.geometry[2][0]; // x + 1 * width;\n      vertexBuffer[vertIndex++] = command.geometry[2][1]; // y + 0 * height;\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx1; //1;\n      vertexBuffer[vertIndex++] = uvy0; //0;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n\n      // (1, 0)\n      vertexBuffer[vertIndex++] = command.geometry[3][0]; // x + 1 * width;\n      vertexBuffer[vertIndex++] = command.geometry[3][1]; // y + 0 * height;\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx1; //1;\n      vertexBuffer[vertIndex++] = uvy0; //0;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n\n      // (0, 1)\n      vertexBuffer[vertIndex++] = command.geometry[4][0]; // x + 0 * width;\n      vertexBuffer[vertIndex++] = command.geometry[4][1]; // y + 1 * height\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx0; // 0;\n      vertexBuffer[vertIndex++] = uvy1; // 1;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n\n      // (1, 1)\n      vertexBuffer[vertIndex++] = command.geometry[5][0]; // x + 1 * width;\n      vertexBuffer[vertIndex++] = command.geometry[5][1]; // y + 1 * height;\n      vertexBuffer[vertIndex++] = 0;\n\n      // UV coords\n      vertexBuffer[vertIndex++] = uvx1; // 1;\n      vertexBuffer[vertIndex++] = uvy1; // 1;\n      // texture id\n      vertexBuffer[vertIndex++] = textureId;\n      // opacity\n      vertexBuffer[vertIndex++] = command.opacity;\n    }\n\n    return vertIndex / this.vertexSize;\n  }\n}\n","export default \"attribute vec4 a_position;\\n\\n// Opacity \\nattribute float a_opacity;\\nvarying float v_opacity;\\n\\n// UV coordinate\\nattribute vec2 a_texcoord;\\nvarying vec2 v_texcoord;\\n\\n// Texture number\\nattribute lowp float a_textureIndex;\\nvarying lowp float v_textureIndex;\\n\\nuniform mat4 u_matrix;\\n\\n\\nvoid main() {\\n   // Set the vertex position using the ortho transform matrix\\n   gl_Position = u_matrix * a_position;\\n\\n   // Pass through the Opacity to the fragment shader\\n   v_opacity = a_opacity;\\n   // Pass through the UV coord to the fragment shader\\n   v_texcoord = a_texcoord;\\n   // Pass through the texture number to the fragment shader\\n   v_textureIndex = a_textureIndex;\\n}\";","export default \"precision mediump float;\\n\\n// UV coord\\nvarying vec2 v_texcoord;\\n\\n// Texture index\\nvarying lowp float v_textureIndex;\\n\\n// Opacity\\nvarying float v_opacity;\\n\\nuniform sampler2D u_textures[%%count%%];\\n\\nvoid main() {\\n   // In order to support the most efficient sprite batching, we have multiple\\n   // textures loaded into the gpu (usually 8) this picker logic skips over textures\\n   // that do not apply to a particular sprite.\\n\\n   // Error color\\n   vec4 color = vec4(1.0, 0.0, 0.0, 1.0);\\n\\n   // Always at least 1 texture at 0\\n   if (v_textureIndex <= .5) {\\n      gl_FragColor = texture2D(u_textures[0], v_texcoord);\\n      gl_FragColor.w = gl_FragColor.w * v_opacity;\\n      %%texture_picker%%\\n   } else {\\n      gl_FragColor = color;\\n   }\\n}\";","import { Shader } from './shader';\nimport pointVertexSource from './shaders/point-vertex.glsl';\nimport pointFragmentSource from './shaders/point-fragment.glsl';\nimport { Vector } from '../../Algebra';\nimport { Color } from '../../Drawing/Color';\nimport { BatchRenderer } from './renderer';\nimport { BatchCommand } from './batch';\nimport { WebGLGraphicsContextInfo } from './ExcaliburGraphicsContextWebGL';\nimport { Pool, Poolable } from '../../Util/Pool';\n// import { Random } from '../../Math/Index';\n\nexport class DrawPoint implements Poolable {\n  _pool?: Pool<this>;\n  public point: Vector = Vector.Zero;\n  public color: Color = Color.Black;\n  public size: number = 1;\n  public dispose() {\n    this.point.setTo(0, 0);\n    this.color.r = 0;\n    this.color.g = 0;\n    this.color.b = 0;\n    this.color.a = 1;\n    this.size = 1;\n    return this;\n  }\n}\n\nexport class PointRenderer extends BatchRenderer<DrawPoint> {\n  constructor(gl: WebGLRenderingContext, private _contextInfo: WebGLGraphicsContextInfo) {\n    super({ gl, command: DrawPoint, verticesPerCommand: 1 });\n    this.init();\n  }\n\n  buildShader(gl: WebGLRenderingContext): Shader {\n    gl.getExtension('OES_standard_derivatives');\n    const shader = new Shader(gl, pointVertexSource, pointFragmentSource);\n    shader.addAttribute('a_position', 2, gl.FLOAT);\n    shader.addAttribute('a_color', 4, gl.FLOAT);\n    shader.addAttribute('a_size', 1, gl.FLOAT);\n    shader.addUniformMatrix('u_matrix', this._contextInfo.matrix.data);\n    return shader;\n  }\n\n  addPoint(point: Vector, color: Color, size: number) {\n    const cmd = this.commands.get();\n    cmd.point = this._contextInfo.transform.current.multv(point);\n    cmd.color.r = color.r;\n    cmd.color.g = color.g;\n    cmd.color.b = color.b;\n    cmd.color.a = color.a * this._contextInfo.state.current.opacity;\n    cmd.size = size * Math.max(this._contextInfo.transform.current.getScaleX(), this._contextInfo.transform.current.getScaleY());\n    this.addCommand(cmd);\n  }\n\n  buildBatchVertices(vertexBuffer: Float32Array, batch: BatchCommand<DrawPoint>): number {\n    let index = 0;\n    for (const command of batch.commands) {\n      vertexBuffer[index++] = command.point.x;\n      vertexBuffer[index++] = command.point.y;\n      // normalize to [0, 1] for webgl\n      vertexBuffer[index++] = command.color.r / 255;\n      vertexBuffer[index++] = command.color.g / 255;\n      vertexBuffer[index++] = command.color.b / 255;\n      vertexBuffer[index++] = command.color.a;\n\n      vertexBuffer[index++] = command.size;\n    }\n    return index / this.vertexSize;\n  }\n\n  renderBatch(gl: WebGLRenderingContext, _batch: BatchCommand<DrawPoint>, vertexCount: number): void {\n    gl.drawArrays(gl.POINTS, 0, vertexCount);\n  }\n}\n","export default \"attribute vec4 a_position;\\nattribute vec4 a_color;\\nattribute float a_size;\\nvarying lowp vec4 v_color;\\nuniform mat4 u_matrix;\\n\\nvoid main() {\\n  gl_Position = u_matrix * a_position;\\n  gl_PointSize = a_size * 2.0;\\n  v_color = a_color;\\n}\";","export default \"#ifdef GL_OES_standard_derivatives\\n#extension GL_OES_standard_derivatives : enable\\n#endif\\n\\nprecision mediump float;\\nvarying lowp vec4 v_color;\\n\\nvoid main() {\\n  float r = 0.0, delta = 0.0, alpha = 1.0;\\n  vec2 cxy = 2.0 * gl_PointCoord - 1.0;\\n  r = dot(cxy, cxy);\\n  \\n#ifdef GL_OES_standard_derivatives\\n  delta = fwidth(r);\\n  alpha = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\\n#else\\n  if (r > 1.0) {\\n    discard;\\n  }\\n#endif\\n  gl_FragColor = vec4(v_color.rgb, v_color.a * alpha);\\n}\";","import {\n  ExcaliburGraphicsContext,\n  LineGraphicsOptions,\n  RectGraphicsOptions,\n  PointGraphicsOptions,\n  ExcaliburGraphicsContextOptions,\n  DebugDraw,\n  HTMLImageSource\n} from './ExcaliburGraphicsContext';\n\nimport { Matrix } from '../../Math/matrix';\nimport { TransformStack } from './transform-stack';\nimport { Vector, vec } from '../../Algebra';\nimport { Color } from '../../Drawing/Color';\nimport { StateStack } from './state-stack';\nimport { Logger } from '../../Util/Log';\nimport { LineRenderer } from './line-renderer';\nimport { ImageRenderer } from './image-renderer';\nimport { PointRenderer } from './point-renderer';\nimport { Canvas } from '../Canvas';\nimport { GraphicsDiagnostics } from '../GraphicsDiagnostics';\n\nclass ExcaliburGraphicsContextWebGLDebug implements DebugDraw {\n  constructor(private _webglCtx: ExcaliburGraphicsContextWebGL) {}\n\n  /**\n   * Draw a debugging rectangle to the context\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  drawRect(x: number, y: number, width: number, height: number, rectOptions: RectGraphicsOptions = { color: Color.Black }): void {\n    this.drawLine(vec(x, y), vec(x + width, y), { ...rectOptions });\n    this.drawLine(vec(x + width, y), vec(x + width, y + height), { ...rectOptions });\n    this.drawLine(vec(x + width, y + height), vec(x, y + height), { ...rectOptions });\n    this.drawLine(vec(x, y + height), vec(x, y), { ...rectOptions });\n  }\n\n  /**\n   * Draw a debugging line to the context\n   * @param start\n   * @param end\n   * @param lineOptions\n   */\n  drawLine(start: Vector, end: Vector, lineOptions: LineGraphicsOptions = { color: Color.Black }): void {\n    this._webglCtx.__lineRenderer.addLine(start, end, lineOptions.color);\n  }\n\n  /**\n   * Draw a debugging point to the context\n   * @param point\n   * @param pointOptions\n   */\n  drawPoint(point: Vector, pointOptions: PointGraphicsOptions = { color: Color.Black, size: 5 }): void {\n    this._webglCtx.__pointRenderer.addPoint(point, pointOptions.color, pointOptions.size);\n  }\n}\n\nexport interface WebGLGraphicsContextInfo {\n  transform: TransformStack;\n  state: StateStack;\n  matrix: Matrix;\n}\n\nexport class ExcaliburGraphicsContextWebGL implements ExcaliburGraphicsContext {\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __gl: WebGLRenderingContext;\n\n  /**\n   * Holds the 2d context shim\n   */\n  private _canvas: Canvas; // Configure z for shim?\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __ctx: CanvasRenderingContext2D;\n\n  private _transform = new TransformStack();\n  private _state = new StateStack();\n  private _ortho!: Matrix;\n\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __pointRenderer: PointRenderer;\n\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __lineRenderer: LineRenderer;\n\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __imageRenderer: ImageRenderer;\n\n  public snapToPixel: boolean = true;\n\n  public smoothing: boolean = false;\n\n  public backgroundColor: Color = Color.ExcaliburBlue;\n\n  public get opacity(): number {\n    return this._state.current.opacity;\n  }\n\n  public set opacity(value: number) {\n    this._state.current.opacity = value;\n  }\n\n  public get width() {\n    return this.__gl.canvas.width;\n  }\n\n  public get height() {\n    return this.__gl.canvas.height;\n  }\n\n  constructor(options: ExcaliburGraphicsContextOptions) {\n    const { canvasElement, enableTransparency, smoothing, snapToPixel, backgroundColor } = options;\n    this.__gl = canvasElement.getContext('webgl', {\n      antialias: smoothing ?? this.smoothing,\n      premultipliedAlpha: false,\n      alpha: enableTransparency ?? true,\n      depth: true,\n      powerPreference: 'high-performance'\n    });\n    this.snapToPixel = snapToPixel ?? this.snapToPixel;\n    this.smoothing = smoothing ?? this.smoothing;\n    this.backgroundColor = backgroundColor ?? this.backgroundColor;\n    this._init();\n  }\n\n  private _init() {\n    const gl = this.__gl;\n    // Setup viewport and view matrix\n    this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    // Clear background\n    gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n    gl.clear(gl.COLOR_BUFFER_BIT);\n\n    // Enable alpha blending\n    gl.enable(gl.BLEND);\n    gl.blendFunc(gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA);\n\n    this.__pointRenderer = new PointRenderer(gl, { matrix: this._ortho, transform: this._transform, state: this._state });\n    this.__lineRenderer = new LineRenderer(gl, { matrix: this._ortho, transform: this._transform, state: this._state });\n    this.__imageRenderer = new ImageRenderer(gl, { matrix: this._ortho, transform: this._transform, state: this._state });\n\n    // 2D ctx shim\n    this._canvas = new Canvas({\n      width: gl.canvas.width,\n      height: gl.canvas.height\n    });\n    this.__ctx = this._canvas.ctx;\n  }\n\n  public resetTransform(): void {\n    this._transform.current = Matrix.identity();\n  }\n\n  public updateViewport(): void {\n    const gl = this.__gl;\n    this._ortho = this._ortho = Matrix.ortho(0, gl.canvas.width, gl.canvas.height, 0, 400, -400);\n    this.__pointRenderer.shader.addUniformMatrix('u_matrix', this._ortho.data);\n    this.__lineRenderer.shader.addUniformMatrix('u_matrix', this._ortho.data);\n    this.__imageRenderer.shader.addUniformMatrix('u_matrix', this._ortho.data);\n\n    // 2D ctx shim\n    this._canvas.width = gl.canvas.width;\n    this._canvas.height = gl.canvas.height;\n  }\n\n  drawImage(image: HTMLImageSource, x: number, y: number): void;\n  drawImage(image: HTMLImageSource, x: number, y: number, width: number, height: number): void;\n  drawImage(\n    image: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void;\n  drawImage(\n    image: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void {\n    if (swidth === 0 || sheight === 0) {\n      return; // zero dimension dest exit early\n    } else if (dwidth === 0 || dheight === 0) {\n      return; // zero dimension dest exit early\n    } else if (image.width === 0 || image.height === 0) {\n      return; // zero dimension source exit early\n    }\n\n    if (!image) {\n      Logger.getInstance().warn('Cannot draw a null or undefined image');\n      // tslint:disable-next-line: no-console\n      if (console.trace) {\n        // tslint:disable-next-line: no-console\n        console.trace();\n      }\n      return;\n    }\n    this.__imageRenderer.addImage(image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight);\n  }\n\n  debug = new ExcaliburGraphicsContextWebGLDebug(this);\n\n  public save(): void {\n    this._transform.save();\n    this._state.save();\n  }\n\n  public restore(): void {\n    this._transform.restore();\n    this._state.restore();\n  }\n\n  public translate(x: number, y: number): void {\n    this._transform.translate(this.snapToPixel ? ~~x : x, this.snapToPixel ? ~~y : y);\n  }\n\n  public rotate(angle: number): void {\n    this._transform.rotate(angle);\n  }\n\n  public scale(x: number, y: number): void {\n    this._transform.scale(x, y);\n  }\n\n  public transform(matrix: Matrix) {\n    this._transform.current = matrix;\n  }\n\n  clear() {\n    const gl = this.__gl;\n    gl.clearColor(this.backgroundColor.r / 255, this.backgroundColor.g / 255, this.backgroundColor.b / 255, this.backgroundColor.a);\n    // Clear the context with the newly set color. This is\n    // the function call that actually does the drawing.\n    gl.clear(gl.COLOR_BUFFER_BIT);\n    GraphicsDiagnostics.clear();\n  }\n\n  /**\n   * Flushes all batched rendering to the screen\n   */\n  flush() {\n    const gl = this.__gl;\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\n\n    this.__imageRenderer.render();\n    this.__lineRenderer.render();\n    this.__pointRenderer.render();\n  }\n}\n","import {\n  ExcaliburGraphicsContext,\n  LineGraphicsOptions,\n  PointGraphicsOptions,\n  ExcaliburGraphicsContextOptions,\n  DebugDraw,\n  HTMLImageSource\n} from './ExcaliburGraphicsContext';\nimport { Vector } from '../../Algebra';\nimport { Color } from '../../Drawing/Color';\nimport { StateStack } from './state-stack';\nimport { GraphicsDiagnostics } from '../GraphicsDiagnostics';\n\nclass ExcaliburGraphicsContext2DCanvasDebug implements DebugDraw {\n  constructor(private _ex: ExcaliburGraphicsContext2DCanvas) {}\n  /**\n   * Draw a debug rectangle to the context\n   * @param x\n   * @param y\n   * @param width\n   * @param height\n   */\n  drawRect(x: number, y: number, width: number, height: number): void {\n    this._ex.__ctx.save();\n    this._ex.__ctx.strokeStyle = 'red';\n    this._ex.__ctx.strokeRect(\n      this._ex.snapToPixel ? ~~x : x,\n      this._ex.snapToPixel ? ~~y : y,\n      this._ex.snapToPixel ? ~~width : width,\n      this._ex.snapToPixel ? ~~height : height\n    );\n    this._ex.__ctx.restore();\n  }\n\n  drawLine(start: Vector, end: Vector, lineOptions: LineGraphicsOptions = { color: Color.Black }): void {\n    this._ex.__ctx.save();\n    this._ex.__ctx.beginPath();\n    this._ex.__ctx.strokeStyle = lineOptions.color.toString();\n    this._ex.__ctx.moveTo(this._ex.snapToPixel ? ~~start.x : start.x, this._ex.snapToPixel ? ~~start.y : start.y);\n    this._ex.__ctx.lineTo(this._ex.snapToPixel ? ~~end.x : end.x, this._ex.snapToPixel ? ~~end.y : end.y);\n    this._ex.__ctx.lineWidth = 2;\n    this._ex.__ctx.stroke();\n    this._ex.__ctx.closePath();\n    this._ex.__ctx.restore();\n  }\n\n  drawPoint(point: Vector, pointOptions: PointGraphicsOptions = { color: Color.Black, size: 5 }): void {\n    this._ex.__ctx.save();\n    this._ex.__ctx.beginPath();\n    this._ex.__ctx.fillStyle = pointOptions.color.toString();\n    this._ex.__ctx.arc(\n      this._ex.snapToPixel ? ~~point.x : point.x,\n      this._ex.snapToPixel ? ~~point.y : point.y,\n      pointOptions.size,\n      0,\n      Math.PI * 2\n    );\n    this._ex.__ctx.fill();\n    this._ex.__ctx.closePath();\n    this._ex.__ctx.restore();\n  }\n}\n\nexport class ExcaliburGraphicsContext2DCanvas implements ExcaliburGraphicsContext {\n  /**\n   * Meant for internal use only. Access the internal context at your own risk and no guarantees this will exist in the future.\n   * @internal\n   */\n  public __ctx: CanvasRenderingContext2D;\n  public get width() {\n    return this.__ctx.canvas.width;\n  }\n\n  public get height() {\n    return this.__ctx.canvas.height;\n  }\n\n  public backgroundColor: Color = Color.ExcaliburBlue;\n\n  private _state = new StateStack();\n\n  public get opacity(): number {\n    return this._state.current.opacity;\n  }\n\n  public set opacity(value: number) {\n    this._state.current.opacity = value;\n  }\n\n  public snapToPixel: boolean = true;\n\n  public get smoothing(): boolean {\n    return this.__ctx.imageSmoothingEnabled;\n  }\n\n  public set smoothing(value: boolean) {\n    this.__ctx.imageSmoothingEnabled = value;\n  }\n\n  constructor(options: ExcaliburGraphicsContextOptions) {\n    const { canvasElement, enableTransparency, snapToPixel, smoothing, backgroundColor } = options;\n    this.__ctx = canvasElement.getContext('2d', {\n      alpha: enableTransparency ?? true\n    });\n    this.backgroundColor = backgroundColor ?? this.backgroundColor;\n    this.snapToPixel = snapToPixel ?? this.snapToPixel;\n    this.smoothing = smoothing ?? this.smoothing;\n  }\n\n  public resetTransform(): void {\n    this.__ctx.resetTransform();\n  }\n\n  public updateViewport(): void {\n    // pass\n  }\n\n  /**\n   * Draw an image to the Excalibur Graphics context at an x and y coordinate using the images width and height\n   */\n  drawImage(image: HTMLImageSource, x: number, y: number): void;\n  /**\n   *\n   * Draw an image to the Excalibur Graphics context at an x and y coordinate with a specific width and height\n   */\n  drawImage(image: HTMLImageSource, x: number, y: number, width: number, height: number): void;\n  /**\n   *\n   * Draw an image to the Excalibur Graphics context specifying the source image coordinates (sx, sy, swidth, sheight)\n   * and to a specific destination on the context (dx, dy, dwidth, dheight)\n   */\n  drawImage(\n    image: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void;\n\n  drawImage(\n    image: HTMLImageSource,\n    sx: number,\n    sy: number,\n    swidth?: number,\n    sheight?: number,\n    dx?: number,\n    dy?: number,\n    dwidth?: number,\n    dheight?: number\n  ): void {\n    if (swidth === 0 || sheight === 0) {\n      return; // zero dimension dest exit early\n    } else if (dwidth === 0 || dheight === 0) {\n      return; // zero dimension dest exit early\n    } else if (image.width === 0 || image.height === 0) {\n      return; // zero dimension source exit early\n    }\n\n    this.__ctx.globalAlpha = this.opacity;\n    const args = [image, sx, sy, swidth, sheight, dx, dy, dwidth, dheight]\n      .filter((a) => a !== undefined)\n      .map((a) => (typeof a === 'number' && this.snapToPixel ? ~~a : a));\n    this.__ctx.drawImage.apply(this.__ctx, args);\n    GraphicsDiagnostics.DrawCallCount++;\n    GraphicsDiagnostics.DrawnImagesCount = 1;\n  }\n\n  debug = new ExcaliburGraphicsContext2DCanvasDebug(this);\n\n  /**\n   * Save the current state of the canvas to the stack (transforms and opacity)\n   */\n  save(): void {\n    this.__ctx.save();\n  }\n\n  /**\n   * Restore the state of the canvas from the stack\n   */\n  restore(): void {\n    this.__ctx.restore();\n  }\n\n  /**\n   * Translate the origin of the context by an x and y\n   * @param x\n   * @param y\n   */\n  translate(x: number, y: number): void {\n    this.__ctx.translate(this.snapToPixel ? ~~x : x, this.snapToPixel ? ~~y : y);\n  }\n\n  /**\n   * Rotate the context about the current origin\n   */\n  rotate(angle: number): void {\n    this.__ctx.rotate(angle);\n  }\n\n  /**\n   * Scale the context by an x and y factor\n   * @param x\n   * @param y\n   */\n  scale(x: number, y: number): void {\n    this.__ctx.scale(x, y);\n  }\n\n  clear(): void {\n    // Clear frame\n    this.__ctx.clearRect(0, 0, this.width, this.height);\n    this.__ctx.fillStyle = this.backgroundColor.toString();\n    this.__ctx.fillRect(0, 0, this.width, this.height);\n    GraphicsDiagnostics.clear();\n  }\n\n  /**\n   * Flushes the batched draw calls to the screen\n   */\n  flush(): void {\n    // pass\n  }\n}\n","import { EX_VERSION } from './';\nimport { Experiments, Flags } from './Flags';\nimport { polyfill } from './Polyfill';\npolyfill();\nimport { CanUpdate, CanDraw, CanInitialize } from './Interfaces/LifecycleEvents';\nimport { Loadable } from './Interfaces/Loadable';\nimport { Vector } from './Algebra';\nimport { Screen, DisplayMode, AbsolutePosition, ScreenDimension, Resolution } from './Screen';\nimport { ScreenElement } from './ScreenElement';\nimport { Actor } from './Actor';\nimport { Timer } from './Timer';\nimport { TileMap } from './TileMap';\nimport { Animation } from './Drawing/Animation';\nimport { Loader } from './Loader';\nimport { Detector } from './Util/Detector';\nimport {\n  VisibleEvent,\n  HiddenEvent,\n  GameStartEvent,\n  GameStopEvent,\n  PreUpdateEvent,\n  PostUpdateEvent,\n  PreFrameEvent,\n  PostFrameEvent,\n  GameEvent,\n  DeactivateEvent,\n  ActivateEvent,\n  PreDrawEvent,\n  PostDrawEvent,\n  InitializeEvent\n} from './Events';\nimport { Logger, LogLevel } from './Util/Log';\nimport { Color } from './Drawing/Color';\nimport { Scene } from './Scene';\nimport { PostProcessor } from './PostProcessing/PostProcessor';\nimport { Debug, DebugStats } from './Debug';\nimport { Class } from './Class';\nimport * as Input from './Input/Index';\nimport * as Events from './Events';\nimport { BrowserEvents } from './Util/Browser';\nimport { obsolete } from './Util/Decorators';\nimport { ExcaliburGraphicsContext, ExcaliburGraphicsContext2DCanvas, ExcaliburGraphicsContextWebGL } from './Graphics';\n\n/**\n * Enum representing the different mousewheel event bubble prevention\n */\nexport enum ScrollPreventionMode {\n  /**\n   * Do not prevent any page scrolling\n   */\n  None,\n  /**\n   * Prevent page scroll if mouse is over the game canvas\n   */\n  Canvas,\n  /**\n   * Prevent all page scrolling via mouse wheel\n   */\n  All\n}\n\n/**\n * Defines the available options to configure the Excalibur engine at constructor time.\n */\nexport interface EngineOptions {\n  /**\n   * Optionally configure the width of the viewport in css pixels\n   */\n  width?: number;\n\n  /**\n   * Optionally configure the height of the viewport in css pixels\n   */\n  height?: number;\n\n  /**\n   * Optionally configure the width & height of the viewport in css pixels.\n   * Use `viewport` instead of [[EngineOptions.width]] and [[EngineOptions.height]], or vice versa.\n   */\n  viewport?: ScreenDimension;\n\n  /**\n   * Optionally specify the size the logical pixel resolution, if not specified it will be width x height.\n   * See [[Resolution]] for common presets.\n   */\n  resolution?: ScreenDimension;\n\n  /**\n   * Optionally specify antialiasing (smoothing), by default true (smooth pixels)\n   */\n  antialiasing?: boolean;\n\n  /**\n   * Optionally configure the native canvas transparent backdrop\n   */\n  enableCanvasTransparency?: boolean;\n\n  /**\n   * Optionally specify the target canvas DOM element to render the game in\n   */\n  canvasElementId?: string;\n\n  /**\n   * Optionally specify the target canvas DOM element directly\n   */\n  canvasElement?: HTMLCanvasElement;\n\n  /**\n   * Optionally snap drawings to nearest pixel\n   */\n  snapToPixel?: boolean;\n\n  /**\n   * The [[DisplayMode]] of the game, by default [[DisplayMode.Fit]] with aspect ratio 4:3 (800x600).\n   * Depending on this value, [[width]] and [[height]] may be ignored.\n   */\n  displayMode?: DisplayMode;\n\n  /**\n   * Configures the pointer scope. Pointers scoped to the 'Canvas' can only fire events within the canvas viewport; whereas, 'Document'\n   * (default) scoped will fire anywhere on the page.\n   */\n  pointerScope?: Input.PointerScope;\n\n  /**\n   * Suppress boot up console message, which contains the \"powered by Excalibur message\"\n   */\n  suppressConsoleBootMessage?: boolean;\n\n  /**\n   * Suppress minimum browser feature detection, it is not recommended users of excalibur switch this off. This feature ensures that\n   * the currently running browser meets the minimum requirements for running excalibur. This can be useful if running on non-standard\n   * browsers or if there is a bug in excalibur preventing execution.\n   */\n  suppressMinimumBrowserFeatureDetection?: boolean;\n\n  /**\n   * Suppress HiDPI auto detection and scaling, it is not recommended users of excalibur switch off this feature. This feature detects\n   * and scales the drawing canvas appropriately to accommodate HiDPI screens.\n   */\n  suppressHiDPIScaling?: boolean;\n\n  /**\n   * Suppress play button, it is not recommended users of excalibur switch this feature. Some browsers require a user gesture (like a click)\n   * for certain browser features to work like web audio.\n   */\n  suppressPlayButton?: boolean;\n\n  /**\n   * Specify how the game window is to be positioned when the [[DisplayMode.Position]] is chosen. This option MUST be specified\n   * if the DisplayMode is set as [[DisplayMode.Position]]. The position can be either a string or an [[AbsolutePosition]].\n   * String must be in the format of css style background-position. The vertical position must precede the horizontal position in strings.\n   *\n   * Valid String examples: \"top left\", \"top\", \"bottom\", \"middle\", \"middle center\", \"bottom right\"\n   * Valid [[AbsolutePosition]] examples: `{top: 5, right: 10%}`, `{bottom: 49em, left: 10px}`, `{left: 10, bottom: 40}`\n   */\n  position?: string | AbsolutePosition;\n\n  /**\n   * Scroll prevention method.\n   */\n  scrollPreventionMode?: ScrollPreventionMode;\n\n  /**\n   * Optionally set the background color\n   */\n  backgroundColor?: Color;\n}\n\n/**\n * The Excalibur Engine\n *\n * The [[Engine]] is the main driver for a game. It is responsible for\n * starting/stopping the game, maintaining state, transmitting events,\n * loading resources, and managing the scene.\n */\nexport class Engine extends Class implements CanInitialize, CanUpdate, CanDraw {\n  /**\n   *\n   */\n  public browser: BrowserEvents;\n\n  /**\n   * Screen abstraction\n   */\n  public screen: Screen;\n\n  /**\n   * Direct access to the engine's canvas element\n   */\n  public canvas: HTMLCanvasElement;\n\n  /**\n   * Direct access to the engine's 2D rendering context\n   */\n  public ctx: CanvasRenderingContext2D;\n\n  public graphicsContext: ExcaliburGraphicsContext;\n\n  /**\n   * Direct access to the canvas element ID, if an ID exists\n   */\n  public canvasElementId: string;\n\n  /**\n   * The width of the game canvas in pixels (physical width component of the\n   * resolution of the canvas element)\n   */\n  public get canvasWidth(): number {\n    return this.screen.canvasWidth;\n  }\n\n  /**\n   * Returns half width of the game canvas in pixels (half physical width component)\n   */\n  public get halfCanvasWidth(): number {\n    return this.screen.halfCanvasWidth;\n  }\n\n  /**\n   * The height of the game canvas in pixels, (physical height component of\n   * the resolution of the canvas element)\n   */\n  public get canvasHeight(): number {\n    return this.screen.canvasHeight;\n  }\n\n  /**\n   * Returns half height of the game canvas in pixels (half physical height component)\n   */\n  public get halfCanvasHeight(): number {\n    return this.screen.halfCanvasHeight;\n  }\n\n  /**\n   * Returns the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawWidth(): number {\n    return this.screen.drawWidth;\n  }\n\n  /**\n   * Returns half the width of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawWidth(): number {\n    return this.screen.halfDrawWidth;\n  }\n\n  /**\n   * Returns the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get drawHeight(): number {\n    return this.screen.drawHeight;\n  }\n\n  /**\n   * Returns half the height of the engine's visible drawing surface in pixels including zoom and device pixel ratio.\n   */\n  public get halfDrawHeight(): number {\n    return this.screen.halfDrawHeight;\n  }\n\n  /**\n   * Returns whether excalibur detects the current screen to be HiDPI\n   */\n  public get isHiDpi(): boolean {\n    return this.screen.isHiDpi;\n  }\n\n  /**\n   * Access engine input like pointer, keyboard, or gamepad\n   */\n  public input: Input.EngineInput;\n\n  private _hasStarted: boolean = false;\n\n  /**\n   * Access Excalibur debugging functionality.\n   */\n  public debug: Debug;\n\n  /**\n   * Access [[stats]] that holds frame statistics.\n   */\n  public get stats(): DebugStats {\n    return this.debug.stats;\n  }\n\n  /**\n   * Gets or sets the list of post processors to apply at the end of drawing a frame (such as [[ColorBlindCorrector]])\n   */\n  public postProcessors: PostProcessor[] = [];\n\n  /**\n   * The current [[Scene]] being drawn and updated on screen\n   */\n  public currentScene: Scene;\n\n  /**\n   * The default [[Scene]] of the game, use [[Engine.goToScene]] to transition to different scenes.\n   */\n  public readonly rootScene: Scene;\n\n  /**\n   * Contains all the scenes currently registered with Excalibur\n   */\n  public readonly scenes: { [key: string]: Scene } = {};\n\n  private _animations: AnimationNode[] = [];\n\n  /**\n   * Indicates whether the engine is set to fullscreen or not\n   */\n  public get isFullscreen(): boolean {\n    return this.screen.isFullScreen;\n  }\n\n  /**\n   * Indicates the current [[DisplayMode]] of the engine.\n   */\n  public get displayMode(): DisplayMode {\n    return this.screen.displayMode;\n  }\n\n  private _suppressPlayButton: boolean = false;\n  /**\n   * Returns the calculated pixel ration for use in rendering\n   */\n  public get pixelRatio(): number {\n    return this.screen.pixelRatio;\n  }\n\n  /**\n   * Indicates the current position of the engine. Valid only when DisplayMode is DisplayMode.Position\n   */\n  public position: string | AbsolutePosition;\n  /**\n   * Indicates whether audio should be paused when the game is no longer visible.\n   */\n  public pauseAudioWhenHidden: boolean = true;\n\n  /**\n   * Indicates whether the engine should draw with debug information\n   */\n  private _isDebug: boolean = false;\n  public get isDebug(): boolean {\n    return this._isDebug;\n  }\n  public debugColor: Color = new Color(255, 255, 255);\n  /**\n   * Sets the background color for the engine.\n   */\n  public backgroundColor: Color;\n\n  /**\n   * Sets the Transparency for the engine.\n   */\n  public enableCanvasTransparency: boolean = true;\n\n  /**\n   * The action to take when a fatal exception is thrown\n   */\n  public onFatalException = (e: any) => {\n    Logger.getInstance().fatal(e);\n  };\n\n  /**\n   * The mouse wheel scroll prevention mode\n   */\n  public pageScrollPreventionMode: ScrollPreventionMode;\n\n  private _logger: Logger;\n\n  // this is a reference to the current requestAnimationFrame return value\n  private _requestId: number;\n\n  // this determines whether excalibur is compatible with your browser\n  private _compatible: boolean;\n\n  private _timescale: number = 1.0;\n\n  // loading\n  private _loader: Loader;\n  private _isLoading: boolean = false;\n\n  private _isInitialized: boolean = false;\n\n  private _deferredGoTo: string = null;\n\n  public on(eventName: Events.initialize, handler: (event: Events.InitializeEvent<Engine>) => void): void;\n  public on(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public on(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public on(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public on(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public on(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Engine>) => void): void;\n  public on(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Engine>) => void): void;\n  public on(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public on(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public on(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public on(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public on(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public on(eventName: string, handler: (event: any) => void): void {\n    super.on(eventName, handler);\n  }\n\n  public once(eventName: Events.initialize, handler: (event: Events.InitializeEvent<Engine>) => void): void;\n  public once(eventName: Events.visible, handler: (event: VisibleEvent) => void): void;\n  public once(eventName: Events.hidden, handler: (event: HiddenEvent) => void): void;\n  public once(eventName: Events.start, handler: (event: GameStartEvent) => void): void;\n  public once(eventName: Events.stop, handler: (event: GameStopEvent) => void): void;\n  public once(eventName: Events.preupdate, handler: (event: PreUpdateEvent<Engine>) => void): void;\n  public once(eventName: Events.postupdate, handler: (event: PostUpdateEvent<Engine>) => void): void;\n  public once(eventName: Events.preframe, handler: (event: PreFrameEvent) => void): void;\n  public once(eventName: Events.postframe, handler: (event: PostFrameEvent) => void): void;\n  public once(eventName: Events.predraw, handler: (event: PreDrawEvent) => void): void;\n  public once(eventName: Events.postdraw, handler: (event: PostDrawEvent) => void): void;\n  public once(eventName: string, handler: (event: GameEvent<any>) => void): void;\n  public once(eventName: string, handler: (event: any) => void): void {\n    super.once(eventName, handler);\n  }\n\n  public off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<Engine>) => void): void;\n  public off(eventName: Events.visible, handler?: (event: VisibleEvent) => void): void;\n  public off(eventName: Events.hidden, handler?: (event: HiddenEvent) => void): void;\n  public off(eventName: Events.start, handler?: (event: GameStartEvent) => void): void;\n  public off(eventName: Events.stop, handler?: (event: GameStopEvent) => void): void;\n  public off(eventName: Events.preupdate, handler?: (event: PreUpdateEvent<Engine>) => void): void;\n  public off(eventName: Events.postupdate, handler?: (event: PostUpdateEvent<Engine>) => void): void;\n  public off(eventName: Events.preframe, handler?: (event: PreFrameEvent) => void): void;\n  public off(eventName: Events.postframe, handler?: (event: PostFrameEvent) => void): void;\n  public off(eventName: Events.predraw, handler?: (event: PreDrawEvent) => void): void;\n  public off(eventName: Events.postdraw, handler?: (event: PostDrawEvent) => void): void;\n  public off(eventName: string, handler?: (event: GameEvent<any>) => void): void;\n  public off(eventName: string, handler?: (event: any) => void): void {\n    super.off(eventName, handler);\n  }\n\n  /**\n   * Default [[EngineOptions]]\n   */\n  private static _DEFAULT_ENGINE_OPTIONS: EngineOptions = {\n    width: 0,\n    height: 0,\n    enableCanvasTransparency: true,\n    canvasElementId: '',\n    canvasElement: undefined,\n    snapToPixel: false,\n    pointerScope: Input.PointerScope.Document,\n    suppressConsoleBootMessage: null,\n    suppressMinimumBrowserFeatureDetection: null,\n    suppressHiDPIScaling: null,\n    suppressPlayButton: null,\n    scrollPreventionMode: ScrollPreventionMode.Canvas,\n    backgroundColor: Color.fromHex('#2185d0') // Excalibur blue\n  };\n\n  /**\n   * Creates a new game using the given [[EngineOptions]]. By default, if no options are provided,\n   * the game will be rendered full screen (taking up all available browser window space).\n   * You can customize the game rendering through [[EngineOptions]].\n   *\n   * Example:\n   *\n   * ```js\n   * var game = new ex.Engine({\n   *   width: 0, // the width of the canvas\n   *   height: 0, // the height of the canvas\n   *   enableCanvasTransparency: true, // the transparencySection of the canvas\n   *   canvasElementId: '', // the DOM canvas element ID, if you are providing your own\n   *   displayMode: ex.DisplayMode.FullScreen, // the display mode\n   *   pointerScope: ex.Input.PointerScope.Document, // the scope of capturing pointer (mouse/touch) events\n   *   backgroundColor: ex.Color.fromHex('#2185d0') // background color of the engine\n   * });\n   *\n   * // call game.start, which is a Promise\n   * game.start().then(function () {\n   *   // ready, set, go!\n   * });\n   * ```\n   */\n  constructor(options?: EngineOptions) {\n    super();\n\n    options = { ...Engine._DEFAULT_ENGINE_OPTIONS, ...options };\n\n    Flags.freeze();\n\n    // Initialize browser events facade\n    this.browser = new BrowserEvents(window, document);\n\n    // Check compatibility\n    const detector = new Detector();\n    if (!options.suppressMinimumBrowserFeatureDetection && !(this._compatible = detector.test())) {\n      const message = document.createElement('div');\n      message.innerText = 'Sorry, your browser does not support all the features needed for Excalibur';\n      document.body.appendChild(message);\n\n      detector.failedTests.forEach(function (test) {\n        const testMessage = document.createElement('div');\n        testMessage.innerText = 'Browser feature missing ' + test;\n        document.body.appendChild(testMessage);\n      });\n\n      if (options.canvasElementId) {\n        const canvas = document.getElementById(options.canvasElementId);\n        if (canvas) {\n          canvas.parentElement.removeChild(canvas);\n        }\n      }\n\n      return;\n    } else {\n      this._compatible = true;\n    }\n\n    // Use native console API for color fun\n    // eslint-disable-next-line no-console\n    if (console.log && !options.suppressConsoleBootMessage) {\n      // eslint-disable-next-line no-console\n      console.log(\n        `%cPowered by Excalibur.js (v${EX_VERSION})`,\n        'background: #176BAA; color: white; border-radius: 5px; padding: 15px; font-size: 1.5em; line-height: 80px;'\n      );\n      // eslint-disable-next-line no-console\n      console.log('\\n\\\n      /| ________________\\n\\\nO|===|* >________________>\\n\\\n      \\\\|');\n      // eslint-disable-next-line no-console\n      console.log('Visit', 'http://excaliburjs.com', 'for more information');\n    }\n\n    // Suppress play button\n    if (options.suppressPlayButton) {\n      this._suppressPlayButton = true;\n    }\n\n    this._logger = Logger.getInstance();\n\n    // If debug is enabled, let's log browser features to the console.\n    if (this._logger.defaultLevel === LogLevel.Debug) {\n      detector.logBrowserFeatures();\n    }\n\n    this._logger.debug('Building engine...');\n\n    this.canvasElementId = options.canvasElementId;\n\n    if (options.canvasElementId) {\n      this._logger.debug('Using Canvas element specified: ' + options.canvasElementId);\n      this.canvas = <HTMLCanvasElement>document.getElementById(options.canvasElementId);\n    } else if (options.canvasElement) {\n      this._logger.debug('Using Canvas element specified:', options.canvasElement);\n      this.canvas = options.canvasElement;\n    } else {\n      this._logger.debug('Using generated canvas element');\n      this.canvas = <HTMLCanvasElement>document.createElement('canvas');\n    }\n\n    let displayMode = options.displayMode ?? DisplayMode.Fixed;\n    if ((options.width && options.height) || options.viewport) {\n      if (options.displayMode === undefined) {\n        displayMode = DisplayMode.Fixed;\n      }\n      this._logger.debug('Engine viewport is size ' + options.width + ' x ' + options.height);\n    } else if (!options.displayMode) {\n      this._logger.debug('Engine viewport is fit');\n      displayMode = DisplayMode.Fit;\n    }\n\n    if (Flags.isEnabled(Experiments.WebGL)) {\n      const exWebglCtx = new ExcaliburGraphicsContextWebGL({\n        canvasElement: this.canvas,\n        enableTransparency: this.enableCanvasTransparency,\n        smoothing: options.antialiasing,\n        backgroundColor: options.backgroundColor,\n        snapToPixel: options.snapToPixel\n      });\n      this.graphicsContext = exWebglCtx;\n      this.ctx = exWebglCtx.__ctx;\n    } else {\n      const ex2dCtx = new ExcaliburGraphicsContext2DCanvas({\n        canvasElement: this.canvas,\n        enableTransparency: this.enableCanvasTransparency,\n        smoothing: options.antialiasing,\n        backgroundColor: options.backgroundColor,\n        snapToPixel: options.snapToPixel\n      });\n      this.graphicsContext = ex2dCtx;\n      this.ctx = ex2dCtx.__ctx;\n    }\n\n    this.screen = new Screen({\n      canvas: this.canvas,\n      context: this.graphicsContext,\n      antialiasing: options.antialiasing ?? true,\n      browser: this.browser,\n      viewport: options.viewport ?? (options.width && options.height ? { width: options.width, height: options.height } : Resolution.SVGA),\n      resolution: options.resolution,\n      displayMode,\n      position: options.position,\n      pixelRatio: options.suppressHiDPIScaling ? 1 : null\n    });\n\n    this.screen.applyResolutionAndViewport();\n\n    if (options.backgroundColor) {\n      this.backgroundColor = options.backgroundColor.clone();\n    }\n\n    this.enableCanvasTransparency = options.enableCanvasTransparency;\n\n    this._loader = new Loader();\n    this.debug = new Debug(this);\n\n    this._initialize(options);\n\n    this.rootScene = this.currentScene = new Scene(this);\n\n    this.addScene('root', this.rootScene);\n  }\n\n  /**\n   * Returns a BoundingBox of the top left corner of the screen\n   * and the bottom right corner of the screen.\n   */\n  public getWorldBounds() {\n    return this.screen.getWorldBounds();\n  }\n\n  /**\n   * Gets the current engine timescale factor (default is 1.0 which is 1:1 time)\n   */\n  public get timescale() {\n    return this._timescale;\n  }\n\n  /**\n   * Sets the current engine timescale factor. Useful for creating slow-motion effects or fast-forward effects\n   * when using time-based movement.\n   */\n  public set timescale(value: number) {\n    if (value <= 0) {\n      Logger.getInstance().error('Cannot set engine.timescale to a value of 0 or less than 0.');\n      return;\n    }\n\n    this._timescale = value;\n  }\n\n  /**\n   * Plays a sprite animation on the screen at the specified `x` and `y`\n   * (in game coordinates, not screen pixels). These animations play\n   * independent of actors, and will be cleaned up internally as soon\n   * as they are complete. Note animations that loop will never be\n   * cleaned up.\n   *\n   * @param animation  Animation to play\n   * @param x          x game coordinate to play the animation\n   * @param y          y game coordinate to play the animation\n   * @deprecated\n   */\n  @obsolete({ message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use Actor.graphics' })\n  public playAnimation(animation: Animation, x: number, y: number) {\n    this._animations.push(new AnimationNode(animation, x, y));\n  }\n\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public addTileMap(tileMap: TileMap) {\n    this.currentScene.addTileMap(tileMap);\n  }\n\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public removeTileMap(tileMap: TileMap) {\n    this.currentScene.removeTileMap(tileMap);\n  }\n\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public addTimer(timer: Timer): Timer {\n    return this.currentScene.addTimer(timer);\n  }\n\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public removeTimer(timer: Timer): Timer {\n    return this.currentScene.removeTimer(timer);\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   *\n   * @param key  The name of the scene, must be unique\n   * @param scene The scene to add to the engine\n   */\n  public addScene(key: string, scene: Scene) {\n    if (this.scenes[key]) {\n      this._logger.warn('Scene', key, 'already exists overwriting');\n    }\n    this.scenes[key] = scene;\n  }\n\n  /**\n   * Removes a [[Scene]] instance from the engine\n   * @param scene  The scene to remove\n   */\n  public removeScene(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param key  The scene key to remove\n   */\n  public removeScene(key: string): void;\n  /**\n   * @internal\n   */\n  public removeScene(entity: any): void {\n    if (entity instanceof Scene) {\n      // remove scene\n      for (const key in this.scenes) {\n        if (this.scenes.hasOwnProperty(key)) {\n          if (this.scenes[key] === entity) {\n            delete this.scenes[key];\n          }\n        }\n      }\n    }\n\n    if (typeof entity === 'string') {\n      // remove scene\n      delete this.scenes[entity];\n    }\n  }\n\n  /**\n   * Adds a [[Scene]] to the engine, think of scenes in Excalibur as you\n   * would levels or menus.\n   * @param sceneKey  The key of the scene, must be unique\n   * @param scene     The scene to add to the engine\n   */\n  public add(sceneKey: string, scene: Scene): void;\n  /**\n   * Adds a [[Timer]] to the [[currentScene]].\n   * @param timer  The timer to add to the [[currentScene]].\n   */\n  public add(timer: Timer): void;\n  /**\n   * Adds a [[TileMap]] to the [[currentScene]], once this is done the TileMap\n   * will be drawn and updated.\n   */\n  public add(tileMap: TileMap): void;\n  /**\n   * Adds an actor to the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.add(actor)`.\n   *\n   * Actors can only be drawn if they are a member of a scene, and only\n   * the [[currentScene]] may be drawn or updated.\n   *\n   * @param actor  The actor to add to the [[currentScene]]\n   */\n  public add(actor: Actor): void;\n\n  /**\n   * Adds a [[ScreenElement]] to the [[currentScene]] of the game,\n   * ScreenElements do not participate in collisions, instead the\n   * remain in the same place on the screen.\n   * @param screenElement  The ScreenElement to add to the [[currentScene]]\n   */\n  public add(screenElement: ScreenElement): void;\n  public add(entity: any): void {\n    if (arguments.length === 2) {\n      this.addScene(<string>arguments[0], <Scene>arguments[1]);\n    }\n    if (this._deferredGoTo && this.scenes[this._deferredGoTo]) {\n      this.scenes[this._deferredGoTo].add(entity);\n    } else {\n      this.currentScene.add(entity);\n    }\n  }\n\n  /**\n   * Removes a scene instance from the engine\n   * @param scene  The scene to remove\n   */\n  public remove(scene: Scene): void;\n  /**\n   * Removes a scene from the engine by key\n   * @param sceneKey  The scene to remove\n   */\n  public remove(sceneKey: string): void;\n  /**\n   * Removes a [[Timer]] from the [[currentScene]].\n   * @param timer  The timer to remove to the [[currentScene]].\n   */\n  public remove(timer: Timer): void;\n  /**\n   * Removes a [[TileMap]] from the [[currentScene]], it will no longer be drawn or updated.\n   */\n  public remove(tileMap: TileMap): void;\n  /**\n   * Removes an actor from the [[currentScene]] of the game. This is synonymous\n   * to calling `engine.currentScene.removeChild(actor)`.\n   * Actors that are removed from a scene will no longer be drawn or updated.\n   *\n   * @param actor  The actor to remove from the [[currentScene]].\n   */\n  public remove(actor: Actor): void;\n  /**\n   * Removes a [[ScreenElement]] to the scene, it will no longer be drawn or updated\n   * @param screenElement  The ScreenElement to remove from the [[currentScene]]\n   */\n  public remove(screenElement: ScreenElement): void;\n  public remove(entity: any): void {\n    if (entity instanceof Actor) {\n      this.currentScene.remove(entity);\n    }\n\n    if (entity instanceof Scene) {\n      this.removeScene(entity);\n    }\n\n    if (typeof entity === 'string') {\n      this.removeScene(entity);\n    }\n  }\n\n  /**\n   * Changes the currently updating and drawing scene to a different,\n   * named scene. Calls the [[Scene]] lifecycle events.\n   * @param key  The key of the scene to transition to.\n   */\n  public goToScene(key: string) {\n    // if not yet initialized defer goToScene\n    if (!this.isInitialized) {\n      this._deferredGoTo = key;\n      return;\n    }\n\n    if (this.scenes[key]) {\n      const oldScene = this.currentScene;\n      const newScene = this.scenes[key];\n\n      this._logger.debug('Going to scene:', key);\n\n      // only deactivate when initialized\n      if (this.currentScene.isInitialized) {\n        this.currentScene._deactivate.call(this.currentScene, [oldScene, newScene]);\n        this.currentScene.eventDispatcher.emit('deactivate', new DeactivateEvent(newScene, this.currentScene));\n      }\n\n      // set current scene to new one\n      this.currentScene = newScene;\n      this.screen.setCurrentCamera(newScene.camera);\n\n      // initialize the current scene if has not been already\n      this.currentScene._initialize(this);\n\n      this.currentScene._activate.call(this.currentScene, [oldScene, newScene]);\n      this.currentScene.eventDispatcher.emit('activate', new ActivateEvent(oldScene, this.currentScene));\n    } else {\n      this._logger.error('Scene', key, 'does not exist!');\n    }\n  }\n\n  /**\n   * Transforms the current x, y from screen coordinates to world coordinates\n   * @param point  Screen coordinate to convert\n   */\n  public screenToWorldCoordinates(point: Vector): Vector {\n    return this.screen.screenToWorldCoordinates(point);\n  }\n\n  /**\n   * Transforms a world coordinate, to a screen coordinate\n   * @param point  World coordinate to convert\n   */\n  public worldToScreenCoordinates(point: Vector): Vector {\n    return this.screen.worldToScreenCoordinates(point);\n  }\n\n  /**\n   * Initializes the internal canvas, rendering context, display mode, and native event listeners\n   */\n  private _initialize(options?: EngineOptions) {\n    this.pageScrollPreventionMode = options.scrollPreventionMode;\n\n    // initialize inputs\n    this.input = {\n      keyboard: new Input.Keyboard(),\n      pointers: new Input.Pointers(this),\n      gamepads: new Input.Gamepads()\n    };\n    this.input.keyboard.init();\n    this.input.pointers.init(options && options.pointerScope === Input.PointerScope.Document ? document : this.canvas);\n    this.input.gamepads.init();\n\n    // Issue #385 make use of the visibility api\n    // https://developer.mozilla.org/en-US/docs/Web/Guide/User_experience/Using_the_Page_Visibility_API\n\n    let hidden: keyof HTMLDocument, visibilityChange: string;\n    if (typeof document.hidden !== 'undefined') {\n      // Opera 12.10 and Firefox 18 and later support\n      hidden = 'hidden';\n      visibilityChange = 'visibilitychange';\n    } else if ('msHidden' in document) {\n      hidden = <keyof HTMLDocument>'msHidden';\n      visibilityChange = 'msvisibilitychange';\n    } else if ('webkitHidden' in document) {\n      hidden = <keyof HTMLDocument>'webkitHidden';\n      visibilityChange = 'webkitvisibilitychange';\n    }\n\n    this.browser.document.on(visibilityChange, () => {\n      if (document[hidden]) {\n        this.eventDispatcher.emit('hidden', new HiddenEvent(this));\n        this._logger.debug('Window hidden');\n      } else {\n        this.eventDispatcher.emit('visible', new VisibleEvent(this));\n        this._logger.debug('Window visible');\n      }\n    });\n\n    if (!this.canvasElementId && !options.canvasElement) {\n      document.body.appendChild(this.canvas);\n    }\n  }\n\n  public onInitialize(_engine: Engine) {\n    // Override me\n  }\n\n  /**\n   * If supported by the browser, this will set the antialiasing flag on the\n   * canvas. Set this to `false` if you want a 'jagged' pixel art look to your\n   * image resources.\n   * @param isSmooth  Set smoothing to true or false\n   */\n  public setAntialiasing(isSmooth: boolean) {\n    this.screen.antialiasing = isSmooth;\n  }\n\n  /**\n   * Return the current smoothing status of the canvas\n   */\n  public getAntialiasing(): boolean {\n    return this.screen.antialiasing;\n  }\n\n  /**\n   * Gets whether the actor is Initialized\n   */\n  public get isInitialized(): boolean {\n    return this._isInitialized;\n  }\n\n  private _overrideInitialize(engine: Engine) {\n    if (!this.isInitialized) {\n      this.onInitialize(engine);\n      super.emit('initialize', new InitializeEvent(engine, this));\n      this._isInitialized = true;\n      if (this._deferredGoTo) {\n        this.goToScene(this._deferredGoTo);\n      } else {\n        this.goToScene('root');\n      }\n    }\n  }\n\n  /**\n   * Updates the entire state of the game\n   * @param delta  Number of milliseconds elapsed since the last update.\n   */\n  private _update(delta: number) {\n    if (this._isLoading) {\n      // suspend updates until loading is finished\n      this._loader.update(this, delta);\n      // Update input listeners\n      this.input.keyboard.update();\n      this.input.pointers.update();\n      this.input.gamepads.update();\n      return;\n    }\n    this._overrideInitialize(this);\n    // Publish preupdate events\n    this._preupdate(delta);\n\n    // process engine level events\n    this.currentScene.update(this, delta);\n\n    // update animations\n    // TODO remove\n    this._animations = this._animations.filter(function (a) {\n      return !a.animation.isDone();\n    });\n\n    // Update input listeners\n    this.input.keyboard.update();\n    this.input.pointers.update();\n    this.input.gamepads.update();\n\n    // Publish update event\n    this._postupdate(delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _preupdate(delta: number) {\n    this.emit('preupdate', new PreUpdateEvent(this, delta, this));\n    this.onPreUpdate(this, delta);\n  }\n\n  public onPreUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postupdate(delta: number) {\n    this.emit('postupdate', new PostUpdateEvent(this, delta, this));\n    this.onPostUpdate(this, delta);\n  }\n\n  public onPostUpdate(_engine: Engine, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Draws the entire game\n   * @param delta  Number of milliseconds elapsed since the last draw.\n   */\n  private _draw(delta: number) {\n    const ctx = this.ctx;\n    this._predraw(ctx, delta);\n\n    if (this._isLoading) {\n      this._loader.canvas.draw(this.graphicsContext, 0, 0);\n      this.graphicsContext.flush();\n      // Drawing nothing else while loading\n      return;\n    }\n\n    // TODO move to graphics systems?\n    this.graphicsContext.backgroundColor = this.backgroundColor;\n\n    this.currentScene.draw(this.ctx, delta);\n\n    // todo needs to be a better way of doing this\n    let a = 0;\n    const len = this._animations.length;\n    for (a; a < len; a++) {\n      this._animations[a].animation.draw(ctx, this._animations[a].x, this._animations[a].y);\n    }\n\n    // Draw debug information\n    // TODO don't access ctx directly\n    if (this.isDebug) {\n      this.ctx.font = 'Consolas';\n      this.ctx.fillStyle = this.debugColor.toString();\n      const keys = this.input.keyboard.getKeys();\n      for (let j = 0; j < keys.length; j++) {\n        this.ctx.fillText(keys[j].toString() + ' : ' + (Input.Keys[keys[j]] ? Input.Keys[keys[j]] : 'Not Mapped'), 100, 10 * j + 10);\n      }\n\n      this.ctx.fillText('FPS:' + this.stats.currFrame.fps.toFixed(2).toString(), 10, 10);\n    }\n\n    // Post processing\n    for (let i = 0; i < this.postProcessors.length; i++) {\n      this.postProcessors[i].process(this.ctx.getImageData(0, 0, this.canvasWidth, this.canvasHeight), this.ctx);\n    }\n\n    this._postdraw(ctx, delta);\n  }\n\n  /**\n   * @internal\n   */\n  public _predraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('predraw', new PreDrawEvent(_ctx, delta, this));\n    this.onPreDraw(_ctx, delta);\n  }\n\n  public onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * @internal\n   */\n  public _postdraw(_ctx: CanvasRenderingContext2D, delta: number) {\n    this.emit('postdraw', new PostDrawEvent(_ctx, delta, this));\n    this.onPostDraw(_ctx, delta);\n  }\n\n  public onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    // Override me\n  }\n\n  /**\n   * Enable or disable Excalibur debugging functionality.\n   * @param toggle a value that debug drawing will be changed to\n   */\n  public showDebug(toggle: boolean): void {\n    this._isDebug = toggle;\n  }\n\n  /**\n   * Toggle Excalibur debugging functionality.\n   */\n  public toggleDebug(): boolean {\n    this._isDebug = !this._isDebug;\n    return this._isDebug;\n  }\n\n  /**\n   * Starts the internal game loop for Excalibur after loading\n   * any provided assets.\n   * @param loader  Optional [[Loader]] to use to load resources. The default loader is [[Loader]], override to provide your own\n   * custom loader.\n   */\n  public start(loader?: Loader): Promise<any> {\n    if (!this._compatible) {\n      return Promise.reject('Excalibur is incompatible with your browser');\n    }\n    this.screen.pushResolutionAndViewport();\n    this.screen.resolution = this.screen.viewport;\n    this.screen.applyResolutionAndViewport();\n    this.graphicsContext.updateViewport();\n    let loadingComplete: Promise<any>;\n    if (loader) {\n      this._loader = loader;\n      this._loader.suppressPlayButton = this._suppressPlayButton || this._loader.suppressPlayButton;\n      this._loader.wireEngine(this);\n      loadingComplete = this.load(this._loader);\n    } else {\n      loadingComplete = Promise.resolve();\n    }\n\n    loadingComplete.then(() => {\n      this.screen.popResolutionAndViewport();\n      this.screen.applyResolutionAndViewport();\n      this.graphicsContext.updateViewport();\n      this.emit('start', new GameStartEvent(this));\n    });\n\n    if (!this._hasStarted) {\n      this._hasStarted = true;\n      this._logger.debug('Starting game...');\n      this.browser.resume();\n      Engine.createMainLoop(this, window.requestAnimationFrame, Date.now)();\n\n      this._logger.debug('Game started');\n    } else {\n      // Game already started;\n    }\n    return loadingComplete;\n  }\n\n  public static createMainLoop(game: Engine, raf: (func: Function) => number, nowFn: () => number) {\n    let lastTime = nowFn();\n\n    return function mainloop() {\n      if (!game._hasStarted) {\n        return;\n      }\n      try {\n        game._requestId = raf(mainloop);\n        game.emit('preframe', new PreFrameEvent(game, game.stats.prevFrame));\n\n        // Get the time to calculate time-elapsed\n        const now = nowFn();\n        let elapsed = Math.floor(now - lastTime) || 1;\n        // Resolves issue #138 if the game has been paused, or blurred for\n        // more than a 200 milliseconds, reset elapsed time to 1. This improves reliability\n        // and provides more expected behavior when the engine comes back\n        // into focus\n        if (elapsed > 200) {\n          elapsed = 1;\n        }\n        const delta = elapsed * game.timescale;\n\n        // reset frame stats (reuse existing instances)\n        const frameId = game.stats.prevFrame.id + 1;\n        game.stats.currFrame.reset();\n        game.stats.currFrame.id = frameId;\n        game.stats.currFrame.delta = delta;\n        game.stats.currFrame.fps = 1.0 / (delta / 1000);\n\n        const beforeUpdate = nowFn();\n        game._update(delta);\n        const afterUpdate = nowFn();\n        game._draw(delta);\n        const afterDraw = nowFn();\n\n        game.stats.currFrame.duration.update = afterUpdate - beforeUpdate;\n        game.stats.currFrame.duration.draw = afterDraw - afterUpdate;\n\n        lastTime = now;\n\n        game.emit('postframe', new PostFrameEvent(game, game.stats.currFrame));\n        game.stats.prevFrame.reset(game.stats.currFrame);\n      } catch (e) {\n        window.cancelAnimationFrame(game._requestId);\n        game.stop();\n        game.onFatalException(e);\n      }\n    };\n  }\n\n  /**\n   * Stops Excalibur's main loop, useful for pausing the game.\n   */\n  public stop() {\n    if (this._hasStarted) {\n      this.emit('stop', new GameStopEvent(this));\n      this.browser.pause();\n      this._hasStarted = false;\n      this._logger.debug('Game stopped');\n    }\n  }\n\n  /**\n   * Returns the Engine's Running status, Useful for checking whether engine is running or paused.\n   */\n  public isPaused(): boolean {\n    return !this._hasStarted;\n  }\n\n  /**\n   * Takes a screen shot of the current viewport and returns it as an\n   * HTML Image Element.\n   */\n  public screenshot(): HTMLImageElement {\n    const result = new Image();\n    const raw = this.canvas.toDataURL('image/png');\n    result.src = raw;\n    return result;\n  }\n\n  /**\n   * Another option available to you to load resources into the game.\n   * Immediately after calling this the game will pause and the loading screen\n   * will appear.\n   * @param loader  Some [[Loadable]] such as a [[Loader]] collection, [[Sound]], or [[Texture]].\n   */\n  public load(loader: Loadable<any>): Promise<void> {\n    const complete = new Promise<void>((resolve) => {\n      this._isLoading = true;\n\n      loader.load().then(() => {\n        if (this._suppressPlayButton) {\n          setTimeout(() => {\n            this._isLoading = false;\n            resolve();\n            // Delay is to give the logo a chance to show, otherwise don't delay\n          }, 500);\n        } else {\n          this._isLoading = false;\n          resolve();\n        }\n      });\n    });\n\n    return complete;\n  }\n}\n\n/**\n * @internal\n * @deprecated\n */\n@obsolete({ message: 'Will be removed in excalibur v0.26.0' })\nclass AnimationNode {\n  constructor(public animation: Animation, public x: number, public y: number) {}\n}\n","import { GameEvent } from '../Events';\nimport { Sound } from '../Resources/Sound/Sound';\nimport { Actor } from '../Actor';\nimport { WebAudioInstance } from '../Resources/Sound/WebAudioInstance';\n\nexport class MediaEvent extends GameEvent<Sound> {\n  /**\n   * Media event cannot bubble\n   */\n  public set bubbles(_value: boolean) {\n    // stubbed\n  }\n  /**\n   * Media event cannot bubble\n   */\n  public get bubbles(): boolean {\n    return false;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected get _path(): Actor[] {\n    return null;\n  }\n  /**\n   * Media event cannot bubble, so they have no path\n   */\n  protected set _path(_val: Actor[]) {\n    // stubbed\n  }\n\n  constructor(public target: Sound, protected _name: string = 'MediaEvent') {\n    super();\n  }\n\n  /**\n   * Prevents event from bubbling\n   */\n  public stopPropagation(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Action, that calls when event happens\n   */\n  public action(): void {\n    /**\n     * Stub\n     */\n  }\n  /**\n   * Propagate event further through event path\n   */\n  public propagate(): void {\n    /**\n     * Stub\n     */\n  }\n\n  public layPath(_actor: Actor): void {\n    /**\n     * Stub\n     */\n  }\n}\n\nexport class NativeSoundEvent extends MediaEvent {\n  constructor(target: Sound, public track?: WebAudioInstance) {\n    super(target, 'NativeSoundEvent');\n  }\n}\n\nexport class NativeSoundProcessedEvent extends MediaEvent {\n  public data: string | AudioBuffer;\n\n  constructor(target: Sound, private _processedData: string | AudioBuffer) {\n    super(target, 'NativeSoundProcessedEvent');\n\n    this.data = this._processedData;\n  }\n}\n","import { Color } from '../Drawing/Color';\nimport { Vector } from '../Algebra';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\n\n/**\n * Enum representing the different font size units\n * https://developer.mozilla.org/en-US/docs/Web/CSS/font-size\n */\nexport enum FontUnit {\n  /**\n   * Em is a scalable unit, 1 em is equal to the current font size of the current element, parent elements can effect em values\n   */\n  Em = 'em',\n  /**\n   * Rem is similar to the Em, it is a scalable unit. 1 rem is equal to the font size of the root element\n   */\n  Rem = 'rem',\n  /**\n   * Pixel is a unit of length in screen pixels\n   */\n  Px = 'px',\n  /**\n   * Point is a physical unit length (1/72 of an inch)\n   */\n  Pt = 'pt',\n  /**\n   * Percent is a scalable unit similar to Em, the only difference is the Em units scale faster when Text-Size stuff\n   */\n  Percent = '%'\n}\n\n/**\n * Enum representing the different horizontal text alignments\n */\nexport enum TextAlign {\n  /**\n   * The text is left-aligned.\n   */\n  Left = 'left',\n  /**\n   * The text is right-aligned.\n   */\n  Right = 'right',\n  /**\n   * The text is centered.\n   */\n  Center = 'center',\n  /**\n   * The text is aligned at the normal start of the line (left-aligned for left-to-right locales,\n   * right-aligned for right-to-left locales).\n   */\n  Start = 'start',\n  /**\n   * The text is aligned at the normal end of the line (right-aligned for left-to-right locales,\n   * left-aligned for right-to-left locales).\n   */\n  End = 'end'\n}\n\n/**\n * Enum representing the different baseline text alignments\n */\nexport enum BaseAlign {\n  /**\n   * The text baseline is the top of the em square.\n   */\n  Top = 'top',\n  /**\n   * The text baseline is the hanging baseline.  Currently unsupported; this will act like\n   * alphabetic.\n   */\n  Hanging = 'hanging',\n  /**\n   * The text baseline is the middle of the em square.\n   */\n  Middle = 'middle',\n  /**\n   * The text baseline is the normal alphabetic baseline.\n   */\n  Alphabetic = 'alphabetic',\n  /**\n   * The text baseline is the ideographic baseline; this is the bottom of\n   * the body of the characters, if the main body of characters protrudes\n   * beneath the alphabetic baseline.  Currently unsupported; this will\n   * act like alphabetic.\n   */\n  Ideographic = 'ideographic',\n  /**\n   * The text baseline is the bottom of the bounding box.  This differs\n   * from the ideographic baseline in that the ideographic baseline\n   * doesn't consider descenders.\n   */\n  Bottom = 'bottom'\n}\n\n/**\n * Enum representing the different possible font styles\n */\nexport enum FontStyle {\n  Normal = 'normal',\n  Italic = 'italic',\n  Oblique = 'oblique'\n}\n\nexport enum Direction {\n  LeftToRight = 'ltr',\n  RightToLeft = 'rtl'\n}\n\nexport interface FontOptions {\n  size?: number;\n  unit?: FontUnit;\n  family?: string;\n  style?: FontStyle;\n  bold?: boolean;\n  textAlign?: TextAlign;\n  baseAlign?: BaseAlign;\n  direction?: Direction;\n  quality?: number;\n  shadow?: {\n    blur?: number;\n    offset?: Vector;\n    color?: Color;\n  };\n}\n\nexport interface FontRenderer {\n  render(ex: ExcaliburGraphicsContext, text: string, x: number, y: number): void;\n}","import { Vector } from '../Algebra';\nimport { BoundingBox } from '../Collision/Index';\nimport { Color } from '../Drawing/Color';\nimport { line } from '../Util/DrawUtil';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { BaseAlign, Direction, FontOptions, FontStyle, FontUnit, TextAlign, FontRenderer } from './FontCommon';\nimport { Raster, RasterOptions } from './Raster';\n\nexport class Font extends Raster implements FontRenderer {\n  constructor(options: FontOptions & RasterOptions = {}) {\n    super(options);\n    this.family = options?.family ?? this.family;\n    this.style = options?.style ?? this.style;\n    this.bold = options?.bold ?? this.bold;\n    this.size = options?.size ?? this.size;\n    this.unit = options?.unit ?? this.unit;\n    this.textAlign = options?.textAlign ?? this.textAlign;\n    this.baseAlign = options?.baseAlign ?? this.baseAlign;\n    this.direction = options?.direction ?? this.direction;\n    this.quality = options?.quality ?? this.quality;\n    if (options?.shadow) {\n      this.shadow = {};\n      this.shadow.blur = options.shadow.blur ?? this.shadow.blur;\n      this.shadow.offset = options.shadow.offset ?? this.shadow.offset;\n      this.shadow.color = options.shadow.color ?? this.shadow.color;\n    }\n    this.flagDirty();\n  }\n\n  public clone() {\n    return new Font({\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions(),\n      size: this.size,\n      unit: this.unit,\n      family: this.family,\n      style: this.style,\n      bold: this.bold,\n      textAlign: this.textAlign,\n      baseAlign: this.baseAlign,\n      direction: this.direction,\n      shadow: this.shadow\n        ? {\n          blur: this.shadow.blur,\n          offset: this.shadow.offset,\n          color: this.shadow.color\n        }\n        : null\n    });\n  }\n\n  /**\n   * Font quality determines the size of the underlying rastered text, higher quality means less jagged edges.\n   * If quality is set to 1, then just enough raster bitmap is generated to render the text.\n   *\n   * You can think of quality as how zoomed in to the text you can get before seeing jagged edges.\n   *\n   * (Default 4)\n   */\n  public quality = 2;\n\n  public family: string = 'sans-serif';\n  public style: FontStyle = FontStyle.Normal;\n  public bold: boolean = false;\n  public unit: FontUnit = FontUnit.Px;\n  public textAlign: TextAlign = TextAlign.Left;\n  public baseAlign: BaseAlign = BaseAlign.Alphabetic;\n  public direction: Direction = Direction.LeftToRight;\n  public size: number = 10;\n  public shadow: { blur?: number; offset?: Vector; color?: Color } = null;\n\n  public get fontString() {\n    return `${this.style} ${this.bold ? 'bold' : ''} ${this.size}${this.unit} ${this.family}`;\n  }\n\n  private _text: string;\n  private _textBounds: BoundingBox = new BoundingBox();\n  private _textWidth: number = 0;\n  private _textHeight: number = 0;\n\n  public get width() {\n    return this._textWidth;\n  }\n\n  public set width(value: number) {\n    this._textWidth = value;\n  }\n\n  public get height() {\n    return this._textHeight;\n  }\n\n  public set height(value: number) {\n    this._textHeight = value;\n  }\n\n  private get _rasterWidth() {\n    return this._bitmap.width;\n  }\n\n  private get _rasterHeight() {\n    return this._bitmap.height;\n  }\n\n  private get _halfRasterWidth() {\n    return Math.floor(this._bitmap.width / 2);\n  }\n\n  private get _halfRasterHeight() {\n    return Math.floor(this._bitmap.height / 2);\n  }\n\n  public get localBounds(): BoundingBox {\n    return this._textBounds;\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.dirty) {\n      this.rasterize();\n    }\n\n    ex.drawImage(\n      this._bitmap,\n      0,\n      0,\n      this._rasterWidth,\n      this._rasterHeight,\n      x - (this._rasterWidth / this.quality) / 2,\n      y - (this._rasterHeight / this.quality) / 2,\n      this._rasterWidth / this.quality,\n      this._rasterHeight / this.quality\n    );\n  }\n\n  protected _rotate(ex: ExcaliburGraphicsContext) {\n    // TODO this needs to change depending on the bounding box...\n    const origin = this.origin ?? this._textBounds.center;\n    ex.translate(origin.x, origin.y);\n    ex.rotate(this.rotation);\n    ex.translate(-origin.x, -origin.y);\n  }\n\n  protected _flip(ex: ExcaliburGraphicsContext) {\n    if (this.flipHorizontal) {\n      ex.translate(this._textBounds.width / this.scale.x, 0);\n      ex.scale(-1, 1);\n    }\n\n    if (this.flipVertical) {\n      ex.translate(0, -this._textBounds.height / 2 / this.scale.y);\n      ex.scale(1, -1);\n    }\n  }\n\n  public updateText(text: string) {\n    if (this._text !== text) {\n      this._text = text;\n      this._updateDimensions();\n      this.flagDirty();\n    }\n  }\n\n  private _updateDimensions() {\n    if (this._text) {\n      this._applyFont(this._ctx);\n      const metrics = this._ctx.measureText(this._text);\n      this._textWidth = Math.abs(metrics.actualBoundingBoxLeft) + Math.abs(metrics.actualBoundingBoxRight);\n      this._textHeight = Math.abs(metrics.actualBoundingBoxAscent) + Math.abs(metrics.actualBoundingBoxDescent);\n\n      // Changing the width and height clears the context properties\n      // We double the bitmap width to account for alignment\n      // We scale by \"quality\" so we render text without jaggies\n      this._bitmap.width = (this._textWidth + this.padding * 2) * 2 * this.quality;\n      this._bitmap.height = (this._textHeight + this.padding * 2) * 2 * this.quality;\n\n      // These bounds exist in raster bitmap space where the top left corner is the corder of the bitmap\n      // TODO need to account for padding\n      const x = 0;\n      const y = 0;\n      this._textBounds = new BoundingBox({\n        left: x - Math.abs(metrics.actualBoundingBoxLeft) - this.padding,\n        top: y - Math.abs(metrics.actualBoundingBoxAscent) - this.padding,\n        bottom: y + Math.abs(metrics.actualBoundingBoxDescent) + this.padding,\n        right: x + Math.abs(metrics.actualBoundingBoxRight) + this.padding\n      });\n    }\n  }\n\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    if (this.dirty) {\n      this._updateDimensions();\n    }\n    super._preDraw(ex, x, y);\n  }\n\n  protected _postDraw(ex: ExcaliburGraphicsContext): void {\n    if (this.showDebug) {\n      /* istanbul ignore next */\n      ex.debug.drawRect(-this._halfRasterWidth, -this._halfRasterHeight, this._rasterWidth, this._rasterHeight);\n    }\n    ex.restore();\n  }\n\n  private _applyFont(ctx: CanvasRenderingContext2D) {\n    ctx.translate(this.padding + this._halfRasterWidth, this.padding + this._halfRasterHeight);\n    ctx.scale(this.quality, this.quality);\n    ctx.textAlign = this.textAlign;\n    ctx.textBaseline = this.baseAlign;\n    ctx.font = this.fontString;\n    ctx.direction = this.direction;\n\n    if (this.shadow) {\n      ctx.shadowColor = this.shadow.color.toString();\n      ctx.shadowBlur = this.shadow.blur;\n      ctx.shadowOffsetX = this.shadow.offset.x;\n      ctx.shadowOffsetY = this.shadow.offset.y;\n    }\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this._text) {\n      // The reason we need to re-apply the font is setting raster properties (like width/height) can reset the context props\n      this._applyRasterProperites(ctx);\n      this._applyFont(ctx);\n      if (this.color) {\n        ctx.fillText(this._text, 0, 0);\n      }\n\n      if (this.strokeColor) {\n        ctx.strokeText(this._text, 0, 0);\n      }\n\n      if (this.showDebug) {\n        // Horizontal line\n        /* istanbul ignore next */\n        line(ctx, Color.Red, -this._halfRasterWidth, 0, this._halfRasterWidth, 0, 2);\n        // Vertical line\n        /* istanbul ignore next */\n        line(ctx, Color.Red, 0, -this._halfRasterHeight, 0, this._halfRasterHeight, 2);\n      }\n    }\n  }\n\n  public render(ex: ExcaliburGraphicsContext, text: string, x: number, y: number) {\n    this.updateText(text);\n    this.draw(ex, x, y);\n  }\n}\n","import { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { BoundingBox } from '../Collision/BoundingBox';\nimport { SpriteFont } from './SpriteFont';\nimport { Graphic, GraphicOptions } from './Graphic';\nimport { Color } from '../Drawing/Color';\nimport { Font } from './Font';\nimport { watch } from '../Util/Watch';\n\nexport interface TextOptions {\n  text: string;\n  color?: Color;\n  font?: Font | SpriteFont;\n}\n\nexport class Text extends Graphic {\n  constructor(options: TextOptions & GraphicOptions) {\n    super(options);\n    // This order is important font, color, then text\n    this.font = options.font ?? new Font();\n    this.color = options.color ?? this.color;\n    this.text = options.text;\n  }\n\n  public clone(): Text {\n    return new Text({\n      text: this.text.slice(),\n      color: this.color.clone(),\n      font: this.font.clone()\n    });\n  }\n\n  private _text: string = '';\n  public get text() {\n    return this._text;\n  }\n\n  public set text(value: string) {\n    this._text = value;\n    this.font.updateText(value);\n  }\n\n  // TODO SpriteFont doesn't support a color yet :(\n  public get color() {\n    if (this.font instanceof Font) {\n      return this.font.color;\n    }\n    return Color.Black;\n  }\n\n  public set color(color: Color) {\n    if (this.font instanceof Font) {\n      this.font.color = color;\n    }\n  }\n\n  private _font: Font | SpriteFont;\n  public get font(): Font | SpriteFont {\n    return this._font;\n  }\n  public set font(font: Font | SpriteFont) {\n    if (font instanceof Font) {\n      this._font = watch(font, (font) => font.flagDirty());\n    } else {\n      this._font = font;\n    }\n  }\n\n  public get width() {\n    return this.font.width;\n  }\n\n  public get height() {\n    return this.font.height;\n  }\n\n  public get localBounds(): BoundingBox {\n    return this.font.localBounds;\n  }\n\n  protected _rotate(_ex: ExcaliburGraphicsContext) {\n    // None this is delegated to font\n    // This override erases the default behavior\n  }\n\n  protected _flip(_ex: ExcaliburGraphicsContext) {\n    // None this is delegated to font\n    // This override erases the default behavior\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number) {\n    if (this.font instanceof Font) {\n      this.font.color = this.color;\n    }\n    this.font.flipHorizontal = this.flipHorizontal;\n    this.font.flipVertical = this.flipVertical;\n    this.font.scale = this.scale;\n    this.font.rotation = this.rotation;\n    this.font.origin = this.origin;\n    this.font.opacity = this.opacity;\n    this.font.render(ex, this._text, x, y);\n  }\n}\n","import { Vector } from '../Algebra';\nimport { SpriteFont as LegacySpriteFont } from '../Drawing/Index';\nimport { Logger } from '../Util/Log';\nimport { ExcaliburGraphicsContext } from './Context/ExcaliburGraphicsContext';\nimport { FontRenderer } from './FontCommon';\nimport { Graphic, GraphicOptions } from './Graphic';\nimport { Sprite } from './Sprite';\nimport { SpriteSheet } from './SpriteSheet';\n\nexport interface SpriteFontOptions {\n  /**\n   * Alphabet string in spritsheet order (default is row column order)\n   * example: 'abcdefghijklmnopqrstuvwxyz'\n   */\n  alphabet: string;\n  /**\n   * [[SpriteSheet]] to source character sprites from\n   */\n  spriteSheet: SpriteSheet;\n  /**\n   * Optionally ignore case in the supplied text;\n   */\n  caseInsensitive?: boolean;\n  /**\n   * Optionally adjust the spacing between character sprites\n   */\n  spacing?: number;\n  /**\n   * Optionally specify a \"shadow\"\n   */\n  shadow?: { offset: Vector };\n}\n\nexport class SpriteFont extends Graphic implements FontRenderer {\n  private _text = '';\n  private _dirty = true;\n  public alphabet: string = '';\n  public spriteSheet: SpriteSheet;\n\n  public shadow: { offset: Vector } = null;\n  public caseInsensitive = false;\n  public spacing: number = 0;\n\n  private _logger = Logger.getInstance();\n\n  static fromLegacySpriteFont(spriteFont: LegacySpriteFont): SpriteFont {\n    const sprites = spriteFont.sprites.map(Sprite.fromLegacySprite);\n    return new SpriteFont({\n      alphabet: spriteFont.alphabet,\n      spacing: 0,\n      caseInsensitive: spriteFont.caseInsensitive,\n      spriteSheet: new SpriteSheet({\n        sprites\n      })\n    });\n  }\n\n  constructor(options: SpriteFontOptions & GraphicOptions) {\n    super(options);\n    const { alphabet, spriteSheet, caseInsensitive, spacing, shadow } = options;\n    this.alphabet = alphabet;\n    this.spriteSheet = spriteSheet;\n    this.caseInsensitive = caseInsensitive ?? this.caseInsensitive;\n    this.spacing = spacing ?? this.spacing;\n    this.shadow = shadow ?? this.shadow;\n\n    this.spriteSheet.sprites[0].image.ready.then(() => {\n      this._updateDimensions();\n    });\n  }\n\n  private _sprites: Sprite[] = [];\n  private _getCharacterSprites(text: string): Sprite[] {\n    if (!this._dirty) {\n      return this._sprites;\n    }\n\n    const results: Sprite[] = [];\n    // handle case insenstive\n    const textToRender = this.caseInsensitive ? text.toLocaleLowerCase() : text;\n    const alphabet = this.caseInsensitive ? this.alphabet.toLocaleLowerCase() : this.alphabet;\n\n    // for each letter in text\n    for (let letterIndex = 0; letterIndex < textToRender.length; letterIndex++) {\n      // find the sprite index in alphabet , if there is an error pick the first\n      const letter = textToRender[letterIndex];\n      let spriteIndex = alphabet.indexOf(letter);\n      if (spriteIndex === -1) {\n        spriteIndex = 0;\n        this._logger.warn(`SpriteFont - Cannot find letter '${letter}' in configured alphabet '${alphabet}'`);\n      }\n\n      const letterSprite = this.spriteSheet.sprites[spriteIndex];\n      if (letterSprite) {\n        results.push(letterSprite);\n      } else {\n        this._logger.warn(`SpriteFont - Cannot find sprite for '${letter}' at index '${spriteIndex}' in configured SpriteSheet`);\n      }\n    }\n    this._dirty = false;\n    return (this._sprites = results);\n  }\n\n  private _updateDimensions() {\n    const sprites = this._getCharacterSprites(this._text);\n    let width = 0;\n    let height = 0;\n    for (const sprite of sprites) {\n      width += sprite.width + this.spacing;\n      height = Math.max(height, sprite.height);\n    }\n    this.width = width;\n    this.height = height;\n  }\n\n  public updateText(text: string) {\n    if (this._text !== text) {\n      this._dirty = true;\n      this._text = text;\n      this._updateDimensions();\n    }\n  }\n\n  protected _preDraw(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    this._updateDimensions();\n    super._preDraw(ex, x, y);\n  }\n\n  protected _drawImage(ex: ExcaliburGraphicsContext, x: number, y: number): void {\n    let cursor = 0;\n    for (const sprite of this._getCharacterSprites(this._text)) {\n      // draw it in the right spot and increase the cursor by sprite width\n      sprite.draw(ex, x + cursor, y);\n      cursor += sprite.width + this.spacing;\n    }\n  }\n\n  render(ex: ExcaliburGraphicsContext, text: string, x: number, y: number) {\n    if (this._text !== text) {\n      this._dirty = true;\n      this._text = text;\n    }\n\n    if (this.shadow) {\n      ex.save();\n      ex.translate(this.shadow.offset.x, this.shadow.offset.y);\n      this.draw(ex, x, y);\n      ex.restore();\n    }\n\n    this.draw(ex, x, y);\n  }\n\n  clone(): SpriteFont {\n    return new SpriteFont({\n      alphabet: this.alphabet,\n      spriteSheet: this.spriteSheet,\n      spacing: this.spacing\n    });\n  }\n}\n","import { Engine } from './Engine';\nimport { Actor } from './Actor';\nimport { Sprite } from './Drawing/Sprite';\nimport { Color } from './Drawing/Color';\nimport { vec, Vector } from './Algebra';\nimport * as Util from './Util/Util';\nimport * as DrawUtil from './Util/DrawUtil';\nimport * as Traits from './Traits/Index';\nimport { Configurable } from './Configurable';\nimport { Random } from './Math/Random';\nimport { CollisionType } from './Collision/CollisionType';\nimport { TransformComponent } from './EntityComponentSystem/Components/TransformComponent';\nimport { GraphicsComponent } from './Graphics/GraphicsComponent';\nimport { Entity } from './EntityComponentSystem/Entity';\nimport { Graphics } from '.';\nimport { CanvasDrawComponent } from './Drawing/Index';\n\n/**\n * An enum that represents the types of emitter nozzles\n */\nexport enum EmitterType {\n  /**\n   * Constant for the circular emitter type\n   */\n  Circle,\n  /**\n   * Constant for the rectangular emitter type\n   */\n  Rectangle\n}\n\n/**\n * @hidden\n */\nexport class ParticleImpl extends Entity {\n  public position: Vector = new Vector(0, 0);\n  public velocity: Vector = new Vector(0, 0);\n  public acceleration: Vector = new Vector(0, 0);\n  public particleRotationalVelocity: number = 0;\n  public currentRotation: number = 0;\n\n  public focus: Vector = null;\n  public focusAccel: number = 0;\n  public opacity: number = 1;\n  public beginColor: Color = Color.White;\n  public endColor: Color = Color.White;\n\n  // Life is counted in ms\n  public life: number = 300;\n  public fadeFlag: boolean = false;\n\n  // Color transitions\n  private _rRate: number = 1;\n  private _gRate: number = 1;\n  private _bRate: number = 1;\n  private _aRate: number = 0;\n  private _currentColor: Color = Color.White;\n\n  public emitter: ParticleEmitter = null;\n  public particleSize: number = 5;\n  public particleSprite: Sprite = null;\n\n  public startSize: number;\n  public endSize: number;\n  public sizeRate: number = 0;\n  public elapsedMultiplier: number = 0;\n\n  public visible = true;\n  public isOffscreen = false;\n\n  public transform: TransformComponent;\n  public graphics: GraphicsComponent;\n\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    super();\n    let emitter = emitterOrConfig;\n    if (emitter && !(emitterOrConfig instanceof ParticleEmitter)) {\n      const config = emitterOrConfig;\n      emitter = config.emitter;\n      life = config.life;\n      opacity = config.opacity;\n      endColor = config.endColor;\n      beginColor = config.beginColor;\n      position = config.position;\n      velocity = config.velocity;\n      acceleration = config.acceleration;\n      startSize = config.startSize;\n      endSize = config.endSize;\n    }\n    this.emitter = <ParticleEmitter>emitter;\n    this.life = life || this.life;\n    this.opacity = opacity || this.opacity;\n    this.endColor = endColor || this.endColor.clone();\n    this.beginColor = beginColor || this.beginColor.clone();\n    this._currentColor = this.beginColor.clone();\n    this.position = (position || this.position).add(this.emitter.pos);\n    this.velocity = velocity || this.velocity;\n    this.acceleration = acceleration || this.acceleration;\n    this._rRate = (this.endColor.r - this.beginColor.r) / this.life;\n    this._gRate = (this.endColor.g - this.beginColor.g) / this.life;\n    this._bRate = (this.endColor.b - this.beginColor.b) / this.life;\n    this._aRate = this.opacity / this.life;\n\n    this.startSize = startSize || 0;\n    this.endSize = endSize || 0;\n\n    if (this.endSize > 0 && this.startSize > 0) {\n      this.sizeRate = (this.endSize - this.startSize) / this.life;\n      this.particleSize = this.startSize;\n    }\n\n    this.addComponent((this.transform = new TransformComponent()));\n    this.addComponent(new CanvasDrawComponent((ctx) => this.draw(ctx)));\n    this.addComponent((this.graphics = new GraphicsComponent()));\n\n    this.transform.pos = this.position;\n    this.transform.rotation = this.currentRotation;\n    this.transform.scale = vec(1, 1); // TODO wut\n    if (this.particleSprite) {\n      this.graphics.opacity = this.opacity;\n      this.graphics.use(Graphics.Sprite.fromLegacySprite(this.particleSprite));\n    } else {\n      this.graphics.onPostDraw = (ctx) => {\n        ctx.save();\n        this.graphics.opacity = this.opacity;\n        const tmpColor = this._currentColor.clone();\n        tmpColor.a = 1;\n        ctx.debug.drawPoint(vec(0, 0), { color: tmpColor, size: this.particleSize });\n        ctx.restore();\n      };\n    }\n  }\n\n  public kill() {\n    this.emitter.removeParticle(this);\n  }\n\n  public update(_engine: Engine, delta: number) {\n    this.life = this.life - delta;\n    this.elapsedMultiplier = this.elapsedMultiplier + delta;\n\n    if (this.life < 0) {\n      this.kill();\n    }\n\n    if (this.fadeFlag) {\n      this.opacity = Util.clamp(this._aRate * this.life, 0.0001, 1);\n    }\n\n    if (this.startSize > 0 && this.endSize > 0) {\n      this.particleSize = Util.clamp(\n        this.sizeRate * delta + this.particleSize,\n        Math.min(this.startSize, this.endSize),\n        Math.max(this.startSize, this.endSize)\n      );\n    }\n\n    this._currentColor.r = Util.clamp(this._currentColor.r + this._rRate * delta, 0, 255);\n    this._currentColor.g = Util.clamp(this._currentColor.g + this._gRate * delta, 0, 255);\n    this._currentColor.b = Util.clamp(this._currentColor.b + this._bRate * delta, 0, 255);\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n\n    if (this.focus) {\n      const accel = this.focus\n        .sub(this.position)\n        .normalize()\n        .scale(this.focusAccel)\n        .scale(delta / 1000);\n      this.velocity = this.velocity.add(accel);\n    } else {\n      this.velocity = this.velocity.add(this.acceleration.scale(delta / 1000));\n    }\n    this.position = this.position.add(this.velocity.scale(delta / 1000));\n\n    if (this.particleRotationalVelocity) {\n      this.currentRotation = (this.currentRotation + (this.particleRotationalVelocity * delta) / 1000) % (2 * Math.PI);\n    }\n\n    this.transform.pos = this.position;\n    this.transform.rotation = this.currentRotation;\n    this.transform.scale = vec(1, 1); // todo wut\n    this.graphics.opacity = this.opacity;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    if (this.particleSprite) {\n      this.particleSprite.opacity(this.opacity);\n      this.particleSprite.draw(ctx, 0, 0);\n      return;\n    }\n\n    ctx.save();\n    this._currentColor.a = Util.clamp(this.opacity, 0.0001, 1);\n    ctx.fillStyle = this._currentColor.toString();\n    ctx.beginPath();\n    ctx.arc(0, 0, this.particleSize, 0, Math.PI * 2);\n    ctx.fill();\n    ctx.closePath();\n    ctx.restore();\n  }\n}\n\nexport interface ParticleArgs extends Partial<ParticleImpl> {\n  emitter: ParticleEmitter;\n  position?: Vector;\n  velocity?: Vector;\n  acceleration?: Vector;\n  particleRotationalVelocity?: number;\n  currentRotation?: number;\n  particleSize?: number;\n  particleSprite?: Sprite;\n}\n\n/**\n * Particle is used in a [[ParticleEmitter]]\n */\nexport class Particle extends Configurable(ParticleImpl) {\n  constructor(config: ParticleArgs);\n  constructor(\n    emitter: ParticleEmitter,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  );\n  constructor(\n    emitterOrConfig: ParticleEmitter | ParticleArgs,\n    life?: number,\n    opacity?: number,\n    beginColor?: Color,\n    endColor?: Color,\n    position?: Vector,\n    velocity?: Vector,\n    acceleration?: Vector,\n    startSize?: number,\n    endSize?: number\n  ) {\n    super(emitterOrConfig, life, opacity, beginColor, endColor, position, velocity, acceleration, startSize, endSize);\n  }\n}\n\n/**\n * @hidden\n */\nexport class ParticleEmitterImpl extends Actor {\n  private _particlesToEmit: number;\n\n  public numParticles: number = 0;\n\n  /**\n   * Random number generator\n   */\n  public random: Random;\n\n  /**\n   * Gets or sets the isEmitting flag\n   */\n  public isEmitting: boolean = true;\n  /**\n   * Gets or sets the backing particle collection\n   */\n  public particles: Particle[] = [];\n\n  /**\n   * Gets or sets the backing deadParticle collection\n   */\n  public deadParticles: Particle[] = [];\n\n  /**\n   * Gets or sets the minimum particle velocity\n   */\n  public minVel: number = 0;\n  /**\n   * Gets or sets the maximum particle velocity\n   */\n  public maxVel: number = 0;\n\n  /**\n   * Gets or sets the acceleration vector for all particles\n   */\n  public acceleration: Vector = new Vector(0, 0);\n\n  /**\n   * Gets or sets the minimum angle in radians\n   */\n  public minAngle: number = 0;\n  /**\n   * Gets or sets the maximum angle in radians\n   */\n  public maxAngle: number = 0;\n\n  /**\n   * Gets or sets the emission rate for particles (particles/sec)\n   */\n  public emitRate: number = 1; //particles/sec\n  /**\n   * Gets or sets the life of each particle in milliseconds\n   */\n  public particleLife: number = 2000;\n  /**\n   * Gets or sets the opacity of each particle from 0 to 1.0\n   */\n  public opacity: number = 1;\n  /**\n   * Gets or sets the fade flag which causes particles to gradually fade out over the course of their life.\n   */\n  public fadeFlag: boolean = false;\n\n  /**\n   * Gets or sets the optional focus where all particles should accelerate towards\n   */\n  public focus: Vector = null;\n  /**\n   * Gets or sets the acceleration for focusing particles if a focus has been specified\n   */\n  public focusAccel: number = 1;\n  /*\n   * Gets or sets the optional starting size for the particles\n   */\n  public startSize: number = null;\n  /*\n   * Gets or sets the optional ending size for the particles\n   */\n  public endSize: number = null;\n\n  /**\n   * Gets or sets the minimum size of all particles\n   */\n  public minSize: number = 5;\n  /**\n   * Gets or sets the maximum size of all particles\n   */\n  public maxSize: number = 5;\n\n  /**\n   * Gets or sets the beginning color of all particles\n   */\n  public beginColor: Color = Color.White;\n  /**\n   * Gets or sets the ending color of all particles\n   */\n  public endColor: Color = Color.White;\n\n  private _og: Sprite = null;\n  private _sprite: Graphics.Sprite = null;\n  /**\n   * Gets or sets the sprite that a particle should use\n   */\n  public get particleSprite(): Sprite {\n    return this._og;\n  }\n\n  public set particleSprite(val: Sprite) {\n    this._og = val;\n    if (val) {\n      this._sprite = Graphics.Sprite.fromLegacySprite(val);\n    }\n  }\n\n  /**\n   * Gets or sets the emitter type for the particle emitter\n   */\n  public emitterType: EmitterType = EmitterType.Rectangle;\n\n  /**\n   * Gets or sets the emitter radius, only takes effect when the [[emitterType]] is [[EmitterType.Circle]]\n   */\n  public radius: number = 0;\n\n  /**\n   * Gets or sets the particle rotational speed velocity\n   */\n  public particleRotationalVelocity: number = 0;\n\n  /**\n   * Indicates whether particles should start with a random rotation\n   */\n  public randomRotation: boolean = false;\n\n  /**\n   * @param xOrConfig The x position of the emitter, or the particle emitter options bag\n   * @param y         The y position of the emitter\n   * @param width     The width of the emitter\n   * @param height    The height of the emitter\n   */\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(typeof xOrConfig === 'number' ? { pos: new Vector(xOrConfig, y), width: width, height: height } : xOrConfig);\n    this._particlesToEmit = 0;\n    this.body.collider.type = CollisionType.PreventCollision;\n    this.random = new Random();\n    this.removeComponent('canvas');\n\n    // Remove offscreen culling from particle emitters\n    for (let i = 0; i < this.traits.length; i++) {\n      if (this.traits[i] instanceof Traits.OffscreenCulling) {\n        this.traits.splice(i, 1);\n      }\n    }\n  }\n\n  public removeParticle(particle: Particle) {\n    this.deadParticles.push(particle);\n  }\n\n  /**\n   * Causes the emitter to emit particles\n   * @param particleCount  Number of particles to emit right now\n   */\n  public emitParticles(particleCount: number) {\n    for (let i = 0; i < particleCount; i++) {\n      const p = this._createParticle();\n      this.particles.push(p);\n      if (this?.scene?.world) {\n        this.scene.world.add(p);\n      }\n    }\n  }\n\n  public clearParticles() {\n    this.particles.length = 0;\n  }\n\n  // Creates a new particle given the constraints of the emitter\n  private _createParticle(): Particle {\n    // todo implement emitter constraints;\n    let ranX = 0;\n    let ranY = 0;\n\n    const angle = Util.randomInRange(this.minAngle, this.maxAngle, this.random);\n    const vel = Util.randomInRange(this.minVel, this.maxVel, this.random);\n    const size = this.startSize || Util.randomInRange(this.minSize, this.maxSize, this.random);\n    const dx = vel * Math.cos(angle);\n    const dy = vel * Math.sin(angle);\n\n    if (this.emitterType === EmitterType.Rectangle) {\n      ranX = Util.randomInRange(0, this.width, this.random);\n      ranY = Util.randomInRange(0, this.height, this.random);\n    } else if (this.emitterType === EmitterType.Circle) {\n      const radius = Util.randomInRange(0, this.radius, this.random);\n      ranX = radius * Math.cos(angle);\n      ranY = radius * Math.sin(angle);\n    }\n\n    const p = new Particle(\n      this,\n      this.particleLife,\n      this.opacity,\n      this.beginColor,\n      this.endColor,\n      new Vector(ranX, ranY),\n      new Vector(dx, dy),\n      this.acceleration,\n      this.startSize,\n      this.endSize\n    );\n    p.fadeFlag = this.fadeFlag;\n    p.particleSize = size;\n    if (this.particleSprite) {\n      p.particleSprite = this.particleSprite;\n      p.graphics.opacity = this.opacity;\n      p.graphics.use(this._sprite);\n    }\n    p.particleRotationalVelocity = this.particleRotationalVelocity;\n    if (this.randomRotation) {\n      p.currentRotation = Util.randomInRange(0, Math.PI * 2, this.random);\n    }\n    if (this.focus) {\n      p.focus = this.focus.add(new Vector(this.pos.x, this.pos.y));\n      p.focusAccel = this.focusAccel;\n    }\n    return p;\n  }\n\n  public update(engine: Engine, delta: number) {\n    super.update(engine, delta);\n\n    if (this.isEmitting) {\n      this._particlesToEmit += this.emitRate * (delta / 1000);\n      if (this._particlesToEmit > 1.0) {\n        this.emitParticles(Math.floor(this._particlesToEmit));\n        this._particlesToEmit = this._particlesToEmit - Math.floor(this._particlesToEmit);\n      }\n    }\n\n    // deferred removal\n    for (let i = 0; i < this.deadParticles.length; i++) {\n      Util.removeItemFromArray(this.deadParticles[i], this.particles);\n      if (this?.scene?.world) {\n        this.scene.world.remove(this.deadParticles[i]);\n      }\n    }\n    this.deadParticles.length = 0;\n  }\n\n  public draw(ctx: CanvasRenderingContext2D) {\n    // todo is there a more efficient to draw\n    // possibly use a webgl offscreen canvas and shaders to do particles?\n    this.particles.forEach((p) => p.draw(ctx));\n  }\n\n  public debugDraw(ctx: CanvasRenderingContext2D) {\n    super.debugDraw(ctx);\n    ctx.fillStyle = Color.Black.toString();\n    ctx.fillText('Particles: ' + this.particles.length, this.pos.x, this.pos.y + 20);\n\n    if (this.focus) {\n      ctx.fillRect(this.focus.x + this.pos.x, this.focus.y + this.pos.y, 3, 3);\n      DrawUtil.line(ctx, Color.Yellow, this.focus.x + this.pos.x, this.focus.y + this.pos.y, this.center.x, this.center.y);\n      ctx.fillText('Focus', this.focus.x + this.pos.x, this.focus.y + this.pos.y);\n    }\n  }\n}\n\nexport interface ParticleEmitterArgs extends Partial<ParticleEmitterImpl> {\n  width?: number;\n  height?: number;\n  isEmitting?: boolean;\n  minVel?: number;\n  maxVel?: number;\n  acceleration?: Vector;\n  minAngle?: number;\n  maxAngle?: number;\n  emitRate?: number;\n  particleLife?: number;\n  opacity?: number;\n  fadeFlag?: boolean;\n  focus?: Vector;\n  focusAccel?: number;\n  startSize?: number;\n  endSize?: number;\n  minSize?: number;\n  maxSize?: number;\n  beginColor?: Color;\n  endColor?: Color;\n  particleSprite?: Sprite;\n  emitterType?: EmitterType;\n  radius?: number;\n  particleRotationalVelocity?: number;\n  randomRotation?: boolean;\n  random?: Random;\n}\n\n/**\n * Using a particle emitter is a great way to create interesting effects\n * in your game, like smoke, fire, water, explosions, etc. `ParticleEmitter`\n * extend [[Actor]] allowing you to use all of the features that come with.\n */\nexport class ParticleEmitter extends Configurable(ParticleEmitterImpl) {\n  constructor(config?: ParticleEmitterArgs);\n  constructor(x?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number);\n  constructor(xOrConfig?: number | ParticleEmitterArgs, y?: number, width?: number, height?: number) {\n    super(xOrConfig, y, width, height);\n  }\n}\n","import { Engine } from './Engine';\nimport { Color } from './Drawing/Color';\nimport { Configurable } from './Configurable';\nimport { vec, Vector } from './Algebra';\nimport { Text } from './Graphics/Text';\nimport { BaseAlign, FontStyle, FontUnit, TextAlign } from './Graphics/FontCommon';\nimport { obsolete } from './Util/Decorators';\nimport { SpriteFont as LegacySpriteFont } from './Drawing/SpriteSheet';\nimport { ExcaliburGraphicsContext, GraphicsComponent, SpriteFont } from './Graphics';\nimport { Font } from './Graphics/Font';\nimport { CanvasDrawComponent } from './Drawing/Index';\nimport { TransformComponent } from './EntityComponentSystem';\nimport { Actor } from './Actor';\n\nexport interface LabelOptions {\n  text?: string;\n  x?: number;\n  y?: number;\n  bold?: boolean;\n  pos?: Vector;\n  spriteFont?: LegacySpriteFont;\n  fontFamily?: string;\n  fontSize?: number;\n  fontStyle?: FontStyle;\n  fontUnit?: FontUnit;\n  textAlign?: TextAlign;\n}\n\n/**\n * @hidden\n */\nexport class LabelImpl extends Actor {\n  public font: Font = new Font();\n  private _text: Text = new Text({ text: '', font: this.font});\n\n  /**\n   * The text to draw.\n   */\n  public get text(): string {\n    return this._text.text;\n  }\n\n  public set text(text: string) {\n    this._text.text = text;\n  }\n\n  public get color(): Color {\n    return this._text.color;\n  }\n\n  public set color(color: Color) {\n    this._text.color = color;\n  }\n\n  /**\n   * Sets or gets the bold property of the label's text, by default it's false\n   * @deprecated Use [[Font.bold|Label.font.bold]]\n   */\n  @obsolete({\n    message: 'Label.bold will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.bold'\n  })\n  public get bold(): boolean {\n    return this.font.bold;\n  }\n\n  public set bold(isBold: boolean) {\n    this.font.bold = isBold;\n  }\n\n\n  /**\n   * The CSS font family string (e.g. `sans-serif`, `Droid Sans Pro`). Web fonts\n   * are supported, same as in CSS.\n   * @deprecated Use [[Font.family|Label.font.family]]\n   */\n  @obsolete({\n    message: 'Label.fontFamily will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.family'\n  })\n  public get fontFamily(): string {\n    return this.font.family;\n  }\n\n  public set fontFamily(family: string) {\n    this.font.family = family;\n  }\n\n  /**\n   * The font size in the selected units, default is 10 (default units is pixel)\n   * @deprecated Use [[Font.size|Label.font.size]]\n   */\n  @obsolete({\n    message: 'Label.fontSize will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.size'\n  })\n  public get fontSize(): number {\n    return this.font.size;\n  }\n\n  public set fontSize(sizeInUnit: number) {\n    this.font.size = sizeInUnit;\n  }\n\n  /**\n   * The font style for this label, the default is [[FontStyle.Normal]]\n   * @deprecated Use [[Font.style|Label.font.style]]\n   */\n  @obsolete({\n    message: 'Label.fontStyle will be removed in v0.26.0',\n    alternateMethod: 'Use Lable.font.style'\n  })\n  public get fontStyle(): FontStyle {\n    return this.font.style;\n  }\n\n  public set fontStyle(style: FontStyle) {\n    this.font.style = style;\n  }\n\n\n  /**\n   * The css units for a font size such as px, pt, em (SpriteFont only support px), by default is 'px';\n   * @deprecated Use [[Font.unit|Label.font.unit]]\n   */\n  @obsolete({\n    message: 'Label.fontUnit will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.unit'\n  })\n  public get fontUnit(): FontUnit {\n    return this.font.unit;\n  }\n\n  public set fontUnit(unit: FontUnit) {\n    this.font.unit = unit;\n  }\n\n  /**\n   * Gets or sets the horizontal text alignment property for the label.\n   * @deprecated Use [[Font.textAlign|Label.font.textAlign]]\n   */\n  @obsolete({\n    message: 'Label.textAlign will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.textAlign'\n  })\n  public get textAlign(): TextAlign {\n    return this.font.textAlign;\n  }\n\n  public set textAlign(align: TextAlign) {\n    this.font.textAlign = align;\n  }\n\n  /**\n   * Gets or sets the baseline alignment property for the label.\n   * @deprecated Use [[Font.baseAlign|Label.font.baseAlign]]\n   */\n  @obsolete({\n    message: 'Label.baseAlign will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.baseAlign'\n  })\n  public get baseAlign(): BaseAlign {\n    return this.font.baseAlign;\n  }\n\n  public set baseAlign(align: BaseAlign) {\n    this.font.baseAlign = align;\n  }\n\n  /**\n   * Gets or sets the maximum width (in pixels) that the label should occupy\n   * @deprecated The maxWidth constraint is gone\n   */\n  public maxWidth: number;\n\n  private _legacySpriteFont: LegacySpriteFont;\n  private _spriteFont: SpriteFont;\n  /**\n   * The [[SpriteFont]] to use, if any. Overrides [[fontFamily]] if present.\n   * @deprecated Use [[\"Graphics/SpriteFont\".SpriteFont]]\n   */\n  @obsolete()\n  public get spriteFont(): LegacySpriteFont {\n    return this._legacySpriteFont;\n  }\n\n  public set spriteFont(sf: LegacySpriteFont) {\n    this._legacySpriteFont = sf;\n    if (sf) {\n      this._spriteFont = SpriteFont.fromLegacySpriteFont(sf);\n      this._text.font = this._spriteFont;\n    }\n  }\n\n\n  /**\n   * Gets or sets the letter spacing on a Label. Only supported with Sprite Fonts.\n   * @deprecated Use [[SpriteFont.spacing]]\n   */\n  public letterSpacing: number = 0; //px\n\n  /**\n   * Whether or not the [[SpriteFont]] will be case-sensitive when matching characters.\n   * @deprecated Use [[\"Graphics/SpriteFont\".SpriteFont.caseInsensitive]]\n   */\n  public caseInsensitive: boolean = true;\n\n  private _graphicsContext: ExcaliburGraphicsContext;\n\n  /**\n   * @param textOrConfig    The text of the label, or label option bag\n   * @param x           The x position of the label\n   * @param y           The y position of the label\n   * @param fontFamily  Use a value that is valid for the CSS `font-family` property. The default is `sans-serif`.\n   * @param spriteFont  Use an Excalibur sprite font for the label's font, if a SpriteFont is provided it will take precedence\n   * over a css font.\n   */\n  constructor(textOrConfig?: string | LabelOptions, x?: number, y?: number, fontFamily?: string, spriteFont?: LegacySpriteFont) {\n    super();\n    let text = '';\n    let pos = Vector.Zero;\n    if (textOrConfig && typeof textOrConfig === 'object') {\n      fontFamily = textOrConfig.fontFamily;\n      spriteFont = textOrConfig.spriteFont;\n      text = textOrConfig.text;\n      pos = textOrConfig.pos ?? vec(textOrConfig.x ?? 0, textOrConfig.y ?? 0);\n    } else {\n      text = <string>textOrConfig;\n      pos = vec(x ?? 0, y ?? 0);\n    }\n\n    this.addComponent(new TransformComponent);\n    this.get(TransformComponent).pos = pos;\n\n    this.addComponent(new CanvasDrawComponent((ctx, delta) => this.draw(ctx, delta)));\n    this.addComponent(new GraphicsComponent);\n    const gfx = this.get(GraphicsComponent);\n    gfx.anchor = Vector.Zero;\n    gfx.use(this._text);\n\n    this.text = text || '';\n    this.color = Color.Black;\n    if (fontFamily) {\n      this.font.family = fontFamily;\n    }\n    if (spriteFont) {\n      this.spriteFont = spriteFont;\n    }\n  }\n\n  public _initialize(engine: Engine) {\n    super._initialize(engine);\n    this._graphicsContext = engine.graphicsContext;\n  }\n\n  /**\n   * Returns the width of the text in the label (in pixels);\n   */\n  public getTextWidth(): number {\n    return this._text.width;\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   * @deprecated Use [[Font.shadow|Label.font.shadow]]\n   */\n  @obsolete({\n    message: 'Label.setTextShadow will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.shadow'\n  })\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this.font.shadow = { offset: vec(offsetX, offsetY), blur: 2, color: shadowColor };\n  }\n\n  /**\n   * Toggles text shadows on or off, only applies when using sprite fonts\n   * @deprecated Use [[Font.shadow|Label.font.shadow]]\n   */\n  @obsolete({\n    message: 'Label.useTextShadow will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.shadow'\n  })\n  public useTextShadow(on: boolean) {\n    if (this.spriteFont) {\n      this.spriteFont.useTextShadow(on);\n    }\n  }\n\n  /**\n   * Clears the current text shadow\n   * @deprecated Use [[Font.shadow|Label.font.shadow]]\n   */\n  @obsolete({\n    message: 'Label.clearTextShadow will be removed in v0.26.0',\n    alternateMethod: 'Use Label.font.shadow'\n  })\n  public clearTextShadow() {\n    this.font.shadow = null;\n  }\n\n  public draw(_ctx: CanvasRenderingContext2D, _delta: number) {\n    const exctx = this._graphicsContext;\n    this._text.draw(exctx, 0, 0);\n  }\n}\n\n/**\n * Labels are the way to draw small amounts of text to the screen. They are\n * actors and inherit all of the benefits and capabilities.\n */\nexport class Label extends Configurable(LabelImpl) {\n  constructor();\n  constructor(config?: LabelOptions);\n  constructor(text?: string, x?: number, y?: number, fontFamily?: string, spriteFont?: LegacySpriteFont);\n  constructor(textOrConfig?: string | LabelOptions, x?: number, y?: number, fontFamily?: string, spriteFont?: LegacySpriteFont) {\n    super(textOrConfig, x, y, fontFamily, spriteFont);\n  }\n}\n","import { CollisionGroup } from './CollisionGroup';\n\n/**\n * Static class for managing collision groups in excalibur, there is a maximum of 32 collision groups possible in excalibur\n */\nexport class CollisionGroupManager {\n  // using bitmasking the maximum number of groups is 32, because that is the highest 32bit integer that JS can present.\n  private static _STARTING_BIT = 0b1 | 0;\n  private static _MAX_GROUPS = 32;\n  private static _CURRENT_GROUP = 1;\n  private static _CURRENT_BIT = CollisionGroupManager._STARTING_BIT;\n  private static _GROUPS: Map<string, CollisionGroup> = new Map<string, CollisionGroup>();\n\n  /**\n   * Create a new named collision group up to a max of 32.\n   * @param name Name for the collision group\n   * @param mask Optionally provide your own 32-bit mask, if none is provide the manager will generate one\n   */\n  public static create(name: string, mask?: number) {\n    if (this._CURRENT_GROUP > this._MAX_GROUPS) {\n      throw new Error(`Cannot have more than ${this._MAX_GROUPS} collision groups`);\n    }\n    if (this._GROUPS.get(name)) {\n      throw new Error(`Collision group ${name} already exists`);\n    }\n    const group = new CollisionGroup(name, this._CURRENT_BIT, mask !== undefined ? mask : ~this._CURRENT_BIT);\n    this._CURRENT_BIT = (this._CURRENT_BIT << 1) | 0;\n    this._CURRENT_GROUP++;\n    this._GROUPS.set(name, group);\n    return group;\n  }\n\n  /**\n   * Get all collision groups currently tracked by excalibur\n   */\n  public static get groups(): CollisionGroup[] {\n    return Array.from(this._GROUPS.values());\n  }\n\n  /**\n   * Get a collision group by it's name\n   * @param name\n   */\n  public static groupByName(name: string) {\n    return this._GROUPS.get(name);\n  }\n\n  /**\n   * Resets the managers internal group management state\n   */\n  public static reset() {\n    this._GROUPS = new Map<string, CollisionGroup>();\n    this._CURRENT_BIT = this._STARTING_BIT;\n    this._CURRENT_GROUP = 1;\n  }\n}\n","import { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Drawable, DrawOptions } from '../Interfaces/Drawable';\nimport { Vector } from '../Algebra';\nimport { obsolete } from '../Util/Decorators';\n\n/**\n * Creates a closed polygon drawing given a list of [[Vector]]s.\n *\n * @deprecated Use [[\"Graphics/Polygon\".Polygon]]\n * @warning Use sparingly as Polygons are performance intensive\n */\n@obsolete({\n  message: 'Polygon will be removed in v0.26.0',\n  alternateMethod: 'Use Graphics.Polygon'\n})\nexport class Polygon implements Drawable {\n  public flipVertical: boolean;\n  public flipHorizontal: boolean;\n  public drawWidth: number;\n  public drawHeight: number;\n\n  public width: number;\n  public height: number;\n\n  /**\n   * The color to use for the lines of the polygon\n   */\n  public lineColor: Color;\n  /**\n   * The color to use for the interior of the polygon\n   */\n  public fillColor: Color;\n  /**\n   * The width of the lines of the polygon\n   */\n  public lineWidth: number = 5;\n  /**\n   * Indicates whether the polygon is filled or not.\n   */\n  public filled: boolean = false;\n\n  private _points: Vector[] = [];\n  public anchor = Vector.Zero;\n  public offset = Vector.Zero;\n  public rotation: number = 0;\n  public scale = Vector.One;\n  public opacity: number = 1;\n\n  /**\n   * @param points  The vectors to use to build the polygon in order\n   */\n  constructor(points: Vector[]) {\n    this._points = points;\n\n    const minX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.x);\n    }, 0);\n    const maxX = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.x);\n    }, 0);\n\n    this.drawWidth = maxX - minX;\n\n    const minY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.min(prev, curr.y);\n    }, 0);\n    const maxY = this._points.reduce((prev: number, curr: Vector) => {\n      return Math.max(prev, curr.y);\n    }, 0);\n\n    this.drawHeight = maxY - minY;\n\n    this.height = this.drawHeight;\n    this.width = this.drawWidth;\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public addEffect() {\n    // not supported on polygons\n  }\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(index: number): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect(effect: Effects.SpriteEffect): void;\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public removeEffect() {\n    // not supported on polygons\n  }\n\n  /**\n   * @notimplemented Effects are not supported on `Polygon`\n   */\n  public clearEffects() {\n    // not supported on polygons\n  }\n\n  public reset() {\n    //pass\n  }\n\n  /**\n   * Draws the sprite appropriately to the 2D rendering context, at an x and y coordinate.\n   * @param ctx  The 2D rendering context\n   * @param x    The x coordinate of where to draw\n   * @param y    The y coordinate of where to draw\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number): void;\n  /**\n   * Draws the sprite with custom options to override internals without mutating them.\n   * @param options\n   */\n  public draw(options: DrawOptions): void;\n  public draw(ctxOrOptions: CanvasRenderingContext2D | DrawOptions, x?: number, y?: number): void {\n    if (ctxOrOptions instanceof CanvasRenderingContext2D) {\n      this._drawWithOptions({ ctx: ctxOrOptions, x, y });\n    } else {\n      this._drawWithOptions(ctxOrOptions);\n    }\n  }\n\n  private _drawWithOptions(options: DrawOptions) {\n    const { ctx, x, y, rotation, drawWidth, drawHeight, anchor, offset, opacity, flipHorizontal, flipVertical } = {\n      ...options,\n      rotation: options.rotation ?? this.rotation,\n      drawWidth: options.drawWidth ?? this.drawWidth,\n      drawHeight: options.drawHeight ?? this.drawHeight,\n      flipHorizontal: options.flipHorizontal ?? this.flipHorizontal,\n      flipVertical: options.flipVertical ?? this.flipVertical,\n      anchor: options.anchor ?? this.anchor,\n      offset: options.offset ?? this.offset,\n      opacity: options.opacity ?? this.opacity\n    };\n\n    const xpoint = drawWidth * anchor.x + offset.x + x;\n    const ypoint = drawHeight * anchor.y + offset.y + y;\n\n    ctx.save();\n    ctx.translate(xpoint, ypoint);\n    ctx.scale(this.scale.x, this.scale.y);\n    ctx.rotate(rotation);\n    ctx.beginPath();\n    ctx.lineWidth = this.lineWidth;\n\n    // Iterate through the supplied points and construct a 'polygon'\n    const firstPoint = this._points[0];\n    ctx.moveTo(firstPoint.x, firstPoint.y);\n\n    let i = 0;\n    const len = this._points.length;\n\n    for (i; i < len; i++) {\n      ctx.lineTo(this._points[i].x, this._points[i].y);\n    }\n\n    ctx.lineTo(firstPoint.x, firstPoint.y);\n    ctx.closePath();\n\n    if (this.filled) {\n      ctx.fillStyle = this.fillColor.toString();\n      ctx.fill();\n    }\n\n    ctx.strokeStyle = this.lineColor.toString();\n\n    if (flipHorizontal) {\n      ctx.translate(drawWidth, 0);\n      ctx.scale(-1, 1);\n    }\n\n    if (flipVertical) {\n      ctx.translate(0, drawHeight);\n      ctx.scale(1, -1);\n    }\n\n    const oldAlpha = ctx.globalAlpha;\n    ctx.globalAlpha = opacity ?? 1;\n    ctx.stroke();\n    ctx.globalAlpha = oldAlpha;\n\n    ctx.restore();\n  }\n}\n","import { Sprite, SpriteArgs } from './Sprite';\nimport { Animation } from './Animation';\nimport { Color } from './Color';\nimport * as Effects from './SpriteEffects';\n\nimport { Texture } from '../Resources/Texture';\nimport { Engine } from '../Engine';\nimport { Logger } from '../Util/Log';\nimport { BaseAlign, TextAlign } from '../Graphics/FontCommon';\nimport { obsolete } from '../Util/Decorators';\nimport { vec } from '../Algebra';\n\nexport interface SpriteSheetArgs {\n  image: Texture;\n  sprites?: Sprite[];\n  spWidth: number;\n  spHeight: number;\n  rows: number;\n  columns: number;\n  spacing?: number | SpriteSheetSpacingDimensions;\n}\n\nexport interface SpriteSheetSpacingDimensions {\n  top?: number;\n  left?: number;\n  margin?: number;\n}\n\n/**\n * Sprite sheets are a useful mechanism for slicing up image resources into\n * separate sprites or for generating in game animations. [[Sprite|Sprites]] are organized\n * in row major order in the [[SpriteSheet]].\n * @deprecated Will be removed in v0.26.0\n */\nexport class SpriteSheet {\n  private _sprites: Sprite[] = [];\n  private _image: Texture | null = null;\n  private _columns: number = 0;\n  private _rows: number = 0;\n  private _spWidth: number = 0;\n  private _spHeight: number = 0;\n  private _spacing: number | SpriteSheetSpacingDimensions = 0;\n\n  /**\n   * @param config    The configuration of the SpriteSheet\n   */\n  constructor(config: SpriteSheetArgs);\n\n  /**\n   * @param sprites   The backing sprite array to use, if already available\n   */\n  constructor(sprites: Sprite[]);\n\n  /**\n   * @param image     The backing image texture to build the SpriteSheet\n   * @param columns   The number of columns in the image texture\n   * @param rows      The number of rows in the image texture\n   * @param spWidth   The width of each individual sprite in pixels\n   * @param spHeight  The height of each individual sprite in pixels\n   * @param spacing   The spacing between every sprite in a spritesheet\n   */\n  constructor(\n    image: Texture,\n    columns: number,\n    rows: number,\n    spWidth: number,\n    spHeight: number,\n    spacing?: number | SpriteSheetSpacingDimensions\n  );\n\n  /**\n   * @param imageOrConfigOrSprites The backing image texture to build the SpriteSheet, option bag, or sprite list\n   * @param columns   The number of columns in the image texture\n   * @param rows      The number of rows in the image texture\n   * @param spWidth   The width of each individual sprite in pixels\n   * @param spHeight  The height of each individual sprite in pixels\n   * @param spacing   The spacing between every sprite in a spritesheet\n   */\n  constructor(\n    imageOrConfigOrSprites: Texture | SpriteSheetArgs | Sprite[],\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number | SpriteSheetSpacingDimensions\n  ) {\n    let loadFromImage: boolean = false;\n    if (imageOrConfigOrSprites instanceof Array) {\n      this._sprites = imageOrConfigOrSprites;\n    } else {\n      if (imageOrConfigOrSprites && !(imageOrConfigOrSprites instanceof Texture)) {\n        this._columns = imageOrConfigOrSprites.columns;\n        this._rows = imageOrConfigOrSprites.rows;\n        this._spWidth = imageOrConfigOrSprites.spWidth;\n        this._spHeight = imageOrConfigOrSprites.spHeight;\n        this._image = imageOrConfigOrSprites.image;\n        this._spacing = imageOrConfigOrSprites.spacing || 0;\n      } else {\n        this._image = <Texture>imageOrConfigOrSprites;\n        this._columns = columns;\n        this._rows = rows;\n        this._spWidth = spWidth;\n        this._spHeight = spHeight;\n        this._spacing = spacing || 0;\n      }\n      this._sprites = new Array(this._columns * this._rows);\n      loadFromImage = true;\n    }\n\n    // Inspect actual image dimensions with preloading\n    if (this.image instanceof Texture) {\n      let isWidthError: boolean = false;\n      let isHeightError: boolean = false;\n      if (this.image.isLoaded()) {\n        isWidthError = this.spWidth * this.columns > this.image.image.naturalWidth;\n        isHeightError = this.spHeight * this.rows > this.image.image.naturalHeight;\n        if (isWidthError) {\n          throw new RangeError(\n            `SpriteSheet specified is wider, ` +\n              `${this.columns} cols x ${this.spWidth} pixels > ${this.image.image.naturalWidth} ` +\n              `pixels than image width`\n          );\n        }\n        if (isHeightError) {\n          throw new RangeError(\n            `SpriteSheet specified is taller, ` +\n              `${this.rows} rows x ${this.spHeight} pixels > ${this.image.image.naturalHeight} ` +\n              `pixels than image height`\n          );\n        }\n      }\n    }\n\n    if (loadFromImage) {\n      const spacing = this.getSpacingDimensions();\n\n      for (let row = 0; row < this.rows; row++) {\n        for (let col = 0; col < this.columns; col++) {\n          this._sprites[col + row * this.columns] = new Sprite(\n            this.image,\n            col * this.spWidth + spacing.margin * col + spacing.left,\n            row * this.spHeight + spacing.margin * row + spacing.top,\n            this.spWidth,\n            this.spHeight\n          );\n        }\n      }\n    }\n  }\n\n  /**\n   * Gets the raw spacing dimensions for the sprites in the sheet, which can be a fixed number or custom dimensions.\n   */\n  public get spacing() {\n    return this._spacing;\n  }\n\n  /**\n   * Get a copy of the backing sprite array\n   */\n  public get sprites() {\n    return [...this._sprites];\n  }\n\n  /**\n   * The backing texture used for the sprite sheet\n   */\n  public get image() {\n    return this._image;\n  }\n\n  /**\n   * The number of columns in the sheet\n   */\n  public get columns() {\n    return this._columns;\n  }\n\n  /**\n   * The number of rows in the sheet\n   */\n  public get rows() {\n    return this._rows;\n  }\n\n  /**\n   * The width of the individual sprites\n   */\n  public get spWidth() {\n    return this._spWidth;\n  }\n\n  /**\n   * The height of the individual sprites\n   */\n  public get spHeight() {\n    return this._spHeight;\n  }\n\n  /**\n   * Gets the calculated spacing dimensions based on whether spacing\n   * is a fixed number or has different values for each dimension\n   */\n  public getSpacingDimensions(): SpriteSheetSpacingDimensions {\n    if (typeof this.spacing === 'number') {\n      return {\n        left: this.spacing,\n        top: this.spacing,\n        margin: this.spacing\n      };\n    } else {\n      return {\n        left: this.spacing.left ?? 0,\n        top: this.spacing.top ?? 0,\n        margin: this.spacing.margin ?? 0\n      };\n    }\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by listing out the\n   * sprite indices. Sprites are organized in row major order in the SpriteSheet.\n   * @param engine   Reference to the current game [[Engine]]\n   * @param indices  An array of sprite indices to use in the animation\n   * @param speed    The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationByIndices(engine: Engine, indices: number[], speed: number) {\n    let images: Sprite[] = indices.map((index) => {\n      return this.sprites[index];\n    });\n\n    images = images.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Create an animation from the this SpriteSheet by specifying the range of\n   * images with the beginning (inclusive) and ending (exclusive) index\n   * For example `getAnimationBetween(engine, 0, 5, 200)` returns an animation with 5 frames.\n   * @param engine      Reference to the current game Engine\n   * @param beginIndex  The index to start taking frames (inclusive)\n   * @param endIndex    The index to stop taking frames (exclusive)\n   * @param speed       The number in milliseconds to display each frame in the animation\n   */\n  public getAnimationBetween(engine: Engine, beginIndex: number, endIndex: number, speed: number) {\n    let images = this.sprites.slice(beginIndex, endIndex);\n    images = images.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, images, speed);\n  }\n\n  /**\n   * Treat the entire SpriteSheet as one animation, organizing the frames in\n   * row major order.\n   * @param engine  Reference to the current game [[Engine]]\n   * @param speed   The number in milliseconds to display each frame the animation\n   */\n  public getAnimationForAll(engine: Engine, speed: number) {\n    const sprites = this.sprites.map(function (i) {\n      return i.clone();\n    });\n    return new Animation(engine, sprites, speed);\n  }\n\n  /**\n   * Retrieve a specific sprite from the SpriteSheet by its index. Sprites are organized\n   * in row major order in the SpriteSheet.\n   * @param index  The index of the sprite\n   */\n  public getSprite(index: number): Sprite {\n    if (index >= 0 && index < this.sprites.length) {\n      return this.sprites[index];\n    } else {\n      throw new Error('Invalid index: ' + index);\n    }\n  }\n\n  /**\n   * Get an animation with bespoke sprite coordinates. This is useful if the SpriteSheet is\n   * packed and not a uniform width or height. The resulting [[Animation]] will have the height and width of the\n   * largest dimension (width, height) from among the sprite coordinates\n   * @param engine\n   * @param spriteCoordinates\n   * @param speed\n   */\n  public getAnimationByCoords(engine: Engine, spriteCoordinates: SpriteArgs[], speed: number): Animation {\n    let maxWidth: number = 0;\n    let maxHeight: number = 0;\n    const sprites: Sprite[] = new Array(spriteCoordinates.length);\n    for (let i = 0; i < spriteCoordinates.length; i++) {\n      const coord = spriteCoordinates[i];\n      // no need to pass image again if using a spritesheet\n      coord.image = coord.image || this.image;\n      maxWidth = Math.max(maxWidth, coord.drawWidth);\n      maxHeight = Math.max(maxHeight, coord.drawHeight);\n      sprites[i] = new Sprite(coord);\n    }\n\n    const anim = new Animation(engine, sprites, speed);\n\n    anim.drawWidth = maxWidth;\n    anim.drawHeight = maxHeight;\n    return anim;\n  }\n}\n\n/**\n * Specify various font attributes for sprite fonts\n */\nexport interface SpriteFontOptions {\n  color?: Color;\n  opacity?: number;\n  fontSize?: number;\n  letterSpacing?: number;\n  textAlign?: TextAlign;\n  baseAlign?: BaseAlign;\n  maxWidth?: number;\n}\n\nexport interface SpriteFontArgs extends SpriteSheetArgs {\n  alphabet: string;\n  caseInsensitive: boolean;\n}\n\n/**\n * Sprite fonts are a used in conjunction with a [[Label]] to specify\n * a particular bitmap as a font. Note that some font features are not\n * supported by Sprite fonts.\n * @deprecated Will be removed into v0.26.0\n */\n@obsolete({\n  message: 'SpriteSheet will be removed in v0.26.0',\n  alternateMethod: 'Use Graphics.SpriteSheet'\n})\nexport class SpriteFont extends SpriteSheet {\n  private _currentColor: Color = Color.Black;\n  private _currentOpacity: Number = 1.0;\n  private _spriteRecord: Record<string, Sprite> = {};\n\n  // text shadow\n  private _textShadowOn: boolean = false;\n  private _textShadowDirty: boolean = true;\n  private _textShadowColor: Color = Color.Black;\n  private _textShadowSprites: { [key: string]: Sprite } = {};\n  private _shadowOffsetX: number = 5;\n  private _shadowOffsetY: number = 5;\n  public readonly alphabet: string;\n  public readonly caseInsensitive: boolean;\n\n  constructor(config: SpriteFontArgs);\n\n  constructor(\n    image: Texture,\n    alphabet: string,\n    caseInsensitive: boolean,\n    columns: number,\n    rows: number,\n    spWidth: number,\n    spHeight: number,\n    spacing?: number | SpriteSheetSpacingDimensions\n  );\n\n  /**\n   * @param imageOrConfig   The backing image texture to build the SpriteFont or the sprite font option bag\n   * @param alphabet        A string representing all the characters in the image, in row major order.\n   * @param caseInsensitive  Indicate whether this font takes case into account\n   * @param columns         The number of columns of characters in the image\n   * @param rows            The number of rows of characters in the image\n   * @param spWidth         The width of each character in pixels\n   * @param spHeight        The height of each character in pixels\n   */\n  constructor(\n    imageOrConfig: Texture | SpriteFontArgs,\n    alphabet?: string,\n    caseInsensitive?: boolean,\n    columns?: number,\n    rows?: number,\n    spWidth?: number,\n    spHeight?: number,\n    spacing?: number | SpriteSheetSpacingDimensions\n  ) {\n    super(\n      imageOrConfig instanceof Texture\n        ? {\n          image: imageOrConfig,\n          spWidth: spWidth,\n          spHeight: spHeight,\n          rows: rows,\n          columns: columns,\n          spacing: spacing || 0\n        }\n        : imageOrConfig\n    );\n\n    if (imageOrConfig && !(imageOrConfig instanceof Texture)) {\n      alphabet = imageOrConfig.alphabet;\n      caseInsensitive = imageOrConfig.caseInsensitive;\n    }\n\n    this.alphabet = alphabet;\n    this.caseInsensitive = caseInsensitive;\n    this._spriteRecord = this.getTextSprites();\n  }\n\n  /**\n   * Returns a dictionary that maps each character in the alphabet to the appropriate [[Sprite]].\n   */\n  public getTextSprites(): { [key: string]: Sprite } {\n    const lookup: { [key: string]: Sprite } = {};\n    for (let i = 0; i < this.alphabet.length; i++) {\n      let char = this.alphabet[i];\n      if (this.caseInsensitive) {\n        char = char.toLowerCase();\n      }\n      lookup[char] = this.sprites[i].clone();\n    }\n    return lookup;\n  }\n\n  /**\n   * Sets the text shadow for sprite fonts\n   * @param offsetX      The x offset in pixels to place the shadow\n   * @param offsetY      The y offset in pixels to place the shadow\n   * @param shadowColor  The color of the text shadow\n   */\n  public setTextShadow(offsetX: number, offsetY: number, shadowColor: Color) {\n    this._textShadowOn = true;\n    this._shadowOffsetX = offsetX;\n    this._shadowOffsetY = offsetY;\n    this._textShadowColor = shadowColor.clone();\n    this._textShadowDirty = true;\n    for (const character in this._spriteRecord) {\n      this._textShadowSprites[character] = this._spriteRecord[character].clone();\n    }\n  }\n\n  /**\n   * Toggles text shadows on or off\n   */\n  public useTextShadow(on: boolean) {\n    this._textShadowOn = on;\n    if (on) {\n      this.setTextShadow(5, 5, this._textShadowColor);\n    }\n  }\n\n  /**\n   * Draws the current sprite font\n   */\n  public draw(ctx: CanvasRenderingContext2D, text: string, x: number, y: number, options: SpriteFontOptions) {\n    options = this._parseOptions(options);\n\n    if (this._currentColor.toString() !== options.color.toString() || this._currentOpacity !== options.opacity) {\n      this._currentOpacity = options.opacity;\n      this._currentColor = options.color;\n      for (const char in this._spriteRecord) {\n        this._spriteRecord[char].clearEffects();\n        this._spriteRecord[char].fill(options.color);\n        this._spriteRecord[char].opacity(options.opacity);\n      }\n    }\n\n    if (this._textShadowOn && this._textShadowDirty && this._textShadowColor) {\n      for (const characterShadow in this._textShadowSprites) {\n        this._textShadowSprites[characterShadow].clearEffects();\n        this._textShadowSprites[characterShadow].addEffect(new Effects.Fill(this._textShadowColor.clone()));\n      }\n      this._textShadowDirty = false;\n    }\n\n    // find the current length of text in pixels\n    const sprite = this.sprites[0];\n\n    // find the current height fo the text in pixels\n    const height = sprite.height;\n\n    // calculate appropriate scale for font size\n    const scale = options.fontSize / height;\n\n    const length = text.length * sprite.width * scale + text.length * options.letterSpacing;\n\n    let currX = x;\n    if (options.textAlign === TextAlign.Left || options.textAlign === TextAlign.Start) {\n      currX = x;\n    } else if (options.textAlign === TextAlign.Right || options.textAlign === TextAlign.End) {\n      currX = x - length;\n    } else if (options.textAlign === TextAlign.Center) {\n      currX = x - length / 2;\n    }\n\n    let currY = y - height * scale;\n    if (options.baseAlign === BaseAlign.Top || options.baseAlign === BaseAlign.Hanging) {\n      currY = y;\n    } else if (\n      options.baseAlign === BaseAlign.Ideographic ||\n      options.baseAlign === BaseAlign.Bottom ||\n      options.baseAlign === BaseAlign.Alphabetic\n    ) {\n      currY = y - height * scale;\n    } else if (options.baseAlign === BaseAlign.Middle) {\n      currY = y - (height * scale) / 2;\n    }\n\n    for (let i = 0; i < text.length; i++) {\n      let character = text[i];\n      if (this.caseInsensitive) {\n        character = character.toLowerCase();\n      }\n      try {\n        // if text shadow\n        if (this._textShadowOn) {\n          this._textShadowSprites[character].drawAroundAnchor = false;\n          this._textShadowSprites[character].scale = vec(scale, scale);\n          this._textShadowSprites[character].draw(ctx, currX + this._shadowOffsetX, currY + this._shadowOffsetY);\n        }\n\n        const charSprite = this._spriteRecord[character];\n        charSprite.drawAroundAnchor = false;\n        charSprite.scale = vec(scale, scale);\n        charSprite.draw(ctx, currX, currY);\n        currX += charSprite.drawWidth + options.letterSpacing;\n      } catch (e) {\n        Logger.getInstance().error(`SpriteFont Error drawing char ${character}`);\n      }\n    }\n  }\n\n  private _parseOptions(options: SpriteFontOptions): SpriteFontOptions {\n    return {\n      fontSize: options.fontSize || 10,\n      letterSpacing: options.letterSpacing || 0,\n      color: options.color || Color.Black,\n      textAlign: typeof options.textAlign === undefined ? TextAlign.Left : options.textAlign,\n      baseAlign: typeof options.baseAlign === undefined ? BaseAlign.Bottom : options.baseAlign,\n      maxWidth: options.maxWidth || -1,\n      opacity: options.opacity || 0\n    };\n  }\n}\n","import { Audio } from './Audio';\n\nexport type ExResponseType = '' | 'arraybuffer' | 'blob' | 'document' | 'json' | 'text';\n\nexport interface ExResponseTypesLookup {\n  [name: string]: ExResponseType;\n}\n\nexport class ExResponse {\n  public static type: ExResponseTypesLookup = {\n    any: '',\n    blob: 'blob',\n    json: 'json',\n    text: 'text',\n    document: 'document',\n    arraybuffer: 'arraybuffer'\n  };\n}\n\n/**\n * Represents an audio implementation like [[WebAudioInstance]]\n */\nexport interface AudioImplementation {\n  /**\n   * XHR response type\n   */\n  responseType: ExResponseType;\n\n  /**\n   * Processes raw data and transforms into sound data\n   */\n  processData(data: Blob | ArrayBuffer): Promise<string | AudioBuffer>;\n\n  /**\n   * Factory method that returns an instance of a played audio track\n   */\n  createInstance(data: string | AudioBuffer): Audio;\n}\n","import { Engine } from './../Engine';\nimport * as Events from './../Events';\nimport { Scene } from '../Scene';\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface _initialize {\n  _initialize(engine: Engine): void;\n}\n\n/**\n * Type guard checking for internal initialize method\n * @internal\n * @param a\n */\nexport function has_initialize(a: any): a is _initialize {\n  return !!a._initialize;\n}\n\nexport interface OnInitialize {\n  onInitialize(engine: Engine): void;\n}\n\n/**\n *\n */\nexport function hasOnInitialize(a: any): a is OnInitialize {\n  return !!a.onInitialize;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface _preupdate {\n  _preupdate(engine: Engine, delta: number): void;\n}\n\n/**\n *\n */\nexport function has_preupdate(a: any): a is _preupdate {\n  return !!a._preupdate;\n}\n\nexport interface OnPreUpdate {\n  onPreUpdate(engine: Engine, delta: number): void;\n}\n\n/**\n *\n */\nexport function hasOnPreUpdate(a: any): a is OnPreUpdate {\n  return !!a.onPreUpdate;\n}\n\n// eslint-disable-next-line @typescript-eslint/naming-convention\nexport interface _postupdate {\n  _postupdate(engine: Engine, delta: number): void;\n}\n\n/**\n *\n */\nexport function has_postupdate(a: any): a is _postupdate {\n  return !!a.onPostUpdate;\n}\n\nexport interface OnPostUpdate {\n  onPostUpdate(engine: Engine, delta: number): void;\n}\n\n/**\n *\n */\nexport function hasOnPostUpdate(a: any): a is OnPostUpdate {\n  return !!a.onPostUpdate;\n}\n\nexport interface CanInitialize {\n  /**\n   * Overridable implementation\n   */\n  onInitialize(_engine: Engine): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.initialize, handler: (event: Events.InitializeEvent<any>) => void): void;\n  once(eventName: Events.initialize, handler: (event: Events.InitializeEvent<any>) => void): void;\n  off(eventName: Events.initialize, handler?: (event: Events.InitializeEvent<any>) => void): void;\n}\n\nexport interface CanActivate {\n  /**\n   * Overridable implementation\n   */\n  onActivate(oldScene: Scene, newScene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.activate, handler: (event: Events.ActivateEvent) => void): void;\n  once(eventName: Events.activate, handler: (event: Events.ActivateEvent) => void): void;\n  off(eventName: Events.activate, handler?: (event: Events.ActivateEvent) => void): void;\n}\n\nexport interface CanDeactivate {\n  /**\n   * Overridable implementation\n   */\n  onDeactivate(oldScene: Scene, newScene: Scene): void;\n\n  /**\n   * Event signature\n   */\n  on(eventName: Events.deactivate, handler: (event: Events.DeactivateEvent) => void): void;\n  once(eventName: Events.deactivate, handler: (event: Events.DeactivateEvent) => void): void;\n  off(eventName: Events.deactivate, handler?: (event: Events.DeactivateEvent) => void): void;\n}\n\nexport interface CanUpdate {\n  /**\n   * Overridable implementation\n   */\n  onPreUpdate(_engine: Engine, _delta: number): void;\n\n  /**\n   * Event signature\n   */\n  on(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<any>) => void): void;\n  once(eventName: Events.preupdate, handler: (event: Events.PreUpdateEvent<any>) => void): void;\n  off(eventName: Events.preupdate, handler?: (event: Events.PreUpdateEvent<any>) => void): void;\n\n  /**\n   * Overridable implementation\n   */\n  onPostUpdate(_engine: Engine, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<any>) => void): void;\n  once(eventName: Events.postupdate, handler: (event: Events.PostUpdateEvent<any>) => void): void;\n  off(eventName: Events.postupdate, handler?: (event: Events.PostUpdateEvent<any>) => void): void;\n}\n\nexport interface OnPreDraw {\n  /**\n   * Overridable implementation\n   */\n  onPreDraw(_ctx: CanvasRenderingContext2D, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  once(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n}\n\nexport interface OnPostDraw {\n  /**\n   * Overridable implementation\n   */\n  onPostDraw(_ctx: CanvasRenderingContext2D, _delta: number): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  once(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n  off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n}\n\nexport interface CanDraw extends OnPreDraw, OnPostDraw {\n  on(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  on(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n\n  once(eventName: Events.predraw, handler: (event: Events.PreDrawEvent) => void): void;\n  once(eventName: Events.postdraw, handler: (event: Events.PostDrawEvent) => void): void;\n\n  off(eventName: Events.predraw, handler?: (event: Events.PreDrawEvent) => void): void;\n  off(eventName: Events.postdraw, handler?: (event: Events.PostDrawEvent) => void): void;\n}\n\n/**\n *\n */\nexport function hasPreDraw(a: any): a is OnPreDraw {\n  return !!a.onPreDraw;\n}\n\n/**\n *\n */\nexport function hasPostDraw(a: any): a is OnPostDraw {\n  return !!a.onPostDraw;\n}\n\nexport interface CanBeKilled {\n  /**\n   * Overridable implementation\n   */\n  onPreKill(_scene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n  once(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n  off(eventName: Events.prekill, handler: (event: Events.PreKillEvent) => void): void;\n\n  /**\n   * Overridable implementation\n   */\n  onPostKill(_scene: Scene): void;\n\n  /**\n   * Event signatures\n   */\n  on(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n  once(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n  off(eventName: Events.postkill, handler: (event: Events.PostKillEvent) => void): void;\n}\n","import { Random } from './Random';\nimport { Color } from '../Drawing/Color';\nimport * as Util from '../Util/Util';\n\n/**\n * Linear interpolation between a and b\n * @internal\n * @param time number between [0, 1]\n * @param a starting number\n * @param b ending number\n */\nfunction _lerp(time: number, a: number, b: number): number {\n  return a + time * (b - a);\n}\n\n/**\n * Reduce t by a quintic function that produces a desired effect\n * @internal\n * @param t\n */\nfunction _fade(t: number): number {\n  return t * t * t * (t * (t * 6 - 15) + 10);\n}\n\n/**\n * Options for the perlin noise generator\n */\nexport interface PerlinOptions {\n  /**\n   * Random number seed for the Perlin noise generator\n   */\n  seed?: number;\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  octaves?: number;\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  frequency?: number;\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  amplitude?: number;\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  persistance?: number;\n}\n\n/**\n * Generates perlin noise based on the 2002 Siggraph paper http://mrl.nyu.edu/~perlin/noise/\n * Also https://flafla2.github.io/2014/08/09/perlinnoise.html\n */\nexport class PerlinGenerator {\n  private _perm: number[] = [\n    151,\n    160,\n    137,\n    91,\n    90,\n    15,\n    131,\n    13,\n    201,\n    95,\n    96,\n    53,\n    194,\n    233,\n    7,\n    225,\n    140,\n    36,\n    103,\n    30,\n    69,\n    142,\n    8,\n    99,\n    37,\n    240,\n    21,\n    10,\n    23,\n    190,\n    6,\n    148,\n    247,\n    120,\n    234,\n    75,\n    0,\n    26,\n    197,\n    62,\n    94,\n    252,\n    219,\n    203,\n    117,\n    35,\n    11,\n    32,\n    57,\n    177,\n    33,\n    88,\n    237,\n    149,\n    56,\n    87,\n    174,\n    20,\n    125,\n    136,\n    171,\n    168,\n    68,\n    175,\n    74,\n    165,\n    71,\n    134,\n    139,\n    48,\n    27,\n    166,\n    77,\n    146,\n    158,\n    231,\n    83,\n    111,\n    229,\n    122,\n    60,\n    211,\n    133,\n    230,\n    220,\n    105,\n    92,\n    41,\n    55,\n    46,\n    245,\n    40,\n    244,\n    102,\n    143,\n    54,\n    65,\n    25,\n    63,\n    161,\n    1,\n    216,\n    80,\n    73,\n    209,\n    76,\n    132,\n    187,\n    208,\n    89,\n    18,\n    169,\n    200,\n    196,\n    135,\n    130,\n    116,\n    188,\n    159,\n    86,\n    164,\n    100,\n    109,\n    198,\n    173,\n    186,\n    3,\n    64,\n    52,\n    217,\n    226,\n    250,\n    124,\n    123,\n    5,\n    202,\n    38,\n    147,\n    118,\n    126,\n    255,\n    82,\n    85,\n    212,\n    207,\n    206,\n    59,\n    227,\n    47,\n    16,\n    58,\n    17,\n    182,\n    189,\n    28,\n    42,\n    223,\n    183,\n    170,\n    213,\n    119,\n    248,\n    152,\n    2,\n    44,\n    154,\n    163,\n    70,\n    221,\n    153,\n    101,\n    155,\n    167,\n    43,\n    172,\n    9,\n    129,\n    22,\n    39,\n    253,\n    19,\n    98,\n    108,\n    110,\n    79,\n    113,\n    224,\n    232,\n    178,\n    185,\n    112,\n    104,\n    218,\n    246,\n    97,\n    228,\n    251,\n    34,\n    242,\n    193,\n    238,\n    210,\n    144,\n    12,\n    191,\n    179,\n    162,\n    241,\n    81,\n    51,\n    145,\n    235,\n    249,\n    14,\n    239,\n    107,\n    49,\n    192,\n    214,\n    31,\n    181,\n    199,\n    106,\n    157,\n    184,\n    84,\n    204,\n    176,\n    115,\n    121,\n    50,\n    45,\n    127,\n    4,\n    150,\n    254,\n    138,\n    236,\n    205,\n    93,\n    222,\n    114,\n    67,\n    29,\n    24,\n    72,\n    243,\n    141,\n    128,\n    195,\n    78,\n    66,\n    215,\n    61,\n    156,\n    180\n  ];\n  private _p: Uint8Array = new Uint8Array(512);\n  private _random: Random;\n\n  private _defaultPerlinOptions: PerlinOptions = {\n    octaves: 1,\n    frequency: 1,\n    amplitude: 1,\n    persistance: 0.5\n  };\n\n  /**\n   * The persistance determines how quickly the amplitude will drop off, a high degree of persistance results in smoother patterns,\n   * a low degree of persistance generates spiky patterns.\n   */\n  public persistance: number;\n\n  /**\n   * The amplitude determines the relative height of the peaks generated in the noise.\n   */\n  public amplitude: number;\n\n  /**\n   * Frequency to use when generating the noise, the higher the number the more quickly the pattern will oscillate. Another way\n   * to think about this is that it is like \"zooming\" out from an infinite pattern determined by the seed.\n   */\n  public frequency: number;\n\n  /**\n   * Number of octaves to use when generating the noise, the number of octaves is the number of times the perlin\n   * noise is generated and laid on top of itself. Using higher values can increase the curviness of the noise, and\n   * make it look more natural.\n   */\n  public octaves: number;\n\n  constructor(options?: PerlinOptions) {\n    options = Util.extend({}, this._defaultPerlinOptions, options);\n\n    this.persistance = options.persistance;\n    this.amplitude = options.amplitude;\n    this.frequency = options.frequency;\n    this.octaves = options.octaves;\n\n    if (options.seed) {\n      this._random = new Random(options.seed);\n    } else {\n      this._random = new Random();\n    }\n\n    this._perm = this._random.shuffle(this._perm);\n\n    for (let i = 0; i < 512; i++) {\n      this._p[i] = this._perm[i % 256] & 0xff;\n    }\n  }\n\n  /**\n   * Generates 1-Dimensional perlin noise given an x and generates noises values between [0, 1].\n   */\n  public noise(x: number): number;\n  /**\n   * Generates 2-Dimensional perlin noise given an (x, y) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number): number;\n  /**\n   * Generates 3-Dimensional perlin noise given an (x, y, z) and generates noise values between [0, 1]\n   */\n  public noise(x: number, y: number, z: number): number;\n  public noise(): number {\n    let amp = this.amplitude;\n    let freq = this.frequency;\n\n    let total = 0;\n    let maxValue = 0;\n    for (let i = 0; i < this.octaves; i++) {\n      switch (arguments.length) {\n        case 1:\n          total += this._noise1d(arguments[0] * freq) * amp;\n          break;\n        case 2:\n          total += this._noise2d(arguments[0] * freq, arguments[1] * freq) * amp;\n          break;\n        case 3:\n          total += this._noise3d(arguments[0] * freq, arguments[1] * freq, arguments[2] * freq) * amp;\n          break;\n        /* istanbul ignore next */\n        default:\n          throw new Error('Invalid arguments for perlin noise');\n      }\n      maxValue += amp;\n      amp *= this.persistance;\n      freq *= 2;\n    }\n    return total / maxValue;\n  }\n\n  /**\n   * Generates a list starting at 0 and ending at 1 of continuous perlin noise, by default the step is 1/length;\n   *\n   */\n  public sequence(length: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / length;\n    }\n    const array: number[] = new Array(length);\n    for (let i = 0; i < length; i++) {\n      array[i] = this.noise(i * step);\n    }\n    return array;\n  }\n\n  /**\n   * Generates a 2D grid of perlin noise given a step value packed into a 1D array i = (x + y*width),\n   * by default the step will 1/(min(dimension))\n   */\n  public grid(width: number, height: number, step?: number): number[] {\n    if (!step) {\n      step = 1 / Math.min(width, height);\n    }\n\n    const array: number[] = new Array(width * height);\n\n    for (let y = 0; y < height; y++) {\n      for (let x = 0; x < width; x++) {\n        array[x + y * width] = this.noise(x * step, y * step);\n      }\n    }\n\n    return array;\n  }\n\n  private _gradient3d(hash: number, x: number, y: number, z: number) {\n    const h = hash & 0xf;\n    const u = h < 8 ? x : y;\n    const v = h < 4 ? y : h === 12 || h === 14 ? x : z;\n    return ((h & 0b1) === 0 ? u : -u) + ((h & 0b10) === 0 ? v : -v);\n  }\n\n  private _gradient2d(hash: number, x: number, y: number) {\n    const value = (hash & 0b1) === 0 ? x : y;\n    return (hash & 0b10) === 0 ? -value : value;\n  }\n\n  private _gradient1d(hash: number, x: number) {\n    return (hash & 0b1) === 0 ? -x : x;\n  }\n\n  private _noise1d(x: number) {\n    const intX = Math.floor(x) & 0xff; // force 0-255 integers to lookup in permutation\n    x -= Math.floor(x);\n    const fadeX = _fade(x);\n    return (_lerp(fadeX, this._gradient1d(this._p[intX], x), this._gradient1d(this._p[intX + 1], x - 1)) + 1) / 2;\n  }\n\n  private _noise2d(x: number, y: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n    return (\n      (_lerp(\n        fadeY,\n        _lerp(fadeX, this._gradient2d(this._p[a], x, y), this._gradient2d(this._p[b], x - 1, y)),\n        _lerp(fadeX, this._gradient2d(this._p[a + 1], x, y - 1), this._gradient2d(this._p[b + 1], x - 1, y - 1))\n      ) +\n        1) /\n      2\n    );\n  }\n\n  private _noise3d(x: number, y: number, z: number) {\n    const intX = Math.floor(x) & 0xff;\n    const intY = Math.floor(y) & 0xff;\n    const intZ = Math.floor(z) & 0xff;\n\n    x -= Math.floor(x);\n    y -= Math.floor(y);\n    z -= Math.floor(z);\n\n    const fadeX = _fade(x);\n    const fadeY = _fade(y);\n    const fadeZ = _fade(z);\n\n    const a = this._p[intX] + intY;\n    const b = this._p[intX + 1] + intY;\n\n    const aa = this._p[a] + intZ;\n    const ba = this._p[b] + intZ;\n\n    const ab = this._p[a + 1] + intZ;\n    const bb = this._p[b + 1] + intZ;\n\n    return (\n      (_lerp(\n        fadeZ,\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa], x, y, z), this._gradient3d(this._p[ba], x - 1, y, z)),\n          _lerp(fadeX, this._gradient3d(this._p[ab], x, y - 1, z), this._gradient3d(this._p[bb], x - 1, y - 1, z))\n        ),\n        _lerp(\n          fadeY,\n          _lerp(fadeX, this._gradient3d(this._p[aa + 1], x, y, z - 1), this._gradient3d(this._p[ba + 1], x - 1, y, z - 1)),\n          _lerp(fadeX, this._gradient3d(this._p[ab + 1], x, y - 1, z - 1), this._gradient3d(this._p[bb + 1], x - 1, y - 1, z - 1))\n        )\n      ) +\n        1) /\n      2\n    );\n  }\n}\n\n/**\n * A helper to draw 2D perlin maps given a perlin generator and a function\n */\nexport class PerlinDrawer2D {\n  /**\n   * @param generator - An existing perlin generator\n   * @param colorFcn - A color function that takes a value between [0, 255] derived from the perlin generator, and returns a color\n   */\n  constructor(public generator: PerlinGenerator, public colorFcn?: (val: number) => Color) {\n    if (!colorFcn) {\n      this.colorFcn = (val: number) => {\n        return val < 125 ? Color.Black : Color.White;\n      };\n    }\n  }\n\n  /**\n   * Returns an image of 2D perlin noise\n   */\n  public image(width: number, height: number): HTMLImageElement {\n    const image = document.createElement('img');\n    const canvas = document.createElement('canvas');\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext('2d');\n    this.draw(ctx, 0, 0, width, height);\n    image.src = canvas.toDataURL();\n    return image;\n  }\n\n  /**\n   * This draws a 2D perlin grid on a canvas context, not recommended to be called every frame due to performance\n   */\n  public draw(ctx: CanvasRenderingContext2D, x: number, y: number, width: number, height: number) {\n    const grid = this.generator.grid(width, height);\n    const imageData = ctx.getImageData(x, y, width, height);\n    for (let j = 0; j < height; j++) {\n      for (let i = 0; i < width; i++) {\n        const val = grid[i + width * j];\n        const c = Math.floor(val * 255) & 0xff;\n        const pixel = (i + j * imageData.width) * 4;\n        const color = this.colorFcn(c);\n\n        imageData.data[pixel] = color.r;\n        imageData.data[pixel + 1] = color.g;\n        imageData.data[pixel + 2] = color.b;\n        imageData.data[pixel + 3] = Math.floor(color.a * 255);\n      }\n    }\n    ctx.putImageData(imageData, x, y);\n  }\n}\n","import { Audio } from '../../Interfaces/Audio';\nimport * as Util from '../../Util/Util';\nimport { AudioContextFactory } from './AudioContext';\n\n/**\n * Internal class representing a Web Audio AudioBufferSourceNode instance\n * @see https://developer.mozilla.org/en-US/docs/Web/API/Web_Audio_API\n */\nexport class WebAudioInstance implements Audio {\n  private _volume = 1;\n  private _duration: number | undefined = undefined;\n\n  private _playingPromise: Promise<boolean>;\n  private _playingResolve: (value: boolean) => void;\n\n  private _loop = false;\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    if (this._instance) {\n      this._instance.loop = value;\n      this._wireUpOnEnded();\n    }\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n\n  public set volume(value: number) {\n    value = Util.clamp(value, 0, 1.0);\n\n    this._volume = value;\n\n    if (this._isPlaying && this._volumeNode.gain.setTargetAtTime) {\n      // https://developer.mozilla.org/en-US/docs/Web/API/AudioParam/setTargetAtTime\n      // After each .1 seconds timestep, the target value will ~63.2% closer to the target value.\n      // This exponential ramp provides a more pleasant transition in gain\n      this._volumeNode.gain.setTargetAtTime(value, this._audioContext.currentTime, 0.1);\n    } else {\n      this._volumeNode.gain.value = value;\n    }\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  public set duration(value: number | undefined) {\n    this._duration = value;\n  }\n\n  /**\n   * Duration of the sound, in seconds.\n   */\n  public get duration() {\n    return this._duration;\n  }\n\n  private get _playbackRate(): number {\n    return this._instance ? 1 / (this._instance.playbackRate.value || 1.0) : null;\n  }\n\n  private _isPlaying = false;\n  private _isPaused = false;\n  private _instance: AudioBufferSourceNode;\n  private _audioContext: AudioContext = AudioContextFactory.create();\n  private _volumeNode = this._audioContext.createGain();\n  private _startTime: number;\n\n  /**\n   * Current playback offset (in seconds)\n   */\n  private _currentOffset = 0;\n\n  constructor(private _src: AudioBuffer) {\n    this._createNewBufferSource();\n  }\n\n  public isPlaying() {\n    return this._isPlaying;\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  public play(playStarted: () => any = () => {}) {\n    if (this._isPaused) {\n      this._resumePlayBack();\n      playStarted();\n    }\n\n    if (!this._isPlaying) {\n      this._startPlayBack();\n      playStarted();\n    }\n\n    return this._playingPromise;\n  }\n\n  public pause() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPaused = true;\n    this._isPlaying = false;\n\n    this._instance.stop(0);\n    // Playback rate will be a scale factor of how fast/slow the audio is being played\n    // default is 1.0\n    // we need to invert it to get the time scale\n\n    this._setPauseOffset();\n  }\n\n  public stop() {\n    if (!this._isPlaying) {\n      return;\n    }\n\n    this._isPlaying = false;\n    this._isPaused = false;\n\n    this._currentOffset = 0;\n    this._instance.stop(0);\n\n    // handler will not be wired up if we were looping\n    if (!this._instance.onended) {\n      this._handleOnEnded();\n    }\n  }\n\n  private _startPlayBack() {\n    this._isPlaying = true;\n    this._isPaused = false;\n    this._playingPromise = new Promise<boolean>((resolve) => {\n      this._playingResolve = resolve;\n    });\n\n    if (!this._instance) {\n      this._createNewBufferSource();\n    }\n\n    this._rememberStartTime();\n\n    this._volumeNode.connect(this._audioContext.destination);\n    this._instance.start(0, 0);\n    this._currentOffset = 0;\n\n    this._wireUpOnEnded();\n  }\n\n  private _resumePlayBack() {\n    if (!this._isPaused) {\n      return;\n    }\n\n    this._isPaused = false;\n    this._isPlaying = true;\n\n    // a buffer source can only be started once\n    // so we need to dispose of the previous instance before\n    // \"resuming\" the next one\n    this._instance.onended = null; // dispose of any previous event handler\n    this._createNewBufferSource();\n\n    const duration = this._playbackRate * this._src.duration;\n    const restartTime = this._currentOffset % duration;\n\n    this._rememberStartTime(restartTime * -1000);\n    this._instance.start(0, restartTime);\n    this._wireUpOnEnded();\n  }\n\n  private _wireUpOnEnded() {\n    if (!this.loop) {\n      this._instance.onended = () => this._handleOnEnded();\n    }\n  }\n\n  private _handleOnEnded() {\n    // pausing calls stop(0) which triggers onended event\n    // so we don't \"resolve\" yet (when we resume we'll try again)\n    if (!this._isPaused) {\n      this._isPlaying = false;\n      this._playingResolve(true);\n    }\n  }\n\n  private _rememberStartTime(amend?: number) {\n    this._startTime = new Date().getTime() + (amend | 0);\n  }\n\n  private _setPauseOffset() {\n    this._currentOffset = ((new Date().getTime() - this._startTime) * this._playbackRate) / 1000; // in seconds\n  }\n\n  private _createNewBufferSource() {\n    this._instance = this._audioContext.createBufferSource();\n    this._instance.buffer = this._src;\n    this._instance.loop = this.loop;\n    this._instance.playbackRate.setValueAtTime(1.0, 0);\n\n    this._instance.connect(this._volumeNode);\n  }\n}\n","import { Logger } from './Log';\n\n/**\n * Whether or not the browser can play this file as HTML5 Audio\n */\nexport function canPlayFile(file: string): boolean {\n  try {\n    const a = new Audio();\n    const filetype = /.*\\.([A-Za-z0-9]+)$/;\n    const type = file.match(filetype)[1];\n    if (a.canPlayType('audio/' + type)) {\n      return true;\n    } else {\n      return false;\n    }\n  } catch (e) {\n    Logger.getInstance().warn('Cannot determine audio support, assuming no support for the Audio Tag', e);\n    return false;\n  }\n}\n","import { ExResponse } from '../../Interfaces/AudioImplementation';\nimport { Audio } from '../../Interfaces/Audio';\nimport { Engine } from '../../Engine';\nimport { Resource } from '../Resource';\nimport { WebAudioInstance } from './WebAudioInstance';\nimport { AudioContextFactory } from './AudioContext';\nimport { NativeSoundEvent, NativeSoundProcessedEvent } from '../../Events/MediaEvents';\nimport { canPlayFile } from '../../Util/Sound';\nimport { Loadable } from '../../Interfaces/Index';\nimport { Logger } from '../../Util/Log';\nimport { Class } from '../../Class';\n\n/**\n * The [[Sound]] object allows games built in Excalibur to load audio\n * components, from soundtracks to sound effects. [[Sound]] is an [[Loadable]]\n * which means it can be passed to a [[Loader]] to pre-load before a game or level.\n */\nexport class Sound extends Class implements Audio, Loadable<AudioBuffer> {\n  public logger: Logger = Logger.getInstance();\n  public data: AudioBuffer;\n  private _resource: Resource<ArrayBuffer>;\n  /**\n   * Indicates whether the clip should loop when complete\n   * @param value  Set the looping flag\n   */\n  public set loop(value: boolean) {\n    this._loop = value;\n\n    for (const track of this._tracks) {\n      track.loop = this._loop;\n    }\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._loop);\n  }\n  public get loop(): boolean {\n    return this._loop;\n  }\n\n  public set volume(value: number) {\n    this._volume = value;\n\n    for (const track of this._tracks) {\n      track.volume = this._volume;\n    }\n\n    this.emit('volumechange', new NativeSoundEvent(this));\n\n    this.logger.debug('Set loop for all instances of sound', this.path, 'to', this._volume);\n  }\n  public get volume(): number {\n    return this._volume;\n  }\n\n  public get duration(): number | undefined {\n    return this._duration;\n  }\n\n  /**\n   * Return array of Current AudioInstances playing or being paused\n   */\n  public get instances(): Audio[] {\n    return this._tracks;\n  }\n\n  public get path() {\n    return this._resource.path;\n  }\n\n  public set path(val: string) {\n    this._resource.path = val;\n  }\n\n  private _loop = false;\n  private _volume = 1;\n  private _duration: number | undefined = undefined;\n  private _isStopped = false;\n  private _isPaused = false;\n  private _tracks: Audio[] = [];\n  private _engine: Engine;\n  private _wasPlayingOnHidden: boolean = false;\n  private _audioContext = AudioContextFactory.create();\n\n  /**\n   * @param paths A list of audio sources (clip.wav, clip.mp3, clip.ogg) for this audio clip. This is done for browser compatibility.\n   */\n  constructor(...paths: string[]) {\n    super();\n    this._resource = new Resource('', ExResponse.type.arraybuffer);\n    /** Chrome : MP3, WAV, Ogg\n     * Firefox : WAV, Ogg,\n     * IE : MP3, WAV coming soon\n     * Safari MP3, WAV, Ogg\n     */\n    for (const path of paths) {\n      if (canPlayFile(path)) {\n        this.path = path;\n        break;\n      }\n    }\n\n    if (!this.path) {\n      this.logger.warn('This browser does not support any of the audio files specified:', paths.join(', '));\n      this.logger.warn('Attempting to use', paths[0]);\n      this.path = paths[0]; // select the first specified\n    }\n  }\n\n  public isLoaded() {\n    return !!this.data;\n  }\n\n  public async load(): Promise<AudioBuffer> {\n    if (this.data) {\n      return this.data;\n    }\n    const arraybuffer = await this._resource.load();\n    const audiobuffer = await this.decodeAudio(arraybuffer.slice(0));\n    this._duration = typeof audiobuffer === 'object' ? audiobuffer.duration : undefined;\n    this.emit('processed', new NativeSoundProcessedEvent(this, audiobuffer));\n    return this.data = audiobuffer;\n  }\n\n  public async decodeAudio(data: ArrayBuffer): Promise<AudioBuffer> {\n    try {\n      return await this._audioContext.decodeAudioData(data.slice(0));\n    } catch (e) {\n      this.logger.error(\n        'Unable to decode ' +\n          ' this browser may not fully support this format, or the file may be corrupt, ' +\n          'if this is an mp3 try removing id3 tags and album art from the file.'\n      );\n      return await Promise.reject();\n    }\n  }\n\n  public wireEngine(engine: Engine) {\n    if (engine) {\n      this._engine = engine;\n\n      this._engine.on('hidden', () => {\n        if (engine.pauseAudioWhenHidden && this.isPlaying()) {\n          this._wasPlayingOnHidden = true;\n          this.pause();\n        }\n      });\n\n      this._engine.on('visible', () => {\n        if (engine.pauseAudioWhenHidden && this._wasPlayingOnHidden) {\n          this.play();\n          this._wasPlayingOnHidden = false;\n        }\n      });\n\n      this._engine.on('start', () => {\n        this._isStopped = false;\n      });\n\n      this._engine.on('stop', () => {\n        this.stop();\n        this._isStopped = true;\n      });\n    }\n  }\n\n  /**\n   * Returns how many instances of the sound are currently playing\n   */\n  public instanceCount(): number {\n    return this._tracks.length;\n  }\n\n  /**\n   * Whether or not the sound is playing right now\n   */\n  public isPlaying(): boolean {\n    return this._tracks.some((t) => t.isPlaying());\n  }\n\n  /**\n   * Play the sound, returns a promise that resolves when the sound is done playing\n   * An optional volume argument can be passed in to play the sound. Max volume is 1.0\n   */\n  public play(volume?: number): Promise<boolean> {\n    if (!this.isLoaded()) {\n      this.logger.warn('Cannot start playing. Resource', this.path, 'is not loaded yet');\n\n      return Promise.resolve(true);\n    }\n\n    if (this._isStopped) {\n      this.logger.warn('Cannot start playing. Engine is in a stopped state.');\n      return Promise.resolve(false);\n    }\n\n    this.volume = volume || this.volume;\n\n    if (this._isPaused) {\n      return this._resumePlayback();\n    } else {\n      return this._startPlayback();\n    }\n  }\n\n  /**\n   * Stop the sound, and do not rewind\n   */\n  public pause() {\n    if (!this.isPlaying()) {\n      return;\n    }\n\n    for (const track of this._tracks) {\n      track.pause();\n    }\n\n    this._isPaused = true;\n\n    this.emit('pause', new NativeSoundEvent(this));\n\n    this.logger.debug('Paused all instances of sound', this.path);\n  }\n\n  /**\n   * Stop the sound if it is currently playing and rewind the track. If the sound is not playing, rewinds the track.\n   */\n  public stop() {\n    for (const track of this._tracks) {\n      track.stop();\n    }\n\n    this.emit('stop', new NativeSoundEvent(this));\n\n    this._isPaused = false;\n    this._tracks.length = 0;\n    this.logger.debug('Stopped all instances of sound', this.path);\n  }\n\n\n\n  /**\n   * Get Id of provided AudioInstance in current trackList\n   * @param track [[Audio]] which Id is to be given\n   */\n  public getTrackId(track: Audio): number {\n    return this._tracks.indexOf(track);\n  }\n\n  private async _resumePlayback(): Promise<boolean> {\n    if (this._isPaused) {\n      const resumed: Promise<boolean>[] = [];\n      // ensure we resume *current* tracks (if paused)\n      for (const track of this._tracks) {\n        resumed.push(track.play());\n      }\n\n      this._isPaused = false;\n\n      this.emit('resume', new NativeSoundEvent(this));\n\n      this.logger.debug('Resuming paused instances for sound', this.path, this._tracks);\n      // resolve when resumed tracks are done\n      await Promise.all(resumed);\n    }\n    return true;\n  }\n\n  /**\n   * Starts playback, returns a promise that resolves when playback is complete\n   */\n  private async _startPlayback(): Promise<boolean> {\n    const track = await this._getTrackInstance(this.data);\n\n    const complete = await track.play(() => {\n      this.emit('playbackstart', new NativeSoundEvent(this, track));\n      this.logger.debug('Playing new instance for sound', this.path);\n    });\n\n    // when done, remove track\n    this.emit('playbackend', new NativeSoundEvent(this, track));\n    this._tracks.splice(this.getTrackId(track), 1);\n\n    return complete;\n  }\n\n  private _getTrackInstance(data: AudioBuffer): WebAudioInstance {\n    const newTrack = new WebAudioInstance(data);\n\n    newTrack.loop = this.loop;\n    newTrack.volume = this.volume;\n    newTrack.duration = this.duration;\n\n    this._tracks.push(newTrack);\n\n    return newTrack;\n  }\n}\n","import { Resource } from './Resource';\nimport { Sprite } from '../Drawing/Sprite';\nimport { Texture } from './Texture';\nimport { Color } from '../Drawing/Color';\nimport { SpriteSheet } from '../Drawing/SpriteSheet';\nimport { Animation } from '../Drawing/Animation';\nimport { Engine } from '../Engine';\nimport { Loadable } from '../Interfaces/Index';\n/**\n * The [[Texture]] object allows games built in Excalibur to load image resources.\n * [[Texture]] is an [[Loadable]] which means it can be passed to a [[Loader]]\n * to pre-load before starting a level or game.\n */\nexport class Gif implements Loadable<Texture[]> {\n  private _resource: Resource<ArrayBuffer>;\n\n  /**\n   * The width of the texture in pixels\n   */\n  public width: number;\n\n  /**\n   * The height of the texture in pixels\n   */\n  public height: number;\n\n\n  private _stream: Stream = null;\n  private _gif: ParseGif = null;\n  private _textures: Texture[] = [];\n  private _animation: Animation = null;\n  private _transparentColor: Color = null;\n\n  public data: Texture[];\n\n  /**\n   * @param path       Path to the image resource\n   * @param color      Optionally set the color to treat as transparent the gif, by default [[Color.Magenta]]\n   * @param bustCache  Optionally load texture with cache busting\n   */\n  constructor(public path: string, public color: Color = Color.Magenta, public bustCache = true) {\n    this._resource = new Resource(path, 'arraybuffer', bustCache);\n    this._transparentColor = color;\n  }\n\n  /**\n   * Begins loading the texture and returns a promise to be resolved on completion\n   */\n  public async load(): Promise<Texture[]> {\n    const arraybuffer = await this._resource.load();\n    this._stream = new Stream(arraybuffer);\n    this._gif = new ParseGif(this._stream, this._transparentColor);\n    const textures = this._gif.images.map(i => new Texture(i.src, false));\n\n    // Load all textures\n    await Promise.all(textures.map(t => t.load()));\n    return this.data = this._textures = textures;\n  }\n\n  public isLoaded() {\n    return !!this.data;\n  }\n\n  public asSprite(id: number = 0): Sprite {\n    const sprite = this._textures[id].asSprite();\n    return sprite;\n  }\n\n  public asSpriteSheet(): SpriteSheet {\n    const spriteArray: Sprite[] = this._textures.map((texture) => {\n      return texture.asSprite();\n    });\n    return new SpriteSheet(spriteArray);\n  }\n\n  public asAnimation(engine: Engine, speed: number): Animation {\n    const spriteSheet: SpriteSheet = this.asSpriteSheet();\n    this._animation = spriteSheet.getAnimationForAll(engine, speed);\n    return this._animation;\n  }\n\n  public get readCheckBytes(): number[] {\n    return this._gif.checkBytes;\n  }\n}\n\nexport interface Frame {\n  sentinel: number;\n  type: string;\n  leftPos: number;\n  topPos: number;\n  width: number;\n  height: number;\n  lctFlag: boolean;\n  interlaced: boolean;\n  sorted: boolean;\n  reserved: boolean[];\n  lctSize: number;\n  lzwMinCodeSize: number;\n  pixels: number[];\n}\n\nconst bitsToNum = (ba: any) => {\n  return ba.reduce(function (s: number, n: number) {\n    return s * 2 + n;\n  }, 0);\n};\n\nconst byteToBitArr = (bite: any) => {\n  const a = [];\n  for (let i = 7; i >= 0; i--) {\n    a.push(!!(bite & (1 << i)));\n  }\n  return a;\n};\n\nexport class Stream {\n  data: any = null;\n  len: number = 0;\n  position: number = 0;\n\n  constructor(dataArray: ArrayBuffer) {\n    this.data = new Uint8Array(dataArray);\n    this.len = this.data.byteLength;\n    if (this.len === 0) {\n      throw new Error('No data loaded from file');\n    }\n  }\n\n  public readByte = () => {\n    if (this.position >= this.data.byteLength) {\n      throw new Error('Attempted to read past end of stream.');\n    }\n    return this.data[this.position++];\n  };\n\n  public readBytes = (n: number) => {\n    const bytes = [];\n    for (let i = 0; i < n; i++) {\n      bytes.push(this.readByte());\n    }\n    return bytes;\n  };\n\n  public read = (n: number) => {\n    let s = '';\n    for (let i = 0; i < n; i++) {\n      s += String.fromCharCode(this.readByte());\n    }\n    return s;\n  };\n\n  public readUnsigned = () => {\n    // Little-endian.\n    const a = this.readBytes(2);\n    return (a[1] << 8) + a[0];\n  };\n}\n\nconst lzwDecode = function (minCodeSize: number, data: any) {\n  // TODO: Now that the GIF parser is a bit different, maybe this should get an array of bytes instead of a String?\n  let pos = 0; // Maybe this streaming thing should be merged with the Stream?\n\n  const readCode = function (size: number) {\n    let code = 0;\n    for (let i = 0; i < size; i++) {\n      if (data.charCodeAt(pos >> 3) & (1 << (pos & 7))) {\n        code |= 1 << i;\n      }\n      pos++;\n    }\n    return code;\n  };\n\n  const output: any[] = [];\n\n  const clearCode = 1 << minCodeSize;\n  const eoiCode = clearCode + 1;\n\n  let codeSize = minCodeSize + 1;\n\n  let dict: any[] = [];\n\n  const clear = function () {\n    dict = [];\n    codeSize = minCodeSize + 1;\n    for (let i = 0; i < clearCode; i++) {\n      dict[i] = [i];\n    }\n    dict[clearCode] = [];\n    dict[eoiCode] = null;\n  };\n\n  let code;\n  let last;\n\n  while (true) {\n    last = code;\n    code = readCode(codeSize);\n    if (code === clearCode) {\n      clear();\n      continue;\n    }\n    if (code === eoiCode) {\n      break;\n    }\n\n    if (code < dict.length) {\n      if (last !== clearCode) {\n        dict.push(dict[last].concat(dict[code][0]));\n      }\n    } else {\n      if (code !== dict.length) {\n        throw new Error('Invalid LZW code.');\n      }\n      dict.push(dict[last].concat(dict[last][0]));\n    }\n    output.push.apply(output, dict[code]);\n\n    if (dict.length === 1 << codeSize && codeSize < 12) {\n      // If we're at the last code and codeSize is 12, the next code will be a clearCode, and it'll be 12 bits long.\n      codeSize++;\n    }\n  }\n\n  // I don't know if this is technically an error, but some GIFs do it.\n  //if (Math.ceil(pos / 8) !== data.length) throw new Error('Extraneous LZW bytes.');\n  return output;\n};\n\n// The actual parsing; returns an object with properties.\nexport class ParseGif {\n  private _st: Stream = null;\n  private _handler: any = {};\n  private _transparentColor: Color = null;\n  public frames: Frame[] = [];\n  public images: HTMLImageElement[] = [];\n  public globalColorTable: any[] = [];\n  public checkBytes: number[] = [];\n\n  constructor(stream: Stream, color: Color = Color.Magenta) {\n    this._st = stream;\n    this._handler = {};\n    this._transparentColor = color;\n    this.parseHeader();\n    this.parseBlock();\n  }\n\n  // LZW (GIF-specific)\n  parseColorTable = (entries: any) => {\n    // Each entry is 3 bytes, for RGB.\n    const ct = [];\n    for (let i = 0; i < entries; i++) {\n      const rgb: number[] = this._st.readBytes(3);\n      const rgba =\n        '#' +\n        rgb\n          .map((x: any) => {\n            const hex = x.toString(16);\n            return hex.length === 1 ? '0' + hex : hex;\n          })\n          .join('');\n      ct.push(rgba);\n    }\n    return ct;\n  };\n\n  readSubBlocks = () => {\n    let size, data;\n    data = '';\n    do {\n      size = this._st.readByte();\n      data += this._st.read(size);\n    } while (size !== 0);\n    return data;\n  };\n\n  parseHeader = () => {\n    const hdr: any = {\n      sig: null,\n      ver: null,\n      width: null,\n      height: null,\n      colorRes: null,\n      globalColorTableSize: null,\n      gctFlag: null,\n      sorted: null,\n      globalColorTable: [],\n      bgColor: null,\n      pixelAspectRatio: null // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n    };\n\n    hdr.sig = this._st.read(3);\n    hdr.ver = this._st.read(3);\n    if (hdr.sig !== 'GIF') {\n      throw new Error('Not a GIF file.'); // XXX: This should probably be handled more nicely.\n    }\n\n    hdr.width = this._st.readUnsigned();\n    hdr.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    hdr.gctFlag = bits.shift();\n    hdr.colorRes = bitsToNum(bits.splice(0, 3));\n    hdr.sorted = bits.shift();\n    hdr.globalColorTableSize = bitsToNum(bits.splice(0, 3));\n\n    hdr.bgColor = this._st.readByte();\n    hdr.pixelAspectRatio = this._st.readByte(); // if not 0, aspectRatio = (pixelAspectRatio + 15) / 64\n\n    if (hdr.gctFlag) {\n      hdr.globalColorTable = this.parseColorTable(1 << (hdr.globalColorTableSize + 1));\n      this.globalColorTable = hdr.globalColorTable;\n    }\n    if (this._handler.hdr && this._handler.hdr(hdr)) {\n      this.checkBytes.push(this._handler.hdr);\n    }\n  };\n\n  parseExt = (block: any) => {\n    const parseGCExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 4\n\n      const bits = byteToBitArr(this._st.readByte());\n      block.reserved = bits.splice(0, 3); // Reserved; should be 000.\n      block.disposalMethod = bitsToNum(bits.splice(0, 3));\n      block.userInput = bits.shift();\n      block.transparencyGiven = bits.shift();\n\n      block.delayTime = this._st.readUnsigned();\n\n      block.transparencyIndex = this._st.readByte();\n\n      block.terminator = this._st.readByte();\n\n      if (this._handler.gce && this._handler.gce(block)) {\n        this.checkBytes.push(this._handler.gce);\n      }\n    };\n\n    const parseComExt = (block: any) => {\n      block.comment = this.readSubBlocks();\n      if (this._handler.com && this._handler.com(block)) {\n        this.checkBytes.push(this._handler.com);\n      }\n    };\n\n    const parsePTExt = (block: any) => {\n      this.checkBytes.push(this._st.readByte()); // Always 12\n      block.ptHeader = this._st.readBytes(12);\n      block.ptData = this.readSubBlocks();\n      if (this._handler.pte && this._handler.pte(block)) {\n        this.checkBytes.push(this._handler.pte);\n      }\n    };\n\n    const parseAppExt = (block: any) => {\n      const parseNetscapeExt = (block: any) => {\n        this.checkBytes.push(this._st.readByte()); // Always 3\n        block.unknown = this._st.readByte(); // ??? Always 1? What is this?\n        block.iterations = this._st.readUnsigned();\n        block.terminator = this._st.readByte();\n        if (this._handler.app && this._handler.app.NETSCAPE && this._handler.app.NETSCAPE(block)) {\n          this.checkBytes.push(this._handler.app);\n        }\n      };\n\n      const parseUnknownAppExt = (block: any) => {\n        block.appData = this.readSubBlocks();\n        // FIXME: This won't work if a handler wants to match on any identifier.\n        if (this._handler.app && this._handler.app[block.identifier] && this._handler.app[block.identifier](block)) {\n          this.checkBytes.push(this._handler.app[block.identifier]);\n        }\n      };\n\n      this.checkBytes.push(this._st.readByte()); // Always 11\n      block.identifier = this._st.read(8);\n      block.authCode = this._st.read(3);\n      switch (block.identifier) {\n        case 'NETSCAPE':\n          parseNetscapeExt(block);\n          break;\n        default:\n          parseUnknownAppExt(block);\n          break;\n      }\n    };\n\n    const parseUnknownExt = (block: any) => {\n      block.data = this.readSubBlocks();\n      if (this._handler.unknown && this._handler.unknown(block)) {\n        this.checkBytes.push(this._handler.unknown);\n      }\n    };\n\n    block.label = this._st.readByte();\n    switch (block.label) {\n      case 0xf9:\n        block.extType = 'gce';\n        parseGCExt(block);\n        break;\n      case 0xfe:\n        block.extType = 'com';\n        parseComExt(block);\n        break;\n      case 0x01:\n        block.extType = 'pte';\n        parsePTExt(block);\n        break;\n      case 0xff:\n        block.extType = 'app';\n        parseAppExt(block);\n        break;\n      default:\n        block.extType = 'unknown';\n        parseUnknownExt(block);\n        break;\n    }\n  };\n\n  parseImg = (img: any) => {\n    const deinterlace = (pixels: any, width: any) => {\n      // Of course this defeats the purpose of interlacing. And it's *probably*\n      // the least efficient way it's ever been implemented. But nevertheless...\n\n      const newPixels = new Array(pixels.length);\n      const rows = pixels.length / width;\n      const cpRow = (toRow: any, fromRow: any) => {\n        const fromPixels = pixels.slice(fromRow * width, (fromRow + 1) * width);\n        newPixels.splice.apply(newPixels, [toRow * width, width].concat(fromPixels));\n      };\n\n      const offsets = [0, 4, 2, 1];\n      const steps = [8, 8, 4, 2];\n\n      let fromRow = 0;\n      for (let pass = 0; pass < 4; pass++) {\n        for (let toRow = offsets[pass]; toRow < rows; toRow += steps[pass]) {\n          cpRow(toRow, fromRow);\n          fromRow++;\n        }\n      }\n\n      return newPixels;\n    };\n\n    img.leftPos = this._st.readUnsigned();\n    img.topPos = this._st.readUnsigned();\n    img.width = this._st.readUnsigned();\n    img.height = this._st.readUnsigned();\n\n    const bits = byteToBitArr(this._st.readByte());\n    img.lctFlag = bits.shift();\n    img.interlaced = bits.shift();\n    img.sorted = bits.shift();\n    img.reserved = bits.splice(0, 2);\n    img.lctSize = bitsToNum(bits.splice(0, 3));\n\n    if (img.lctFlag) {\n      img.lct = this.parseColorTable(1 << (img.lctSize + 1));\n    }\n\n    img.lzwMinCodeSize = this._st.readByte();\n\n    const lzwData = this.readSubBlocks();\n\n    img.pixels = lzwDecode(img.lzwMinCodeSize, lzwData);\n\n    if (img.interlaced) {\n      // Move\n      img.pixels = deinterlace(img.pixels, img.width);\n    }\n\n    this.frames.push(img);\n    this.arrayToImage(img);\n    if (this._handler.img && this._handler.img(img)) {\n      this.checkBytes.push(this._handler);\n    }\n  };\n\n  public parseBlock = () => {\n    const block = {\n      sentinel: this._st.readByte(),\n      type: ''\n    };\n    const blockChar = String.fromCharCode(block.sentinel);\n    switch (blockChar) {\n      case '!':\n        block.type = 'ext';\n        this.parseExt(block);\n        break;\n      case ',':\n        block.type = 'img';\n        this.parseImg(block);\n        break;\n      case ';':\n        block.type = 'eof';\n        if (this._handler.eof && this._handler.eof(block)) {\n          this.checkBytes.push(this._handler.eof);\n        }\n        break;\n      default:\n        throw new Error('Unknown block: 0x' + block.sentinel.toString(16));\n    }\n\n    if (block.type !== 'eof') {\n      this.parseBlock();\n    }\n  };\n\n  arrayToImage = (frame: Frame) => {\n    let count = 0;\n    const c = document.createElement('canvas');\n    c.id = count.toString();\n    c.width = frame.width;\n    c.height = frame.height;\n    count++;\n    const context = c.getContext('2d');\n    const pixSize = 1;\n    let y = 0;\n    let x = 0;\n    for (let i = 0; i < frame.pixels.length; i++) {\n      if (x % frame.width === 0) {\n        y++;\n        x = 0;\n      }\n      if (this.globalColorTable[frame.pixels[i]] === this._transparentColor.toHex()) {\n        context.fillStyle = `rgba(0, 0, 0, 0)`;\n      } else {\n        context.fillStyle = this.globalColorTable[frame.pixels[i]];\n      }\n\n      context.fillRect(x, y, pixSize, pixSize);\n      x++;\n    }\n    const img = new Image();\n    img.src = c.toDataURL();\n    this.images.push(img);\n  };\n}\n","import { Raster, RasterOptions } from './Raster';\n\nexport interface CircleOptions {\n  radius: number;\n}\n\n/**\n * A circle [[Graphic]] for drawing circles to the [[ExcaliburGraphicsContext]]\n */\nexport class Circle extends Raster {\n  private _radius: number = 0;\n  public get radius() {\n    return this._radius;\n  }\n  public set radius(value: number) {\n    this._radius = value;\n    this.width = this._radius * 2;\n    this.height = this._radius * 2;\n    this.flagDirty();\n  }\n  constructor(options: RasterOptions & CircleOptions) {\n    super(options);\n    this.radius = options.radius;\n    this.rasterize();\n  }\n\n  public clone(): Circle {\n    return new Circle({\n      radius: this.radius,\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.radius > 0) {\n      ctx.beginPath();\n      ctx.arc(this.radius, this.radius, this.radius, 0, Math.PI * 2);\n\n      if (this.color) {\n        ctx.fill();\n      }\n\n      if (this.strokeColor) {\n        ctx.stroke();\n      }\n    }\n  }\n}\n","import { Vector, vec } from '../Algebra';\nimport { Raster, RasterOptions } from './Raster';\n\nexport interface PolygonOptions {\n  points: Vector[];\n}\n\n/**\n * A polygon [[Graphic]] for drawing arbitrary polygons to the [[ExcaliburGraphicsContext]]\n */\nexport class Polygon extends Raster {\n  private _points: Vector[];\n  public get points(): Vector[] {\n    return this._points;\n  }\n  public set points(points: Vector[]) {\n    this._points = points;\n    const min = this.minPoint;\n    this.width = this._points.reduce((max, p) => Math.max(p.x, max), 0) - min.x;\n    this.height = this._points.reduce((max, p) => Math.max(p.y, max), 0) - min.y;\n    this.flagDirty();\n  }\n\n  public get minPoint() {\n    const minX = this._points.reduce((min, p) => Math.min(p.x, min), Infinity);\n    const minY = this._points.reduce((min, p) => Math.min(p.y, min), Infinity);\n    return vec(minX, minY);\n  }\n\n  constructor(options: RasterOptions & PolygonOptions) {\n    super(options);\n    this.points = options.points;\n    this.rasterize();\n  }\n\n  public clone(): Polygon {\n    return new Polygon({\n      points: this.points.map((p) => p.clone()),\n      ...this.cloneGraphicOptions(),\n      ...this.cloneRasterOptions()\n    });\n  }\n\n  execute(ctx: CanvasRenderingContext2D): void {\n    if (this.points && this.points.length) {\n      ctx.beginPath();\n      // Iterate through the supplied points and construct a 'polygon'\n      const min = this.minPoint.negate();\n      const firstPoint = this.points[0].add(min);\n      ctx.moveTo(firstPoint.x, firstPoint.y);\n      this.points.forEach((point) => {\n        ctx.lineTo(point.x + min.x, point.y + min.y);\n      });\n      ctx.lineTo(firstPoint.x, firstPoint.y);\n      ctx.closePath();\n      if (this.color) {\n        ctx.fill();\n      }\n      if (this.strokeColor) {\n        ctx.stroke();\n      }\n    }\n  }\n}\n","import { obsolete } from './Decorators';\n\n/**\n * A sorted list implementation. NOTE: this implementation is not self-balancing\n * @deprecated WIll be removed in v0.26.0 Use built in JS array.sort\n */\n@obsolete({message: 'Will be removed in excalibur v0.26.0', alternateMethod: 'Use built in JS array.sort'})\nexport class SortedList<T> {\n  private _getComparable: (item: T) => number;\n  private _root: BinaryTreeNode<T>;\n\n  constructor(getComparable: (item: T) => number) {\n    this._getComparable = getComparable;\n  }\n\n  public find(element: T): boolean {\n    return this._find(this._root, element);\n  }\n\n  private _find(node: BinaryTreeNode<T>, element: any): boolean {\n    if (node == null) {\n      return false;\n    } else if (this._getComparable(element) === node.getKey()) {\n      if (node.getData().indexOf(element) > -1) {\n        return true;\n      } else {\n        return false;\n      }\n    } else if (this._getComparable(element) < node.getKey()) {\n      return this._find(node.getLeft(), element);\n    } else {\n      return this._find(node.getRight(), element);\n    }\n  }\n\n  // returns the array of elements at a specific key value\n  public get(key: number): any[] {\n    return this._get(this._root, key);\n  }\n\n  private _get(node: BinaryTreeNode<T>, key: number): any[] {\n    if (node == null) {\n      return [];\n    } else if (key === node.getKey()) {\n      return node.getData();\n    } else if (key < node.getKey()) {\n      return this._get(node.getLeft(), key);\n    } else {\n      return this._get(node.getRight(), key);\n    }\n  }\n\n  public add(element: T): boolean {\n    if (this._root == null) {\n      this._root = new BinaryTreeNode(this._getComparable(element), [element], null, null);\n      return true;\n    } else {\n      return this._insert(this._root, element);\n    }\n  }\n\n  private _insert(node: BinaryTreeNode<T>, element: T): boolean {\n    if (node != null) {\n      if (this._getComparable(element) === node.getKey()) {\n        if (node.getData().indexOf(element) > -1) {\n          return false; // the element we're trying to insert already exists\n        } else {\n          node.getData().push(element);\n          return true;\n        }\n      } else if (this._getComparable(element) < node.getKey()) {\n        if (node.getLeft() == null) {\n          node.setLeft(new BinaryTreeNode(this._getComparable(element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getLeft(), element);\n        }\n      } else {\n        if (node.getRight() == null) {\n          node.setRight(new BinaryTreeNode(this._getComparable(element), [element], null, null));\n          return true;\n        } else {\n          return this._insert(node.getRight(), element);\n        }\n      }\n    }\n    return false;\n  }\n\n  public removeByComparable(element: T): void {\n    this._root = this._remove(this._root, element);\n  }\n\n  private _remove(node: BinaryTreeNode<T>, element: T): BinaryTreeNode<T> {\n    if (node == null) {\n      return null;\n    } else if (this._getComparable(element) === node.getKey()) {\n      const elementIndex = node.getData().indexOf(element);\n      // if the node contains the element, remove the element\n      if (elementIndex > -1) {\n        node.getData().splice(elementIndex, 1);\n        // if we have removed the last element at this node, remove the node\n        if (node.getData().length === 0) {\n          // if the node is a leaf\n          if (node.getLeft() == null && node.getRight() == null) {\n            return null;\n          } else if (node.getLeft() == null) {\n            return node.getRight();\n          } else if (node.getRight() == null) {\n            return node.getLeft();\n          }\n          // if node has 2 children\n          const temp = this._findMinNode(node.getRight());\n          node.setKey(temp.getKey());\n          node.setData(temp.getData());\n          node.setRight(this._cleanup(node.getRight(), temp)); //\"cleanup nodes\" (move them up recursively)\n          return node;\n        } else {\n          // this prevents the node from being removed since it still contains elements\n          return node;\n        }\n      }\n    } else if (this._getComparable(element) < node.getKey()) {\n      node.setLeft(this._remove(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._remove(node.getRight(), element));\n      return node;\n    }\n    return null;\n  }\n\n  // called once we have successfully removed the element we wanted, recursively corrects the part of the tree below the removed node\n  private _cleanup(node: BinaryTreeNode<T>, element: BinaryTreeNode<T>): BinaryTreeNode<T> {\n    const comparable = element.getKey();\n    if (node == null) {\n      return null;\n    } else if (comparable === node.getKey()) {\n      // if the node is a leaf\n      if (node.getLeft() == null && node.getRight() == null) {\n        return null;\n      } else if (node.getLeft() == null) {\n        return node.getRight();\n      } else if (node.getRight() == null) {\n        return node.getLeft();\n      }\n      // if node has 2 children\n      const temp = this._findMinNode(node.getRight());\n      node.setKey(temp.getKey());\n      node.setData(temp.getData());\n\n      node.setRight(this._cleanup(node.getRight(), temp));\n      return node;\n    } else if (element.getKey() < node.getKey()) {\n      node.setLeft(this._cleanup(node.getLeft(), element));\n      return node;\n    } else {\n      node.setRight(this._cleanup(node.getRight(), element));\n      return node;\n    }\n  }\n\n  private _findMinNode(node: BinaryTreeNode<T>): BinaryTreeNode<T> {\n    let current = node;\n    while (current.getLeft() != null) {\n      current = current.getLeft();\n    }\n    return current;\n  }\n\n  public list(): Array<T> {\n    const results = new Array<T>();\n    this._list(this._root, results);\n    return results;\n  }\n\n  private _list(treeNode: BinaryTreeNode<T>, results: Array<T>): void {\n    if (treeNode != null) {\n      this._list(treeNode.getLeft(), results);\n      treeNode.getData().forEach((element) => {\n        results.push(element);\n      });\n      this._list(treeNode.getRight(), results);\n    }\n  }\n}\n\n/**\n * A tree node part of [[SortedList]]\n * @deprecated Will be removed in v0.26.0\n */\n@obsolete({message: 'Will be removed in excalibur v0.26.0'})\nexport class BinaryTreeNode<T> {\n  private _key: number;\n  private _data: Array<T>;\n  private _left: BinaryTreeNode<T>;\n  private _right: BinaryTreeNode<T>;\n\n  constructor(key: number, data: Array<T>, left: BinaryTreeNode<T>, right: BinaryTreeNode<T>) {\n    this._key = key;\n    this._data = data;\n    this._left = left;\n    this._right = right;\n  }\n\n  public getKey(): number {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n\n  public getData(): T[] {\n    return this._data;\n  }\n\n  public setData(data: T[]) {\n    this._data = data;\n  }\n\n  public getLeft(): BinaryTreeNode<T> {\n    return this._left;\n  }\n\n  public setLeft(left: BinaryTreeNode<T>) {\n    this._left = left;\n  }\n\n  public getRight(): BinaryTreeNode<T> {\n    return this._right;\n  }\n\n  public setRight(right: BinaryTreeNode<T>) {\n    this._right = right;\n  }\n}\n\n/**\n * Mock element for testing\n *\n * @internal\n * @deprecated Will be removed in v0.26.0\n */\nexport class MockedElement {\n  private _key: number = 0;\n\n  constructor(key: number) {\n    this._key = key;\n  }\n\n  public getTheKey() {\n    return this._key;\n  }\n\n  public setKey(key: number) {\n    this._key = key;\n  }\n}\n","// Promises/A+ Spec http://promises-aplus.github.io/promises-spec/\n\nimport { obsolete } from './Util/Decorators';\n\n/**\n * Valid states for a promise to be in\n * @deprecated Will be removed in v0.26.0\n */\nexport enum PromiseState {\n  Resolved,\n  Rejected,\n  Pending\n}\n\n/**\n * @deprecated Will be removed in v0.26.0\n */\nexport interface PromiseLike<T> {\n  then(successCallback?: (value?: T) => any, rejectCallback?: (value?: T) => any): PromiseLike<T>;\n  error(rejectCallback?: (value?: any) => any): PromiseLike<T>;\n\n  //Cannot define static methods on interfaces\n  //wrap<T>(value?: T): IPromise<T>;\n\n  resolve(value?: T): PromiseLike<T>;\n  reject(value?: any): PromiseLike<T>;\n\n  state(): PromiseState;\n}\n\n/**\n * Promises are used to do asynchronous work and they are useful for\n * creating a chain of actions. In Excalibur they are used for loading,\n * sounds, animation, actions, and more.\n * @deprecated Will be removed in v0.26.0\n */\n@obsolete({\n  message: 'ex.Promises are being replaced by native browser promises in v0.26.0',\n  alternateMethod: 'Use browser native promises'\n})\nexport class Promise<T> implements PromiseLike<T> {\n  private _state: PromiseState = PromiseState.Pending;\n  private _value: T;\n  private _successCallbacks: { (value?: T): any }[] = [];\n  private _rejectCallback: (value?: any) => any = () => {\n    return;\n  };\n  private _errorCallback: (value?: any) => any;\n\n  /**\n   * Create and resolve a Promise with an optional value\n   * @param value  An optional value to wrap in a resolved promise\n   * @deprecated Use browser native promises\n   */\n  public static resolve<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().resolve(value);\n\n    return promise;\n  }\n\n  /**\n   * Create and reject a Promise with an optional value\n   * @param value  An optional value to wrap in a rejected promise\n   * @deprecated Use browser native promises\n   */\n  public static reject<T>(value?: T): Promise<T> {\n    const promise = new Promise<T>().reject(value);\n\n    return promise;\n  }\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   * @deprecated Use browser native promises\n   */\n  public static join<T>(promises: Promise<T>[]): Promise<T>;\n\n  /**\n   * Returns a new promise that resolves when all the promises passed to it resolve, or rejects\n   * when at least 1 promise rejects.\n   * @deprecated Use browser native promises\n   */\n  public static join<T>(...promises: Promise<T>[]): Promise<T>;\n\n  public static join<T>() {\n    let promises: Promise<T>[] = [];\n\n    if (arguments.length > 0 && !Array.isArray(arguments[0])) {\n      for (let _i = 0; _i < arguments.length; _i++) {\n        promises[_i - 0] = arguments[_i];\n      }\n    } else if (arguments.length === 1 && Array.isArray(arguments[0])) {\n      promises = arguments[0];\n    }\n\n    const joinedPromise = new Promise<T>();\n    if (!promises || !promises.length) {\n      return joinedPromise.resolve();\n    }\n\n    const total = promises.length;\n    let successes = 0;\n    let rejects = 0;\n    const errors: any = [];\n\n    promises.forEach((p) => {\n      p.then(\n        () => {\n          successes += 1;\n          if (successes === total) {\n            joinedPromise.resolve();\n          } else if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        },\n        () => {\n          rejects += 1;\n          if (successes + rejects + errors.length === total) {\n            joinedPromise.reject(errors);\n          }\n        }\n      ).error((e) => {\n        errors.push(e);\n        if (errors.length + successes + rejects === total) {\n          joinedPromise.reject(errors);\n        }\n      });\n    });\n\n    return joinedPromise;\n  }\n\n  /**\n   * Chain success and reject callbacks after the promise is resolved\n   * @param successCallback  Call on resolution of promise\n   * @param rejectCallback   Call on rejection of promise\n   * @deprecated Use browser native promises\n   */\n  public then(successCallback?: (value?: T) => any, rejectCallback?: (value?: any) => any) {\n    if (successCallback) {\n      this._successCallbacks.push(successCallback);\n\n      // If the promise is already resolved call immediately\n      if (this.state() === PromiseState.Resolved) {\n        try {\n          successCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n    if (rejectCallback) {\n      this._rejectCallback = rejectCallback;\n\n      // If the promise is already rejected call immediately\n      if (this.state() === PromiseState.Rejected) {\n        try {\n          rejectCallback.call(this, this._value);\n        } catch (e) {\n          this._handleError(e);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**\n   * Add an error callback to the promise\n   * @param errorCallback  Call if there was an error in a callback\n   * @deprecated Use browser native promises\n   */\n  public error(errorCallback?: (value?: any) => any) {\n    if (errorCallback) {\n      this._errorCallback = errorCallback;\n    }\n    return this;\n  }\n\n  /**\n   * Resolve the promise and pass an option value to the success callbacks\n   * @param value  Value to pass to the success callbacks\n   * @deprecated Use browser native promises\n   */\n  public resolve(value?: T): Promise<T> {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Resolved;\n        this._successCallbacks.forEach((cb) => {\n          cb.call(this, this._value);\n        });\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot resolve a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Reject the promise and pass an option value to the reject callbacks\n   * @param value  Value to pass to the reject callbacks\n   * @deprecated Use browser native promises\n   */\n  public reject(value?: any) {\n    if (this._state === PromiseState.Pending) {\n      this._value = value;\n      try {\n        this._state = PromiseState.Rejected;\n        this._rejectCallback.call(this, this._value);\n      } catch (e) {\n        this._handleError(e);\n      }\n    } else {\n      throw new Error('Cannot reject a promise that is not in a pending state!');\n    }\n    return this;\n  }\n\n  /**\n   * Inspect the current state of a promise\n   * @deprecated Use browser native promises\n   */\n  public state(): PromiseState {\n    return this._state;\n  }\n\n  private _handleError(e: any) {\n    if (this._errorCallback) {\n      this._errorCallback.call(this, e);\n    } else {\n      // rethrow error\n      throw e;\n    }\n  }\n}\n","/**\n * The current Excalibur version string\n * @description `process.env.__EX_VERSION` gets replaced by Webpack on build\n */\nexport const EX_VERSION = process.env.__EX_VERSION;\nimport { polyfill } from './Polyfill';\npolyfill();\n\n// This file is used as the bundle entry point and exports everything\n// that will be exposed as the `ex` global variable.\nexport * from './Flags';\nexport * from './Engine';\nexport * from './Screen';\nexport { Actor, ActorArgs } from './Actor';\nexport { CollisionType } from './Collision/CollisionType';\nexport * from './Algebra';\nexport * from './Camera';\nexport * from './Class';\nexport * from './Configurable';\nexport * from './Debug';\nexport * from './EventDispatcher';\nexport * from './Events/MediaEvents';\nexport * from './Events';\nexport { Label } from './Label';\nexport { FontStyle, FontUnit, TextAlign, BaseAlign } from './Graphics/FontCommon';\nexport * from './Loader';\nexport { Particle, ParticleEmitter, ParticleArgs, ParticleEmitterArgs, EmitterType } from './Particles';\nexport * from './Physics';\nexport * from './Scene';\nexport { TileMap, Cell, TileMapArgs, CellArgs } from './TileMap';\nexport * from './Timer';\nexport * from './Trigger';\nexport * from './ScreenElement';\n\nexport * from './Actions/Index';\nexport * from './Collision/Index';\nexport * from './Drawing/Index';\nexport * from './Interfaces/Index';\nexport * from './Math/Index';\nexport * from './PostProcessing/Index';\nexport * from './Resources/Index';\n\nexport * from './EntityComponentSystem/index';\n\n// ex.Graphics namespace\nimport * as graphics from './Graphics/index';\nexport { graphics as Graphics };\n\n// ex.Events namespace\nimport * as events from './Events';\nexport { events as Events };\n\n// ex.Input namespace\nimport * as input from './Input/Index';\nexport { input as Input };\n\n// ex.Traits namespace\nimport * as traits from './Traits/Index';\nexport { traits as Traits };\n\n// ex.Util namespaces\nimport * as util from './Util/Index';\nexport { util as Util };\n\nexport * from './Util/Browser';\nexport * from './Util/Decorators';\nexport * from './Util/Detector';\nexport * from './Util/CullingBox';\nexport * from './Util/EasingFunctions';\nexport * from './Util/Log';\nexport * from './Util/SortedList';\nexport * from './Util/Pool';\n\n// ex.Deprecated\nexport * from './Promises';\n// import * as deprecated from './Deprecated';\n// export { deprecated as Deprecated };\n// export * from './Deprecated';\n","\"use strict\";\n\n/* globals document:readonly */\nvar bundleURL = null;\n\nfunction getBundleURLCached() {\n  if (!bundleURL) {\n    bundleURL = getBundleURL();\n  }\n\n  return bundleURL;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      return getBaseURL(matches[0]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  let matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","\"use strict\";\n\nvar resolve = require('./bundle-manifest').resolve;\n\nmodule.exports = function (fromId, toId) {\n  return relative(dirname(resolve(fromId)), resolve(toId));\n};\n\nfunction dirname(_filePath) {\n  if (_filePath === '') {\n    return '.';\n  }\n\n  var filePath = _filePath[_filePath.length - 1] === '/' ? _filePath.slice(0, _filePath.length - 1) : _filePath;\n  var slashIndex = filePath.lastIndexOf('/');\n  return slashIndex === -1 ? '.' : filePath.slice(0, slashIndex);\n}\n\nfunction relative(from, to) {\n  if (from === to) {\n    return '';\n  }\n\n  var fromParts = from.split('/');\n\n  if (fromParts[0] === '.') {\n    fromParts.shift();\n  }\n\n  var toParts = to.split('/');\n\n  if (toParts[0] === '.') {\n    toParts.shift();\n  } // Find where path segments diverge.\n\n\n  var i;\n  var divergeIndex;\n\n  for (i = 0; (i < toParts.length || i < fromParts.length) && divergeIndex == null; i++) {\n    if (fromParts[i] !== toParts[i]) {\n      divergeIndex = i;\n    }\n  } // If there are segments from \"from\" beyond the point of divergence,\n  // return back up the path to that point using \"..\".\n\n\n  var parts = [];\n\n  for (i = 0; i < fromParts.length - divergeIndex; i++) {\n    parts.push('..');\n  } // If there are segments from \"to\" beyond the point of divergence,\n  // continue using the remaining segments.\n\n\n  if (toParts.length > divergeIndex) {\n    parts.push.apply(parts, toParts.slice(divergeIndex));\n  }\n\n  return parts.join('/');\n}\n\nmodule.exports._dirname = dirname;\nmodule.exports._relative = relative;","module.exports = require('./bundle-url').getBundleURL() + require('./relative-path')(\"2zX4k\", \"nuBan\")","import { Graphics } from \"excalibur\";\nimport sword from \"./images/sword.png\"; // for parcelv2 this is configured in the .parcelrc\n\nlet Resources = {\n  Sword: new Graphics.ImageSource(sword)\n};\n\nexport { Resources };","interface State {\n    currentPlanet: string;\n}\n\nexport class StateManager {\n    private static instance: StateManager;\n\n    private state: State = {currentPlanet: null};\n\n    private constructor() {}\n\n    public static getInstance() {\n        if(!StateManager.instance) {\n            StateManager.instance = new StateManager();\n        }\n        return(StateManager.instance);\n    }    \n    \n    public getState() {\n        return(this.state);\n    }\n\n    public setCurrentPlanet(p: string) {\n        this.state = {currentPlanet: p};\n    }\n\n\n}","import { Scene } from \"excalibur\";\nimport { StateManager } from \"../state/StateManager\";\n\nexport class OrbitViewScene extends Scene {\n  // Used when adding the scene to the game\n  public key: string;\n\n  static getViewKey = () => \"orbitviewscene\";\n\n  constructor() {\n    super();\n    this.key = \"orbitviewscene\";    \n  }\n\n  onActivate(oldScene: Scene, newScene: Scene) {\n    const state = StateManager.getInstance().getState();\n    console.log(`→ ${this.key} - Planet is : ${state.currentPlanet}`);\n  }\n}\n","import { Actor, ActorArgs, GameEvent, Graphics, Random, Shape } from \"excalibur\";\nimport { Game } from \"../main\";\nimport { Planet } from \"../models/Planet\";\nimport { OrbitViewScene } from \"../scenes/OrbitViewScene\";\nimport { StateManager } from \"../state/StateManager\";\n\n\nexport class ToOrbitViewEvent extends GameEvent<PlanetActor>{}\n\nexport interface PlanetActorArgs extends ActorArgs {\n  planet: Planet;\n  radius: number;\n}\n\nexport class PlanetActor extends Actor {\n  public planet: Planet;\n  public radius: number;\n  public name: string;\n  public game: Game;\n\n  constructor(opts: PlanetActorArgs, game: Game) {\n    super(opts);\n    this.planet = this.planet;\n    this.name = this.planet.name;\n    this.body.collider.shape = Shape.Circle(this.radius);\n\n    this.game = game;\n  }\n\n  toString() {\n    return `Planet ${this.name}`;\n  }\n\n  onInitialize() {\n    const planetShape = new Graphics.Circle({\n      radius: this.radius,\n      color: this.color,\n    });\n\n    this.graphics.add(planetShape);\n\n    this.enableCapturePointer = true;\n\n    this.on(\"pointerenter\", () => {\n      //console.log(this.toString());\n    });\n\n    this.on(\"pointerup\", () => {\n      StateManager.getInstance().setCurrentPlanet(this.name);\n      this.game.goToScene(OrbitViewScene.getViewKey());\n    });\n  }\n}\n","import { Scene } from \"excalibur\";\n\nexport class SystemViewScene extends Scene {\n    // Used when adding the scene to the game\n    public key: string;\n\n    constructor() {\n        super();\n        this.key = \"systemviewscene\";\n    }\n}","import { randomName, randomType } from \"../utils/planetRandomness\";\n\nexport enum PlanetTypes {\n    Big,\n    Small,\n    Medium\n}\n\nexport class Planet {\n    public name: string;\n    public type: PlanetTypes;\n\n    public static typeToColor() {\n\n    }\n    \n    constructor() {\n        this.name = randomName();\n        this.type = randomType();\n    }\n}","import { Random } from \"excalibur\";\nimport { PlanetTypes } from \"../models/Planet\";\n\nexport const randomName = (): string => {\n    const rand = new Random();\n    const cons = [\n      \"b\",\n      \"c\",\n      \"d\",\n      \"f\",\n      \"g\",\n      \"h\",\n      \"j\",\n      \"k\",\n      \"l\",\n      \"m\",\n      \"n\",\n      \"p\",\n      \"q\",\n      \"r\",\n      \"s\",\n      \"t\",\n      \"v\",\n      \"w\",\n      \"x\",\n      \"z\",\n    ];\n    const vows = [\"a\", \"e\", \"i\", \"o\", \"u\", \"y\"];\n    const len = rand.integer(4, 10);\n    let name = \"\";\n    for (let i = 0; i < len; i++) {\n      const isVowel = rand.bool(0.4);\n      if (isVowel) {\n        name = name + rand.pickOne(vows);\n      } else {\n        name = name + rand.pickOne(cons);\n      }\n    }\n    return name;\n  };\n\n  export const randomType = () => {\n    const rand = new Random();\n    const pick = rand.integer(0,2);\n    if (pick == 0) {\n      return PlanetTypes.Big;\n    } else {\n      return PlanetTypes.Small;\n    }\n  }","import { Random } from \"excalibur\";\nimport { Planet } from \"./Planet\";\n\nexport class PlanetarySystem {\n    public planets: Planet[] = [];\n\n    constructor() {\n        const rand = new Random();\n        const numberOfPlanets = rand.integer(1, 5);\n\n        for (let i = 1; i < numberOfPlanets + 1; i++) {\n            const planet = new Planet();\n            this.planets.push(planet);\n        }\n    }\n\n    getPlanets(): Planet[] {\n        return this.planets;\n    }\n}","import { Actor, ActorArgs, Color, Graphics, vec } from \"excalibur\";\nimport { Ship } from \"../models/Ship\";\n\nexport interface ShipActorArgs extends ActorArgs {\n    ship: Ship;\n}\n\nexport class ShipActor extends Actor {\n  constructor(opts: ShipActorArgs) {\n    super(opts);\n  }\n\n  onInitialize() {\n    const shipShape = new Graphics.GraphicsGroup({\n      members: [\n        {\n          graphic: new Graphics.Polygon({\n            points: [vec(10 * 5, 0), vec(0, 20 * 5), vec(20 * 5, 20 * 5)],\n            color: Color.LightGray\n          }),\n          pos: vec(50, 50),\n        },\n      ],\n    });\n    \n    this.graphics.add(shipShape);\n  }\n}\n","export class Ship {\n    \n}","import {\n  Actor,\n  ActorArgs,\n  Color,\n  DisplayMode,\n  Engine,\n  GameEvent,\n  Graphics,\n  Input,\n  Label,\n  Loader,\n  Random,\n  vec,\n  Vector,\n} from \"excalibur\";\nimport { Resources } from \"./resources\";\nimport {\n  PlanetActor,\n  PlanetActorArgs,\n  ToOrbitViewEvent,\n} from \"./actors/PlanetActor\";\nimport { SystemViewScene } from \"./scenes/SystemViewScene\";\nimport { OrbitViewScene } from \"./scenes/OrbitViewScene\";\nimport { Planet } from \"./models/Planet\";\nimport { PlanetarySystem } from \"./models/PlanetarySystem\";\nimport { ShipActor } from \"./actors/ShipActor\";\nimport { Ship } from \"./models/Ship\";\n\nexport class Game extends Engine {\n  constructor() {\n    super({ displayMode: DisplayMode.Fill, backgroundColor: Color.Black });\n  }\n\n  initialize() {\n    // ------ UI\n    const planetsInfo = new Label({ text: \"info\", pos: new Vector(100, 10) });\n    planetsInfo.color = Color.fromHex(\"#81C7B8\");\n    this.add(planetsInfo);\n\n    // ----- Starting Ship\n    const ship = new Ship();\n\n    // ----- Starting System\n    const startingSystem = new PlanetarySystem();\n\n    // ----- Planets\n    const systemView = new SystemViewScene();\n\n    planetsInfo.text =\n      `This system has ${startingSystem.getPlanets().length} planets`;\n\n    systemView.add(planetsInfo);\n\n    const rand = new Random();\n\n    for (const [index, planet] of startingSystem.getPlanets().entries()) {\n      const planetActor = new PlanetActor(\n        {\n          planet: planet,\n          radius: rand.integer(10, 100),\n          pos: new Vector(this.canvasWidth * 2 / 3, 150 * (index + 1)),\n          color: rand.pickOne([\n            Color.Orange,\n            Color.Gray,\n            Color.Red,\n            Color.Rose,\n            Color.Violet,\n            Color.Green,\n            Color.DarkGray,\n          ]),\n        },\n        this,\n      );\n\n      systemView.add(planetActor);\n    }\n\n    // ----- Ship\n    const shipActor = new ShipActor({\n      pos: vec(this.canvasWidth * 1 / 3, 100),\n      ship: ship,\n    });\n    systemView.add(shipActor);\n\n    const orbitView = new OrbitViewScene();\n\n    this.addScene(systemView.key, systemView);\n    this.addScene(orbitView.key, orbitView);\n\n    // ----- Subscribing to events\n    this.on(\"toorbitview\", (e) => {\n      // this doesn't work\n      console.log(\"orbit view event\", e);\n      console.log(e.target);\n      e.target.goToScene(orbitView.key);\n    });\n\n    // ----- Starting\n    const loader = new Loader([Resources.Sword]);\n    this.start(loader).then(() => {\n      this.goToScene(systemView.key);\n    });\n  }\n}\n\nexport const game = new Game();\n\n// game.toggleDebug();\n\n//game.input.pointers.on(\"down\", e => game.goToScene(\"orbitviewscene\")); // this works\n\ngame.initialize();\n"],"names":["$7d806a7a603c235ec027b73d847f4d95$var$mapping","$7d806a7a603c235ec027b73d847f4d95$export$357eb1b4f03c1402","pairs","keys","Object","i","length","$7d806a7a603c235ec027b73d847f4d95$export$40339995e8a21591","id","resolved","Error","parcelRequire","register","JSON","parse","root","factory","self","path","module","exports","Array","Function","it","TypeError","String","isObject","wellKnownSymbol","create","definePropertyModule","UNSCOPABLES","ArrayPrototype","prototype","undefined","f","configurable","value","key","toObject","toAbsoluteIndex","toLength","min","Math","copyWithin","target","start","O","len","to","from","end","arguments","count","inc","argumentsLength","index","endPos","$forEach","forEach","STRICT_METHOD","callbackfn","bind","callWithSafeIterationClosing","isArrayIteratorMethod","createProperty","getIteratorMethod","arrayLike","result","step","iterator","next","C","this","mapfn","mapping","iteratorMethod","call","done","toIndexedObject","createMethod","IS_INCLUDES","$this","el","fromIndex","includes","indexOf","IndexedObject","arraySpeciesCreate","push","TYPE","IS_MAP","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","that","specificCreate","boundFunction","map","filter","some","every","find","findIndex","filterOut","toInteger","arrayMethodIsStrict","$lastIndexOf","lastIndexOf","NEGATIVE_ZERO","FORCED","searchElement","apply","fails","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","argument","method","aFunction","IS_RIGHT","memo","left","right","isArray","originalArray","anObject","iteratorClose","fn","ENTRIES","error","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","return","exec","SKIP_CLOSING","ITERATION_SUPPORT","object","toString","slice","TO_STRING_TAG_SUPPORT","classofRaw","TO_STRING_TAG","CORRECT_ARGUMENTS","tag","callee","has","ownKeys","getOwnPropertyDescriptorModule","source","defineProperty","getOwnPropertyDescriptor","F","getPrototypeOf","IteratorPrototype","createPropertyDescriptor","setToStringTag","Iterators","returnThis","IteratorConstructor","NAME","DESCRIPTORS","bitmap","enumerable","writable","toPrimitive","propertyKey","$","createIteratorConstructor","setPrototypeOf","createNonEnumerableProperty","redefine","IS_PURE","IteratorsCore","BUGGY_SAFARI_ITERATORS","Iterable","DEFAULT","IS_SET","CurrentIteratorPrototype","methods","KEY","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","entries","name","values","proto","forced","wrappedWellKnownSymbolModule","Symbol","get","global","document","EXISTS","createElement","classof","process","getBuiltIn","match","version","userAgent","versions","v8","split","setGlobal","copyConstructorProperties","isForced","options","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","stat","noTargetGet","sham","flattenIntoArray","original","sourceLen","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","isExtensible","preventExtensions","a","b","c","factories","construct","argsLength","args","list","join","partArgs","concat","variable","namespace","check","globalThis","window","g","hasOwnProperty","hasOwn","propertyIsEnumerable","store","functionToString","inspectSource","hiddenKeys","uid","FREEZING","METADATA","setMetadata","objectID","weakData","meta","REQUIRED","fastKey","getWeakData","onFreeze","set","NATIVE_WEAK_MAP","objectHas","shared","sharedKey","WeakMap","state","wmget","wmhas","wmset","metadata","facade","STATE","enforce","getterFor","type","arg","replacement","feature","detection","data","normalize","POLYFILL","NATIVE","string","replace","toLowerCase","Result","stopped","iterable","unboundFunction","iterFn","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","returnMethod","PrototypeOfArrayIteratorPrototype","arrayIterator","NEW_ITERATOR_PROTOTYPE","test","getOwnPropertySymbols","symbol","objectKeys","getOwnPropertySymbolsModule","propertyIsEnumerableModule","$assign","assign","A","B","chr","T","S","j","activeXDocument","defineProperties","enumBugKeys","html","documentCreateElement","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObject","domain","ActiveXObject","iframeDocument","iframe","write","close","temp","parentWindow","style","display","appendChild","src","contentWindow","open","Properties","IE8_DOM_DEFINE","$defineProperty","P","Attributes","$getOwnPropertyDescriptor","$getOwnPropertyNames","windowNames","getOwnPropertyNames","internalObjectKeys","CORRECT_PROTOTYPE_GETTER","ObjectPrototype","names","$propertyIsEnumerable","NASHORN_BUG","1","V","webkit","random","__defineSetter__","aPossiblePrototype","setter","CORRECT_SETTER","__proto__","TO_ENTRIES","getOwnPropertyNamesModule","InternalStateModule","getInternalState","enforceInternalState","TEMPLATE","unsafe","simple","is","x","y","CONSTRUCTOR_NAME","Constructor","TAG","mode","copyright","requireObjectCoercible","CONVERT_TO_STRING","pos","first","second","position","size","charCodeAt","charAt","codeAt","max","integer","ceil","floor","isNaN","input","PREFERRED_STRING","val","valueOf","postfix","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","WellKnownSymbolsStore","createWellKnownSymbol","withoutSetter","arrayMethodHasSpeciesSupport","IS_CONCAT_SPREADABLE","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","k","E","n","addToUnscopables","$every","fill","$filter","$findIndex","SKIPS_HOLES","$find","flatMap","flat","depthArg","checkCorrectnessOfIteration","$includes","$indexOf","nativeIndexOf","defineIterator","setInternalState","iterated","kind","Arguments","nativeJoin","ES3_STRINGS","separator","$map","of","$reduceRight","CHROME_VERSION","IS_NODE","reduceRight","$reduce","reduce","nativeReverse","reverse","HAS_SPECIES_SUPPORT","nativeSlice","fin","$some","nativeSort","sort","FAILS_ON_UNDEFINED","FAILS_ON_NULL","comparefn","setSpecies","splice","deleteCount","insertCount","actualDeleteCount","actualStart","HAS_INSTANCE","FunctionPrototype","FunctionPrototypeToString","nameRE","__defineGetter__","getter","$entries","$freeze","freeze","iterate","fromEntries","obj","v","nativeGetOwnPropertyDescriptor","FAILS_ON_PRIMITIVES","getOwnPropertyDescriptors","nativeGetPrototypeOf","$isExtensible","$isFrozen","isFrozen","$isSealed","isSealed","nativeKeys","__lookupGetter__","desc","__lookupSetter__","$preventExtensions","$seal","seal","$values","Reflect","point","nativeObjectCreate","getOwnPropertyNamesExternal","defineWellKnownSymbol","HIDDEN","TO_PRIMITIVE","$Symbol","$stringify","nativeDefineProperty","nativeGetOwnPropertyNames","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","QObject","USE_SETTER","findChild","setSymbolDescriptor","ObjectPrototypeDescriptor","wrap","description","isSymbol","$defineProperties","properties","$getOwnPropertySymbols","IS_OBJECT_PROTOTYPE","for","keyFor","sym","useSetter","useSimple","stringify","replacer","space","$replacer","___CSS_LOADER_EXPORT___","r97","sources","mappings","sourcesContent","sourceRoot","o","cssWithMappingToString","item","modules","mediaQuery","dedupe","alreadyImportedModules","_i","_arrayLikeToArray","arr","arr2","_item","_s","_e","_arr","_n","_d","err","minLen","_slicedToArray","cssMapping","btoa","base64","unescape","encodeURIComponent","sourceMapping","sourceURLs","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","__esModule","default","t1","d","definition","e","prop","r","toStringTag","Experiments","Legacy","LogLevel","Side","polyfill","audioContext","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","callback","setInterval","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","AudioContext","webkitAudioContext","replaceMe","decodeAudioData","arrayBuffer","Promise","resolve","reject","mozAudioContext","msAudioContext","oAudioContext","devicePixelRatio","WebGL","LegacyDrawing","Flags","_FROZEN","_FLAGS","flagName","p","t9","Debug","Info","Warn","Fatal","Logger","_appenders","defaultLevel","_INSTANCE","addAppender","ConsoleAppender","appender","clearAppenders","_log","level","log","debug","info","warn","fatal","console","consoleArgs","unshift","ScreenAppender","width","height","_messages","_canvas","innerWidth","innerHeight","_ctx","getContext","body","message","clearRect","opacity","fillStyle","toFixed","fillText","Random","seed","_lowerMask","_upperMask","_w","_m","_a","_u","_b","_t","_c","_l","_f","_mt","Date","now","s","_index","_twist","mag01","nextInt","floating","bool","likelihood","pickOne","pickSet","numPicks","allowDuplicates","_pickSetWithDuplicates","_pickSetWithoutDuplicates","currentPick","tempArray","shuffle","swap","randomIndex","range","d4","d6","d8","d10","d12","d20","None","t61","Top","Bottom","Left","Right","TwoPI","PI","extend","extended","deep","assignExists","merge","base64Encode","inputStr","b64","outputStr","byte1","byte2","byte3","enc1","enc2","enc3","enc4","nullish","nullishVal","defaultVal","clamp","randomInRange","randomIntInRange","round","canonicalizeAngle","angle","tmpAngle","toDegrees","radians","toRadians","degrees","getPosition","oLeft","oTop","calcOffsetLeft","parent","offsetLeft","offsetParent","calcOffsetTop","offsetTop","Vector","addItemToArray","removeItemFromArray","contains","getOppositeSide","side","getSideFromDirection","direction","directions","Up","Down","directionEnum","Number","MAX_VALUE","maxIndex","dot","Collection","initialSize","DefaultSize","_internalArray","_endPointer","_resize","newSize","newArray","pop","clear","internalSize","elementAt","insert","remove","removed","removeElement","toArray","func","fail","_x","delay","milliseconds","setTimeout","maxMessages","obsoleteMessage","resetObsoleteCounter","logMessage","suppressObsoleteMessages","isEnabled","getInstance","trace","showStackTrace","obsolete","alternateMethod","showStackTrack","property","SyntaxError","DecoratedClass","super","_y","cos","sin","vec","Infinity","vec1","vec2","sqrt","pow","setTo","equals","vector","tolerance","abs","distance","Zero","magnitude","newLength","scale","average","add","sizeOrScale","sub","addEqual","subEqual","scaleEqual","cross","perpendicular","normal","negate","toAngle","atan2","rotate","anchor","sinAngle","cosAngle","clone","G","Ray","dir","intersect","line","numerator","begin","getSlope","divisor","t","u","getLength","getPoint","time","Line","slope","getEdge","flip","distanceToPoint","x0","y0","l","dy","dx","findVectorToPoint","aMinusP","findPoint","m","intercept","hasPoint","currPoint","threshold","dxc","dyc","dx1","dy1","Projection","overlaps","projection","getOverlap","GlobalCoordinates","worldPos","pagePos","screenPos","xOrPos","yOrEngine","engineOrUndefined","pageX","pageY","engine","screen","pageToScreenCoordinates","screenToWorldCoordinates","CollisionResolutionStrategy","BroadphaseStrategy","Integrator","EventTypes","CollisionType","Color","parseInt","parseFloat","hex","h","HSLColor","toRGBA","lighten","factor","fromRGBA","darken","saturate","desaturate","multiply","color","newR","newG","newB","newA","mulitiply","color1","invert","color2","equal","format","toHSLA","toHex","_componentToHex","fromHex","Vermilion","Q","q","hue2rgb","t234","Box","RigidBody","Naive","DynamicAABBTree","Euler","Physics","collisionResolutionStrategy","dynamicTreeVelocityMultiplier","ot","acc","enabled","collisionPasses","broadphaseStrategy","broadphaseDebug","showCollisionNormals","showMotionVectors","showBounds","showArea","showContacts","showNormals","defaultMass","integrator","integrationSteps","allowRigidBodyRotation","collisionShift","boundsPadding","surfaceEpsilon","checkForFastBodies","disableMinimumSpeedForFastBody","nt","Kill","t236","PreKill","PostKill","PreDraw","PostDraw","PreDebugDraw","PostDebugDraw","PreUpdate","PostUpdate","PreFrame","PostFrame","PreCollision","CollisionStart","CollisionEnd","PostCollision","Initialize","Activate","Deactivate","ExitViewport","EnterViewport","ExitTrigger","EnterTrigger","Connect","Disconnect","Button","Axis","Subscribe","Unsubscribe","Visible","Hidden","Start","Stop","PointerUp","PointerDown","PointerMove","PointerEnter","PointerLeave","PointerCancel","PointerWheel","Move","Enter","Leave","Cancel","Wheel","Press","Release","Hold","PointerDragStart","PointerDragEnd","PointerDragEnter","PointerDragLeave","PointerDragMove","GameEvent","_bubbles","stopPropagation","bubbles","KillEvent","PreKillEvent","PostKillEvent","GameStartEvent","GameStopEvent","PreDrawEvent","ctx","delta","PostDrawEvent","PreDebugDrawEvent","PostDebugDrawEvent","PreUpdateEvent","PostUpdateEvent","PreFrameEvent","prevStats","PostFrameEvent","stats","GamepadConnectEvent","gamepad","GamepadDisconnectEvent","GamepadButtonEvent","button","GamepadAxisEvent","axis","SubscribeEvent","topic","handler","UnsubscribeEvent","VisibleEvent","HiddenEvent","PreCollisionEvent","actor","other","intersection","PostCollisionEvent","CollisionStartEvent","pair","CollisionEndEvent","InitializeEvent","ActivateEvent","oldScene","DeactivateEvent","newScene","ExitViewPortEvent","EnterViewPortEvent","EnterTriggerEvent","ExitTriggerEvent","PreventCollision","t278","Passive","Active","Fixed","CollisionContact","colliderA","colliderB","mtv","strategy","_resolveRigidBodyCollision","_resolveBoxCollision","_applyBoxImpulse","mtvDir","vel","velAdj","emit","bodyA","bodyB","invMassA","mass","invMassB","invMoiA","inertia","invMoiB","coefRestitution","bounciness","coefFriction","friction","tangent","ra","center","rb","rv","rx","rvNormal","rvTangent","raTangent","raNormal","rbTangent","rbNormal","impulse","addMtv","jt","frictionImpulse","CollisionJumpTable","CollideCircleCircle","circleA","circleB","radius","circleAPos","circleBPos","axisOfCollision","mvt","pointOfCollision","getFurthestPoint","collider","CollideCirclePolygon","circle","polygon","minAxis","testSeparatingAxisTheorem","samedir","verts","point1","point2","CollideCircleEdge","edge","cc","da","dda","db","ddb","den","pointOnEdge","dd","CollideEdgeEdge","CollidePolygonEdge","edgeNormal","face","getClosestFace","pc","linePoly","ConvexPolygon","points","CollidePolygonPolygon","polyA","polyB","sameDir","pointA","pointB","contact","ClosestLine","p0","q0","w0","denom","sDenom","tDenom","tClosestParallel","sClosest","tClosest","ClosestLineJumpTable","PolygonPolygonClosestLine","polygonA","polygonB","otherWorldPos","otherDirection","thisDirection","rayTowardsOther","rayTowardsThis","thisPoint","rayCast","otherPoint","thisFace","otherFace","PolygonEdgeClosestLine","edgeLine","asLine","PolygonCircleClosestLine","circlex","circley","CircleCircleClosestLine","CircleEdgeClosestLine","circleWorlPos","EdgeEdgeClosestLine","edgeA","edgeB","edgeLineA","edgeLineB","Circle","offset","ray","orig","discriminant","toi","toi1","toi2","positiveToi","mintoi","getClosestLineBetween","shape","Edge","collide","bodyPos","BoundingBox","axes","closestPointOnPoly","minOverlap","minIndex","proj1","project","proj2","overlap","recalc","scalars","dotProduct","draw","Green","newPos","beginPath","arc","closePath","debugDraw","rotation","strokeStyle","stroke","moveTo","lineTo","_getBodyPos","_getTransformedBegin","_getTransformedEnd","transformedBegin","transformedEnd","_boundsFromBeginEnd","asLocalLine","Red","_transformedPoints","_axes","_sides","winding","clockwiseWinding","_calculateTransformation","One","getTransformedPoints","oldPos","oldRotation","oldScale","getSides","lines","testRay","accum","pts","furthestPoint","maxDistance","sides","POSITIVE_INFINITY","faceIndex","dist","fromPoints","denominator","iplusone","crossTerm","minContactTime","contactIndex","contactTime","poly1","poly2","scalar","basePos","diffToBase","firstPoint","leftOrOptions","top","bottom","minX","minY","maxX","maxY","Half","hasZeroDimensions","translate","getPoints","shifted","transform","matrix","multv","getPerimeter","results","toPolygon","maybeCollider","farClipDistance","tmin","tmax","xinv","yinv","tx1","tx2","ty1","ty2","rayCastTime","combine","totalBoundingBox","dimensions","overlapX","overlapY","intersectWithSide","bb","getSideFromIntersection","Yellow","strokeRect","ex","drawRect","DisplayMode","Fit","t620","Fill","Position","Container","Resolution","Screen","_antialiasing","_resolutionStack","_viewportStack","_pixelRatioOverride","_isFullScreen","_isDisposed","_logger","_fullscreenChangeHandler","_pixelRatioChangeHandler","_devicePixelRatio","_calculateDevicePixelRatio","applyResolutionAndViewport","_windowResizeHandler","displayMode","canvas","parentElement","_setResolutionAndViewportByDisplayMode","viewport","resolution","e408","_displayMode","i16","context","s127","antialiasing","_browser","browser","_position","pixelRatio","_applyDisplayMode","_mediaQueryList","nativeComponent","matchMedia","addEventListener","dispose","off","removeEventListener","_resolution","_viewport","setCurrentCamera","camera","_camera","pushResolutionAndViewport","popResolutionAndViewport","scaledWidth","scaledHeight","imageRendering","updateViewport","resetTransform","smoothing","isSmooth","goFullScreen","requestFullscreen","exitFullScreen","exitFullscreen","newX","newY","aspectRatio","screenHeight","screenWidth","screenToPageCoordinates","screenMarginY","screenMarginX","drawWidth","drawHeight","halfDrawWidth","halfDrawHeight","i17","e409","r100","s128","worldToScreenCoordinates","screenX","screenY","i18","e410","r101","s129","pageToWorldCoordinates","worldToPageCoordinates","getWorldBounds","zoom","_computeFit","margin","overflow","aspect","adjustedWidth","adjustedHeight","on","_initializeDisplayModePosition","clientWidth","clientHeight","specifiedPosition","offsetY","marginTop","offsetX","marginLeft","EventDispatcher","_handlers","_wiredEventDispatchers","_target","eventName","event","t675","eventHandlers","once","ev","t699","wire","eventDispatcher","unwire","Resource","responseType","bustCache","logger","events","isLoaded","_cacheBust","uri","load","request","XMLHttpRequest","status","response","send","Grayscale","updatePixel","imageData","firstPixel","pixel","avg","Jt","Invert","Opacity","Colorize","Lighten","fromRGB","Darken","Saturate","Desaturate","Configurable","base","props","SpriteImpl","imageOrConfig","drawAroundAnchor","flipVertical","flipHorizontal","effects","_spriteCanvas","_spriteCtx","_pixelData","_pixelsLoaded","_dirtyEffect","_opacity","image","Texture","texture","_initPixelsFromTexture","loaded","naturalWidth","naturalHeight","_loadPixels","_flushTexture","drawImage","grayscale","addEffect","te","ee","he","colorize","se","re","ne","oe","ae","effect","_applyEffects","removeEffect","param","indexToRemove","getImageData","putImageData","clearEffects","reset","save","xpoint","ypoint","Black","restore","ctxOrOptions","CanvasRenderingContext2D","_drawWithOptions","e527","i52","s131","r103","n2","o1","a1","h2","anchorX","anchorY","scaleDirX","scaleDirY","oldAlpha","globalAlpha","pe","ce","_sprite","_loadedResolve","_resource","url","blob","URL","createObjectURL","Image","decode","t784","asSprite","AnimationImpl","engineOrConfig","sprites","speed","loop","currentFrame","_timeLeftInFrame","_idempotencyToken","freezeFrame","Engine","config","_engine","_setAnchor","_setRotation","_setScale","isDone","tick","elapsed","idempotencyToken","_updateValues","current","skip","frames","animOptions","e546","i57","s134","r106","n3","o2","a2","currSprite","play","playAnimation","Animation","images","RotationType","MatrixLocations","fe","EasingFunctions","easing","duration","CreateReversibleEasingFunction","xe","Linear","currentTime","startValue","endValue","EaseInQuad","EaseOutQuad","EaseInOutQuad","EaseInCubic","EaseOutCubic","EaseInOutCubic","be","ActionQueue","_actions","_completedActions","_actor","action","clearActions","_currentAction","getActions","hasNext","isComplete","update","elapsedMs","shift","Repeat","repeatBuilder","repeat","_stopped","_repeatBuilder","_repeatContext","ActionContext","_actionQueue","getQueue","_repeat","_originalRepeat","RepeatForever","MoveBy","_started","_speed","_offset","_delta","_start","_end","_distance","_dir","MoveTo","destx","desty","t859","ShortestPath","LongestPath","Clockwise","CounterClockwise","RotateTo","angleRadians","rotationType","_rotationType","_currentNonCannonAngle","distance1","distance2","w","_shortDistance","_longDistance","_shortestPathIsPositive","_direction","distanceTravelled","RotateBy","angleRadiansOffset","ScaleTo","scaleX","scaleY","speedX","speedY","_endX","_endY","_speedX","_speedY","_startX","_startY","_distanceX","_distanceY","sx","directionX","sy","directionY","ScaleBy","scaleOffsetX","scaleOffsetY","_startScale","_endScale","_directionX","_directionY","CallMethod","_method","_hasBeenCalled","EaseTo","easingFcn","_currentLerpTime","_lerpDuration","_lerpStart","_lerpEnd","_initialized","_initialize","Blink","timeVisible","timeNotVisible","numBlinks","_timeVisible","_timeNotVisible","_elapsedTime","_totalTime","_duration","visible","Fade","endOpacity","_multiplier","_endOpacity","Delay","_delay","Die","actions","kill","Follow","actorToFollow","followDistance","_actorToFollow","_current","_maximumDistance","_distanceBetween","actorToFollowSpeed","Meet","actorToMeet","_speedWasSpecified","_actorToMeet","actorToMeetSpeed","_queue","easeTo","moveBy","xOffset","yOffset","rotateTo","rotateBy","scaleTo","sizeX","sizeY","scaleBy","sizeOffsetX","sizeOffsetY","blink","fade","die","callMethod","times","repeatForever","follow","meet","asPromise","Shape","t942","X","Y","sign","Matrix","Float32Array","_scaleSignX","_scaleSignY","near","far","mat","identity","multm","dest","a11","a21","a31","a41","a12","a22","a32","a42","a13","a23","a33","a43","a14","a24","a34","a44","b11","b21","b31","b41","b12","b22","b32","b42","b13","b23","b33","b43","b14","b24","b34","b44","getScale","setPosition","sine","cosine","setRotation","currentScale","getRotation","getScaleY","getScaleX","xscale","yscale","setScaleX","setScaleY","setScale","getBasisDeterminant","getAffineInverse","inverseDet","tx","ty","isIdentity","VectorView","_getX","getX","_getY","getY","_setX","setX","_setY","setY","Component","owner","newComponent","TagComponent","CoordPlane","AnimationStrategy","World","t1017","TransformComponent","_dirty","_rotation","_scale","coordPlane","z","_recalculate","getGlobalMatrix","e747","t1021","dirty","i98","i99","parentTransform","globalRotation","globalScaleX","globalScale","globalScaleY","Body","oldVel","oldAcc","torque","motion","_geometryDirty","_totalMtv","useBoxCollider","isKilled","_collider","_wireColliderEventsToActor","globalPos","applyMtv","markCollisionShapeDirty","captureOldTransform","integrate","seconds","totalAcc","usePolygonCollider","Polygon","useCircleCollider","useEdgeCollider","evt","TileMapCollisionDetection","currentScene","tileMaps","intersectMap","collides","CullingBox","_topLeft","_topRight","_bottomLeft","_bottomRight","isSpriteOffScreen","drawingWidth","currentDrawing","drawingHeight","getGlobalPos","topLeftScreen","topRightScreen","bottomLeftScreen","bottomRightScreen","_xCoords","_yCoords","_xMin","_yMin","_xMax","_yMax","minWorld","maxWorld","_xMinWorld","_yMinWorld","_xMaxWorld","_yMaxWorld","boundingPoints","White","rect","Blue","Magenta","OffscreenCulling","cullingBox","actorBoundsOffscreen","bounds","isOffScreen","removeComponent","addComponent","CapturePointer","enableCapturePointer","pointers","checkAndUpdateActorUnderPointer","x1","y1","x2","y2","thickness","cap","lineWidth","lineCap","origin","roundRect","br","tl","tr","bl","defaultRadius","quadraticCurveTo","CollisionGroup","category","mask","_name","_category","_mask","canCollide","oi","All","Pair","collision","calculatePairHash","group","active","actorA","actorB","ii","si","Cyan","isCollider","Collider","useShapeInertia","_events","_shape","touching","localBounds","Observable","observers","observer","unregister","notifyAll","notify","Class","eventObject","AddedComponent","isAddedComponent","RemovedComponent","isRemovedComponent","Entity","components","_ID","_componentsToRemove","_componentTypeToInstance","Map","_componentStringToInstance","_tagsMemo","_typesMemo","componentAdded$","componentRemoved$","_parent","childrenAdded$","childrenRemoved$","_children","_isInitialized","component","hasTag","tags","addTag","removeTag","force","_rebuildMemos","getComponents","_notifyAddComponent","added","entity","_notifyRemoveComponent","unparent","removeChild","addChild","getAncestors","M","removeAllChildren","children","getDescendants","queue","curr","newEntity","types","child","addTemplate","templateEntity","dependencies","ctor","constuctorType","onAdd","componentOrType","_removeComponentByType","onRemove","delete","processComponentRemoval","isInitialized","onInitialize","_preupdate","onPreUpdate","_postupdate","onPostUpdate","fi","CanvasDrawComponent","e999","Graphic","showDebug","_width","_height","e1000","i104","s169","r114","n6","o3","cloneGraphicOptions","fromDimension","_preDraw","_drawImage","_postDraw","_rotate","_flip","e1021","yi","End","t1281","Loop","PingPong","Freeze","wi","frameDuration","timeScale","_firstTick","_currentFrame","_done","_playing","e1022","i113","goToFrame","spriteSheet","frameIndices","_","graphic","pause","frameNumber","maybeFrame","e1035","i120","_nextFrame","elapsedMilliseconds","_updateDimensions","t1288","e1054","GraphicsGroup","members","_isAnimationOrGroup","member","maybeAnimation","GraphicsLayer","_options","_graphics","graphics","hide","nameOrGraphic","gfx","getGraphic","show","copyGraphics","getNames","use","order","t1321","GraphicsLayers","_component","_layers","_layerMap","_maybeAddLayer","layer","_getLayer","GraphicsComponent","_bounds","onPreDraw","onPostDraw","layers","graphicToSet","isPowerOfTwo","ensurePowerOfTwo","watch","change","__isProxy","Proxy","TextureLoader","_GL","_TEXTURE_MAP","forceUpdate","gl","tex","bindTexture","TEXTURE_2D","toPowerOfTwoImage","texImage2D","RGBA","UNSIGNED_BYTE","createTexture","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","potCanvas","_POT_CANVAS","potCtx","_POT_CTX","imageSmoothingEnabled","Ei","Raster","_smoothing","_color","flagDirty","_lineWidth","_lineDash","_padding","e1213","strokeColor","i140","s177","lineDash","r116","padding","n8","_bitmap","bitmapWidth","o5","bitmapHeight","a4","maybeCtx","cloneRasterOptions","_getTotalWidth","_originalWidth","_getTotalHeight","_originalHeight","t1390","t1391","e1214","_strokeColor","e1215","rasterize","_applyRasterProperites","execute","setLineDash","e1216","getLineDash","i141","s178","Rectangle","fillRect","isActor","Actor","ActorImpl","xOrConfig","previousOpacity","scene","_draggable","_dragging","_pointerDragStartHandler","_pointerDragEndHandler","_pointerDragMoveHandler","pointer","lastWorldPos","_pointerDragLeaveHandler","traits","capturePointer","captureMoveEvents","captureDragEvents","_isKilled","_capturePointerEvents","_captureMoveEvents","_captureDragEvents","_initDefaults","shouldInitializeBody","collisionType","n9","Qe","Je","ti","_body","thePos","theVel","theAcc","theAngle","angularVelocity","scalePerSecondX","scalePerSecondY","isVisible","isDraggable","defaults","_checkForPointerOptIn","normalized","_prekill","_scene","onPreKill","_postkill","onPostKill","unkill","setDrawing","addDrawing","getZIndex","newZ","setZIndex","newIndex","getGlobalScale","getGlobalRotation","recurse","containment","within","drawing","currFrame","trait","_predraw","_postdraw","ticks","Pi","oldFont","font","textAlign","Bi","Ri","AudioContextFactory","Oi","WebAudio","_UNLOCKED","unlockTimeoutTimer","resume","then","buffer","createBuffer","createBufferSource","ended","connect","destination","onended","playbackState","PLAYING_STATE","FINISHED_STATE","clearTimeout","Fi","Canvas","e1492","i160","cache","Loader","loadables","_resourceList","_playButtonShown","_resourceCount","_numLoaded","_progressCounts","_totalCounts","logo","logoWidth","logoHeight","loadingBarColor","backgroundColor","suppressPlayButton","_playButtonStyles","Ii","Z","playButtonText","startButtonFactory","buttonElement","getElementById","textContent","addResources","_imageElement","_playButtonRootElement","_playButtonElement","existingRoot","_styleBlock","head","wireEngine","addResource","loadable","showPlayButton","_playButton","click","startButtonHandler","hidePlayButton","all","finally","unlock","markResourceComplete","canvasHeight","canvasWidth","buttonWidth","buttonHeight","playButtonPosition","logoY","logoX","logoPosition","imageHeight","oldAntialias","getAntialiasing","setAntialiasing","_image","loadingX","loadingY","loadingBarPosition","ri","progressWidth","progress","REPORTED_FEATURES","webgl","webaudio","gamepadapi","Detector","_features","failedTests","_criticalTests","canvasSupport","elem","arrayBufferSupport","xhr","dataUrlSupport","toDataURL","objectUrlSupport","rgbaSupport","cssText","_warningTest","webAudioSupport","webglSupport","_loadBrowserFeatures","getBrowserFeatures","logBrowserFeatures","msg","supported","t1576","e1500","arraybuffer","dataurl","objecturl","rgba","navigator","getGamepads","failedCritical","warning","t1577","Ni","ki","s181","useWorld","coords","ji","interval","repeats","numberOfRepeats","s182","maxNumberOfRepeats","_totalTimeAlive","_paused","_numberOfTicks","complete","t1583","fcn","i170","Timer","_callbacks","e1523","newNumberOfRepeats","newInterval","getTimeRunning","unpause","cancel","cancelTimer","Gi","t1595","isLeaf","Vi","t1596","worldBounds","nodes","_insert","leaf","currentRoot","o7","combinedArea","inheritanceCost","a6","area","r119","h5","leafAABB","oldArea","leftCombined","newArea","u1","rightCombined","cost","leftCost","rightCost","s183","oldParent","newParent","n10","_balance","currentNode","_remove","grandParent","sibling","i171","trackBody","e1537","node","updateBody","untrackBody","multdy","c2","getHeight","query","rayCastQuery","getNodes","Xi","_dynamicCollisionTree","_collisionHash","_collisionPairCache","_lastFramePairs","_lastFramePairsHash","track","untrack","_shouldGenerateCollisionPair","hash","broadphase","targets","t1657","potentialColliders","e1601","physics","minDimension","r120","fastBodies","l3","updateDistance","t1659","hitPoint","minBody","isValid","e1602","centerPoint","fastBodyCollisions","narrowphase","i207","collisions","collidersHash","runCollisionStartEnd","e1649","actor1","actor2","updated","qi","t1676","ready","t1677","e1650","t1678","toSprite","unload","Sprite","sourceView","destSize","i215","_updateSpriteDimensions","Yi","t1686","e1651","i216","sprite","ImageSource","fromLegacyTexture","e1684","i237","Zi","t1703","legacySpriteSheet","fromLegacySprite","oldSprite","e1685","spacing","grid","rows","columns","n11","spriteWidth","spriteHeight","originOffset","offsetDefaults","marginDefaults","d1","t1710","cols","e1686","t1809","TileMapImpl","cellWidth","cellHeight","Ye","Ai","mi","_collidingX","_collidingY","_onScreenXStart","_onScreenXEnd","_onScreenYStart","_onScreenYEnd","_spriteSheets","_legacySpriteMap","isOffscreen","r121","cd","_transform","Kt","t1711","e1687","e1688","t1714","e1689","t1717","e1690","e1691","t1720","e1692","e1693","t1723","e1694","registerSpriteSheet","fromLegacySpriteSheet","actorBounds","getCellByPoint","e1744","cell","solid","n13","getCellByIndex","getCell","i238","spriteIndex","cslen","xEnd","yEnd","a7","e1895","toLegacySprite","e1904","i239","t1782","$i","TileMap","CellImpl","o8","t1788","pushSprite","addSprite","removeSprite","clearSprites","Cell","ss","t1798","lockToActor","addStrategy","lockToActorAxis","elasticToActor","cameraElasticity","cameraFriction","radiusAroundActor","limitCameraBounds","box","Qi","rs","_cam","_eng","ns","e1954","t1810","cam","getFocus","currentFocus","os","i251","t1811","e1955","cameraVel","focus","as","e1956","t1812","hs","t1813","boundSizeChecked","focusY","focusX","Camera","di","_cameraStrategies","_z","dz","az","_cameraMoving","_isShaking","_shakeMagnitudeX","_shakeMagnitudeY","_shakeDuration","_elapsedShakeTime","_xShake","_yShake","_isZooming","_zoomStart","_zoomEnd","_currentZoomTime","_zoomDuration","_zoomEasing","_easing","_halfWidth","_halfHeight","_follow","move","easingFn","_lerpPromise","_lerpResolve","shake","magnitudeY","zoomOverTime","_zoomPromise","_zoomResolve","removeStrategy","cameraStrategy","clearAllStrategies","zoomEasing","CreateVectorEasingFunction","_isDoneShaking","e2221","i287","newCanvasHeight","newCanvasWidth","o10","t1893","ds","us","opts","_dispatchAction","Violet","SystemType","t1908","ps","Update","Draw","gs","priority","_entityAddedOrRemoved","t1909","t1910","ms","t1911","ws","_world","entities","_entityIndex","queryManager","addEntity","removeEntity","idOrEntity","processComponentRemovals","getById","t1936","localeCompare","Query","ci","_entities","_key","getEntities","matches","t1948","typesOrEntity","contain","xs","t1954","_queries","_addQuery","entityManager","maybeRemoveQuery","queryType","createQuery","getQuery","e2237","buildTypeKey","As","t1974","systems","addSystem","system","initialize","removeSystem","updateSystems","systemType","preupdate","s188","Is","postupdate","Ss","t1989","systemManager","entityOrSystem","System","clearEntities","clearSystems","Ps","DrawCallCount","GraphicsDiagnostics","DrawnImagesCount","GraphicsSystem","_token","_graphicsContext","graphicsContext","i307","_clearScreen","_isOffscreen","entityOffscreen","Xe","_pushCameraTransform","_applyTransform","_graphicsPositionDebugDraw","_drawGraphicsComponent","_graphicsBoundsDebugDraw","_popCameraTransform","flush","drawnImages","drawCalls","i308","e2365","isDebug","ancestor","e2366","t2023","drawPoint","CanvasDrawingSystem","canvasdraw","n15","e2406","Keys","PointerType","PointerScope","NativePointerButton","PointerButton","WheelDeltaMode","t2171","t2241","t2257","t2297","Axes","t2443","Scene","actors","world","_bodies","triggers","_broadphase","_killQueue","_triggerKillQueue","_timers","_cancelQueue","onActivate","_newScene","onDeactivate","_initializeChildren","_activate","_deactivate","s189","i314","removeTimer","timer","_collectActorStats","dispatchPointerEvents","iter","collisionDelta","beforeBroadphase","beforeNarrowphase","killed","_processKillQueue","collection","actorIndex","addTimer","addTileMap","removeTileMap","addScreenElement","removeScreenElement","e2766","tileMap","isTimerActive","isCurrentScene","_ui","screenElements","ui","alive","Fs","ColorBlindness","Ts","Protanope","Deuteranope","Tritanope","Ls","simulate","colorMode","_vertexShader","_fragmentShader","_internalCanvas","_gl","preserveDrawingBuffer","_program","createProgram","_getShader","_getFragmentShaderByMode","attachShader","linkProgram","getProgramParameter","LINK_STATUS","useProgram","e2767","_setRectangle","bufferData","ARRAY_BUFFER","STATIC_DRAW","program","i325","shader","createShader","FRAGMENT_SHADER","VERTEX_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","out","getAttribLocation","bindBuffer","enableVertexAttribArray","vertexAttribPointer","s198","FLOAT","pixelStorei","UNPACK_FLIP_Y_WEBGL","getUniformLocation","uniform2f","drawArrays","TRIANGLES","Uint8Array","readPixels","zs","t2193","correct","postProcessors","colorBlindness","Us","t2198","prevFrame","FrameStats","colorBlindMode","Ws","_id","_fps","_actorStats","remaining","_durationStats","_physicsStats","Hs","_graphicsStats","otherStats","fps","t2212","_pairs","_collisions","_collidersHash","_fastBodies","_fastBodyCollisions","_narrowphase","t2227","Ds","Num0","Num1","Num2","Num3","Num4","Num5","Num6","Num7","Num8","Num9","NumAdd","NumSubtract","NumMultiply","NumDivide","NumDecimal","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","NumpadAdd","NumpadSubtract","NumpadMultiply","NumpadDivide","NumpadDecimal","NumLock","ShiftLeft","ShiftRight","AltLeft","AltRight","Key0","Key1","Key2","Key3","Key4","Key5","Key6","Key7","Key8","Key9","Digit0","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","D","H","I","J","K","L","N","R","U","W","KeyA","KeyB","KeyC","KeyD","KeyE","KeyF","KeyG","KeyH","KeyI","KeyJ","KeyK","KeyL","KeyM","KeyN","KeyO","KeyP","KeyQ","KeyR","KeyS","KeyT","KeyU","KeyV","KeyW","KeyX","KeyY","KeyZ","Semicolon","Quote","Comma","Minus","Period","Slash","Equal","BracketLeft","Backslash","BracketRight","Backquote","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Space","Esc","Escape","KeyEvent","at","originalEvent","e2823","Keyboard","_keys","_keysUp","_keysDown","init","e2840","code","i326","e2841","keyEvent","t2251","getKeys","wasPressed","isHeld","wasReleased","Rs","Touch","Mouse","Pen","Unknown","Document","Ms","Pointer","_MAX_ID","_isDown","_wasDown","_actorsUnderPointer","_actors","_actorsLastFrame","_actorsNoLongerUnderPointer","_actorSortingFcn","lastPagePos","lastScreenPos","dragTarget","_onPointerMove","_onPointerDown","_onPointerUp","addActorUnderPointer","isActorAliveUnderPointer","removeActorUnderPointer","getActorsUnderPointer","getActorsUnderPointerLastFrame","getActorsForEvents","checkActorUnderPointer","wasActorUnderPointer","Bs","NoButton","Middle","ks","Pixel","Page","Os","PointerEvent","pointerType","coordinates","e2888","r125","_canceled","isCanceled","propagate","doAction","_onActionStart","_onActionEnd","Xs","t2309","_pointerEventType","PointerDragEvent","PointerUpEvent","Vs","isDragEnd","PointerDownEvent","isDragStart","PointerMoveEvent","isDragging","PointerEnterEvent","PointerLeaveEvent","PointerCancelEvent","WheelEvent","deltaX","deltaY","deltaZ","deltaMode","t2337","e2905","i337","s207","r132","n22","_isCanceled","o11","a8","t2338","Pointers","_pointerDown","_pointerUp","_pointerMove","_pointerCancel","_wheel","_pointers","_activePointers","primary","_handleTouchEvent","touchAction","_handlePointerEvent","MSPointerEvent","msTouchAction","_handleMouseEvent","passive","pageScrollPreventionMode","_handleWheelEvent","wheelOptions","onmousewheel","e2922","triggerEvent","n23","pointerId","preventDefault","eventish","h6","t2367","_dispatchWithBubble","_dispatchPointerLeaveEvents","t2377","e3002","i348","createPointerEventByName","er","pointerLeave","r139","_dispatchPointerEnterEvents","pointerEnter","s216","_propagateWheelPointerEvent","wheelEvent","eventArr","fromPagePosition","_nativeButtonToPointerButton","changedTouches","_getPointerIndex","identifier","_stringToPointerType","wheelDeltaX","wheelDeltaY","wheelDelta","detail","l4","we","e3106","t2401","Gamepads","_gamePadTimeStamps","_oldPads","_pads","_initSuccess","_navigator","_minimumConfiguration","_clonePads","setMinimumGamepadConfiguration","_enableAndUpdate","_isGamepadValid","pad","buttons","connected","e3138","gamepads","timestamp","bi","ai","navigatorGamepad","Buttons","i358","getButton","pressed","updateButton","getAxes","updateAxes","_clonePad","Gamepad","getValidGamepads","t2421","pads","rr","MinAxisMoveThreshold","_buttons","t2431","t2432","isButtonPressed","e3154","nr","Face1","Face2","Face3","Face4","LeftBumper","RightBumper","LeftTrigger","RightTrigger","Select","LeftStick","RightStick","DpadUp","DpadDown","DpadLeft","DpadRight","LeftStickX","LeftStickY","RightStickX","RightStickY","or","ar","_nativeHandlers","_decorate","hr","_documentGlobal","e3234","_windowGlobal","t2457","_windowComponent","_documentComponent","lr","_transforms","_currentTransform","cr","_states","_currentState","_getDefaultState","_cloneState","dr","_vertexSource","_fragmentSource","t2466","e3267","uniforms","attributes","layout","compile","_createProgram","vertexShader","fragmentShader","getProgramInfoLog","_compileShader","i379","addUniformMatrix","location","addUniformIntegerArray","addAttribute","glType","t2503","vert","i389","vertexSize","typeSize","getAttributeSize","e3372","totalVertexSizeBytes","e3373","uniformMatrix4fv","uniform","uniform1iv","ur","t2506","_pool","commands","isFull","canAdd","pr","recycler","maxObjects","builder","t2509","totalAllocations","objects","using","borrow","gr","s224","_buffer","_maxCommandsPerBatch","_batches","command","_verticesPerCommand","verticesPerCommand","maxCommandsPerBatch","i390","batchFactory","_batchPool","buildShader","_vertices","vertexAttributeSize","DYNAMIC_DRAW","addCommand","cmd","newBatch","render","e3374","drawnImagesCount","i391","batch","buildBatchVertices","bufferSubData","renderBatch","vertexCount","drawCallCount","_r","LineRenderer","_contextInfo","e3375","addLine","s225","i403","vertexBuffer","_batch","LINES","mr","swidth","sheight","dwidth","dheight","snapToPixel","view","_geom","t2562","applyTransform","e3457","BatchImage","maxTextures","t2565","maxDraws","textures","_graphicMap","_isCommandFull","_isTextureFull","_wouldAddTexture","maybeAdd","bindTextures","e3467","activeTexture","TEXTURE0","getBatchTextureId","ImageRenderer","yr","getParameter","MAX_TEXTURE_IMAGE_UNITS","registerContext","i434","_transformFragmentSource","maxGPUTextures","s256","t2593","newSource","addImage","i458","s266","r165","sw","n40","sh","o23","potWidth","a15","potHeight","h7","textureId","c3","uvy0","uvx1","uvy1","vertIndex","geometry","vr","PointRenderer","getExtension","e3559","addPoint","i470","POINTS","xr","t2662","_webglCtx","rectOptions","drawLine","lineOptions","__lineRenderer","pointOptions","__pointRenderer","Ar","t2676","_state","ExcaliburBlue","canvasElement","e3757","enableTransparency","i524","s291","r180","__gl","antialias","premultipliedAlpha","alpha","powerPreference","_init","_ortho","ortho","clearColor","COLOR_BUFFER_BIT","enable","BLEND","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","__imageRenderer","Li","__ctx","Sr","t2693","_ex","Pr","t2707","e3920","i567","s322","r190","t2716","t2723","ScrollPreventionMode","Cr","_hasStarted","scenes","_animations","_suppressPlayButton","pauseAudioWhenHidden","_isDebug","debugColor","enableCanvasTransparency","onFatalException","_timescale","_isLoading","_deferredGoTo","_DEFAULT_ENGINE_OPTIONS","r200","Hi","suppressMinimumBrowserFeatureDetection","_compatible","innerText","detector","t2724","testMessage","canvasElementId","e3986","suppressConsoleBootMessage","EX_VERSION","n54","e3984","e3985","Zt","i580","s338","SVGA","suppressHiDPIScaling","_loader","rootScene","addScene","halfCanvasWidth","halfCanvasHeight","isHiDpi","isFullScreen","animation","removeScene","e4085","goToScene","visibilityChange","scrollPreventionMode","keyboard","sr","pointerScope","hidden","i595","_overrideInitialize","_update","t2787","_draw","e4106","t2799","toggleDebug","e4185","createMainLoop","raf","nowFn","mainloop","_requestId","game","lastTime","o31","timescale","frameId","beforeUpdate","afterUpdate","isPaused","screenshot","t2837","loader","Er","Dr","i637","t2839","e4205","AnimationNode","MediaEvent","e4206","t2840","_value","_val","layPath","NativeSoundEvent","Rr","t2844","e4207","NativeSoundProcessedEvent","_processedData","t2845","TextAlign","BaseAlign","FontStyle","Direction","t2846","FontUnit","kr","Em","Rem","Px","Pt","Percent","Center","Or","Hanging","Alphabetic","Ideographic","Fr","Normal","Italic","Oblique","Ir","LeftToRight","RightToLeft","Lr","Font","Ti","quality","family","bold","unit","baseAlign","shadow","_textBounds","_textWidth","_textHeight","e4209","i638","s339","r201","n55","blur","d2","zr","_rasterWidth","_rasterHeight","e4232","i655","updateText","_text","text","_applyFont","measureText","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","e4233","_halfRasterWidth","_halfRasterHeight","textBaseline","fontString","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","strokeText","Text","t2890","e4277","i687","Ur","_font","SpriteFont","t2904","alphabet","caseInsensitive","_sprites","e4302","i706","s354","r202","spriteFont","Wr","_getCharacterSprites","e4303","toLocaleLowerCase","t2912","letterIndex","textToRender","letter","n57","letterSprite","i707","s355","cursor","t2957","o32","LabelImpl","fontFamily","letterSpacing","h8","t2925","textOrConfig","l5","e4387","i770","r203","_legacySpriteFont","sf","_spriteFont","fromLegacySpriteFont","getTextWidth","setTextShadow","useTextShadow","clearTextShadow","i789","Nr","Gr","EmitterType","Hr","ParticleImpl","life","beginColor","endColor","velocity","acceleration","startSize","endSize","particleRotationalVelocity","currentRotation","focusAccel","fadeFlag","_rRate","_gRate","_bRate","_aRate","_currentColor","emitter","particleSize","particleSprite","sizeRate","elapsedMultiplier","emitterOrConfig","ParticleEmitter","h9","l6","removeParticle","accel","Particle","ParticleEmitterImpl","t2969","numParticles","isEmitting","particles","deadParticles","minVel","maxVel","minAngle","maxAngle","emitRate","particleLife","minSize","maxSize","_og","emitterType","randomRotation","_particlesToEmit","t2970","emitParticles","e4560","i793","particleCount","_createParticle","clearParticles","t2979","ranY","e4561","s381","s382","a25","ranX","t2981","Yr","_CURRENT_GROUP","_MAX_GROUPS","_GROUPS","i795","_CURRENT_BIT","_STARTING_BIT","Qr","t2998","filled","_points","prev","e4634","h11","l8","c6","d3","u2","p1","g1","_1","f1","m1","w1","e4659","i814","s383","r208","n60","o35","A1","fillColor","lineColor","Zr","Jr","spWidth","spHeight","n61","_columns","_rows","_spWidth","_spHeight","_spacing","o36","imageOrConfigOrSprites","t3014","isHeightError","e4661","RangeError","getSpacingDimensions","row","i816","col","getAnimationByIndices","indices","t3016","getAnimationBetween","beginIndex","endIndex","t3018","getAnimationForAll","t3020","getSprite","getAnimationByCoords","spriteCoordinates","s399","maxHeight","r210","n62","t3027","coord","i862","o37","anim","tn","a26","_currentOpacity","_spriteRecord","_textShadowOn","_textShadowDirty","_textShadowColor","_textShadowSprites","_shadowOffsetX","_shadowOffsetY","getTextSprites","t3029","e4783","char","character","_parseOptions","characterShadow","fontSize","h12","a27","i935","currX","charSprite","currY","maxWidth","$r","ExResponse","t3047","e4867","any","json","pn","_perm","_p","_defaultPerlinOptions","octaves","frequency","amplitude","persistance","_random","t3048","noise","maxValue","s435","r303","total","_noise1d","freq","amp","t3049","_noise2d","_noise3d","sequence","e4963","_gradient3d","o38","_gradient2d","s449","_gradient1d","e5059","_fade","intX","i1025","intY","fadeY","_lerp","fadeX","intZ","n63","fadeZ","aa","ba","ab","gn","colorFcn","e5323","generator","t3093","t3094","i1142","t3099","e5384","r319","_src","_volume","_loop","_isPlaying","_isPaused","_audioContext","_volumeNode","createGain","_currentOffset","_createNewBufferSource","_instance","_wireUpOnEnded","gain","setTargetAtTime","playbackRate","isPlaying","_resumePlayBack","playStarted","_startPlayBack","_playingPromise","_setPauseOffset","_handleOnEnded","_playingResolve","_rememberStartTime","_playbackRate","restartTime","_startTime","getTime","amend","setValueAtTime","file","t3117","Audio","i1169","canPlayType","s484","t3118","Sound","_isStopped","_tracks","_wasPlayingOnHidden","$t","volume","audiobuffer","decodeAudio","t3126","instanceCount","_resumePlayback","_startPlayback","getTrackId","t3135","_getTrackInstance","e5397","newTrack","vn","t3137","_stream","_gif","_textures","_animation","_transparentColor","t3139","asSpriteSheet","spriteArray","t3140","asAnimation","checkBytes","e5422","byteToBitArr","bite","i1170","t3142","An","readByte","byteLength","readBytes","read","fromCharCode","readUnsigned","t3143","Sn","_st","_handler","globalColorTable","parseColorTable","e5423","t3145","readSubBlocks","t3144","parseHeader","sig","ver","colorRes","globalColorTableSize","gctFlag","sorted","bgColor","pixelAspectRatio","hdr","bits","parseExt","block","reserved","disposalMethod","userInput","transparencyGiven","delayTime","transparencyIndex","terminator","gce","comment","com","ptHeader","ptData","pte","unknown","iterations","app","NETSCAPE","appData","authCode","label","extType","parseImg","img","leftPos","topPos","lctFlag","interlaced","lctSize","lct","lzwMinCodeSize","pixels","e5424","i1171","t3146","s485","output","minCodeSize","eoiCode","clearCode","dict","h16","last","readCode","codeSize","cpRow","toRow","fromRow","r320","newPixels","fromPixels","steps","pass","offsets","deinterlace","arrayToImage","parseBlock","sentinel","eof","frame","Pn","_radius","Cn","minPoint","t3155","Tn","_getComparable","t3163","_find","_root","getKey","getData","getLeft","getRight","_get","setLeft","setRight","removeByComparable","_findMinNode","setKey","setData","_cleanup","comparable","e5819","t3250","_list","treeNode","En","SortedList","Dn","_data","_left","_right","BinaryTreeNode","Rn","t3264","getTheKey","PromiseState","t3267","Bn","Resolved","Rejected","Pending","On","Mn","_successCallbacks","_rejectCallback","t3271","e5868","e5869","promises","rejects","successes","joinedPromise","errors","rejectCallback","successCallback","_handleError","t3275","errorCallback","_errorCallback","cb","t3280","t3282","kn","Fn","define","amd","$634f916bc30b7d6650877f3f4b6a8b3a$var$bundleURL","$634f916bc30b7d6650877f3f4b6a8b3a$var$getBaseURL","$634f916bc30b7d6650877f3f4b6a8b3a$export$da289beea9c5b10d","stack","$634f916bc30b7d6650877f3f4b6a8b3a$var$getBundleURL","$824bc590bf0a3702ac7bd27152cb0639$var$dirname","_filePath","filePath","slashIndex","$824bc590bf0a3702ac7bd27152cb0639$var$relative","fromParts","divergeIndex","toParts","parts","fromId","toId","$824bc590bf0a3702ac7bd27152cb0639$require$resolve","_dirname","_relative","$45632d8bef453b2c473b54e8752e620f$exports","getBundleURL","$c7bf4e477371358bd5cb535a2a99f665$export$788042a0cc1455ce","Sword","$e098ee594f006756fd3cce8a8d996400$exports","Graphics","$parcel$interopDefault","$e9abaaca026a90c92629c2e14217305b$export$f7bff0e5313924df","currentPlanet","instance","getState","setCurrentPlanet","$12294da3463dc3237ada0f6276d1b701$export$d346d3a18000752c","getViewKey","$b0286576070d9d50afc25e1422275542$export$497bf60944801e0c","planet","planetShape","$88e8ef8f733ad6eef603b3ac937e1c4d$export$b43a32919f20043e","PlanetTypes","$8cae16382020be887e34a2cdbad60e16$export$d880e47671ec9022","$8cae16382020be887e34a2cdbad60e16$export$bd367a83705babf2","rand","cons","vows","$ebb1e1a87cc0ae860a78141fa5f75cfe$export$7f2afdde2cfe2d9e","Big","Small","$9b4397041376bb796f33110ad2e75bf2$export$698ae9eb37b7285e","planets","numberOfPlanets","getPlanets","$90fd3a0ab7c7cb259dfdecbdce22e15b$export$e246ca1d47b0ab99","shipShape","LightGray","$4c8398d0b51c3910c3f3bceeb9e42f49$export$b0e979b8b5b07ffe","$12aaed7a4eb8804daf9af55dab8ebd19$export$b8af8fc636c3246c","planetsInfo","Label","ship","startingSystem","systemView","planetActor","Orange","Gray","Rose","DarkGray","shipActor","orbitView"],"version":3,"file":"index.233d97b2.js.map"}